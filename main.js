/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __esm = (fn, res) => function __init() {
  return fn && (res = (0, fn[__getOwnPropNames(fn)[0]])(fn = 0)), res;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// i18n.ts
var i18n_exports = {};
__export(i18n_exports, {
  getCurrentLocale: () => getCurrentLocale,
  resolveLocale: () => resolveLocale,
  setLocale: () => setLocale,
  t: () => t
});
function resolveLocale(locale) {
  if (!locale || locale === "auto") {
    try {
      const lang = (navigator.language || "").toLowerCase();
      return lang.startsWith("zh") ? "zh" : "en";
    } catch (_) {
      return "en";
    }
  }
  return locale;
}
function setLocale(locale) {
  currentLocale = resolveLocale(locale);
}
function getCurrentLocale() {
  return currentLocale;
}
function formatVars(input, vars) {
  if (!vars)
    return input;
  return input.replace(/\{(\w+)\}/g, (_m, k) => {
    var _a;
    return String((_a = vars[k]) != null ? _a : "");
  });
}
function t(key, vars, locale) {
  var _a, _b;
  const lang = locale || currentLocale;
  const entry = dict[key];
  if (!entry)
    return key;
  const raw = (_b = (_a = entry[lang]) != null ? _a : entry.en) != null ? _b : key;
  return formatVars(raw, vars);
}
var currentLocale, dict;
var init_i18n = __esm({
  "i18n.ts"() {
    currentLocale = "zh";
    dict = {
      // Currency
      "currency.symbol": { zh: "\xA5", en: "$" },
      // Common
      "common.confirm": { zh: "\u786E\u5B9A", en: "Confirm" },
      "common.cancel": { zh: "\u53D6\u6D88", en: "Cancel" },
      "common.delete": { zh: "\u5220\u9664", en: "Delete" },
      "common.save": { zh: "\u4FDD\u5B58", en: "Save" },
      "common.back": { zh: "\u8FD4\u56DE", en: "Back" },
      "common.add": { zh: "\u6DFB\u52A0", en: "Add" },
      "common.search": { zh: "\u641C\u7D22", en: "Search" },
      // Menu / Command
      "menu.openWith": { zh: "\u7528 LaC.CostSet \u6253\u5F00", en: "Open with LaC.CostSet" },
      "command.open": { zh: "\u6253\u5F00", en: "Open" },
      "notice.invalidEntry": {
        zh: '\u5165\u53E3\u6587\u4EF6\u5185\u5BB9\u683C\u5F0F\u4E0D\u6B63\u786E\uFF1A\u9700\u4E3A TOML\uFF0C\u4E14 type = "root"\uFF0Crenders \u5FC5\u987B\u5305\u542B "costset"',
        en: 'Entry file invalid: must be TOML with type = "root" and renders must include "costset"'
      },
      "notice.saveFailed": { zh: "\u4FDD\u5B58\u5931\u8D25: {msg}", en: "Save failed: {msg}" },
      // Settings
      "settings.title": { zh: "LaC.CostSet \u8BBE\u7F6E", en: "LaC.CostSet Settings" },
      "settings.guide.1": {
        zh: "\u91CD\u8981\uFF1A\u5165\u53E3\u6587\u4EF6\u4E0E\u8D44\u4EA7\u6587\u4EF6\u7684\u201C\u5185\u5BB9\u683C\u5F0F\u4E3A TOML\u201D\uFF0C\u6587\u4EF6\u6269\u5C55\u540D\u53EF\u4E3A .md\u3002\u5141\u8BB8 # \u5F00\u5934\u7684\u6CE8\u91CA\u3002\u552F\u4E00\u7684\u975E TOML \u4F8B\u5916\u662F\uFF1A\u6587\u4EF6\u6B63\u6587\u4E2D\u7684 [[\u8D44\u4EA7\u6587\u4EF6\u540D]] \u53CC\u94FE\u53EF\u7701\u7565\u5F15\u53F7\uFF0C\u63D2\u4EF6\u5728\u89E3\u6790\u65F6\u4F1A\u4E34\u65F6\u4E3A\u5176\u52A0\u4E0A\u5F15\u53F7\u540E\u6309 TOML \u5904\u7406\u3002\u9664\u8FD9\u70B9\u5916\uFF0C\u4E0D\u5E94\u6DF7\u5165\u666E\u901A Markdown \u6587\u672C\u3002",
        en: "Important: Entry and asset files must be TOML content (extension can be .md). Comments starting with # are allowed. The only non-TOML exception: [[asset filename]] wikilinks in the body can omit quotes; the plugin will temporarily quote them for TOML parsing. No other regular Markdown should be mixed."
      },
      "settings.entry.example": {
        zh: '# \u5165\u53E3\u6587\u4EF6\u6700\u5C0F\u793A\u4F8B\n\n# \u9876\u90E8 TOML\uFF1A\u5FC5\u987B\u6EE1\u8DB3\n# type = "root"\n# renders = ["costset"]\n\ntype = "root"\nrenders = ["costset"]\n\n# \u6B63\u6587\uFF1A\u7528\u53CC\u94FE\u5217\u51FA\u8D44\u4EA7\u6587\u4EF6\u540D\uFF08\u4E0D\u9700\u8981\u6269\u5C55\u540D\uFF09\n\n[[\u952E\u76D8]]\n[[\u8033\u673A]]\n',
        en: '# Minimal entry file example\n\n# Top TOML must include\n# type = "root"\n# renders = ["costset"]\n\ntype = "root"\nrenders = ["costset"]\n\n# Body: list asset filenames using wikilinks (no extension)\n\n[[keyboard]]\n[[headphones]]\n'
      },
      "settings.asset.desc": {
        zh: "\u8D44\u4EA7\u6587\u4EF6\u540C\u6837\u662F Markdown\uFF0C\u4F46\u5185\u5BB9\u4EE5 TOML \u5B57\u6BB5\u4E3A\u4E3B\uFF08\u63D2\u4EF6\u4F1A\u4FDD\u7559\u4F60\u5199\u7684\u6CE8\u91CA\uFF09\u3002\u4EE5\u4E0B\u4E3A\u6700\u5C0F\u793A\u4F8B\uFF1A",
        en: "Asset files are also Markdown, but mainly TOML fields (comments are preserved). Minimal example:"
      },
      "settings.asset.example": {
        zh: 'name = "\u952E\u76D8"\n\n[style]\nicon = "\u2328\uFE0F"\n\n[detail]\nprice = 399\nactive_from = "2024-01-01"\nactive_to = ""\nrecycle_price = 0\ntags = ["\u6570\u7801", "\u952E\u76D8"]\n',
        en: 'name = "Keyboard"\n\n[style]\nicon = "\u2328\uFE0F"\n\n[detail]\nprice = 399\nactive_from = "2024-01-01"\nactive_to = ""\nrecycle_price = 0\ntags = ["Digital", "Keyboard"]\n'
      },
      "settings.usage": {
        zh: "\u7528\u6CD5\uFF1A\u5728\u201C\u5165\u53E3\u6587\u4EF6\u201D\u4E0A\u53F3\u952E \u2192 \u9009\u62E9\u201C\u7528 LaC.CostSet \u6253\u5F00\u201D\u3002\u4E5F\u53EF\u5728\u547D\u4EE4\u9762\u677F\u6267\u884C\u201C\u6253\u5F00LaC.CostSet\u201D\uFF08\u5C06\u4F7F\u7528\u4E0B\u65B9\u914D\u7F6E\u7684\u5165\u53E3\u6587\u4EF6\uFF09\u3002",
        en: 'Usage: Right-click on the entry file \u2192 choose "Open with LaC.CostSet". Or run the command "Open LaC.CostSet" (uses the configured entry file below).'
      },
      "settings.entryFile.name": { zh: "\u5165\u53E3\u6587\u4EF6", en: "Entry file" },
      "settings.entryFile.desc": { zh: "\u4F5C\u4E3A\u8D44\u4EA7\u5165\u53E3\u7684 Markdown \u6587\u4EF6\u8DEF\u5F84\uFF0C\u4F8B\u5982 LaC/CostSet/costset.md", en: "Path to the Markdown entry file, e.g., LaC/CostSet/costset.md" },
      "settings.contextMenu.name": { zh: "\u542F\u7528\u53F3\u952E\u83DC\u5355 \u201C\u7528 LaC.CostSet \u6253\u5F00\u201D", en: 'Enable context menu "Open with LaC.CostSet"' },
      "settings.contextMenu.desc": { zh: "\u5728 Markdown \u6587\u4EF6\u7684\u53F3\u952E\u83DC\u5355\u4E2D\u663E\u793A\u5165\u53E3", en: "Show entry in Markdown file context menu" },
      "settings.defaultSort.name": { zh: "\u9ED8\u8BA4\u6392\u5E8F", en: "Default sort" },
      "settings.defaultSort.desc": { zh: "\u6253\u5F00\u89C6\u56FE\u65F6\u7684\u521D\u59CB\u6392\u5E8F\u65B9\u5F0F", en: "Initial sort when opening the view" },
      "settings.defaultSort.option.none": { zh: "\u6587\u672C\u987A\u5E8F", en: "Text order" },
      "settings.defaultSort.option.dailyDesc": { zh: "\u65E5\u5747\u4EF7\u683C", en: "Daily cost" },
      "settings.defaultSort.option.priceDesc": { zh: "\u4EF7\u683C", en: "Price" },
      "settings.defaultSort.option.dateDesc": { zh: "\u8D2D\u5165\u65E5\u671F", en: "Purchase date" },
      "settings.defaultIcon.name": { zh: "\u9ED8\u8BA4\u56FE\u6807", en: "Default icon" },
      "settings.defaultIcon.desc": { zh: "\u65B0\u8D44\u4EA7\u7684\u9ED8\u8BA4\u56FE\u6807\uFF0C\u4EC5\u652F\u6301 1 \u4E2A Emoji", en: "Default icon for new assets (single Emoji only)" },
      "settings.defaultIcon.placeholder": { zh: "\u{1F4E6}", en: "\u{1F4E6}" },
      "settings.locale.name": { zh: "\u8BED\u8A00", en: "Language" },
      "settings.locale.desc": { zh: "\u754C\u9762\u8BED\u8A00", en: "Interface language" },
      "settings.locale.option.auto": { zh: "\u8DDF\u968F\u7CFB\u7EDF", en: "Auto" },
      "settings.locale.option.zh": { zh: "\u4E2D\u6587", en: "Chinese" },
      "settings.locale.option.en": { zh: "\u82F1\u6587", en: "English" },
      // AssetManagerView
      "view.hint.openFromMenu": { zh: "\u4ECE\u6587\u4EF6\u7684\u53F3\u952E\u83DC\u5355\u4E2D\u9009\u62E9 \u201C\u7528 LaC.CostSet \u6253\u5F00\u201D\u3002", en: 'Use file context menu: "Open with LaC.CostSet".' },
      "view.selectRoot.title": { zh: "\u9009\u62E9\u8D44\u4EA7\u6839\u6587\u4EF6", en: "Select root asset file" },
      "view.selectRoot.desc": { zh: "\u8BF7\u9009\u62E9\u4E00\u4E2A\u5305\u542B\u8D44\u4EA7\u5F15\u7528\u7684\u6587\u4EF6\u4F5C\u4E3A\u5165\u53E3", en: "Please choose a file containing asset references as entry" },
      "view.empty": { zh: "\u6682\u65E0\u8D44\u4EA7", en: "No assets" },
      "view.toNow": { zh: "\u81F3\u4ECA", en: "Present" },
      "view.usedDays": { zh: "\u5DF2\u7528{days}\u5929", en: "{days} days used" },
      "view.daily": { zh: "\u65E5\u5747", en: "Daily" },
      "view.price": { zh: "\u4EF7\u683C", en: "Price" },
      "view.recyclePrice": { zh: "\u56DE\u6536\u4EF7", en: "Recycle" },
      "view.back": { zh: "\u8FD4\u56DE", en: "Back" },
      "view.search.aria": { zh: "\u641C\u7D22", en: "Search" },
      "view.search.placeholder": { zh: "\u641C\u7D22\u540D\u79F0\u6216\u6807\u7B7E", en: "Search name or tags" },
      "view.sort.title": { zh: "\u6392\u5E8F", en: "Sort" },
      "view.sort.title.dailyDesc": { zh: "\u6309\u65E5\u5747\u6210\u672C (\u964D\u5E8F)", en: "By daily cost (desc)" },
      "view.sort.title.priceDesc": { zh: "\u6309\u4EF7\u683C (\u964D\u5E8F)", en: "By price (desc)" },
      "view.sort.title.dateDesc": { zh: "\u6309\u8D2D\u5165\u65E5\u671F (\u964D\u5E8F)", en: "By purchase date (desc)" },
      "view.sort.menu.dailyDesc": { zh: "\u6309\u65E5\u5747\u6210\u672C", en: "By daily cost" },
      "view.sort.menu.priceDesc": { zh: "\u6309\u4EF7\u683C", en: "By price" },
      "view.sort.menu.dateDesc": { zh: "\u6309\u8D2D\u5165\u65E5\u671F", en: "By purchase date" },
      "view.add": { zh: "\u6DFB\u52A0", en: "Add" },
      "view.confirmDeleteAsset": { zh: '\u786E\u5B9A\u8981\u5220\u9664\u8D44\u4EA7 "{name}" \u5417\uFF1F', en: 'Delete asset "{name}"?' },
      // Top summary
      "top.total": { zh: "\u603B\u6210\u672C ", en: "Total " },
      "top.recycle": { zh: "\u53EF\u56DE\u6536 ", en: "Recyclable " },
      "date.pick": { zh: "\u9009\u62E9\u65E5\u671F", en: "Pick date" },
      "date.year": { zh: "\u5E74", en: "" },
      "date.month": { zh: "\u6708", en: "" },
      "date.day": { zh: "\u65E5", en: "" },
      // Confirm modal
      "confirm.title": { zh: "\u786E\u8BA4\u64CD\u4F5C", en: "Confirm" },
      // Form modal
      "form.name": { zh: "\u540D\u79F0", en: "Name" },
      "form.icon": { zh: "\u56FE\u6807", en: "Icon" },
      "form.price": { zh: "\u4EF7\u683C", en: "Price" },
      "form.purchaseOn": { zh: "\u8D2D\u5165\u4E8E", en: "Purchased on" },
      "form.purchaseDate": { zh: "\u8D2D\u5165\u65E5\u671F", en: "Purchase date" },
      "form.endDate": { zh: "\u5230\u671F", en: "End date" },
      "form.endDatePlaceholder": { zh: "(\u8BA1\u5212)\u62A5\u5E9F/\u56DE\u6536/\u5230\u671F\u65F6\u95F4", en: "Planned scrap/recycle/end date" },
      "form.recyclePrice": { zh: "\u56DE\u6536\u4EF7", en: "Recycle price" },
      "form.tags": { zh: "\u6807\u7B7E", en: "Tags" },
      "form.assetName.placeholder": { zh: "\u8D44\u4EA7\u540D\u79F0", en: "Asset name" },
      "form.icon.placeholder": { zh: "\u8BF7\u8F93\u5165\u4E00\u4E2A Emoji \u4F5C\u4E3A\u56FE\u6807", en: "Please enter one Emoji as icon" },
      "form.price.placeholder": { zh: "\u8D2D\u5165\u4EF7\u683C\uFF08\u5143\uFF09", en: "Purchase price" },
      "form.recycle.placeholder": { zh: "\u56DE\u6536\u4EF7\u683C\uFF08\u5143\uFF09", en: "Recycle price" },
      "form.tags.placeholder": { zh: "\u8F93\u5165\u6807\u7B7E\uFF0C\u56DE\u8F66\u786E\u8BA4", en: "Type tags and press Enter" },
      "form.action.cancel": { zh: "\u53D6\u6D88", en: "Cancel" },
      "form.action.delete": { zh: "\u5220\u9664", en: "Delete" },
      "form.action.save": { zh: "\u4FDD\u5B58", en: "Save" },
      "form.error.nameRequired": { zh: "\u8BF7\u586B\u5199\u540D\u79F0", en: "Please enter a name" },
      "form.error.priceInvalid": { zh: "\u8BF7\u586B\u5199\u6709\u6548\u7684\u4EF7\u683C", en: "Please enter a valid price" },
      "form.error.fromRequired": { zh: "\u8BF7\u9009\u62E9\u8D2D\u5165\u65E5\u671F", en: "Please select a purchase date" },
      "form.error.toBeforeFrom": { zh: "\u5230\u671F\u65E5\u671F\u9700\u4E0D\u65E9\u4E8E\u8D2D\u5165\u65E5\u671F", en: "End date must not be earlier than purchase date" },
      "form.error.recycleInvalid": { zh: "\u56DE\u6536\u4EF7\u683C\u683C\u5F0F\u4E0D\u6B63\u786E", en: "Invalid recycle price format" },
      "form.error.recycleGtPrice": { zh: "\u56DE\u6536\u4EF7\u4E0D\u80FD\u5927\u4E8E\u4EF7\u683C", en: "Recycle price must not exceed price" },
      // Tag panel
      "tags.search.placeholder": { zh: "\u641C\u7D22\u6807\u7B7E", en: "Search tags" },
      "tags.selectAll": { zh: "\u5168\u9009", en: "Select all" },
      "tags.deselectAll": { zh: "\u53D6\u6D88\u5168\u9009", en: "Deselect all" }
    };
  }
});

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => LacCostSetPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian5 = require("obsidian");

// types.ts
var DEFAULT_SETTINGS = {
  defaultIcon: "\u{1F4E6}",
  entryFile: "LaC/CostSet/costset.md",
  enableContextMenu: true,
  defaultSort: "none",
  locale: "auto"
};

// main.ts
init_i18n();

// repositories/AssetRepository.ts
var import_obsidian = require("obsidian");

// models/Asset.ts
var Asset = class {
  constructor(idOrRawData, tomlData) {
    var _a, _b, _c, _d, _e, _f, _g;
    if (typeof idOrRawData === "string" && tomlData) {
      this.id = idOrRawData;
      const src = tomlData.costset ? tomlData.costset : tomlData;
      this.name = src.name || "";
      this.icon = (_d = (_c = (_a = src.style) == null ? void 0 : _a.icon) != null ? _c : (_b = tomlData.style) == null ? void 0 : _b.icon) != null ? _d : "\u{1F4E6}";
      const detail = (_f = (_e = src.detail) != null ? _e : tomlData.detail) != null ? _f : {};
      this.price = Number(detail.price) || 0;
      this.activeFrom = this.parseDate(detail.active_from) || new Date();
      this.activeTo = this.parseDate(detail.active_to) || void 0;
      this.recyclePrice = Number(detail.recycle_price) || 0;
      this.tags = Array.isArray(detail.tags) ? detail.tags : (detail.tags || "").split(",").map((l) => l.trim()).filter((tag) => tag);
      this.hidden = !!((_g = detail.hidden) != null ? _g : src.hidden);
    } else if (typeof idOrRawData === "object") {
      this.id = idOrRawData.id || "";
      this.name = idOrRawData.name || "";
      this.icon = idOrRawData.icon || "\u{1F4E6}";
      this.price = Number(idOrRawData.price) || 0;
      this.activeFrom = this.parseDate(idOrRawData.active_from || idOrRawData.activeFrom) || new Date();
      this.activeTo = this.parseDate(idOrRawData.active_to || idOrRawData.activeTo) || void 0;
      this.recyclePrice = Number(idOrRawData.recycle_price) || 0;
      this.tags = Array.isArray(idOrRawData.tags) ? idOrRawData.tags : (idOrRawData.tags || "").split(",").map((l) => l.trim()).filter((tag) => tag);
      this.hidden = !!idOrRawData.hidden;
    } else {
      throw new Error("Invalid asset data");
    }
  }
  parseDate(dateStr) {
    if (!dateStr)
      return void 0;
    const date = new Date(dateStr);
    return isNaN(date.getTime()) ? void 0 : date;
  }
  getName() {
    return this.name;
  }
  getPrice() {
    return this.price;
  }
  getDailyCost(now = new Date()) {
    const from = this.activeFrom;
    const end = this.activeTo && this.activeTo.getTime() < now.getTime() ? this.activeTo : now;
    const days = Math.max(1, Math.floor((end.getTime() - from.getTime()) / 864e5));
    return (this.price - this.recyclePrice) / days;
  }
  getUsageDays(now = new Date()) {
    const from = this.activeFrom;
    const end = this.activeTo && this.activeTo.getTime() < now.getTime() ? this.activeTo : now;
    return Math.max(1, Math.floor((end.getTime() - from.getTime()) / 864e5));
  }
  isActive(date = new Date()) {
    return this.activeFrom <= date && (!this.activeTo || date < this.activeTo);
  }
  toTomlString() {
    const formatDate = (date) => {
      if (!date)
        return "";
      return date.toISOString().split("T")[0];
    };
    return `name = "${this.name}"

[style]
icon = "${this.icon}"

[detail]
price = ${this.price}
active_from = "${formatDate(this.activeFrom)}"
active_to = "${formatDate(this.activeTo)}"
recycle_price = ${this.recyclePrice}
tags = [${this.tags.map((tag) => `"${tag}"`).join(", ")}]
`;
  }
  // 仅输出 costset 命名空间的 TOML 片段（用于安全合并）
  toCostsetTomlSections() {
    const formatDate = (date) => {
      if (!date)
        return "";
      return date.toISOString().split("T")[0];
    };
    const tagsStr = this.tags.map((tag) => `"${tag}"`).join(", ");
    return `[costset]
name = "${this.name}"
hidden = ${this.hidden ? "true" : "false"}

[costset.style]
icon = "${this.icon}"

[costset.detail]
price = ${this.price}
active_from = "${formatDate(this.activeFrom)}"
active_to = "${formatDate(this.activeTo)}"
recycle_price = ${this.recyclePrice}
tags = [${tagsStr}]
`;
  }
};

// repositories/AssetRepository.ts
var AssetRepository = class {
  constructor(app, rootFilePath) {
    this.app = app;
    this.rootFilePath = rootFilePath;
  }
  // 获取资产文件夹路径（从根文件路径推导）
  getAssetsFolder() {
    const pathParts = this.rootFilePath.split("/");
    if (pathParts.length > 1) {
      return pathParts.slice(0, -1).join("/");
    }
    return "assets";
  }
  // 加载所有资产
  async loadAll() {
    const rootFile = this.app.vault.getAbstractFileByPath(this.rootFilePath);
    if (!rootFile || !(rootFile instanceof import_obsidian.TFile)) {
      return [];
    }
    try {
      const content = await this.app.vault.read(rootFile);
      const matches = content.match(/\[\[([^\]]+)\]\]/g) || [];
      const linkTargets = matches.map((m) => m.replace(/^\[\[|\]\]$/g, "")).map((s) => {
        var _a;
        return (_a = s.split("|")[0]) == null ? void 0 : _a.trim();
      }).filter(Boolean);
      const assets = [];
      for (const target of linkTargets) {
        let file = null;
        try {
          file = this.app.metadataCache.getFirstLinkpathDest(target, this.rootFilePath);
        } catch (_) {
          file = null;
        }
        if (!file)
          continue;
        try {
          const fileContent = await this.app.vault.read(file);
          const data = this.parseToml(this.quoteWikilinksForToml(fileContent));
          const assetId = file.basename || target;
          const asset = new Asset(assetId, data);
          asset.hidden = false;
          assets.push(asset);
        } catch (e) {
          console.error(`Failed to load asset ${target}:`, e);
        }
      }
      return assets;
    } catch (e) {
      console.error("Failed to load assets:", e);
      return [];
    }
  }
  // 保存资产（仅修改与 costset 相关的键：name、style.icon、detail.*、hidden）
  async saveAsset(asset) {
    let targetFile = null;
    try {
      targetFile = this.app.metadataCache.getFirstLinkpathDest(asset.id, this.rootFilePath);
    } catch (_) {
      targetFile = null;
    }
    if (!targetFile) {
      let fileName = `${asset.id}.md`;
      let filePath = `${this.getAssetsFolder()}/${fileName}`;
      const folder = this.app.vault.getAbstractFileByPath(this.getAssetsFolder());
      if (!folder) {
        await this.app.vault.createFolder(this.getAssetsFolder());
      }
      const initialContent = this.dequoteWikilinks(asset.toTomlString());
      try {
        await this.app.vault.create(filePath, initialContent);
      } catch (e) {
        fileName = `${encodeURIComponent(asset.id)}.md`;
        filePath = `${this.getAssetsFolder()}/${fileName}`;
        await this.app.vault.create(filePath, initialContent);
      }
    } else {
      const existing = await this.app.vault.read(targetFile);
      const rewritten = this.rewriteTomlWithCommentsTop(existing, asset);
      await this.app.vault.modify(targetFile, this.dequoteWikilinks(rewritten));
    }
    await this.updateRootFile(asset.id, true);
  }
  // 删除资产
  async deleteAsset(id) {
    await this.updateRootFile(id, false);
  }
  // 注意：hidden 字段不持久化（仅内存使用），此处不提供 setHidden
  // 更新根文件
  async updateRootFile(assetId, isAdd) {
    const rootPath = this.rootFilePath;
    let rootContent = "";
    try {
      const rootFile = this.app.vault.getAbstractFileByPath(rootPath);
      if (rootFile && rootFile instanceof import_obsidian.TFile) {
        rootContent = await this.app.vault.read(rootFile);
      }
    } catch (e) {
    }
    if (isAdd) {
      const hasAnyLink = new RegExp(`\\[\\[${assetId}(\\|[^\\]]+)?\\]\\]`).test(rootContent);
      if (!hasAnyLink) {
        rootContent += `
[[${assetId}]]`;
      }
    } else {
      rootContent = rootContent.replace(new RegExp(`\\[\\[${assetId}(\\|[^\\]]+)?\\]\\]`, "g"), "");
      rootContent = rootContent.replace(/\n{3,}/g, "\n\n").trimEnd();
    }
    const existingRoot = this.app.vault.getAbstractFileByPath(rootPath);
    if (existingRoot && existingRoot instanceof import_obsidian.TFile) {
      await this.app.vault.modify(existingRoot, rootContent);
    } else {
      await this.app.vault.create(rootPath, rootContent);
    }
  }
  // 解析TOML内容（支持嵌套节名，如 [costset.detail]）
  parseToml(content) {
    const lines = content.split("\n");
    const result = {};
    let currentPath = [];
    const ensurePath = (root, path) => {
      let node = root;
      for (const part of path) {
        if (!node[part] || typeof node[part] !== "object")
          node[part] = {};
        node = node[part];
      }
      return node;
    };
    for (const raw of lines) {
      const line = raw.trim();
      if (!line || line.startsWith("#"))
        continue;
      if (line.startsWith("[") && line.endsWith("]")) {
        const section = line.slice(1, -1).trim();
        currentPath = section.split(".").map((s) => s.trim()).filter(Boolean);
        ensurePath(result, currentPath);
        continue;
      }
      const eq = line.indexOf("=");
      if (eq === -1)
        continue;
      const cleanKey = line.slice(0, eq).trim();
      let cleanValue = line.slice(eq + 1).trim();
      let parsedValue = cleanValue;
      if (cleanValue.startsWith('"') && cleanValue.endsWith('"')) {
        parsedValue = cleanValue.slice(1, -1);
      } else if (cleanValue === "true" || cleanValue === "false") {
        parsedValue = cleanValue === "true";
      } else if (cleanValue.startsWith("[") && cleanValue.endsWith("]")) {
        const arrayContent = cleanValue.slice(1, -1).trim();
        parsedValue = arrayContent ? arrayContent.split(",").map((item) => item.trim().replace(/^"|"$/g, "")) : [];
      } else if (!isNaN(Number(cleanValue))) {
        parsedValue = Number(cleanValue);
      }
      if (currentPath.length > 0) {
        const node = ensurePath(result, currentPath);
        node[cleanKey] = parsedValue;
      } else {
        result[cleanKey] = parsedValue;
      }
    }
    return result;
  }
  // 纯 TOML 重写模式：解析→修改→stringify；将原有注释置顶保留
  rewriteTomlWithCommentsTop(existing, asset) {
    const commentLines = [];
    const otherLines = [];
    for (const raw of existing.split("\n")) {
      const t2 = raw.trim();
      if (t2.startsWith("#"))
        commentLines.push(raw);
      else
        otherLines.push(raw);
    }
    const parsed = this.parseToml(this.quoteWikilinksForToml(otherLines.join("\n"))) || {};
    parsed["name"] = asset.name;
    if (!parsed["style"] || typeof parsed["style"] !== "object")
      parsed["style"] = {};
    parsed["style"]["icon"] = asset.icon;
    if (!parsed["detail"] || typeof parsed["detail"] !== "object")
      parsed["detail"] = {};
    parsed["detail"]["price"] = Number(asset.price) || 0;
    parsed["detail"]["active_from"] = asset.activeFrom ? asset.activeFrom.toISOString().split("T")[0] : "";
    parsed["detail"]["active_to"] = asset.activeTo ? asset.activeTo.toISOString().split("T")[0] : "";
    parsed["detail"]["recycle_price"] = Number(asset.recyclePrice) || 0;
    parsed["detail"]["tags"] = Array.isArray(asset.tags) ? asset.tags : [];
    const tomlBody = this.stringifyToml(parsed);
    const commentBlock = commentLines.length > 0 ? commentLines.join("\n") + "\n\n" : "";
    return commentBlock + tomlBody;
  }
  // 将 JS 对象稳定地序列化为 TOML 文本（支持多层节名）
  stringifyToml(obj) {
    const isPlainObject = (v) => v && typeof v === "object" && !Array.isArray(v);
    const keys = Object.keys(obj || {});
    const scalarKeys = keys.filter((k) => !isPlainObject(obj[k]));
    const objectKeys = keys.filter((k) => isPlainObject(obj[k]));
    const lines = [];
    if (scalarKeys.includes("name")) {
      lines.push(this.renderTomlKeyValue("name", obj["name"]));
    }
    scalarKeys.filter((k) => k !== "name").sort((a, b) => a.localeCompare(b)).forEach((k) => lines.push(this.renderTomlKeyValue(k, obj[k])));
    const sectionOrder = ["style", "detail"];
    const orderedObjectKeys = [
      ...sectionOrder.filter((k) => objectKeys.includes(k)),
      ...objectKeys.filter((k) => !sectionOrder.includes(k)).sort((a, b) => a.localeCompare(b))
    ];
    for (const k of orderedObjectKeys) {
      lines.push("");
      this.renderTomlSection(lines, [k], obj[k]);
    }
    return lines.join("\n").replace(/\n{3,}/g, "\n\n").trim() + "\n";
  }
  renderTomlSection(out, path, value) {
    out.push(`[${path.join(".")}]`);
    const isPlainObject = (v) => v && typeof v === "object" && !Array.isArray(v);
    const keys = Object.keys(value || {});
    const scalarKeys = keys.filter((k) => !isPlainObject(value[k]));
    const objectKeys = keys.filter((k) => isPlainObject(value[k]));
    scalarKeys.sort((a, b) => a.localeCompare(b)).forEach((k) => {
      out.push(this.renderTomlKeyValue(k, value[k]));
    });
    const orderedObjectKeys = objectKeys.sort((a, b) => a.localeCompare(b));
    for (const k of orderedObjectKeys) {
      out.push("");
      this.renderTomlSection(out, [...path, k], value[k]);
    }
  }
  renderTomlKeyValue(key, val) {
    return `${key} = ${this.tomlValue(val)}`;
  }
  tomlValue(val) {
    if (val === null || val === void 0)
      return '""';
    if (Array.isArray(val)) {
      return `[${val.map((v) => this.tomlValue(v)).join(", ")}]`;
    }
    switch (typeof val) {
      case "number":
        return Number.isFinite(val) ? String(val) : "0";
      case "boolean":
        return val ? "true" : "false";
      case "string":
      default:
        return `"${String(val).replace(/\\/g, "\\\\").replace(/\"/g, '\\"')}"`;
    }
  }
  // 将裸的 [[...]] 或 [[...|alias]] 包裹为可被 TOML 解析的字符串
  quoteWikilinksForToml(content) {
    return content.replace(/\[\[[^\]]+\]\]/g, (match, offset, full) => {
      const before = offset > 0 ? full[offset - 1] : "";
      const after = offset + match.length < full.length ? full[offset + match.length] : "";
      if (before === '"' && after === '"' || before === "'" && after === "'") {
        return match;
      }
      return `"${match}"`;
    });
  }
  // 将 "[[...]]" 或 '[[...]]' 形式还原为裸的双链
  dequoteWikilinks(content) {
    return content.replace(/(["'])\[\[[^\]]+\]\]\1/g, (match) => match.slice(1, -1));
  }
};

// components/modals/AssetFormModal.ts
var import_obsidian2 = require("obsidian");

// components/modals/ConfirmModal.ts
var ConfirmModal = class {
  constructor(message, confirmText = "\u786E\u5B9A", cancelText = "\u53D6\u6D88", danger = false) {
    this.message = message;
    this.confirmText = confirmText;
    this.cancelText = cancelText;
    this.danger = danger;
  }
  open() {
    return new Promise((resolve) => {
      this.injectStylesOnce();
      this.maskEl = document.createElement("div");
      this.maskEl.className = "date-picker-mask";
      this.modalEl = document.createElement("div");
      this.modalEl.className = "date-picker-modal";
      const content = document.createElement("div");
      content.className = "date-picker-content";
      const title = document.createElement("div");
      title.className = "date-picker-title";
      try {
        const { t: t2 } = (init_i18n(), __toCommonJS(i18n_exports));
        title.textContent = t2("confirm.title");
      } catch (_) {
        title.textContent = "\u786E\u8BA4\u64CD\u4F5C";
      }
      const msgEl = document.createElement("div");
      msgEl.className = "confirm-message";
      msgEl.textContent = this.message;
      const actions = document.createElement("div");
      actions.className = "date-picker-actions";
      const cancelBtn = document.createElement("button");
      cancelBtn.className = "date-picker-btn date-picker-btn-cancel";
      cancelBtn.textContent = this.cancelText;
      const confirmBtn = document.createElement("button");
      confirmBtn.className = "date-picker-btn date-picker-btn-confirm";
      confirmBtn.textContent = this.confirmText;
      if (this.danger)
        confirmBtn.classList.add("danger");
      actions.appendChild(cancelBtn);
      actions.appendChild(confirmBtn);
      content.appendChild(title);
      content.appendChild(msgEl);
      content.appendChild(actions);
      this.modalEl.appendChild(content);
      this.maskEl.appendChild(this.modalEl);
      document.body.appendChild(this.maskEl);
      const close = (result) => {
        if (this.maskEl && this.maskEl.parentElement) {
          this.maskEl.parentElement.removeChild(this.maskEl);
        }
        this.maskEl = void 0;
        this.modalEl = void 0;
        resolve(result);
      };
      this.maskEl.addEventListener("click", (e) => {
        if (e.target === this.maskEl)
          close(false);
      });
      cancelBtn.addEventListener("click", () => close(false));
      confirmBtn.addEventListener("click", () => close(true));
    });
  }
  injectStylesOnce() {
    const STYLE_ID = "lac-confirm-modal-styles";
    if (document.getElementById(STYLE_ID))
      return;
    const style = document.createElement("style");
    style.id = STYLE_ID;
    style.textContent = `
            .date-picker-modal .confirm-message { color: #F5F6FA; line-height: 1.6; padding: 8px 0 16px; }
            .date-picker-modal .date-picker-btn.danger { background: #7a1e1e; color: #fff; }
            .date-picker-modal .date-picker-btn.danger:hover { background: #992525; }
        `;
    document.head.appendChild(style);
  }
};

// components/modals/AssetFormModal.ts
init_i18n();
var AssetFormModal = class {
  constructor(app, assetRepository, asset, onSaved) {
    this.app = app;
    this.assetRepository = assetRepository;
    this.asset = asset;
    this.onSaved = onSaved;
  }
  open() {
    var _a, _b;
    this.maskEl = document.createElement("div");
    this.maskEl.className = "date-picker-mask";
    this.modalEl = document.createElement("div");
    this.modalEl.className = "date-picker-modal asset-form-modal";
    this.injectAssetFormStyles();
    const content = document.createElement("div");
    content.className = "date-picker-content";
    content.style.gap = "0px";
    const form = document.createElement("form");
    form.className = "asset-form asset-form--horizontal";
    form.style.display = "grid";
    form.style.gridTemplateColumns = "1fr";
    form.style.rowGap = "0px";
    form.style.gap = "0px";
    const ensureErrorEl = (group) => {
      let err = group.querySelector(".field-error");
      if (!err) {
        const field = group.querySelector(".form-field");
        err = document.createElement("div");
        err.className = "field-error";
        if (field)
          field.appendChild(err);
        else
          group.appendChild(err);
      }
      return err;
    };
    const setError = (group, message) => {
      group.classList.add("has-error");
      const input = group.querySelector("input, textarea, select");
      if (input)
        input.setAttribute("aria-invalid", "true");
      ensureErrorEl(group).textContent = message;
    };
    const clearError = (group) => {
      group.classList.remove("has-error");
      const input = group.querySelector("input, textarea, select");
      if (input)
        input.setAttribute("aria-invalid", "false");
      const err = group.querySelector(".field-error");
      if (err)
        err.remove();
    };
    const nameGroup = document.createElement("div");
    nameGroup.className = "form-group";
    {
      const lbl = this.createLabel(t("form.name"));
      lbl.classList.add("label-required");
      nameGroup.appendChild(lbl);
    }
    const nameInput = document.createElement("input");
    nameInput.type = "text";
    nameInput.placeholder = t("form.assetName.placeholder");
    if (this.asset)
      nameInput.value = this.asset.name;
    {
      const field = document.createElement("div");
      field.className = "form-field";
      field.appendChild(nameInput);
      nameGroup.appendChild(field);
    }
    this.applyRowLayout(nameGroup);
    form.appendChild(nameGroup);
    const validateName = () => {
      const v = (nameInput.value || "").trim();
      if (!v) {
        setError(nameGroup, t("form.error.nameRequired"));
        return false;
      }
      clearError(nameGroup);
      return true;
    };
    nameInput.addEventListener("input", validateName);
    nameInput.addEventListener("blur", validateName);
    const iconGroup = document.createElement("div");
    iconGroup.className = "form-group";
    iconGroup.appendChild(this.createLabel(t("form.icon")));
    const iconInput = document.createElement("input");
    iconInput.type = "text";
    iconInput.placeholder = "\u{1F60A}" + t("form.icon.placeholder");
    if (this.asset)
      iconInput.value = this.asset.icon;
    else {
      try {
        const plugin = (_b = (_a = this.app.plugins) == null ? void 0 : _a.plugins) == null ? void 0 : _b["lac-costset"];
        const fallback = "\u{1F4E6}";
        iconInput.value = plugin && plugin.settings && plugin.settings.defaultIcon ? plugin.settings.defaultIcon : fallback;
      } catch (_) {
        iconInput.value = "\u{1F4E6}";
      }
    }
    const enforceSingleEmoji = () => {
      const first = this.getFirstEmojiGrapheme(iconInput.value || "");
      iconInput.value = first || "";
    };
    iconInput.addEventListener("input", enforceSingleEmoji);
    iconInput.addEventListener("paste", (e) => {
      setTimeout(enforceSingleEmoji, 0);
    });
    {
      const field = document.createElement("div");
      field.className = "form-field";
      field.appendChild(iconInput);
      iconGroup.appendChild(field);
    }
    this.applyRowLayout(iconGroup);
    form.appendChild(iconGroup);
    const priceGroup = document.createElement("div");
    priceGroup.className = "form-group";
    {
      const lbl = this.createLabel(t("form.price"));
      lbl.classList.add("label-required");
      priceGroup.appendChild(lbl);
    }
    const priceInput = document.createElement("input");
    priceInput.type = "number";
    priceInput.placeholder = t("form.price.placeholder");
    priceInput.step = "0.01";
    if (this.asset)
      priceInput.value = this.asset.price.toString();
    const sanitizeNumeric = (el) => {
      el.value = this.sanitizeNumericString(el.value || "");
    };
    const limitTwoDecimals = (el) => {
      el.value = this.clampTwoDecimalsString(el.value || "");
    };
    priceInput.addEventListener("input", () => sanitizeNumeric(priceInput));
    priceInput.addEventListener("blur", () => {
      sanitizeNumeric(priceInput);
      limitTwoDecimals(priceInput);
    });
    {
      const field = document.createElement("div");
      field.className = "form-field";
      field.appendChild(priceInput);
      priceGroup.appendChild(field);
    }
    this.applyRowLayout(priceGroup);
    form.appendChild(priceGroup);
    const validatePrice = () => {
      const str = (priceInput.value || "").trim();
      const num = this.parseMoney(str);
      if (num === null) {
        setError(priceGroup, t("form.error.priceInvalid"));
        return false;
      }
      clearError(priceGroup);
      return true;
    };
    priceInput.addEventListener("input", validatePrice);
    priceInput.addEventListener("blur", validatePrice);
    const fromGroup = document.createElement("div");
    fromGroup.className = "form-group";
    {
      const lbl = this.createLabel(t("form.purchaseOn"));
      lbl.classList.add("label-required");
      fromGroup.appendChild(lbl);
    }
    const fromInput = document.createElement("input");
    fromInput.type = "text";
    fromInput.readOnly = true;
    fromInput.placeholder = t("form.purchaseDate");
    fromInput.value = this.asset ? this.formatDateLocal(this.asset.activeFrom) : "";
    fromInput.addEventListener("click", () => {
      var _a2;
      this.openDatePicker(fromInput.value ? new Date(fromInput.value) : ((_a2 = this.asset) == null ? void 0 : _a2.activeFrom) || new Date(), (picked) => {
        fromInput.value = this.formatDateLocal(picked);
        clearError(fromGroup);
      });
    });
    {
      const field = document.createElement("div");
      field.className = "form-field";
      field.appendChild(fromInput);
      fromGroup.appendChild(field);
    }
    this.applyRowLayout(fromGroup);
    form.appendChild(fromGroup);
    const validateFrom = () => {
      if (!fromInput.value) {
        setError(fromGroup, t("form.error.fromRequired"));
        return false;
      }
      clearError(fromGroup);
      return true;
    };
    fromInput.addEventListener("blur", validateFrom);
    const toGroup = document.createElement("div");
    toGroup.className = "form-group";
    toGroup.appendChild(this.createLabel(t("form.endDate")));
    const toInput = document.createElement("input");
    toInput.type = "text";
    toInput.readOnly = true;
    toInput.placeholder = t("form.endDatePlaceholder");
    toInput.value = this.asset && this.asset.activeTo ? this.formatDateLocal(this.asset.activeTo) : "";
    let clearBtn;
    const updateToClear = () => {
      if (clearBtn)
        clearBtn.style.display = toInput.value ? "inline-flex" : "none";
    };
    toInput.addEventListener("click", () => {
      var _a2;
      this.openDatePicker(toInput.value ? new Date(toInput.value) : ((_a2 = this.asset) == null ? void 0 : _a2.activeTo) || new Date(), (picked) => {
        toInput.value = this.formatDateLocal(picked);
        updateToClear();
        if (fromInput.value) {
          const fd = new Date(fromInput.value);
          const td = new Date(toInput.value);
          if (td.getTime() < fd.getTime())
            setError(toGroup, t("form.error.toBeforeFrom"));
          else
            clearError(toGroup);
        }
      });
    });
    {
      const field = document.createElement("div");
      field.className = "form-field";
      const wrap = document.createElement("div");
      wrap.className = "input-with-clear";
      wrap.appendChild(toInput);
      clearBtn = document.createElement("button");
      clearBtn.type = "button";
      clearBtn.className = "input-clear";
      clearBtn.textContent = "\xD7";
      clearBtn.addEventListener("click", (e) => {
        e.preventDefault();
        e.stopPropagation();
        toInput.value = "";
        updateToClear();
      });
      wrap.appendChild(clearBtn);
      field.appendChild(wrap);
      toGroup.appendChild(field);
    }
    this.applyRowLayout(toGroup);
    form.appendChild(toGroup);
    updateToClear();
    const recycleGroup = document.createElement("div");
    recycleGroup.className = "form-group";
    recycleGroup.appendChild(this.createLabel(t("form.recyclePrice")));
    const recycleInput = document.createElement("input");
    recycleInput.type = "number";
    recycleInput.placeholder = t("form.recycle.placeholder");
    recycleInput.step = "0.01";
    if (this.asset)
      recycleInput.value = this.asset.recyclePrice.toString();
    recycleInput.addEventListener("input", () => sanitizeNumeric(recycleInput));
    recycleInput.addEventListener("blur", () => {
      sanitizeNumeric(recycleInput);
      limitTwoDecimals(recycleInput);
    });
    {
      const field = document.createElement("div");
      field.className = "form-field";
      field.appendChild(recycleInput);
      recycleGroup.appendChild(field);
    }
    this.applyRowLayout(recycleGroup);
    form.appendChild(recycleGroup);
    const tagsGroup = document.createElement("div");
    tagsGroup.className = "form-group";
    tagsGroup.appendChild(this.createLabel(t("form.tags")));
    let currentTags = this.asset ? [...this.asset.tags || []] : [];
    const tagsWrapper = document.createElement("div");
    tagsWrapper.className = "tags-input";
    const tagsInput = document.createElement("input");
    tagsInput.type = "text";
    tagsInput.placeholder = t("form.tags.placeholder");
    tagsWrapper.appendChild(tagsInput);
    {
      const field = document.createElement("div");
      field.className = "form-field";
      field.appendChild(tagsWrapper);
      tagsGroup.appendChild(field);
    }
    this.applyRowLayout(tagsGroup);
    form.appendChild(tagsGroup);
    const normalize = (tstr) => tstr.trim();
    const addTag = (raw) => {
      const pieces = raw.split(/[，,\s]+/).map(normalize).filter(Boolean);
      pieces.forEach((p) => {
        if (!currentTags.includes(p))
          currentTags.push(p);
      });
      syncChips();
      tagsInput.value = "";
    };
    const removeTag = (value) => {
      currentTags = currentTags.filter((tg) => tg !== value);
      syncChips();
    };
    const syncChips = () => {
      Array.from(tagsWrapper.querySelectorAll(".tag-chip")).forEach((el) => el.remove());
      currentTags.forEach((tag) => {
        const chip = document.createElement("span");
        chip.className = "tag-chip";
        chip.textContent = tag;
        const rm = document.createElement("button");
        rm.type = "button";
        rm.className = "remove";
        rm.textContent = "\xD7";
        rm.addEventListener("click", () => removeTag(tag));
        chip.appendChild(rm);
        tagsWrapper.insertBefore(chip, tagsInput);
      });
    };
    syncChips();
    tagsInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter" || e.key === "," || e.key === "\uFF0C") {
        e.preventDefault();
        if (tagsInput.value.trim())
          addTag(tagsInput.value);
      }
      if (e.key === "Backspace" && !tagsInput.value && currentTags.length > 0) {
        e.preventDefault();
        removeTag(currentTags[currentTags.length - 1]);
      }
    });
    tagsInput.addEventListener("blur", () => {
      if (tagsInput.value.trim())
        addTag(tagsInput.value);
    });
    const actions = document.createElement("div");
    actions.className = "form-actions";
    const cancelBtn = document.createElement("button");
    cancelBtn.type = "button";
    cancelBtn.textContent = t("form.action.cancel");
    cancelBtn.className = "form-btn form-btn-secondary";
    const deleteBtn = document.createElement("button");
    deleteBtn.type = "button";
    deleteBtn.textContent = t("form.action.delete");
    deleteBtn.className = "form-btn form-btn-danger";
    const saveBtn = document.createElement("button");
    saveBtn.type = "submit";
    saveBtn.textContent = t("form.action.save");
    saveBtn.className = "form-btn form-btn-primary";
    actions.appendChild(cancelBtn);
    if (this.asset)
      actions.appendChild(deleteBtn);
    actions.appendChild(saveBtn);
    form.appendChild(actions);
    content.appendChild(form);
    this.modalEl.appendChild(content);
    this.maskEl.appendChild(this.modalEl);
    document.body.appendChild(this.maskEl);
    const close = () => this.close();
    this.maskEl.addEventListener("click", (e) => {
      if (e.target === this.maskEl)
        close();
    });
    cancelBtn.addEventListener("click", close);
    if (this.asset) {
      deleteBtn.addEventListener("click", async () => {
        if (!this.asset)
          return;
        const ok = await new ConfirmModal(t("view.confirmDeleteAsset", { name: this.asset.name }), t("common.delete"), t("common.cancel"), true).open();
        if (!ok)
          return;
        await this.assetRepository.deleteAsset(this.asset.id);
        if (this.onSaved)
          this.onSaved();
        close();
      });
    }
    form.addEventListener("submit", async (e) => {
      var _a2, _b2, _c;
      e.preventDefault();
      clearError(nameGroup);
      clearError(priceGroup);
      clearError(fromGroup);
      clearError(toGroup);
      clearError(recycleGroup);
      const nameVal = (nameInput.value || "").trim();
      const priceStr = (priceInput.value || "").trim();
      const priceNum = this.parseMoney(priceStr);
      let valid = true;
      if (!nameVal) {
        setError(nameGroup, t("form.error.nameRequired"));
        valid = false;
      }
      if (priceNum === null) {
        setError(priceGroup, t("form.error.priceInvalid"));
        valid = false;
      }
      if (!fromInput.value) {
        setError(fromGroup, t("form.error.fromRequired"));
        valid = false;
      }
      if (!valid) {
        const firstErr = [nameGroup, priceGroup, fromGroup].find((g) => g.classList.contains("has-error"));
        if (firstErr) {
          (_a2 = firstErr.querySelector("input")) == null ? void 0 : _a2.focus();
          firstErr.scrollIntoView({ behavior: "smooth", block: "center" });
        }
        return;
      }
      const fromDate = new Date(fromInput.value);
      const priceValue = priceNum;
      let toDate = void 0;
      if (toInput.value) {
        const d = new Date(toInput.value);
        if (d.getTime() < fromDate.getTime()) {
          setError(toGroup, t("form.error.toBeforeFrom"));
          (_b2 = toGroup.querySelector("input")) == null ? void 0 : _b2.focus();
          return;
        }
        toDate = d;
      }
      const recycleStr = (recycleInput.value || "").trim();
      const recycleNum = recycleStr ? this.parseMoney(recycleStr) : 0;
      if (recycleStr && recycleNum === null) {
        setError(recycleGroup, t("form.error.recycleInvalid"));
        return;
      }
      if ((recycleNum || 0) > priceValue) {
        setError(recycleGroup, t("form.error.recycleGtPrice"));
        return;
      }
      const assetData = {
        id: ((_c = this.asset) == null ? void 0 : _c.id) || nameVal,
        name: nameVal,
        icon: iconInput.value || "\u{1F4E6}",
        price: priceValue,
        activeFrom: fromDate,
        activeTo: toDate,
        recyclePrice: recycleNum || 0,
        tags: currentTags
      };
      try {
        const asset = new Asset(assetData);
        await this.assetRepository.saveAsset(asset);
        if (this.onSaved)
          this.onSaved();
        close();
      } catch (error) {
        new import_obsidian2.Notice(t("notice.saveFailed", { msg: error.message }));
      }
    });
  }
  injectAssetFormStyles() {
    const STYLE_ID = "asset-form-inline-styles";
    if (document.getElementById(STYLE_ID))
      return;
    const style = document.createElement("style");
    style.id = STYLE_ID;
    style.textContent = `
			/* \u5230\u671F\u8F93\u5165\u6E05\u9664\u6309\u94AE */
			.date-picker-modal.asset-form-modal .input-with-clear { position: relative; }
			.date-picker-modal.asset-form-modal .input-with-clear .input-clear { position: absolute; right: 6px; top: 50%; transform: translateY(-50%); width: 18px; height: 18px; border-radius: 50%; display: none; align-items: center; justify-content: center; font-size: 14px; line-height: 18px; }
			/* \u5F39\u7A97\u5BB9\u5668\u66F4\u7D27\u51D1 */
			.date-picker-modal.asset-form-modal { max-height: 80vh; overflow: auto; }
			.date-picker-modal.asset-form-modal .date-picker-content { padding: 16px 20px; display: flex; flex-direction: column; gap: 0 !important; }
			.date-picker-modal.asset-form-modal .date-picker-title { font-size: 14px; margin-bottom: 6px; }

			/* \u6A2A\u5411\u8868\u5355\u5E03\u5C40\uFF0C\u538B\u7F29\u5782\u76F4\u7A7A\u767D */
			.date-picker-modal.asset-form-modal .asset-form.asset-form--horizontal { font-size: 15.5px; display: grid !important; grid-template-columns: 1fr; row-gap: 8px !important; column-gap: 0 !important; gap: 8px !important; }
			.date-picker-modal.asset-form-modal .asset-form.asset-form--horizontal .form-group { display: grid !important; grid-template-columns: 64px 1fr; align-items: center; column-gap: 8px; row-gap: 0; margin: 0 !important; padding: 0 !important; }
			.date-picker-modal.asset-form-modal .asset-form.asset-form--horizontal label { min-width: 64px; margin: 0; text-align: right; justify-self: end; }
			.date-picker-modal.asset-form-modal .asset-form.asset-form--horizontal .form-field { width: 100%; margin: 0 !important; padding: 0 !important; }
			/* \u538B\u7F29\u8F93\u5165\u63A7\u4EF6\u9AD8\u5EA6\u4E0E\u5185\u8FB9\u8DDD */
			.date-picker-modal.asset-form-modal .asset-form.asset-form--horizontal input[type="text"],
			.date-picker-modal.asset-form-modal .asset-form.asset-form--horizontal input[type="number"] { height: 32px; padding: 4px 10px; font-size: 15.5px; line-height: 1.45; }
			/* \u6807\u7B7E\u8F93\u5165\u4E0E chip \u66F4\u7D27\u51D1 */
			.date-picker-modal.asset-form-modal .asset-form.asset-form--horizontal .tags-input { display: flex; flex-wrap: wrap; gap: 4px; }
			.date-picker-modal.asset-form-modal .asset-form.asset-form--horizontal .tag-chip { font-size: 12px; height: 18px; line-height: 18px; padding: 0 6px; border-radius: 4px; }
			.date-picker-modal.asset-form-modal .asset-form.asset-form--horizontal .tag-chip .remove { width: 16px; height: 16px; line-height: 16px; font-size: 12px; margin-left: 4px; }
			.date-picker-modal.asset-form-modal .asset-form.asset-form--horizontal .tags-input input { flex: 1; min-width: 120px; height: 28px; padding: 4px 10px; font-size: 14.5px; }

			/* \u5FC5\u586B\u4E0E\u9519\u8BEF\u6837\u5F0F */
			.date-picker-modal.asset-form-modal .label-required::after { content: ' *'; color: #ff4d4f; margin-left: 2px; }
			.date-picker-modal.asset-form-modal .form-group.has-error input[type="text"],
			.date-picker-modal.asset-form-modal .form-group.has-error input[type="number"] { border-color: #ff4d4f !important; box-shadow: 0 0 0 1px #ff4d4f inset; }
			.date-picker-modal.asset-form-modal .field-error { margin-top: 4px; color: #ff8587; font-size: 12px; line-height: 1.3; }
			.date-picker-modal.asset-form-modal .field-error:empty { display: none; margin-top: 0; }

			/* \u64CD\u4F5C\u6309\u94AE\u533A\u66F4\u7D27\u51D1 */
			.date-picker-modal.asset-form-modal .form-actions { margin-top: 12px; gap: 16px; display: flex; justify-content: center; }
			.date-picker-modal.asset-form-modal .form-btn { height: 34px; padding: 0 14px; font-size: 14px; }
		`;
    document.head.appendChild(style);
  }
  applyRowLayout(group) {
    group.style.display = "grid";
    group.style.gridTemplateColumns = "72px 1fr";
    group.style.alignItems = "center";
    group.style.columnGap = "8px";
    group.style.rowGap = "0px";
    group.style.margin = "0";
    const label = group.querySelector("label");
    if (label) {
      label.style.minWidth = "72px";
      label.style.display = "inline-block";
      label.style.margin = "0";
    }
    const field = group.querySelector(".form-field");
    if (field) {
      field.style.width = "100%";
    }
  }
  close() {
    if (this.maskEl && this.maskEl.parentElement) {
      this.maskEl.parentElement.removeChild(this.maskEl);
    }
    this.maskEl = void 0;
    this.modalEl = void 0;
  }
  formatDateLocal(date) {
    const d = new Date(date.getTime() - date.getTimezoneOffset() * 6e4);
    return d.toISOString().split("T")[0];
  }
  // —— 金额字符串处理（成熟逻辑）——
  sanitizeNumericString(value) {
    let v = (value || "").replace(/[^\d.]/g, "");
    v = v.replace(/^\./, "");
    v = v.replace(/\.(?=.*\.)/g, "");
    return v;
  }
  clampTwoDecimalsString(value) {
    const m = (value || "").match(/^(\d+)(?:\.(\d*))?$/);
    if (!m)
      return "";
    const intPart = m[1];
    const decPart = (m[2] || "").slice(0, 2);
    return decPart ? `${intPart}.${decPart}` : intPart;
  }
  parseMoney(value) {
    const sanitized = this.sanitizeNumericString(value);
    const clamped = this.clampTwoDecimalsString(sanitized);
    if (clamped === "")
      return null;
    const num = Number(clamped);
    return Number.isFinite(num) && num >= 0 ? num : null;
  }
  // 与 costsetapp 对齐：用 surrogate pair 匹配获取第一个 emoji
  getFirstEmojiGrapheme(input) {
    const emojiRegex = /[\uD800-\uDBFF][\uDC00-\uDFFF]/;
    const m = (input || "").match(emojiRegex);
    return m ? m[0] : "";
  }
  // 弹出日期选择器（复用日期/标签弹窗风格）
  openDatePicker(currentDate, onConfirm) {
    const mask = document.createElement("div");
    mask.className = "date-picker-mask";
    const picker = document.createElement("div");
    picker.className = "date-picker-modal";
    const content = document.createElement("div");
    content.className = "date-picker-content";
    const title = document.createElement("div");
    title.className = "date-picker-title";
    title.textContent = t("date.pick");
    const wheelContainer = document.createElement("div");
    wheelContainer.className = "date-wheel-container";
    const currentYear = currentDate.getFullYear();
    const currentMonth = currentDate.getMonth() + 1;
    const currentDay = currentDate.getDate();
    const yearColumn = this.createWheelColumn(t("date.year"), this.generateYears(currentYear), currentYear, (year) => {
      this.updateDaysColumn(dayColumn, year, monthColumn.selectedValue);
    }, false);
    const monthColumn = this.createWheelColumn(t("date.month"), this.generateMonths(), currentMonth, (month) => {
      this.updateDaysColumn(dayColumn, yearColumn.selectedValue, month);
    }, true);
    const dayColumn = this.createWheelColumn(t("date.day"), this.generateDays(currentYear, currentMonth), currentDay, void 0, true);
    wheelContainer.appendChild(yearColumn.element);
    wheelContainer.appendChild(monthColumn.element);
    wheelContainer.appendChild(dayColumn.element);
    const actions = document.createElement("div");
    actions.className = "date-picker-actions";
    const cancelBtn = document.createElement("button");
    cancelBtn.className = "date-picker-btn date-picker-btn-cancel";
    cancelBtn.textContent = t("common.cancel");
    const confirmBtn = document.createElement("button");
    confirmBtn.className = "date-picker-btn date-picker-btn-confirm";
    confirmBtn.textContent = t("common.confirm");
    actions.appendChild(cancelBtn);
    actions.appendChild(confirmBtn);
    content.appendChild(title);
    content.appendChild(wheelContainer);
    content.appendChild(actions);
    picker.appendChild(content);
    mask.appendChild(picker);
    document.body.appendChild(mask);
    const closePicker = () => {
      document.body.removeChild(mask);
    };
    mask.addEventListener("click", (e) => {
      if (e.target === mask)
        closePicker();
    });
    cancelBtn.addEventListener("click", closePicker);
    confirmBtn.addEventListener("click", () => {
      const year = yearColumn.selectedValue;
      const month = monthColumn.selectedValue;
      const day = dayColumn.selectedValue;
      const picked = new Date(`${year}-${month.toString().padStart(2, "0")}-${day.toString().padStart(2, "0")}`);
      onConfirm(picked);
      closePicker();
    });
  }
  generateYears(currentYear) {
    const minYear = 1900;
    const nowYear = new Date().getFullYear();
    const maxYear = nowYear + 7;
    const years = [];
    for (let i = minYear; i <= maxYear; i++)
      years.push(i);
    return years;
  }
  generateMonths() {
    return Array.from({ length: 12 }, (_, i) => i + 1);
  }
  generateDays(year, month) {
    const daysInMonth = new Date(year, month, 0).getDate();
    return Array.from({ length: daysInMonth }, (_, i) => i + 1);
  }
  createWheelColumn(suffix, values, selectedValue, onChange, isInfinite = false) {
    const column = document.createElement("div");
    column.className = "date-wheel-column";
    const container = document.createElement("div");
    container.className = "date-wheel-items";
    let selectedIndex = values.indexOf(selectedValue);
    let currentSelectedValue = selectedValue;
    const api = { element: column, selectedValue: currentSelectedValue };
    const itemHeight = 40;
    if (isInfinite) {
      const repeatCount = 5;
      const totalItems = values.length * repeatCount;
      const middleGroupIndex = 2;
      const initialScrollTop = middleGroupIndex * values.length * itemHeight + selectedIndex * itemHeight;
      for (let repeat = 0; repeat < repeatCount; repeat++) {
        values.forEach((value, index) => {
          const item = document.createElement("div");
          item.className = "date-wheel-item";
          item.textContent = `${value.toString().padStart(2, "0")}${suffix}`;
          item.dataset.value = value.toString();
          item.dataset.index = (repeat * values.length + index).toString();
          item.dataset.realValue = value.toString();
          container.appendChild(item);
        });
      }
      container.style.height = `${totalItems * itemHeight}px`;
      const initialItemIndex = middleGroupIndex * values.length + selectedIndex;
      const items = Array.from(container.querySelectorAll(".date-wheel-item"));
      if (items[initialItemIndex]) {
        items.forEach((el, idx) => el.classList.toggle("selected", idx === initialItemIndex));
      }
      requestAnimationFrame(() => {
        container.scrollTop = initialScrollTop;
      });
      let isScrolling = false;
      container.addEventListener("scroll", () => {
        if (isScrolling)
          return;
        const scrollTop = container.scrollTop;
        const currentIndex = Math.round(scrollTop / itemHeight);
        const realIndex = (currentIndex % values.length + values.length) % values.length;
        const realValue = values[realIndex];
        container.querySelectorAll(".date-wheel-item").forEach((item, index) => {
          const itemRealIndex = index % values.length;
          item.classList.toggle("selected", itemRealIndex === realIndex);
        });
        selectedIndex = realIndex;
        currentSelectedValue = realValue;
        api.selectedValue = realValue;
        if (onChange)
          onChange(currentSelectedValue);
        const maxScrollTop = (repeatCount - 1) * values.length * itemHeight;
        if (scrollTop >= maxScrollTop) {
          isScrolling = true;
          const offset = scrollTop - maxScrollTop;
          container.scrollTop = values.length * itemHeight + offset;
          setTimeout(() => {
            isScrolling = false;
          }, 50);
        } else if (scrollTop <= 0) {
          isScrolling = true;
          const offset = scrollTop;
          container.scrollTop = (repeatCount - 2) * values.length * itemHeight + offset;
          setTimeout(() => {
            isScrolling = false;
          }, 50);
        }
      });
      container.addEventListener("click", (ev) => {
        const target = ev.target;
        const itemEl = target && target.closest ? target.closest(".date-wheel-item") : null;
        if (!itemEl)
          return;
        const clickedIndex = Number(itemEl.dataset.index || "0");
        const realIndex = (clickedIndex % values.length + values.length) % values.length;
        const middleIndex = middleGroupIndex * values.length + realIndex;
        container.scrollTop = middleIndex * itemHeight;
        selectedIndex = realIndex;
        currentSelectedValue = values[realIndex];
        api.selectedValue = currentSelectedValue;
        if (onChange)
          onChange(currentSelectedValue);
      });
    } else {
      values.forEach((value, index) => {
        const item = document.createElement("div");
        item.className = "date-wheel-item";
        item.textContent = `${value.toString().padStart(2, "0")}${suffix}`;
        item.dataset.value = value.toString();
        item.dataset.index = index.toString();
        if (value === currentSelectedValue)
          item.classList.add("selected");
        container.appendChild(item);
      });
      container.addEventListener("scroll", () => {
        const scrollTop = container.scrollTop;
        const newIndex = Math.round(scrollTop / itemHeight);
        if (newIndex !== selectedIndex && newIndex >= 0 && newIndex < values.length) {
          container.querySelectorAll(".date-wheel-item").forEach((item, index) => {
            item.classList.toggle("selected", index === newIndex);
          });
          selectedIndex = newIndex;
          currentSelectedValue = values[newIndex];
          api.selectedValue = currentSelectedValue;
          if (onChange)
            onChange(currentSelectedValue);
        }
      });
      container.addEventListener("click", (ev) => {
        const target = ev.target;
        const itemEl = target && target.closest ? target.closest(".date-wheel-item") : null;
        if (!itemEl)
          return;
        const idx = Number(itemEl.dataset.index || "0");
        container.querySelectorAll(".date-wheel-item").forEach((el, i) => {
          el.classList.toggle("selected", i === idx);
        });
        container.scrollTop = idx * itemHeight;
        selectedIndex = idx;
        currentSelectedValue = values[idx];
        api.selectedValue = currentSelectedValue;
        if (onChange)
          onChange(currentSelectedValue);
      });
      setTimeout(() => {
        container.scrollTop = selectedIndex * itemHeight;
      }, 0);
    }
    column.appendChild(container);
    return api;
  }
  updateDaysColumn(dayColumn, year, month) {
    const container = dayColumn.element.querySelector(".date-wheel-items");
    const currentDay = dayColumn.selectedValue;
    const newDays = this.generateDays(year, month);
    while (container.firstChild)
      container.removeChild(container.firstChild);
    const repeatCount = 5;
    const itemHeight = 40;
    const middleGroupIndex = 2;
    const maxDay = Math.max(...newDays);
    const selectedDay = Math.min(currentDay, maxDay);
    const selectedIndex = newDays.indexOf(selectedDay);
    for (let repeat = 0; repeat < repeatCount; repeat++) {
      newDays.forEach((day, index) => {
        const item = document.createElement("div");
        item.className = "date-wheel-item";
        item.textContent = `${day.toString().padStart(2, "0")}${t("date.day")}`;
        item.dataset.value = day.toString();
        item.dataset.index = (repeat * newDays.length + index).toString();
        item.dataset.realValue = day.toString();
        container.appendChild(item);
      });
    }
    container.style.height = `${newDays.length * repeatCount * itemHeight}px`;
    const initialItemIndexDay = middleGroupIndex * newDays.length + selectedIndex;
    const dayItems = Array.from(container.querySelectorAll(".date-wheel-item"));
    if (dayItems[initialItemIndexDay]) {
      dayItems.forEach((el, idx) => el.classList.toggle("selected", idx === initialItemIndexDay));
    }
    requestAnimationFrame(() => {
      container.scrollTop = middleGroupIndex * newDays.length * itemHeight + selectedIndex * itemHeight;
    });
    let isScrolling = false;
    container.addEventListener("scroll", () => {
      if (isScrolling)
        return;
      const scrollTop = container.scrollTop;
      const currentIndex = Math.round(scrollTop / itemHeight);
      const realIndex = currentIndex % newDays.length;
      const realValue = newDays[realIndex];
      container.querySelectorAll(".date-wheel-item").forEach((item, index) => {
        const itemRealIndex = index % newDays.length;
        item.classList.toggle("selected", itemRealIndex === realIndex);
      });
      dayColumn.selectedValue = realValue;
      const maxScrollTop = (repeatCount - 1) * newDays.length * itemHeight;
      if (scrollTop >= maxScrollTop) {
        isScrolling = true;
        const offset = scrollTop - maxScrollTop;
        container.scrollTop = newDays.length * itemHeight + offset;
        setTimeout(() => {
          isScrolling = false;
        }, 50);
      } else if (scrollTop <= 0) {
        isScrolling = true;
        const offset = scrollTop;
        container.scrollTop = (repeatCount - 2) * newDays.length * itemHeight + offset;
        setTimeout(() => {
          isScrolling = false;
        }, 50);
      }
    });
    container.addEventListener("click", (ev) => {
      const target = ev.target;
      const itemEl = target && target.closest ? target.closest(".date-wheel-item") : null;
      if (!itemEl)
        return;
      const clickedIndex = Number(itemEl.dataset.index || "0");
      const realIndex = clickedIndex % newDays.length;
      const middleIndex = middleGroupIndex * newDays.length + realIndex;
      container.scrollTop = middleIndex * itemHeight;
      dayColumn.selectedValue = newDays[realIndex];
    });
  }
  createLabel(text) {
    const el = document.createElement("label");
    el.textContent = text;
    return el;
  }
};

// components/AssetManagerView.ts
var import_obsidian3 = require("obsidian");

// components/TagPanel.ts
var TagPanel = class {
  // i18n 延后加载，避免硬依赖：使用动态导入
  constructor(containerEl, props) {
    this.panelVisible = false;
    this.panelSelected = [];
    this.searchKeyword = "";
    this.containerEl = containerEl;
    this.props = props;
    this.panelSelected = [...props.selectedTags];
  }
  render() {
    this.containerEl.empty();
    this.containerEl.addClass("top-summary-labels");
    if (this.props.maxHeight) {
      this.containerEl.style.maxHeight = this.props.maxHeight;
      this.containerEl.style.overflowY = this.props.maxHeight !== "auto" ? "auto" : "visible";
    }
    this.renderTagList();
    if (this.panelVisible) {
      this.renderSelectionPanel();
    }
  }
  renderTagList() {
    this.props.tags.forEach((tag) => {
      const labelEl = this.containerEl.createSpan("top-summary-label");
      labelEl.textContent = tag;
      if (this.props.selectedTags.includes(tag)) {
        labelEl.addClass("selected");
      }
      labelEl.addEventListener("click", (e) => {
        e.stopPropagation();
        this.props.onTagClick(tag);
      });
    });
    this.containerEl.addEventListener("click", () => {
      this.showSelectionPanel();
    });
  }
  showSelectionPanel() {
    this.panelVisible = true;
    this.panelSelected = [...this.props.selectedTags];
    this.render();
  }
  hideSelectionPanel() {
    this.panelVisible = false;
    if (this.maskEl && this.maskEl.parentElement) {
      this.maskEl.parentElement.removeChild(this.maskEl);
    }
    this.maskEl = void 0;
    this.panelEl = void 0;
    this.labelsEl = void 0;
    this.searchEl = void 0;
    this.render();
  }
  renderSelectionPanel() {
    var _a, _b, _c, _d, _e, _f;
    if (!this.maskEl) {
      this.maskEl = this.containerEl.createDiv("top-summary-panel-mask");
      this.maskEl.style.zIndex = "9999";
      this.maskEl.addEventListener("click", () => {
        this.confirmSelection();
      });
    }
    if (!this.panelEl) {
      this.panelEl = this.maskEl.createDiv("top-summary-panel");
      this.panelEl.style.zIndex = "10000";
      this.panelEl.addEventListener("click", (e) => {
        e.stopPropagation();
      });
    }
    if (!this.searchEl) {
      this.searchEl = this.panelEl.createEl("input", {
        cls: "top-summary-panel-search",
        placeholder: ((_b = (_a = (init_i18n(), __toCommonJS(i18n_exports))) == null ? void 0 : _a.t) == null ? void 0 : _b.call(_a, "tags.search.placeholder")) || "\u641C\u7D22\u6807\u7B7E",
        type: "text"
      });
      this.searchEl.addEventListener("input", () => {
        var _a2;
        this.searchKeyword = (((_a2 = this.searchEl) == null ? void 0 : _a2.value) || "").trim();
        this.renderSelectionPanel();
      });
    }
    if (this.searchEl) {
      this.searchEl.value = this.searchKeyword;
    }
    const prevScrollTop = this.labelsEl ? this.labelsEl.scrollTop : 0;
    if (!this.labelsEl) {
      this.labelsEl = this.panelEl.createDiv("top-summary-panel-labels");
    } else {
      this.labelsEl.empty();
    }
    const lower = this.searchKeyword.toLowerCase();
    const visibleTags = lower ? this.props.tags.filter((t2) => t2.toLowerCase().includes(lower)) : this.props.tags;
    visibleTags.forEach((tag) => {
      const labelEl = this.labelsEl.createSpan("top-summary-panel-label");
      labelEl.textContent = tag;
      if (this.panelSelected.includes(tag)) {
        labelEl.addClass("selected");
      }
      labelEl.addEventListener("click", () => {
        this.toggleTagSelection(tag);
      });
    });
    if (this.labelsEl) {
      this.labelsEl.scrollTop = prevScrollTop;
    }
    let actionsEl = this.panelEl.querySelector(".top-summary-panel-actions");
    if (!actionsEl) {
      actionsEl = this.panelEl.createDiv("top-summary-panel-actions");
      actionsEl.style.padding = "8px 16px 12px 16px";
      const selectAllBtn = actionsEl.createSpan("panel-btn");
      selectAllBtn.textContent = ((_d = (_c = (init_i18n(), __toCommonJS(i18n_exports))) == null ? void 0 : _c.t) == null ? void 0 : _d.call(_c, "tags.selectAll")) || "\u5168\u9009";
      selectAllBtn.addEventListener("click", () => {
        this.panelSelected = [...this.props.tags];
        this.renderSelectionPanel();
      });
      const deselectAllBtn = actionsEl.createSpan("panel-btn");
      deselectAllBtn.textContent = ((_f = (_e = (init_i18n(), __toCommonJS(i18n_exports))) == null ? void 0 : _e.t) == null ? void 0 : _f.call(_e, "tags.deselectAll")) || "\u53D6\u6D88\u5168\u9009";
      deselectAllBtn.addEventListener("click", () => {
        this.panelSelected = [];
        this.renderSelectionPanel();
      });
    }
  }
  toggleTagSelection(tag) {
    if (this.panelSelected.includes(tag)) {
      this.panelSelected = this.panelSelected.filter((t2) => t2 !== tag);
    } else {
      this.panelSelected.push(tag);
    }
    this.renderSelectionPanel();
  }
  confirmSelection() {
    this.props.onTagClick(this.panelSelected);
    this.hideSelectionPanel();
  }
  // 更新标签
  updateTags(tags, selectedTags) {
    this.props.tags = tags;
    this.props.selectedTags = selectedTags;
    this.render();
  }
};

// components/TopSummary.ts
init_i18n();
var TopSummary = class {
  constructor(containerEl, props) {
    this.containerEl = containerEl;
    this.props = props;
  }
  formatDateLocal(date) {
    const d = new Date(date.getTime() - date.getTimezoneOffset() * 6e4);
    return d.toISOString().split("T")[0];
  }
  render() {
    this.containerEl.empty();
    this.containerEl.addClass("top-summary");
    this.renderNumbers();
    this.renderLabels();
    this.renderChart();
  }
  renderNumbers() {
    const numbersEl = this.containerEl.createDiv("top-summary-numbers");
    const dailyEl = numbersEl.createDiv("top-summary-daily");
    const dateEl = dailyEl.createDiv("top-summary-date");
    dateEl.textContent = this.formatDateLocal(this.props.selectedDate || new Date());
    dateEl.addClass("clickable");
    dateEl.addEventListener("click", () => {
      this.showDatePicker();
    });
    const dailyCostEl = dailyEl.createDiv("top-summary-dailycost");
    dailyCostEl.textContent = `${this.getCurrencySymbol()}${this.props.totalDailyCost.toFixed(2)}`;
    const summaryEl = numbersEl.createDiv("top-summary-summary");
    const totalEl = summaryEl.createDiv("top-summary-total");
    const totalMetaEl = totalEl.createSpan("top-summary-meta");
    totalMetaEl.textContent = t("top.total");
    const totalCostEl = totalEl.createSpan("top-summary-totalcost");
    totalCostEl.textContent = `${this.getCurrencySymbol()}${this.props.totalCost.toLocaleString()}`;
    const recycleEl = summaryEl.createDiv("top-summary-total");
    const recycleMetaEl = recycleEl.createSpan("top-summary-meta");
    recycleMetaEl.textContent = t("top.recycle");
    const recycleCostEl = recycleEl.createSpan("top-summary-totalcost");
    recycleCostEl.textContent = `${this.getCurrencySymbol()}${this.props.totalRecycle.toLocaleString()}`;
  }
  renderLabels() {
    const labelsEl = this.containerEl.createDiv("top-summary-labels");
    const panelProps = {
      tags: this.props.tags,
      selectedTags: this.props.selectedTags,
      onTagClick: this.props.onTagClick,
      maxHeight: "48px"
    };
    this.tagPanelComponent = new TagPanel(labelsEl, panelProps);
    this.tagPanelComponent.render();
  }
  getCurrencySymbol() {
    return t("currency.symbol");
  }
  renderChart() {
    const chartEl = this.containerEl.createDiv("top-summary-chart");
    const canvas = chartEl.createEl("canvas");
    canvas.id = "trend-canvas";
    canvas.width = 100;
    canvas.height = 20;
    this.renderChartCanvas(canvas);
  }
  renderChartCanvas(canvas) {
    if (this.props.trendPoints.length < 2)
      return;
    const ctx = canvas.getContext("2d");
    if (!ctx)
      return;
    const rect = canvas.getBoundingClientRect();
    canvas.width = rect.width;
    canvas.height = rect.height;
    const width = canvas.width;
    const height = canvas.height;
    const pad = 0;
    const values = this.props.trendPoints.map((p) => p.value);
    const minValue = Math.min(...values);
    const maxValue = Math.max(...values);
    const range = maxValue - minValue;
    const useLogScale = range > 100;
    const getX = (i) => pad + (width - 2 * pad) * i / (this.props.trendPoints.length - 1);
    const getY = (v) => {
      if (useLogScale) {
        const logValue = Math.log(v + 1);
        const logMin = Math.log(minValue + 1);
        const logMax = Math.log(maxValue + 1);
        return height - pad - (logValue - logMin) / Math.max(logMax - logMin, 0.5) * (height - 2 * pad);
      } else {
        return height - pad - (v - minValue) / Math.max(range, 0.5) * (height - 2 * pad);
      }
    };
    const getColorByValue = (v) => {
      const logValue = Math.log(v + 1);
      const logMin = Math.log(minValue + 1);
      const logMax = Math.log(maxValue + 1);
      if (logMax === logMin)
        return "rgb(255,255,0)";
      const t2 = (logValue - logMin) / (logMax - logMin);
      if (t2 <= 0.5) {
        const r = Math.round(2 * t2 * 255);
        return `rgb(${r},255,0)`;
      } else {
        const g = Math.round((1 - 2 * (t2 - 0.5)) * 255);
        return `rgb(255,${g},0)`;
      }
    };
    ctx.clearRect(0, 0, width, height);
    ctx.lineWidth = 1;
    for (let i = 0; i < this.props.trendPoints.length - 1; i++) {
      const p1 = this.props.trendPoints[i];
      const p2 = this.props.trendPoints[i + 1];
      const x1 = getX(i);
      const y1 = getY(p1.value);
      const x2 = getX(i + 1);
      const y2 = getY(p2.value);
      ctx.beginPath();
      ctx.strokeStyle = getColorByValue(p1.value);
      ctx.moveTo(x1, y1);
      ctx.lineTo(x2, y2);
      ctx.stroke();
    }
    let selectedXToDraw = null;
    if (this.props.selectedX !== null && this.props.selectedX !== void 0) {
      selectedXToDraw = this.props.selectedX;
    } else if (this.props.selectedDate) {
      try {
        const times = this.props.trendPoints.map((p) => p.date.getTime());
        const minTime = Math.min(...times);
        const maxTime = Math.max(...times);
        const cur = this.props.selectedDate.getTime();
        const denom = Math.max(maxTime - minTime, 1);
        const ratio = (cur - minTime) / denom;
        selectedXToDraw = pad + (width - 2 * pad) * Math.min(Math.max(ratio, 0), 1);
      } catch (_) {
        selectedXToDraw = null;
      }
    }
    if (selectedXToDraw !== null && selectedXToDraw !== void 0) {
      ctx.beginPath();
      ctx.strokeStyle = "#FFD600";
      ctx.lineWidth = 1;
      ctx.moveTo(selectedXToDraw, 0);
      ctx.lineTo(selectedXToDraw, height);
      ctx.stroke();
    }
    if (!canvas._lac_click_bound) {
      canvas._lac_click_bound = true;
      canvas.addEventListener("click", (ev) => {
        var _a;
        const x = (_a = ev.offsetX) != null ? _a : ev.clientX - canvas.getBoundingClientRect().left;
        const usableWidth = Math.max(width - 2 * pad, 1);
        const ratio = Math.min(Math.max((x - pad) / usableWidth, 0), 1);
        const idx = Math.round(ratio * (this.props.trendPoints.length - 1));
        const clampedIdx = Math.min(Math.max(idx, 0), this.props.trendPoints.length - 1);
        const pickedDate = this.props.trendPoints[clampedIdx].date;
        this.updateSelection(x, pickedDate);
        if (this.props.onDatePick) {
          this.props.onDatePick(this.formatDateLocal(pickedDate));
        }
        if (this.props.onChartSelect) {
          this.props.onChartSelect(x);
        }
      });
    }
  }
  // 更新图表数据
  updateChart(trendPoints) {
    this.props.trendPoints = trendPoints;
    const canvas = this.containerEl.querySelector("#trend-canvas");
    if (canvas) {
      this.renderChartCanvas(canvas);
    }
  }
  // 更新选中状态
  updateSelection(selectedX, selectedDate) {
    this.props.selectedX = selectedX;
    if (selectedDate) {
      this.props.selectedDate = selectedDate;
      const dateLabel = this.containerEl.querySelector(".top-summary-date");
      if (dateLabel) {
        dateLabel.textContent = this.formatDateLocal(selectedDate);
      }
    }
    const canvas = this.containerEl.querySelector("#trend-canvas");
    if (canvas) {
      this.renderChartCanvas(canvas);
    }
  }
  // 只更新数字（不重绘图表数据）
  updateNumbers(totalDailyCost, totalCost, totalRecycle) {
    this.props.totalDailyCost = totalDailyCost;
    this.props.totalCost = totalCost;
    this.props.totalRecycle = totalRecycle;
    const daily = this.containerEl.querySelector(".top-summary-dailycost");
    if (daily)
      daily.textContent = `${this.getCurrencySymbol()}${totalDailyCost.toFixed(2)}`;
    const totals = this.containerEl.querySelectorAll(".top-summary-totalcost");
    if (totals && totals.length > 0) {
      const totalEl = totals[0];
      if (totalEl)
        totalEl.textContent = `${this.getCurrencySymbol()}${totalCost.toLocaleString()}`;
      const recycleEl = totals[1];
      if (recycleEl)
        recycleEl.textContent = `${this.getCurrencySymbol()}${totalRecycle.toLocaleString()}`;
    }
  }
  // 显示日期选择器
  showDatePicker() {
    const mask = document.createElement("div");
    mask.className = "date-picker-mask";
    const picker = document.createElement("div");
    picker.className = "date-picker-modal";
    const content = document.createElement("div");
    content.className = "date-picker-content";
    const title = document.createElement("div");
    title.className = "date-picker-title";
    title.textContent = t("date.pick");
    const wheelContainer = document.createElement("div");
    wheelContainer.className = "date-wheel-container";
    const currentDate = this.props.selectedDate || new Date();
    const currentYear = currentDate.getFullYear();
    const currentMonth = currentDate.getMonth() + 1;
    const currentDay = currentDate.getDate();
    const yearColumn = this.createWheelColumn(t("date.year"), this.generateYears(currentYear), currentYear, (year) => {
      this.updateDaysColumn(dayColumn, year, monthColumn.selectedValue);
    }, false);
    const monthColumn = this.createWheelColumn(t("date.month"), this.generateMonths(), currentMonth, (month) => {
      this.updateDaysColumn(dayColumn, yearColumn.selectedValue, month);
    }, true);
    const dayColumn = this.createWheelColumn(t("date.day"), this.generateDays(currentYear, currentMonth), currentDay, void 0, true);
    wheelContainer.appendChild(yearColumn.element);
    wheelContainer.appendChild(monthColumn.element);
    wheelContainer.appendChild(dayColumn.element);
    const actions = document.createElement("div");
    actions.className = "date-picker-actions";
    const cancelBtn = document.createElement("button");
    cancelBtn.className = "date-picker-btn date-picker-btn-cancel";
    cancelBtn.textContent = t("common.cancel");
    const confirmBtn = document.createElement("button");
    confirmBtn.className = "date-picker-btn date-picker-btn-confirm";
    confirmBtn.textContent = t("common.confirm");
    actions.appendChild(cancelBtn);
    actions.appendChild(confirmBtn);
    content.appendChild(title);
    content.appendChild(wheelContainer);
    content.appendChild(actions);
    picker.appendChild(content);
    mask.appendChild(picker);
    document.body.appendChild(mask);
    const closePicker = () => {
      document.body.removeChild(mask);
    };
    mask.addEventListener("click", (e) => {
      if (e.target === mask) {
        closePicker();
      }
    });
    cancelBtn.addEventListener("click", closePicker);
    confirmBtn.addEventListener("click", () => {
      const year = yearColumn.selectedValue;
      const month = monthColumn.selectedValue;
      const day = dayColumn.selectedValue;
      const selectedDateStr = `${year}-${month.toString().padStart(2, "0")}-${day.toString().padStart(2, "0")}`;
      if (this.props.onDatePick) {
        this.props.onDatePick(selectedDateStr);
      }
      closePicker();
    });
  }
  // 生成年份数组
  generateYears(currentYear) {
    const minYear = this.props.minYear || currentYear - 5;
    const maxYear = this.props.maxYear || currentYear + 5;
    const years = [];
    for (let i = minYear; i <= maxYear; i++) {
      years.push(i);
    }
    return years;
  }
  // 生成月份数组
  generateMonths() {
    return Array.from({ length: 12 }, (_, i) => i + 1);
  }
  // 生成日期数组
  generateDays(year, month) {
    const daysInMonth = new Date(year, month, 0).getDate();
    return Array.from({ length: daysInMonth }, (_, i) => i + 1);
  }
  // 创建滚轮列
  createWheelColumn(suffix, values, selectedValue, onChange, isInfinite = false) {
    const column = document.createElement("div");
    column.className = "date-wheel-column";
    const container = document.createElement("div");
    container.className = "date-wheel-items";
    let selectedIndex = values.indexOf(selectedValue);
    let currentSelectedValue = selectedValue;
    const api = { element: column, selectedValue: currentSelectedValue };
    const itemHeight = 40;
    if (isInfinite) {
      const repeatCount = 5;
      const totalItems = values.length * repeatCount;
      const middleGroupIndex = 2;
      const initialScrollTop = middleGroupIndex * values.length * itemHeight + selectedIndex * itemHeight;
      for (let repeat = 0; repeat < repeatCount; repeat++) {
        values.forEach((value, index) => {
          const item = document.createElement("div");
          item.className = "date-wheel-item";
          item.textContent = `${value.toString().padStart(2, "0")}${suffix}`;
          item.dataset.value = value.toString();
          item.dataset.index = (repeat * values.length + index).toString();
          item.dataset.realValue = value.toString();
          container.appendChild(item);
        });
      }
      container.style.height = `${totalItems * itemHeight}px`;
      const initialItemIndex = middleGroupIndex * values.length + selectedIndex;
      const items = Array.from(container.querySelectorAll(".date-wheel-item"));
      if (items[initialItemIndex]) {
        items.forEach((el, idx) => el.classList.toggle("selected", idx === initialItemIndex));
      }
      requestAnimationFrame(() => {
        container.scrollTop = initialScrollTop;
      });
      let isScrolling = false;
      container.addEventListener("scroll", () => {
        if (isScrolling)
          return;
        const scrollTop = container.scrollTop;
        const currentIndex = Math.round(scrollTop / itemHeight);
        const realIndex = (currentIndex % values.length + values.length) % values.length;
        const realValue = values[realIndex];
        container.querySelectorAll(".date-wheel-item").forEach((item, index) => {
          const itemRealIndex = index % values.length;
          item.classList.toggle("selected", itemRealIndex === realIndex);
        });
        selectedIndex = realIndex;
        currentSelectedValue = realValue;
        api.selectedValue = realValue;
        if (onChange) {
          onChange(currentSelectedValue);
        }
        const maxScrollTop = (repeatCount - 1) * values.length * itemHeight;
        const minScrollTop = values.length * itemHeight;
        if (scrollTop >= maxScrollTop) {
          isScrolling = true;
          const offset = scrollTop - maxScrollTop;
          container.scrollTop = values.length * itemHeight + offset;
          setTimeout(() => {
            isScrolling = false;
          }, 50);
        } else if (scrollTop <= 0) {
          isScrolling = true;
          const offset = scrollTop;
          container.scrollTop = (repeatCount - 2) * values.length * itemHeight + offset;
          setTimeout(() => {
            isScrolling = false;
          }, 50);
        }
      });
      container.addEventListener("click", (ev) => {
        const target = ev.target;
        const itemEl = target && target.closest ? target.closest(".date-wheel-item") : null;
        if (!itemEl)
          return;
        const clickedIndex = Number(itemEl.dataset.index || "0");
        const realIndex = (clickedIndex % values.length + values.length) % values.length;
        const middleIndex = middleGroupIndex * values.length + realIndex;
        container.scrollTop = middleIndex * itemHeight;
        selectedIndex = realIndex;
        currentSelectedValue = values[realIndex];
        api.selectedValue = currentSelectedValue;
        if (onChange)
          onChange(currentSelectedValue);
      });
    } else {
      values.forEach((value, index) => {
        const item = document.createElement("div");
        item.className = "date-wheel-item";
        item.textContent = `${value.toString().padStart(2, "0")}${suffix}`;
        item.dataset.value = value.toString();
        item.dataset.index = index.toString();
        if (value === currentSelectedValue) {
          item.classList.add("selected");
        }
        container.appendChild(item);
      });
      container.addEventListener("scroll", () => {
        const scrollTop = container.scrollTop;
        const newIndex = Math.round(scrollTop / itemHeight);
        if (newIndex !== selectedIndex && newIndex >= 0 && newIndex < values.length) {
          container.querySelectorAll(".date-wheel-item").forEach((item, index) => {
            item.classList.toggle("selected", index === newIndex);
          });
          selectedIndex = newIndex;
          currentSelectedValue = values[newIndex];
          api.selectedValue = currentSelectedValue;
          if (onChange) {
            onChange(currentSelectedValue);
          }
        }
      });
      container.addEventListener("click", (ev) => {
        const target = ev.target;
        const itemEl = target && target.closest ? target.closest(".date-wheel-item") : null;
        if (!itemEl)
          return;
        const idx = Number(itemEl.dataset.index || "0");
        container.querySelectorAll(".date-wheel-item").forEach((el, i) => {
          el.classList.toggle("selected", i === idx);
        });
        container.scrollTop = idx * itemHeight;
        selectedIndex = idx;
        currentSelectedValue = values[idx];
        api.selectedValue = currentSelectedValue;
        if (onChange)
          onChange(currentSelectedValue);
      });
      setTimeout(() => {
        container.scrollTop = selectedIndex * itemHeight;
      }, 0);
    }
    column.appendChild(container);
    return api;
  }
  // 更新日期列
  updateDaysColumn(dayColumn, year, month) {
    const container = dayColumn.element.querySelector(".date-wheel-items");
    const currentDay = dayColumn.selectedValue;
    const newDays = this.generateDays(year, month);
    if (container.empty) {
      container.empty();
    } else {
      while (container.firstChild)
        container.removeChild(container.firstChild);
    }
    const maxDay = Math.max(...newDays);
    const selectedDay = Math.min(currentDay, maxDay);
    const selectedIndex = newDays.indexOf(selectedDay);
    const itemHeight = 40;
    const repeatCount = 5;
    const totalItems = newDays.length * repeatCount;
    const middleGroupIndex = 2;
    const initialScrollTop = middleGroupIndex * newDays.length * itemHeight + selectedIndex * itemHeight;
    for (let repeat = 0; repeat < repeatCount; repeat++) {
      newDays.forEach((day, index) => {
        const item = document.createElement("div");
        item.className = "date-wheel-item";
        item.textContent = `${day.toString().padStart(2, "0")}\u65E5`;
        item.dataset.value = day.toString();
        item.dataset.index = (repeat * newDays.length + index).toString();
        item.dataset.realValue = day.toString();
        container.appendChild(item);
      });
    }
    container.style.height = `${totalItems * itemHeight}px`;
    const initialItemIndexDay = middleGroupIndex * newDays.length + selectedIndex;
    const dayItems = Array.from(container.querySelectorAll(".date-wheel-item"));
    if (dayItems[initialItemIndexDay]) {
      dayItems.forEach((el, idx) => el.classList.toggle("selected", idx === initialItemIndexDay));
    }
    requestAnimationFrame(() => {
      container.scrollTop = initialScrollTop;
    });
    dayColumn.selectedValue = selectedDay;
    let isScrolling = false;
    container.addEventListener("scroll", () => {
      if (isScrolling)
        return;
      const scrollTop = container.scrollTop;
      const currentIndex = Math.round(scrollTop / itemHeight);
      const realIndex = currentIndex % newDays.length;
      const realValue = newDays[realIndex];
      container.querySelectorAll(".date-wheel-item").forEach((item, index) => {
        const itemRealIndex = index % newDays.length;
        item.classList.toggle("selected", itemRealIndex === realIndex);
      });
      dayColumn.selectedValue = realValue;
      const maxScrollTop = (repeatCount - 1) * newDays.length * itemHeight;
      const minScrollTop = newDays.length * itemHeight;
      if (scrollTop >= maxScrollTop) {
        isScrolling = true;
        const offset = scrollTop - maxScrollTop;
        container.scrollTop = newDays.length * itemHeight + offset;
        setTimeout(() => {
          isScrolling = false;
        }, 50);
      } else if (scrollTop <= 0) {
        isScrolling = true;
        const offset = scrollTop;
        container.scrollTop = (repeatCount - 2) * newDays.length * itemHeight + offset;
        setTimeout(() => {
          isScrolling = false;
        }, 50);
      }
    });
  }
};

// components/AssetManagerView.ts
init_i18n();
var AssetManagerView = class extends import_obsidian3.ItemView {
  constructor(leaf, assetRepository, filePath) {
    super(leaf);
    this.assets = [];
    // 当前选择的日期
    this.selectedTags = [];
    // 顶部统计下方的按钮卡片
    this.searchQuery = "";
    this.sortMode = "none";
    this.assetRepository = assetRepository;
    this.filePath = filePath;
    this.selectedDate = new Date();
  }
  getViewType() {
    return "lac-costset-view";
  }
  getDisplayText() {
    return "LaC.CostSet";
  }
  getIcon() {
    return "package";
  }
  async onOpen() {
    var _a, _b;
    const { containerEl } = this;
    containerEl.empty();
    containerEl.addClass("page-root");
    this.injectHeaderFixStyles();
    try {
      const plugin = (_b = (_a = this.app.plugins) == null ? void 0 : _a.plugins) == null ? void 0 : _b["lac-costset"];
      if (plugin && plugin.settings && plugin.settings.defaultSort) {
        this.sortMode = plugin.settings.defaultSort;
      }
    } catch (_) {
    }
    if (this.filePath) {
      this.useFile(this.filePath);
      return;
    }
    const hint = containerEl.createDiv();
    hint.style.padding = "16px";
    hint.style.opacity = "0.8";
    hint.textContent = t("view.hint.openFromMenu");
    return;
  }
  async onClose() {
    const { containerEl } = this;
    containerEl.empty();
    try {
      this.closeExistingSortMenu();
    } catch (_) {
    }
    ["lac-costset-actionbar-styles", "lac-costset-header-styles"].forEach((id) => {
      const el = document.getElementById(id);
      if (el && el.parentElement)
        el.parentElement.removeChild(el);
    });
  }
  async useFile(filePath) {
    const plugin = this.app.plugins.plugins["lac-costset"];
    if (plugin) {
      plugin.assetRepository = new AssetRepository(this.app, filePath);
      this.assetRepository = plugin.assetRepository;
      this.loadAssets();
    }
  }
  async loadAssets() {
    this.assets = await this.assetRepository.loadAll();
    this.renderAssets();
  }
  showFileSelector() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: t("view.selectRoot.title") });
    containerEl.createEl("p", { text: t("view.selectRoot.desc") });
    const files = this.app.vault.getMarkdownFiles();
    const fileList = containerEl.createDiv("file-list");
    files.forEach((file) => {
      const fileItem = fileList.createDiv("file-item");
      fileItem.createEl("div", { text: file.path });
      fileItem.addEventListener("click", async () => {
        const plugin = this.app.plugins.plugins["lac-costset"];
        if (plugin) {
          plugin.assetRepository = new AssetRepository(this.app, file.path);
          this.assetRepository = plugin.assetRepository;
          this.loadAssets();
        }
      });
    });
  }
  renderAssets() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.addClass("page-root");
    this.renderTopSummary(containerEl);
    this.renderActionBar(containerEl);
    const assetsContainer = containerEl.createDiv("assets-container");
    this.renderAssetCards(assetsContainer);
  }
  renderAssetCards(assetsContainer) {
    assetsContainer.empty();
    if (this.assets.length === 0) {
      assetsContainer.createEl("p", { text: t("view.empty") });
      return;
    }
    const calcDate = this.selectedDate || new Date();
    let visibleAssets = this.assets.filter((a) => a.activeFrom <= calcDate);
    if (this.selectedTags.length > 0) {
      visibleAssets = visibleAssets.filter((a) => {
        var _a;
        return (_a = a.tags) == null ? void 0 : _a.some((t2) => this.selectedTags.includes(t2));
      });
    }
    if (this.searchQuery && this.searchQuery.trim()) {
      const q = this.searchQuery.trim().toLowerCase();
      visibleAssets = visibleAssets.filter((a) => {
        const nameHit = (a.name || "").toLowerCase().includes(q);
        const tagHit = (a.tags || []).some((t2) => (t2 || "").toLowerCase().includes(q));
        return nameHit || tagHit;
      });
    }
    if (this.sortMode !== "none") {
      visibleAssets = [...visibleAssets].sort((a, b) => {
        var _a, _b, _c, _d;
        if (this.sortMode === "dailyDesc") {
          const aCost = a.getDailyCost(calcDate);
          const bCost = b.getDailyCost(calcDate);
          return bCost - aCost;
        }
        if (this.sortMode === "priceDesc") {
          return Number(b.price || 0) - Number(a.price || 0);
        }
        if (this.sortMode === "dateDesc") {
          const at = ((_b = (_a = a.activeFrom) == null ? void 0 : _a.getTime) == null ? void 0 : _b.call(_a)) || 0;
          const bt = ((_d = (_c = b.activeFrom) == null ? void 0 : _c.getTime) == null ? void 0 : _d.call(_c)) || 0;
          return bt - at;
        }
        return 0;
      });
    }
    visibleAssets.forEach((asset) => {
      const isExpired = !!(asset.activeTo && asset.activeTo <= calcDate);
      const endText = isExpired ? asset.activeTo.toISOString().split("T")[0] : t("view.toNow");
      const assetEl = assetsContainer.createDiv("asset-card");
      if (isExpired)
        assetEl.addClass("asset-card--expired");
      if (asset.hidden)
        assetEl.addClass("hidden");
      const infoEl = assetEl.createDiv("asset-info");
      const titleEl = infoEl.createDiv("asset-title");
      titleEl.textContent = `${asset.icon} ${asset.name}`;
      const dateEl = infoEl.createDiv("asset-date");
      dateEl.textContent = `${t("view.usedDays", { days: asset.getUsageDays(calcDate) })} (${asset.activeFrom.toISOString().split("T")[0]} ~ ${asset.activeTo ? endText : t("view.toNow")})`;
      const labelsScrollEl = infoEl.createDiv("asset-labels-scroll");
      (asset.tags || []).forEach((tag) => {
        const tagEl = labelsScrollEl.createSpan("tag");
        tagEl.textContent = tag;
      });
      const costsEl = assetEl.createDiv("asset-costs");
      const costsLine = costsEl.createDiv("asset-costs-line");
      const priceMeta = costsLine.createDiv("asset-price");
      priceMeta.textContent = `${t("view.daily")}\xA0`;
      const dailyCost = costsLine.createDiv("asset-dailycost");
      dailyCost.textContent = this.getCurrencySymbol() + `${asset.getDailyCost(calcDate).toFixed(2)}`;
      const priceLine = costsEl.createDiv("asset-price");
      priceLine.textContent = `${t("view.price")} ${this.getCurrencySymbol()}${asset.price}`;
      const recycleLine = costsEl.createDiv("asset-price");
      recycleLine.textContent = `${t("view.recyclePrice")} ${this.getCurrencySymbol()}${asset.recyclePrice}`;
      let didLongPress = false;
      let isTouchActive = false;
      let lastTouchTime = 0;
      let lastPointerType = "";
      assetEl.addEventListener("click", (e) => {
        if (didLongPress) {
          didLongPress = false;
          e.preventDefault();
          e.stopPropagation();
          return;
        }
        new AssetFormModal(this.app, this.assetRepository, asset, () => this.loadAssets()).open();
      });
      let pressTimer = null;
      const startPress = (ev) => {
        if (ev && "button" in ev && typeof ev.button === "number" && ev.button !== 0)
          return;
        if (pressTimer)
          window.clearTimeout(pressTimer);
        pressTimer = window.setTimeout(() => {
          didLongPress = true;
          asset.hidden = !asset.hidden;
          assetEl.classList.toggle("hidden", asset.hidden);
          this.refreshTopNumbersOnly();
        }, 500);
      };
      const cancelPress = () => {
        if (pressTimer) {
          window.clearTimeout(pressTimer);
          pressTimer = null;
        }
      };
      assetEl.addEventListener("mousedown", startPress);
      assetEl.addEventListener("pointerdown", (pev) => {
        lastPointerType = pev.pointerType || "";
      });
      const onTouchStart = (ev) => {
        isTouchActive = true;
        lastTouchTime = Date.now();
        startPress(ev);
      };
      assetEl.addEventListener("touchstart", onTouchStart, { passive: true });
      assetEl.addEventListener("mouseup", cancelPress);
      assetEl.addEventListener("mouseleave", cancelPress);
      const onTouchEnd = () => {
        isTouchActive = false;
        cancelPress();
      };
      assetEl.addEventListener("touchend", onTouchEnd);
      assetEl.addEventListener("touchcancel", onTouchEnd);
    });
  }
  // 仅刷新顶部数字 (排除 hidden 资产)，不刷新图表、不重建列表
  refreshTopNumbersOnly() {
    if (!this.topSummaryComponent)
      return;
    const calcDate = this.selectedDate || new Date();
    const activeAssets = this.assets.filter((a) => a.isActive(calcDate) && !a.hidden);
    const filteredActiveAssets = this.applyTagFilter(activeAssets);
    const totalCost = filteredActiveAssets.reduce((sum, a) => sum + a.price, 0);
    const totalRecycle = filteredActiveAssets.reduce((sum, a) => sum + a.recyclePrice, 0);
    const totalDailyCost = filteredActiveAssets.reduce((sum, a) => sum + a.getDailyCost(calcDate), 0);
    this.topSummaryComponent.updateNumbers(totalDailyCost, totalCost, totalRecycle);
  }
  // 顶部统计下方的操作条（搜索 / 排序 / 添加）
  renderActionBar(containerEl) {
    this.injectActionBarStyles();
    const bar = containerEl.createDiv("lac-actionbar-card");
    this.actionBarEl = bar;
    const backBtn = bar.createDiv({ cls: "lac-icon-btn back", attr: { title: t("view.back") } });
    backBtn.appendChild(this.svgBack());
    backBtn.addEventListener("click", (e) => {
      e.preventDefault();
      try {
        this.leaf.detach();
      } catch (_) {
      }
    });
    const searchWrap = bar.createDiv("lac-actionbar-search");
    const searchIconBtn = searchWrap.createEl("button", { cls: "lac-icon-btn search-icon", attr: { type: "button", "aria-label": t("view.search.aria") } });
    searchIconBtn.appendChild(this.svgSearch());
    const searchInput = searchWrap.createEl("input", { attr: { type: "text", placeholder: t("view.search.placeholder") } });
    if (this.searchQuery)
      searchInput.value = this.searchQuery;
    searchIconBtn.addEventListener("click", () => searchInput.focus());
    searchInput.addEventListener("input", () => {
      this.searchQuery = searchInput.value || "";
      this.refreshAssetListOnly();
    });
    const actions = bar.createDiv("lac-actionbar-actions");
    const sortBtn = actions.createDiv({ cls: "lac-icon-btn sort", attr: { title: t("view.sort.title") } });
    sortBtn.appendChild(this.svgSort());
    const applySortBtnState = () => {
      sortBtn.classList.toggle("active", this.sortMode !== "none");
      sortBtn.setAttr("data-mode", this.sortMode);
      sortBtn.setAttr("aria-pressed", String(this.sortMode !== "none"));
      const title = this.sortMode === "dailyDesc" ? t("view.sort.title.dailyDesc") : this.sortMode === "priceDesc" ? t("view.sort.title.priceDesc") : this.sortMode === "dateDesc" ? t("view.sort.title.dateDesc") : t("view.sort.title");
      sortBtn.setAttr("title", title);
    };
    applySortBtnState();
    sortBtn.addEventListener("click", (e) => {
      e.preventDefault();
      this.openSortMenu(sortBtn, (mode) => {
        this.sortMode = mode;
        applySortBtnState();
        this.refreshAssetListOnly();
      });
    });
    const addBtn = actions.createDiv({ cls: "lac-icon-btn add", attr: { title: t("view.add") } });
    addBtn.appendChild(this.svgPlus());
    addBtn.addEventListener("click", () => {
      new AssetFormModal(this.app, this.assetRepository, void 0, () => this.loadAssets()).open();
    });
  }
  refreshAssetListOnly() {
    const { containerEl } = this;
    const listEl = containerEl.querySelector(".assets-container");
    if (listEl) {
      listEl.remove();
      const newList = containerEl.createDiv("assets-container");
      this.renderAssetCards(newList);
    }
  }
  injectActionBarStyles() {
    const STYLE_ID = "lac-costset-actionbar-styles";
    if (document.getElementById(STYLE_ID))
      return;
    const style = document.createElement("style");
    style.id = STYLE_ID;
    style.textContent = `
			/* \u6309\u94AE\u5361\u7247\uFF1A\u4E0E top-summary / asset-card \u540C\u98CE\u683C\uFF0C\u4EC5\u9AD8\u5EA6\u66F4\u5C0F */
			.lac-actionbar-card { display: flex; align-items: center; justify-content: space-between; gap: 10px; padding: 6px 10px; margin: 0px 14px 8px; border-radius: 8px; background: #23262F; box-shadow: 0 2px 8px rgba(0,0,0,0.18); }
			.lac-actionbar-search { position: relative; flex: 1; min-width: 0; }
			.lac-actionbar-search input { width: 100%; height: 30px; padding: 4px 8px 4px 30px; border-radius: 8px; border: 1px solid #3A3D46; background: #2A2D36; color: #F5F6FA; font-size: 13px; line-height: 20px; }
			.lac-actionbar-search input::placeholder { color: #A0A3B1; }
			.lac-actionbar-search .search-icon { position: absolute; left: 8px; top: 50%; transform: translateY(-50%); width: 16px; height: 16px; padding: 0; border: none; background: transparent; color: #C9CBD3; }
			.lac-actionbar-actions { display: flex; align-items: center; gap: 8px; }
			.lac-icon-btn { width: 32px; height: 32px; display: inline-flex; align-items: center; justify-content: center; border-radius: 8px; border: none !important; outline: none !important; background: transparent !important; box-shadow: none !important; color: #C9CBD3; cursor: pointer; }
			.lac-icon-btn.add { color: #f3e700; }
			.lac-icon-btn.back { display: inline-flex; color: #C9CBD3; }
			.lac-icon-btn:hover { filter: brightness(1.05); }
			.lac-icon-btn svg { width: 20px; height: 20px; display:block; }
			.lac-icon-btn svg * { stroke: currentColor !important; fill: none !important; stroke-width: 2 !important; }
			.lac-icon-btn.active { background: #2F3139; }
			/* \u9690\u85CF\u6001\u6837\u5F0F\uFF08\u5BF9\u9F50 costsetapp\uFF09 */
			.asset-card.hidden { opacity: 0.3; filter: grayscale(0.5); }
            /* \u6392\u5E8F\u83DC\u5355 */
            .lac-sort-menu { position: fixed; min-width: 160px; background: #23262F; color: #F5F6FA; border-radius: 10px; overflow: hidden; box-shadow: 0 8px 18px rgba(0,0,0,0.35); border: 1px solid #3A3D46; z-index: 9999; }
            .lac-sort-menu .menu-item { padding: 10px 14px; cursor: pointer; border-top: 1px solid #2E313A; transition: background 120ms ease, color 120ms ease; }
            .lac-sort-menu .menu-item:first-child { border-top: none; }
            .lac-sort-menu .menu-item:hover { background: rgba(255, 214, 0, 0.12); color: inherit; }
            .lac-sort-menu .menu-item.active { color: #FFD700; }

			/* \u5C0F\u4E8E 720px \u65F6\u7D27\u51D1\u5E03\u5C40 */
			@media (max-width: 720px) {
				.lac-actionbar-card { gap: 8px; }
				.lac-actionbar-search input { padding-left: 30px; }
			}
		`;
    document.head.appendChild(style);
  }
  injectHeaderFixStyles() {
    const STYLE_ID = "lac-costset-header-styles";
    if (document.getElementById(STYLE_ID))
      return;
    const style = document.createElement("style");
    style.id = STYLE_ID;
    style.textContent = `
			/* \u4EC5\u4F5C\u7528\u4E8E\u672C\u89C6\u56FE\uFF1A\u4FDD\u8BC1\u7A84\u5BBD\u65F6\u4E5F\u663E\u793A\u6807\u9898\u680F\u83DC\u5355/\u8FD4\u56DE\u533A\u57DF */
			.workspace-leaf[data-type="lac-costset-view"] .view-header {
				display: flex !important;
				align-items: center !important;
				flex-wrap: nowrap !important;
				visibility: visible !important;
				height: auto !important;
				min-height: 36px !important;
			}
			.workspace-leaf[data-type="lac-costset-view"] .view-header-title-container { min-width: 0 !important; display: flex !important; }
			.workspace-leaf[data-type="lac-costset-view"] .view-header-title { flex: 1 1 auto !important; min-width: 0 !important; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
			.workspace-leaf[data-type="lac-costset-view"] .view-header .view-actions { flex: 0 0 auto !important; display: inline-flex !important; gap: 6px; visibility: visible !important; }
			@media (max-width: 720px) {
				.workspace-leaf[data-type="lac-costset-view"] .view-header-title { max-width: 45%; }
			}
			@media (max-width: 560px) {
				.workspace-leaf[data-type="lac-costset-view"] .view-header-title { max-width: 35%; }
			}
		`;
    document.head.appendChild(style);
  }
  openSortMenu(anchorEl, onSelect) {
    this.closeExistingSortMenu();
    const rect = anchorEl.getBoundingClientRect();
    const menu = document.createElement("div");
    menu.className = "lac-sort-menu";
    const buildItem = (label, value) => {
      const item = document.createElement("div");
      item.className = "menu-item" + (this.sortMode === value ? " active" : "");
      item.textContent = label;
      item.addEventListener("click", (ev) => {
        ev.stopPropagation();
        const next = this.sortMode === value ? "none" : value;
        onSelect(next);
        this.closeExistingSortMenu();
      });
      return item;
    };
    menu.appendChild(buildItem(t("view.sort.menu.dailyDesc"), "dailyDesc"));
    menu.appendChild(buildItem(t("view.sort.menu.priceDesc"), "priceDesc"));
    menu.appendChild(buildItem(t("view.sort.menu.dateDesc"), "dateDesc"));
    document.body.appendChild(menu);
    const top = rect.bottom + 6;
    const left = Math.min(Math.max(8, rect.left), window.innerWidth - 180);
    menu.style.top = `${top}px`;
    menu.style.left = `${left}px`;
    const onDocClick = (ev) => {
      if (!menu.contains(ev.target))
        this.closeExistingSortMenu();
    };
    const onEsc = (ev) => {
      if (ev.key === "Escape")
        this.closeExistingSortMenu();
    };
    this.registerDomEvent(document, "mousedown", onDocClick, { once: true });
    this.registerDomEvent(document, "keydown", onEsc, { once: true });
    menu._cleanup = void 0;
  }
  // 让视图可被 setViewState 恢复与导航：保存/应用状态
  getState() {
    return { filePath: this.filePath };
  }
  async setState(state, result) {
    const nextPath = state == null ? void 0 : state.filePath;
    if (nextPath && nextPath !== this.filePath) {
      this.filePath = nextPath;
      await this.useFile(nextPath);
      return;
    }
    const { containerEl } = this;
    containerEl.empty();
    containerEl.addClass("page-root");
    const hint = containerEl.createDiv();
    hint.style.padding = "16px";
    hint.style.opacity = "0.8";
    hint.textContent = "\u4ECE\u6587\u4EF6\u7684\u53F3\u952E\u83DC\u5355\u4E2D\u9009\u62E9 \u201C\u7528 LaC.CostSet \u6253\u5F00\u201D\u3002";
  }
  closeExistingSortMenu() {
    const existing = document.querySelector(".lac-sort-menu");
    if (existing) {
      const cleanup = existing._cleanup;
      if (cleanup)
        cleanup();
      existing.remove();
    }
  }
  svgSearch() {
    const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
    svg.setAttribute("viewBox", "0 0 24 24");
    svg.setAttribute("fill", "none");
    const circle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
    circle.setAttribute("cx", "11");
    circle.setAttribute("cy", "11");
    circle.setAttribute("r", "7");
    circle.setAttribute("stroke", "currentColor");
    circle.setAttribute("stroke-width", "2");
    svg.appendChild(circle);
    const line = document.createElementNS("http://www.w3.org/2000/svg", "line");
    line.setAttribute("x1", "20");
    line.setAttribute("y1", "20");
    line.setAttribute("x2", "16.65");
    line.setAttribute("y2", "16.65");
    line.setAttribute("stroke", "currentColor");
    line.setAttribute("stroke-width", "2");
    line.setAttribute("stroke-linecap", "round");
    svg.appendChild(line);
    return svg;
  }
  svgPlus() {
    const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
    svg.setAttribute("viewBox", "0 0 24 24");
    svg.setAttribute("fill", "none");
    const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
    path.setAttribute("d", "M12 5v14M5 12h14");
    path.setAttribute("stroke", "currentColor");
    path.setAttribute("stroke-width", "2");
    path.setAttribute("stroke-linecap", "round");
    svg.appendChild(path);
    return svg;
  }
  svgSort() {
    const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
    svg.setAttribute("viewBox", "0 0 24 24");
    svg.setAttribute("fill", "none");
    const p1 = document.createElementNS("http://www.w3.org/2000/svg", "path");
    p1.setAttribute("d", "M8 9l4-4 4 4");
    p1.setAttribute("stroke", "currentColor");
    p1.setAttribute("stroke-width", "2");
    p1.setAttribute("stroke-linecap", "round");
    p1.setAttribute("stroke-linejoin", "round");
    svg.appendChild(p1);
    const p2 = document.createElementNS("http://www.w3.org/2000/svg", "path");
    p2.setAttribute("d", "M16 15l-4 4-4-4");
    p2.setAttribute("stroke", "currentColor");
    p2.setAttribute("stroke-width", "2");
    p2.setAttribute("stroke-linecap", "round");
    p2.setAttribute("stroke-linejoin", "round");
    svg.appendChild(p2);
    return svg;
  }
  svgBack() {
    const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
    svg.setAttribute("viewBox", "0 0 24 24");
    svg.setAttribute("fill", "none");
    const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
    path.setAttribute("d", "M15 18l-6-6 6-6");
    path.setAttribute("stroke", "currentColor");
    path.setAttribute("stroke-width", "2");
    path.setAttribute("stroke-linecap", "round");
    path.setAttribute("stroke-linejoin", "round");
    svg.appendChild(path);
    return svg;
  }
  renderTopSummary(containerEl) {
    const calcDate = this.selectedDate || new Date();
    const activeAssets = this.assets.filter((asset) => asset.isActive(calcDate) && !asset.hidden);
    const filteredActiveAssets = this.applyTagFilter(activeAssets);
    const totalCost = filteredActiveAssets.reduce((sum, asset) => sum + asset.price, 0);
    const totalRecycle = filteredActiveAssets.reduce((sum, asset) => sum + asset.recyclePrice, 0);
    const totalDailyCost = filteredActiveAssets.reduce((sum, asset) => sum + asset.getDailyCost(calcDate), 0);
    const allTags = /* @__PURE__ */ new Set();
    this.assets.forEach((asset) => {
      (asset.tags || []).forEach((tag) => allTags.add(tag));
    });
    const collator = new Intl.Collator("zh", { sensitivity: "base", numeric: true });
    const tagsArray = Array.from(allTags).sort((a, b) => collator.compare(a, b));
    const currentYear = new Date().getFullYear();
    const maxYear = currentYear + 7;
    let minYear = currentYear;
    if (this.assets.length > 0) {
      const earliestYear = Math.min(...this.assets.map((asset) => asset.activeFrom.getFullYear()));
      minYear = earliestYear;
    }
    const trendPoints = this.calcTrendPoints(filteredActiveAssets, 30);
    console.log("\u6E32\u67D3\u9876\u90E8\u7EDF\u8BA1\u533A\u57DF:", {
      activeAssets: activeAssets.length,
      totalCost,
      totalRecycle,
      totalDailyCost,
      tagsArray,
      yearRange: { minYear, maxYear }
    });
    const topSummaryEl = containerEl.createDiv();
    const topSummaryProps = {
      totalDailyCost,
      totalCost,
      totalRecycle,
      tags: tagsArray,
      selectedTags: this.selectedTags,
      onTagClick: (tag) => {
        if (Array.isArray(tag)) {
          this.selectedTags = [...new Set(tag)];
        } else {
          if (this.selectedTags.includes(tag)) {
            this.selectedTags = this.selectedTags.filter((t2) => t2 !== tag);
          } else {
            this.selectedTags = [...this.selectedTags, tag];
          }
        }
        this.renderAssets();
      },
      trendPoints,
      selectedDate: this.selectedDate,
      onChartSelect: (x) => {
        console.log("\u56FE\u8868\u9009\u62E9:", x);
      },
      onChartWidth: (w) => {
        console.log("\u56FE\u8868\u5BBD\u5EA6:", w);
      },
      onDatePick: (dateStr) => {
        console.log("\u65E5\u671F\u9009\u62E9:", dateStr);
        const selectedDate = new Date(dateStr);
        this.selectedDate = selectedDate;
        if (this.topSummaryComponent) {
          this.topSummaryComponent.updateSelection(null, selectedDate);
          const calcDate2 = selectedDate;
          const activeAssets2 = this.assets.filter((asset) => asset.isActive(calcDate2) && !asset.hidden);
          const filteredActiveAssets2 = this.applyTagFilter(activeAssets2);
          const totalCost2 = filteredActiveAssets2.reduce((sum, asset) => sum + asset.price, 0);
          const totalRecycle2 = filteredActiveAssets2.reduce((sum, asset) => sum + asset.recyclePrice, 0);
          const totalDailyCost2 = filteredActiveAssets2.reduce((sum, asset) => sum + asset.getDailyCost(calcDate2), 0);
          this.topSummaryComponent.updateNumbers(totalDailyCost2, totalCost2, totalRecycle2);
        }
        const { containerEl: containerEl2 } = this;
        const listEl = containerEl2.querySelector(".assets-container");
        if (listEl) {
          listEl.remove();
          const newList = containerEl2.createDiv("assets-container");
          this.renderAssetCards(newList);
        } else {
          this.renderAssets();
        }
      },
      minYear,
      maxYear
    };
    this.topSummaryComponent = new TopSummary(topSummaryEl, topSummaryProps);
    this.topSummaryComponent.render();
    this.renderChartWithProgressiveRefinement(filteredActiveAssets);
    console.log("\u9876\u90E8\u7EDF\u8BA1\u533A\u57DF\u5DF2\u521B\u5EFA:", topSummaryEl);
  }
  getCurrencySymbol() {
    return t("currency.symbol");
  }
  // 渐进式细化渲染（参考costsetapp实现）
  renderChartWithProgressiveRefinement(assets) {
    if (assets.length === 0)
      return;
    let maxActiveTo = 0;
    assets.forEach((a) => {
      const to = a.activeTo;
      if (to) {
        const t2 = to.getTime();
        if (t2 && t2 > maxActiveTo)
          maxActiveTo = t2;
      }
    });
    const now = new Date();
    const maxDate = maxActiveTo && maxActiveTo > now.getTime() ? new Date(maxActiveTo) : now;
    const initialPoints = this.calcTrendPoints(assets, 30, void 0, maxDate);
    if (this.topSummaryComponent) {
      this.topSummaryComponent.updateChart(initialPoints);
    }
    setTimeout(async () => {
      const segPromises = [];
      for (let i = 0; i < initialPoints.length - 1; i++) {
        segPromises.push(
          Promise.resolve(this.calcTrendPoints(assets, 30, initialPoints[i].date, initialPoints[i + 1].date)).then((segPoints) => {
            if (i > 0)
              return segPoints.slice(1);
            return segPoints;
          })
        );
      }
      const segResults = await Promise.all(segPromises);
      const finePoints = segResults.flat();
      if (this.topSummaryComponent) {
        this.topSummaryComponent.updateChart(finePoints);
      }
    }, 500);
  }
  // 将标签筛选应用到给定资产集
  applyTagFilter(input) {
    if (!this.selectedTags || this.selectedTags.length === 0)
      return input;
    return input.filter((a) => {
      var _a;
      return (_a = a.tags) == null ? void 0 : _a.some((t2) => this.selectedTags.includes(t2));
    });
  }
  calcTrendPoints(assets, count, fromDate, toDate) {
    if (assets.length === 0)
      return [];
    const now = new Date();
    const minDate = fromDate || new Date(Math.min(...assets.map((a) => a.activeFrom.getTime())));
    const maxActiveTo = Math.max(...assets.map((a) => {
      const to = a.activeTo;
      if (to) {
        const t2 = to.getTime();
        if (!isNaN(t2))
          return t2;
      }
      return now.getTime();
    }));
    const maxDate = toDate || new Date(maxActiveTo);
    const points = [];
    for (let i = 0; i < count; i++) {
      const t2 = minDate.getTime() + (maxDate.getTime() - minDate.getTime()) * i / (count - 1);
      const date = new Date(t2);
      let totalCost = 0;
      assets.forEach((a) => {
        const cost = this.calcDailyCost(a.price, a.recyclePrice, a.activeFrom, a.activeTo, date);
        if (isFinite(cost))
          totalCost += cost;
      });
      points.push({ date, value: totalCost });
    }
    return points;
  }
  // 计算日均成本（参考costsetapp算法）
  calcDailyCost(price, recycle, from, to, now) {
    if (!from)
      return 0;
    const days = Math.floor((now.getTime() - from.getTime()) / 864e5) + 1;
    if (!to || to > now) {
      recycle = 0;
    }
    if (!isFinite(days) || days <= 0)
      return 0;
    const result = (Number(price) - Number(recycle || 0)) / days;
    return isFinite(result) ? result : 0;
  }
};

// components/settings/LacCostSetSettingTab.ts
var import_obsidian4 = require("obsidian");
init_i18n();
var LacCostSetSettingTab = class extends import_obsidian4.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: t("settings.title") });
    containerEl.createEl("p", { text: t("settings.guide.1"), cls: "setting-item-description" });
    const entryExample = t("settings.entry.example");
    containerEl.createEl("pre", { text: entryExample, cls: "setting-item-description" });
    containerEl.createEl("p", { text: t("settings.asset.desc"), cls: "setting-item-description" });
    const assetExample = t("settings.asset.example");
    containerEl.createEl("pre", { text: assetExample, cls: "setting-item-description" });
    containerEl.createEl("p", { text: t("settings.usage"), cls: "setting-item-description" });
    new import_obsidian4.Setting(containerEl).setName(t("settings.entryFile.name")).setDesc(t("settings.entryFile.desc")).addText((text) => text.setPlaceholder("LaC/CostSet/costset.md").setValue(this.plugin.settings.entryFile || "LaC/CostSet/costset.md").onChange(async (value) => {
      this.plugin.settings.entryFile = (value == null ? void 0 : value.trim()) || "LaC/CostSet/costset.md";
      await this.plugin.saveSettings();
      this.plugin.assetRepository = new AssetRepository(this.app, this.plugin.settings.entryFile);
    }));
    new import_obsidian4.Setting(containerEl).setName(t("settings.contextMenu.name")).setDesc(t("settings.contextMenu.desc")).addToggle((toggle) => toggle.setValue(this.plugin.settings.enableContextMenu).onChange(async (value) => {
      this.plugin.settings.enableContextMenu = !!value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian4.Setting(containerEl).setName(t("settings.defaultSort.name")).setDesc(t("settings.defaultSort.desc")).addDropdown((drop) => {
      drop.addOption("none", t("settings.defaultSort.option.none"));
      drop.addOption("dailyDesc", t("settings.defaultSort.option.dailyDesc"));
      drop.addOption("priceDesc", t("settings.defaultSort.option.priceDesc"));
      drop.addOption("dateDesc", t("settings.defaultSort.option.dateDesc"));
      drop.setValue(this.plugin.settings.defaultSort || "none");
      drop.onChange(async (value) => {
        const v = value;
        this.plugin.settings.defaultSort = v;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian4.Setting(containerEl).setName(t("settings.defaultIcon.name")).setDesc(t("settings.defaultIcon.desc")).addText((text) => {
      const sanitizeToFirstEmoji = (input) => {
        const m = (input || "").match(/[\uD800-\uDBFF][\uDC00-\uDFFF]/);
        return m ? m[0] : "";
      };
      text.setPlaceholder(t("settings.defaultIcon.placeholder")).setValue(this.plugin.settings.defaultIcon).onChange(async (value) => {
        const first = sanitizeToFirstEmoji(value);
        if (text.inputEl && text.inputEl.value !== first) {
          text.inputEl.value = first;
        }
        this.plugin.settings.defaultIcon = first;
        await this.plugin.saveSettings();
      });
      const inputEl = text.inputEl;
      if (inputEl) {
        inputEl.addEventListener("paste", () => {
          setTimeout(() => {
            const first = sanitizeToFirstEmoji(inputEl.value || "");
            if (inputEl.value !== first)
              inputEl.value = first;
            this.plugin.settings.defaultIcon = first;
            this.plugin.saveSettings();
          }, 0);
        });
      }
    });
    new import_obsidian4.Setting(containerEl).setName(t("settings.locale.name")).setDesc(t("settings.locale.desc")).addDropdown((drop) => {
      drop.addOption("auto", t("settings.locale.option.auto"));
      drop.addOption("zh", "\u4E2D\u6587");
      drop.addOption("en", "English");
      drop.setValue(this.plugin.settings.locale || "auto");
      drop.onChange(async (value) => {
        this.plugin.settings.locale = value;
        await this.plugin.saveSettings();
        this.display();
      });
    });
  }
};

// main.ts
var LacCostSetPlugin = class extends import_obsidian5.Plugin {
  async onload() {
    await this.loadSettings();
    setLocale(this.settings.locale || "auto");
    this.assetRepository = new AssetRepository(this.app, this.settings.entryFile || "LaC/CostSet/costset.md");
    this.registerView("lac-costset-view", (leaf) => new AssetManagerView(leaf, this.assetRepository));
    this.registerEvent(
      this.app.workspace.on("file-menu", (menu, file) => {
        if (!this.settings.enableContextMenu)
          return;
        if (file instanceof import_obsidian5.TFile && file.extension === "md") {
          menu.addItem((item) => {
            item.setTitle(t("menu.openWith")).setIcon("package").onClick(() => {
              const leaf = this.app.workspace.getLeaf("tab");
              leaf.setViewState({
                type: "lac-costset-view",
                state: { filePath: file.path },
                active: true
              });
              this.app.workspace.revealLeaf(leaf);
            });
          });
        }
      })
    );
    this.addCommand({
      id: "open-lac-costset",
      name: t("command.open"),
      callback: async () => {
        const entryPath = this.settings.entryFile || "LaC/CostSet/costset.md";
        const ensureFolderExists = async (folderPath) => {
          const folder = this.app.vault.getAbstractFileByPath(folderPath);
          if (!folder) {
            await this.app.vault.createFolder(folderPath);
          }
        };
        const entryFile = this.app.vault.getAbstractFileByPath(entryPath);
        if (!entryFile) {
          const parts = entryPath.split("/");
          const folderPath = parts.slice(0, -1).join("/") || "";
          if (folderPath)
            await ensureFolderExists(folderPath);
          const sampleEntry = `# LaC.CostSet \u5165\u53E3

# \u4EE5\u4E0B\u4E3A\u5165\u53E3\u5143\u6570\u636E\uFF08TOML\uFF09
# \u8981\u6C42\uFF1Atype = "root" \u4E14 renders \u5305\u542B "costset"

type = "root"
renders = ["costset"]

# \u4EE5\u4E0B\u4E3A\u793A\u4F8B\u8D44\u4EA7\uFF0C\u60A8\u53EF\u4EE5\u5220\u9664\u5E76\u66FF\u6362\u4E3A\u81EA\u5DF1\u7684\u8D44\u4EA7\uFF1A

[[\u6F14\u793A-\u952E\u76D8]]
[[\u6F14\u793A-\u8033\u673A]]
[[\u6F14\u793A-\u8DEF\u7531\u5668]]
`;
          await this.app.vault.create(entryPath, sampleEntry);
          const makeAssetToml = (name, icon, price, from, to, recycle, tags) => {
            const lines = [];
            lines.push(`name = "${name}"`);
            lines.push("");
            lines.push("[style]");
            lines.push(`icon = "${icon}"`);
            lines.push("");
            lines.push("[detail]");
            lines.push(`price = ${price}`);
            lines.push(`active_from = "${from}"`);
            lines.push(`active_to = "${to || ""}"`);
            lines.push(`recycle_price = ${recycle != null ? recycle : 0}`);
            lines.push(`tags = [${(tags || []).map((t2) => `"${t2}"`).join(", ")}]`);
            lines.push("");
            return lines.join("\n");
          };
          const assetsFolder = folderPath || "LaC/CostSet";
          await ensureFolderExists(assetsFolder);
          const assetDefs = [
            { id: "\u6F14\u793A-\u952E\u76D8", icon: "\u2328\uFE0F", price: 399, from: "2024-01-01", to: "", recycle: 0, tags: ["\u6570\u7801", "\u952E\u76D8"] },
            { id: "\u6F14\u793A-\u8033\u673A", icon: "\u{1F3A7}", price: 599, from: "2024-03-15", to: "", recycle: 0, tags: ["\u6570\u7801", "\u8033\u673A"] },
            { id: "\u6F14\u793A-\u8DEF\u7531\u5668", icon: "\u{1F4F6}", price: 329, from: "2023-11-20", to: "", recycle: 50, tags: ["\u7F51\u7EDC"] }
          ];
          for (const a of assetDefs) {
            const filePath = `${assetsFolder}/${a.id}.md`;
            const exists = this.app.vault.getAbstractFileByPath(filePath);
            if (!exists) {
              await this.app.vault.create(filePath, makeAssetToml(a.id, a.icon, a.price, a.from, a.to, a.recycle, a.tags));
            }
          }
        }
        let invalid = false;
        try {
          const f = this.app.vault.getAbstractFileByPath(entryPath);
          if (f && f instanceof import_obsidian5.TFile) {
            const raw = await this.app.vault.read(f);
            const tomlCandidate = raw.replace(/\[\[([^\]]+)\]\]/g, (_m, p1) => `"${String(p1).trim()}"`);
            const hasTomlKv = /(^|\n)\s*[A-Za-z0-9_.]+\s*=\s*[^\n]+/m.test(tomlCandidate);
            const typeMatch = tomlCandidate.match(/(^|\n)\s*type\s*=\s*"([^"]*)"/m);
            const typeVal = (typeMatch == null ? void 0 : typeMatch[2]) || "";
            const rendersMatch = tomlCandidate.match(/(^|\n)\s*renders\s*=\s*\[([\s\S]*?)\]/m);
            let rendersHasCostset = false;
            if (rendersMatch && rendersMatch[2]) {
              const arrText = rendersMatch[2];
              rendersHasCostset = /\"costset\"/i.test(arrText) || /(^|,|\s)costset(,|\s|$)/i.test(arrText);
            }
            invalid = !hasTomlKv || typeVal !== "root" || !rendersHasCostset;
          } else {
            invalid = true;
          }
        } catch (_) {
          invalid = true;
        }
        if (invalid)
          new import_obsidian5.Notice(t("notice.invalidEntry"));
        this.assetRepository = new AssetRepository(this.app, entryPath);
        const leaf = this.app.workspace.getLeaf("tab");
        await leaf.setViewState({
          type: "lac-costset-view",
          state: { filePath: entryPath },
          active: true
        });
        this.app.workspace.revealLeaf(leaf);
      }
    });
    this.addSettingTab(new LacCostSetSettingTab(this.app, this));
    this.addStatusBarItem().setText("Lac-CostSet");
  }
  onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
    setLocale(this.settings.locale || "auto");
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiaTE4bi50cyIsICJtYWluLnRzIiwgInR5cGVzLnRzIiwgInJlcG9zaXRvcmllcy9Bc3NldFJlcG9zaXRvcnkudHMiLCAibW9kZWxzL0Fzc2V0LnRzIiwgImNvbXBvbmVudHMvbW9kYWxzL0Fzc2V0Rm9ybU1vZGFsLnRzIiwgImNvbXBvbmVudHMvbW9kYWxzL0NvbmZpcm1Nb2RhbC50cyIsICJjb21wb25lbnRzL0Fzc2V0TWFuYWdlclZpZXcudHMiLCAiY29tcG9uZW50cy9UYWdQYW5lbC50cyIsICJjb21wb25lbnRzL1RvcFN1bW1hcnkudHMiLCAiY29tcG9uZW50cy9zZXR0aW5ncy9MYWNDb3N0U2V0U2V0dGluZ1RhYi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiZXhwb3J0IHR5cGUgTG9jYWxlU2V0dGluZyA9ICdhdXRvJyB8ICd6aCcgfCAnZW4nO1xyXG5cclxubGV0IGN1cnJlbnRMb2NhbGU6ICd6aCcgfCAnZW4nID0gJ3poJztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZXNvbHZlTG9jYWxlKGxvY2FsZTogTG9jYWxlU2V0dGluZyB8IHVuZGVmaW5lZCk6ICd6aCcgfCAnZW4nIHtcclxuXHRpZiAoIWxvY2FsZSB8fCBsb2NhbGUgPT09ICdhdXRvJykge1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Y29uc3QgbGFuZyA9IChuYXZpZ2F0b3IubGFuZ3VhZ2UgfHwgJycpLnRvTG93ZXJDYXNlKCk7XHJcblx0XHRcdHJldHVybiBsYW5nLnN0YXJ0c1dpdGgoJ3poJykgPyAnemgnIDogJ2VuJztcclxuXHRcdH0gY2F0Y2ggKF8pIHtcclxuXHRcdFx0cmV0dXJuICdlbic7XHJcblx0XHR9XHJcblx0fVxyXG5cdHJldHVybiBsb2NhbGU7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRMb2NhbGUobG9jYWxlOiBMb2NhbGVTZXR0aW5nIHwgJ3poJyB8ICdlbicpOiB2b2lkIHtcclxuXHRjdXJyZW50TG9jYWxlID0gcmVzb2x2ZUxvY2FsZShsb2NhbGUgYXMgYW55KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEN1cnJlbnRMb2NhbGUoKTogJ3poJyB8ICdlbicge1xyXG5cdHJldHVybiBjdXJyZW50TG9jYWxlO1xyXG59XHJcblxyXG50eXBlIERpY3QgPSBSZWNvcmQ8c3RyaW5nLCB7IHpoOiBzdHJpbmc7IGVuOiBzdHJpbmcgfT5cclxuXHJcbmNvbnN0IGRpY3Q6IERpY3QgPSB7XHJcbiAgICAvLyBDdXJyZW5jeVxyXG4gICAgJ2N1cnJlbmN5LnN5bWJvbCc6IHsgemg6ICdcdTAwQTUnLCBlbjogJyQnIH0sXHJcblx0Ly8gQ29tbW9uXHJcblx0J2NvbW1vbi5jb25maXJtJzogeyB6aDogJ1x1Nzg2RVx1NUI5QScsIGVuOiAnQ29uZmlybScgfSxcclxuXHQnY29tbW9uLmNhbmNlbCc6IHsgemg6ICdcdTUzRDZcdTZEODgnLCBlbjogJ0NhbmNlbCcgfSxcclxuXHQnY29tbW9uLmRlbGV0ZSc6IHsgemg6ICdcdTUyMjBcdTk2NjQnLCBlbjogJ0RlbGV0ZScgfSxcclxuXHQnY29tbW9uLnNhdmUnOiB7IHpoOiAnXHU0RkREXHU1QjU4JywgZW46ICdTYXZlJyB9LFxyXG5cdCdjb21tb24uYmFjayc6IHsgemg6ICdcdThGRDRcdTU2REUnLCBlbjogJ0JhY2snIH0sXHJcblx0J2NvbW1vbi5hZGQnOiB7IHpoOiAnXHU2REZCXHU1MkEwJywgZW46ICdBZGQnIH0sXHJcblx0J2NvbW1vbi5zZWFyY2gnOiB7IHpoOiAnXHU2NDFDXHU3RDIyJywgZW46ICdTZWFyY2gnIH0sXHJcblxyXG5cdC8vIE1lbnUgLyBDb21tYW5kXHJcblx0J21lbnUub3BlbldpdGgnOiB7IHpoOiAnXHU3NTI4IExhQy5Db3N0U2V0IFx1NjI1M1x1NUYwMCcsIGVuOiAnT3BlbiB3aXRoIExhQy5Db3N0U2V0JyB9LFxyXG5cdCdjb21tYW5kLm9wZW4nOiB7IHpoOiAnXHU2MjUzXHU1RjAwJywgZW46ICdPcGVuJyB9LFxyXG5cdCdub3RpY2UuaW52YWxpZEVudHJ5Jzoge1xyXG5cdFx0emg6ICdcdTUxNjVcdTUzRTNcdTY1ODdcdTRFRjZcdTUxODVcdTVCQjlcdTY4M0NcdTVGMEZcdTRFMERcdTZCNjNcdTc4NkVcdUZGMUFcdTk3MDBcdTRFM0EgVE9NTFx1RkYwQ1x1NEUxNCB0eXBlID0gXCJyb290XCJcdUZGMENyZW5kZXJzIFx1NUZDNVx1OTg3Qlx1NTMwNVx1NTQyQiBcImNvc3RzZXRcIicsXHJcblx0XHRlbjogJ0VudHJ5IGZpbGUgaW52YWxpZDogbXVzdCBiZSBUT01MIHdpdGggdHlwZSA9IFwicm9vdFwiIGFuZCByZW5kZXJzIG11c3QgaW5jbHVkZSBcImNvc3RzZXRcIidcclxuXHR9LFxyXG5cdCdub3RpY2Uuc2F2ZUZhaWxlZCc6IHsgemg6ICdcdTRGRERcdTVCNThcdTU5MzFcdThEMjU6IHttc2d9JywgZW46ICdTYXZlIGZhaWxlZDoge21zZ30nIH0sXHJcblxyXG5cdC8vIFNldHRpbmdzXHJcblx0J3NldHRpbmdzLnRpdGxlJzogeyB6aDogJ0xhQy5Db3N0U2V0IFx1OEJCRVx1N0Y2RScsIGVuOiAnTGFDLkNvc3RTZXQgU2V0dGluZ3MnIH0sXHJcblx0J3NldHRpbmdzLmd1aWRlLjEnOiB7XHJcblx0XHR6aDogJ1x1OTFDRFx1ODk4MVx1RkYxQVx1NTE2NVx1NTNFM1x1NjU4N1x1NEVGNlx1NEUwRVx1OEQ0NFx1NEVBN1x1NjU4N1x1NEVGNlx1NzY4NFx1MjAxQ1x1NTE4NVx1NUJCOVx1NjgzQ1x1NUYwRlx1NEUzQSBUT01MXHUyMDFEXHVGRjBDXHU2NTg3XHU0RUY2XHU2MjY5XHU1QzU1XHU1NDBEXHU1M0VGXHU0RTNBIC5tZFx1MzAwMlx1NTE0MVx1OEJCOCAjIFx1NUYwMFx1NTkzNFx1NzY4NFx1NkNFOFx1OTFDQVx1MzAwMlx1NTUyRlx1NEUwMFx1NzY4NFx1OTc1RSBUT01MIFx1NEY4Qlx1NTkxNlx1NjYyRlx1RkYxQVx1NjU4N1x1NEVGNlx1NkI2M1x1NjU4N1x1NEUyRFx1NzY4NCBbW1x1OEQ0NFx1NEVBN1x1NjU4N1x1NEVGNlx1NTQwRF1dIFx1NTNDQ1x1OTRGRVx1NTNFRlx1NzcwMVx1NzU2NVx1NUYxNVx1NTNGN1x1RkYwQ1x1NjNEMlx1NEVGNlx1NTcyOFx1ODlFM1x1Njc5MFx1NjVGNlx1NEYxQVx1NEUzNFx1NjVGNlx1NEUzQVx1NTE3Nlx1NTJBMFx1NEUwQVx1NUYxNVx1NTNGN1x1NTQwRVx1NjMwOSBUT01MIFx1NTkwNFx1NzQwNlx1MzAwMlx1OTY2NFx1OEZEOVx1NzBCOVx1NTkxNlx1RkYwQ1x1NEUwRFx1NUU5NFx1NkRGN1x1NTE2NVx1NjY2RVx1OTAxQSBNYXJrZG93biBcdTY1ODdcdTY3MkNcdTMwMDInLFxyXG5cdFx0ZW46ICdJbXBvcnRhbnQ6IEVudHJ5IGFuZCBhc3NldCBmaWxlcyBtdXN0IGJlIFRPTUwgY29udGVudCAoZXh0ZW5zaW9uIGNhbiBiZSAubWQpLiBDb21tZW50cyBzdGFydGluZyB3aXRoICMgYXJlIGFsbG93ZWQuIFRoZSBvbmx5IG5vbi1UT01MIGV4Y2VwdGlvbjogW1thc3NldCBmaWxlbmFtZV1dIHdpa2lsaW5rcyBpbiB0aGUgYm9keSBjYW4gb21pdCBxdW90ZXM7IHRoZSBwbHVnaW4gd2lsbCB0ZW1wb3JhcmlseSBxdW90ZSB0aGVtIGZvciBUT01MIHBhcnNpbmcuIE5vIG90aGVyIHJlZ3VsYXIgTWFya2Rvd24gc2hvdWxkIGJlIG1peGVkLidcclxuXHR9LFxyXG5cdCdzZXR0aW5ncy5lbnRyeS5leGFtcGxlJzoge1xyXG5cdFx0emg6ICcjIFx1NTE2NVx1NTNFM1x1NjU4N1x1NEVGNlx1NjcwMFx1NUMwRlx1NzkzQVx1NEY4QlxcblxcbiMgXHU5ODc2XHU5MEU4IFRPTUxcdUZGMUFcdTVGQzVcdTk4N0JcdTZFRTFcdThEQjNcXG4jIHR5cGUgPSBcInJvb3RcIlxcbiMgcmVuZGVycyA9IFtcImNvc3RzZXRcIl1cXG5cXG50eXBlID0gXCJyb290XCJcXG5yZW5kZXJzID0gW1wiY29zdHNldFwiXVxcblxcbiMgXHU2QjYzXHU2NTg3XHVGRjFBXHU3NTI4XHU1M0NDXHU5NEZFXHU1MjE3XHU1MUZBXHU4RDQ0XHU0RUE3XHU2NTg3XHU0RUY2XHU1NDBEXHVGRjA4XHU0RTBEXHU5NzAwXHU4OTgxXHU2MjY5XHU1QzU1XHU1NDBEXHVGRjA5XFxuXFxuW1tcdTk1MkVcdTc2RDhdXVxcbltbXHU4MDMzXHU2NzNBXV1cXG4nLFxyXG5cdFx0ZW46ICcjIE1pbmltYWwgZW50cnkgZmlsZSBleGFtcGxlXFxuXFxuIyBUb3AgVE9NTCBtdXN0IGluY2x1ZGVcXG4jIHR5cGUgPSBcInJvb3RcIlxcbiMgcmVuZGVycyA9IFtcImNvc3RzZXRcIl1cXG5cXG50eXBlID0gXCJyb290XCJcXG5yZW5kZXJzID0gW1wiY29zdHNldFwiXVxcblxcbiMgQm9keTogbGlzdCBhc3NldCBmaWxlbmFtZXMgdXNpbmcgd2lraWxpbmtzIChubyBleHRlbnNpb24pXFxuXFxuW1trZXlib2FyZF1dXFxuW1toZWFkcGhvbmVzXV1cXG4nXHJcblx0fSxcclxuXHQnc2V0dGluZ3MuYXNzZXQuZGVzYyc6IHtcclxuXHRcdHpoOiAnXHU4RDQ0XHU0RUE3XHU2NTg3XHU0RUY2XHU1NDBDXHU2ODM3XHU2NjJGIE1hcmtkb3duXHVGRjBDXHU0RjQ2XHU1MTg1XHU1QkI5XHU0RUU1IFRPTUwgXHU1QjU3XHU2QkI1XHU0RTNBXHU0RTNCXHVGRjA4XHU2M0QyXHU0RUY2XHU0RjFBXHU0RkREXHU3NTU5XHU0RjYwXHU1MTk5XHU3Njg0XHU2Q0U4XHU5MUNBXHVGRjA5XHUzMDAyXHU0RUU1XHU0RTBCXHU0RTNBXHU2NzAwXHU1QzBGXHU3OTNBXHU0RjhCXHVGRjFBJyxcclxuXHRcdGVuOiAnQXNzZXQgZmlsZXMgYXJlIGFsc28gTWFya2Rvd24sIGJ1dCBtYWlubHkgVE9NTCBmaWVsZHMgKGNvbW1lbnRzIGFyZSBwcmVzZXJ2ZWQpLiBNaW5pbWFsIGV4YW1wbGU6J1xyXG5cdH0sXHJcblx0J3NldHRpbmdzLmFzc2V0LmV4YW1wbGUnOiB7XHJcblx0XHR6aDogJ25hbWUgPSBcIlx1OTUyRVx1NzZEOFwiXFxuXFxuW3N0eWxlXVxcbmljb24gPSBcIlx1MjMyOFx1RkUwRlwiXFxuXFxuW2RldGFpbF1cXG5wcmljZSA9IDM5OVxcbmFjdGl2ZV9mcm9tID0gXCIyMDI0LTAxLTAxXCJcXG5hY3RpdmVfdG8gPSBcIlwiXFxucmVjeWNsZV9wcmljZSA9IDBcXG50YWdzID0gW1wiXHU2NTcwXHU3ODAxXCIsIFwiXHU5NTJFXHU3NkQ4XCJdXFxuJyxcclxuXHRcdGVuOiAnbmFtZSA9IFwiS2V5Ym9hcmRcIlxcblxcbltzdHlsZV1cXG5pY29uID0gXCJcdTIzMjhcdUZFMEZcIlxcblxcbltkZXRhaWxdXFxucHJpY2UgPSAzOTlcXG5hY3RpdmVfZnJvbSA9IFwiMjAyNC0wMS0wMVwiXFxuYWN0aXZlX3RvID0gXCJcIlxcbnJlY3ljbGVfcHJpY2UgPSAwXFxudGFncyA9IFtcIkRpZ2l0YWxcIiwgXCJLZXlib2FyZFwiXVxcbidcclxuXHR9LFxyXG5cdCdzZXR0aW5ncy51c2FnZSc6IHtcclxuXHRcdHpoOiAnXHU3NTI4XHU2Q0Q1XHVGRjFBXHU1NzI4XHUyMDFDXHU1MTY1XHU1M0UzXHU2NTg3XHU0RUY2XHUyMDFEXHU0RTBBXHU1M0YzXHU5NTJFIFx1MjE5MiBcdTkwMDlcdTYyRTlcdTIwMUNcdTc1MjggTGFDLkNvc3RTZXQgXHU2MjUzXHU1RjAwXHUyMDFEXHUzMDAyXHU0RTVGXHU1M0VGXHU1NzI4XHU1NDdEXHU0RUU0XHU5NzYyXHU2NzdGXHU2MjY3XHU4ODRDXHUyMDFDXHU2MjUzXHU1RjAwTGFDLkNvc3RTZXRcdTIwMURcdUZGMDhcdTVDMDZcdTRGN0ZcdTc1MjhcdTRFMEJcdTY1QjlcdTkxNERcdTdGNkVcdTc2ODRcdTUxNjVcdTUzRTNcdTY1ODdcdTRFRjZcdUZGMDlcdTMwMDInLFxyXG5cdFx0ZW46ICdVc2FnZTogUmlnaHQtY2xpY2sgb24gdGhlIGVudHJ5IGZpbGUgXHUyMTkyIGNob29zZSBcIk9wZW4gd2l0aCBMYUMuQ29zdFNldFwiLiBPciBydW4gdGhlIGNvbW1hbmQgXCJPcGVuIExhQy5Db3N0U2V0XCIgKHVzZXMgdGhlIGNvbmZpZ3VyZWQgZW50cnkgZmlsZSBiZWxvdykuJ1xyXG5cdH0sXHJcblx0J3NldHRpbmdzLmVudHJ5RmlsZS5uYW1lJzogeyB6aDogJ1x1NTE2NVx1NTNFM1x1NjU4N1x1NEVGNicsIGVuOiAnRW50cnkgZmlsZScgfSxcclxuXHQnc2V0dGluZ3MuZW50cnlGaWxlLmRlc2MnOiB7IHpoOiAnXHU0RjVDXHU0RTNBXHU4RDQ0XHU0RUE3XHU1MTY1XHU1M0UzXHU3Njg0IE1hcmtkb3duIFx1NjU4N1x1NEVGNlx1OERFRlx1NUY4NFx1RkYwQ1x1NEY4Qlx1NTk4MiBMYUMvQ29zdFNldC9jb3N0c2V0Lm1kJywgZW46ICdQYXRoIHRvIHRoZSBNYXJrZG93biBlbnRyeSBmaWxlLCBlLmcuLCBMYUMvQ29zdFNldC9jb3N0c2V0Lm1kJyB9LFxyXG5cdCdzZXR0aW5ncy5jb250ZXh0TWVudS5uYW1lJzogeyB6aDogJ1x1NTQyRlx1NzUyOFx1NTNGM1x1OTUyRVx1ODNEQ1x1NTM1NSBcdTIwMUNcdTc1MjggTGFDLkNvc3RTZXQgXHU2MjUzXHU1RjAwXHUyMDFEJywgZW46ICdFbmFibGUgY29udGV4dCBtZW51IFwiT3BlbiB3aXRoIExhQy5Db3N0U2V0XCInIH0sXHJcblx0J3NldHRpbmdzLmNvbnRleHRNZW51LmRlc2MnOiB7IHpoOiAnXHU1NzI4IE1hcmtkb3duIFx1NjU4N1x1NEVGNlx1NzY4NFx1NTNGM1x1OTUyRVx1ODNEQ1x1NTM1NVx1NEUyRFx1NjYzRVx1NzkzQVx1NTE2NVx1NTNFMycsIGVuOiAnU2hvdyBlbnRyeSBpbiBNYXJrZG93biBmaWxlIGNvbnRleHQgbWVudScgfSxcclxuXHQnc2V0dGluZ3MuZGVmYXVsdFNvcnQubmFtZSc6IHsgemg6ICdcdTlFRDhcdThCQTRcdTYzOTJcdTVFOEYnLCBlbjogJ0RlZmF1bHQgc29ydCcgfSxcclxuXHQnc2V0dGluZ3MuZGVmYXVsdFNvcnQuZGVzYyc6IHsgemg6ICdcdTYyNTNcdTVGMDBcdTg5QzZcdTU2RkVcdTY1RjZcdTc2ODRcdTUyMURcdTU5Q0JcdTYzOTJcdTVFOEZcdTY1QjlcdTVGMEYnLCBlbjogJ0luaXRpYWwgc29ydCB3aGVuIG9wZW5pbmcgdGhlIHZpZXcnIH0sXHJcblx0J3NldHRpbmdzLmRlZmF1bHRTb3J0Lm9wdGlvbi5ub25lJzogeyB6aDogJ1x1NjU4N1x1NjcyQ1x1OTg3QVx1NUU4RicsIGVuOiAnVGV4dCBvcmRlcicgfSxcclxuXHQnc2V0dGluZ3MuZGVmYXVsdFNvcnQub3B0aW9uLmRhaWx5RGVzYyc6IHsgemg6ICdcdTY1RTVcdTU3NDdcdTRFRjdcdTY4M0MnLCBlbjogJ0RhaWx5IGNvc3QnIH0sXHJcblx0J3NldHRpbmdzLmRlZmF1bHRTb3J0Lm9wdGlvbi5wcmljZURlc2MnOiB7IHpoOiAnXHU0RUY3XHU2ODNDJywgZW46ICdQcmljZScgfSxcclxuXHQnc2V0dGluZ3MuZGVmYXVsdFNvcnQub3B0aW9uLmRhdGVEZXNjJzogeyB6aDogJ1x1OEQyRFx1NTE2NVx1NjVFNVx1NjcxRicsIGVuOiAnUHVyY2hhc2UgZGF0ZScgfSxcclxuXHQnc2V0dGluZ3MuZGVmYXVsdEljb24ubmFtZSc6IHsgemg6ICdcdTlFRDhcdThCQTRcdTU2RkVcdTY4MDcnLCBlbjogJ0RlZmF1bHQgaWNvbicgfSxcclxuXHQnc2V0dGluZ3MuZGVmYXVsdEljb24uZGVzYyc6IHsgemg6ICdcdTY1QjBcdThENDRcdTRFQTdcdTc2ODRcdTlFRDhcdThCQTRcdTU2RkVcdTY4MDdcdUZGMENcdTRFQzVcdTY1MkZcdTYzMDEgMSBcdTRFMkEgRW1vamknLCBlbjogJ0RlZmF1bHQgaWNvbiBmb3IgbmV3IGFzc2V0cyAoc2luZ2xlIEVtb2ppIG9ubHkpJyB9LFxyXG5cdCdzZXR0aW5ncy5kZWZhdWx0SWNvbi5wbGFjZWhvbGRlcic6IHsgemg6ICdcdUQ4M0RcdURDRTYnLCBlbjogJ1x1RDgzRFx1RENFNicgfSxcclxuXHQnc2V0dGluZ3MubG9jYWxlLm5hbWUnOiB7IHpoOiAnXHU4QkVEXHU4QTAwJywgZW46ICdMYW5ndWFnZScgfSxcclxuXHQnc2V0dGluZ3MubG9jYWxlLmRlc2MnOiB7IHpoOiAnXHU3NTRDXHU5NzYyXHU4QkVEXHU4QTAwJywgZW46ICdJbnRlcmZhY2UgbGFuZ3VhZ2UnIH0sXHJcblx0J3NldHRpbmdzLmxvY2FsZS5vcHRpb24uYXV0byc6IHsgemg6ICdcdThEREZcdTk2OEZcdTdDRkJcdTdFREYnLCBlbjogJ0F1dG8nIH0sXHJcblx0J3NldHRpbmdzLmxvY2FsZS5vcHRpb24uemgnOiB7IHpoOiAnXHU0RTJEXHU2NTg3JywgZW46ICdDaGluZXNlJyB9LFxyXG5cdCdzZXR0aW5ncy5sb2NhbGUub3B0aW9uLmVuJzogeyB6aDogJ1x1ODJGMVx1NjU4NycsIGVuOiAnRW5nbGlzaCcgfSxcclxuXHJcblx0Ly8gQXNzZXRNYW5hZ2VyVmlld1xyXG5cdCd2aWV3LmhpbnQub3BlbkZyb21NZW51JzogeyB6aDogJ1x1NEVDRVx1NjU4N1x1NEVGNlx1NzY4NFx1NTNGM1x1OTUyRVx1ODNEQ1x1NTM1NVx1NEUyRFx1OTAwOVx1NjJFOSBcdTIwMUNcdTc1MjggTGFDLkNvc3RTZXQgXHU2MjUzXHU1RjAwXHUyMDFEXHUzMDAyJywgZW46ICdVc2UgZmlsZSBjb250ZXh0IG1lbnU6IFwiT3BlbiB3aXRoIExhQy5Db3N0U2V0XCIuJyB9LFxyXG5cdCd2aWV3LnNlbGVjdFJvb3QudGl0bGUnOiB7IHpoOiAnXHU5MDA5XHU2MkU5XHU4RDQ0XHU0RUE3XHU2ODM5XHU2NTg3XHU0RUY2JywgZW46ICdTZWxlY3Qgcm9vdCBhc3NldCBmaWxlJyB9LFxyXG5cdCd2aWV3LnNlbGVjdFJvb3QuZGVzYyc6IHsgemg6ICdcdThCRjdcdTkwMDlcdTYyRTlcdTRFMDBcdTRFMkFcdTUzMDVcdTU0MkJcdThENDRcdTRFQTdcdTVGMTVcdTc1MjhcdTc2ODRcdTY1ODdcdTRFRjZcdTRGNUNcdTRFM0FcdTUxNjVcdTUzRTMnLCBlbjogJ1BsZWFzZSBjaG9vc2UgYSBmaWxlIGNvbnRhaW5pbmcgYXNzZXQgcmVmZXJlbmNlcyBhcyBlbnRyeScgfSxcclxuXHQndmlldy5lbXB0eSc6IHsgemg6ICdcdTY2ODJcdTY1RTBcdThENDRcdTRFQTcnLCBlbjogJ05vIGFzc2V0cycgfSxcclxuXHQndmlldy50b05vdyc6IHsgemg6ICdcdTgxRjNcdTRFQ0EnLCBlbjogJ1ByZXNlbnQnIH0sXHJcblx0J3ZpZXcudXNlZERheXMnOiB7IHpoOiAnXHU1REYyXHU3NTI4e2RheXN9XHU1OTI5JywgZW46ICd7ZGF5c30gZGF5cyB1c2VkJyB9LFxyXG5cdCd2aWV3LmRhaWx5JzogeyB6aDogJ1x1NjVFNVx1NTc0NycsIGVuOiAnRGFpbHknIH0sXHJcblx0J3ZpZXcucHJpY2UnOiB7IHpoOiAnXHU0RUY3XHU2ODNDJywgZW46ICdQcmljZScgfSxcclxuXHQndmlldy5yZWN5Y2xlUHJpY2UnOiB7IHpoOiAnXHU1NkRFXHU2NTM2XHU0RUY3JywgZW46ICdSZWN5Y2xlJyB9LFxyXG5cdCd2aWV3LmJhY2snOiB7IHpoOiAnXHU4RkQ0XHU1NkRFJywgZW46ICdCYWNrJyB9LFxyXG5cdCd2aWV3LnNlYXJjaC5hcmlhJzogeyB6aDogJ1x1NjQxQ1x1N0QyMicsIGVuOiAnU2VhcmNoJyB9LFxyXG5cdCd2aWV3LnNlYXJjaC5wbGFjZWhvbGRlcic6IHsgemg6ICdcdTY0MUNcdTdEMjJcdTU0MERcdTc5RjBcdTYyMTZcdTY4MDdcdTdCN0UnLCBlbjogJ1NlYXJjaCBuYW1lIG9yIHRhZ3MnIH0sXHJcblx0J3ZpZXcuc29ydC50aXRsZSc6IHsgemg6ICdcdTYzOTJcdTVFOEYnLCBlbjogJ1NvcnQnIH0sXHJcblx0J3ZpZXcuc29ydC50aXRsZS5kYWlseURlc2MnOiB7IHpoOiAnXHU2MzA5XHU2NUU1XHU1NzQ3XHU2MjEwXHU2NzJDIChcdTk2NERcdTVFOEYpJywgZW46ICdCeSBkYWlseSBjb3N0IChkZXNjKScgfSxcclxuXHQndmlldy5zb3J0LnRpdGxlLnByaWNlRGVzYyc6IHsgemg6ICdcdTYzMDlcdTRFRjdcdTY4M0MgKFx1OTY0RFx1NUU4RiknLCBlbjogJ0J5IHByaWNlIChkZXNjKScgfSxcclxuXHQndmlldy5zb3J0LnRpdGxlLmRhdGVEZXNjJzogeyB6aDogJ1x1NjMwOVx1OEQyRFx1NTE2NVx1NjVFNVx1NjcxRiAoXHU5NjREXHU1RThGKScsIGVuOiAnQnkgcHVyY2hhc2UgZGF0ZSAoZGVzYyknIH0sXHJcblx0J3ZpZXcuc29ydC5tZW51LmRhaWx5RGVzYyc6IHsgemg6ICdcdTYzMDlcdTY1RTVcdTU3NDdcdTYyMTBcdTY3MkMnLCBlbjogJ0J5IGRhaWx5IGNvc3QnIH0sXHJcblx0J3ZpZXcuc29ydC5tZW51LnByaWNlRGVzYyc6IHsgemg6ICdcdTYzMDlcdTRFRjdcdTY4M0MnLCBlbjogJ0J5IHByaWNlJyB9LFxyXG5cdCd2aWV3LnNvcnQubWVudS5kYXRlRGVzYyc6IHsgemg6ICdcdTYzMDlcdThEMkRcdTUxNjVcdTY1RTVcdTY3MUYnLCBlbjogJ0J5IHB1cmNoYXNlIGRhdGUnIH0sXHJcblx0J3ZpZXcuYWRkJzogeyB6aDogJ1x1NkRGQlx1NTJBMCcsIGVuOiAnQWRkJyB9LFxyXG5cdCd2aWV3LmNvbmZpcm1EZWxldGVBc3NldCc6IHsgemg6ICdcdTc4NkVcdTVCOUFcdTg5ODFcdTUyMjBcdTk2NjRcdThENDRcdTRFQTcgXCJ7bmFtZX1cIiBcdTU0MTdcdUZGMUYnLCBlbjogJ0RlbGV0ZSBhc3NldCBcIntuYW1lfVwiPycgfSxcclxuXHJcblx0Ly8gVG9wIHN1bW1hcnlcclxuXHQndG9wLnRvdGFsJzogeyB6aDogJ1x1NjAzQlx1NjIxMFx1NjcyQyAnLCBlbjogJ1RvdGFsICcgfSxcclxuXHQndG9wLnJlY3ljbGUnOiB7IHpoOiAnXHU1M0VGXHU1NkRFXHU2NTM2ICcsIGVuOiAnUmVjeWNsYWJsZSAnIH0sXHJcblx0J2RhdGUucGljayc6IHsgemg6ICdcdTkwMDlcdTYyRTlcdTY1RTVcdTY3MUYnLCBlbjogJ1BpY2sgZGF0ZScgfSxcclxuXHQnZGF0ZS55ZWFyJzogeyB6aDogJ1x1NUU3NCcsIGVuOiAnJyB9LFxyXG5cdCdkYXRlLm1vbnRoJzogeyB6aDogJ1x1NjcwOCcsIGVuOiAnJyB9LFxyXG5cdCdkYXRlLmRheSc6IHsgemg6ICdcdTY1RTUnLCBlbjogJycgfSxcclxuXHJcblx0Ly8gQ29uZmlybSBtb2RhbFxyXG5cdCdjb25maXJtLnRpdGxlJzogeyB6aDogJ1x1Nzg2RVx1OEJBNFx1NjRDRFx1NEY1QycsIGVuOiAnQ29uZmlybScgfSxcclxuXHJcblx0Ly8gRm9ybSBtb2RhbFxyXG5cdCdmb3JtLm5hbWUnOiB7IHpoOiAnXHU1NDBEXHU3OUYwJywgZW46ICdOYW1lJyB9LFxyXG5cdCdmb3JtLmljb24nOiB7IHpoOiAnXHU1NkZFXHU2ODA3JywgZW46ICdJY29uJyB9LFxyXG5cdCdmb3JtLnByaWNlJzogeyB6aDogJ1x1NEVGN1x1NjgzQycsIGVuOiAnUHJpY2UnIH0sXHJcblx0J2Zvcm0ucHVyY2hhc2VPbic6IHsgemg6ICdcdThEMkRcdTUxNjVcdTRFOEUnLCBlbjogJ1B1cmNoYXNlZCBvbicgfSxcclxuXHQnZm9ybS5wdXJjaGFzZURhdGUnOiB7IHpoOiAnXHU4RDJEXHU1MTY1XHU2NUU1XHU2NzFGJywgZW46ICdQdXJjaGFzZSBkYXRlJyB9LFxyXG5cdCdmb3JtLmVuZERhdGUnOiB7IHpoOiAnXHU1MjMwXHU2NzFGJywgZW46ICdFbmQgZGF0ZScgfSxcclxuXHQnZm9ybS5lbmREYXRlUGxhY2Vob2xkZXInOiB7IHpoOiAnKFx1OEJBMVx1NTIxMilcdTYyQTVcdTVFOUYvXHU1NkRFXHU2NTM2L1x1NTIzMFx1NjcxRlx1NjVGNlx1OTVGNCcsIGVuOiAnUGxhbm5lZCBzY3JhcC9yZWN5Y2xlL2VuZCBkYXRlJyB9LFxyXG5cdCdmb3JtLnJlY3ljbGVQcmljZSc6IHsgemg6ICdcdTU2REVcdTY1MzZcdTRFRjcnLCBlbjogJ1JlY3ljbGUgcHJpY2UnIH0sXHJcblx0J2Zvcm0udGFncyc6IHsgemg6ICdcdTY4MDdcdTdCN0UnLCBlbjogJ1RhZ3MnIH0sXHJcblx0J2Zvcm0uYXNzZXROYW1lLnBsYWNlaG9sZGVyJzogeyB6aDogJ1x1OEQ0NFx1NEVBN1x1NTQwRFx1NzlGMCcsIGVuOiAnQXNzZXQgbmFtZScgfSxcclxuXHQnZm9ybS5pY29uLnBsYWNlaG9sZGVyJzogeyB6aDogJ1x1OEJGN1x1OEY5M1x1NTE2NVx1NEUwMFx1NEUyQSBFbW9qaSBcdTRGNUNcdTRFM0FcdTU2RkVcdTY4MDcnLCBlbjogJ1BsZWFzZSBlbnRlciBvbmUgRW1vamkgYXMgaWNvbicgfSxcclxuXHQnZm9ybS5wcmljZS5wbGFjZWhvbGRlcic6IHsgemg6ICdcdThEMkRcdTUxNjVcdTRFRjdcdTY4M0NcdUZGMDhcdTUxNDNcdUZGMDknLCBlbjogJ1B1cmNoYXNlIHByaWNlJyB9LFxyXG5cdCdmb3JtLnJlY3ljbGUucGxhY2Vob2xkZXInOiB7IHpoOiAnXHU1NkRFXHU2NTM2XHU0RUY3XHU2ODNDXHVGRjA4XHU1MTQzXHVGRjA5JywgZW46ICdSZWN5Y2xlIHByaWNlJyB9LFxyXG5cdCdmb3JtLnRhZ3MucGxhY2Vob2xkZXInOiB7IHpoOiAnXHU4RjkzXHU1MTY1XHU2ODA3XHU3QjdFXHVGRjBDXHU1NkRFXHU4RjY2XHU3ODZFXHU4QkE0JywgZW46ICdUeXBlIHRhZ3MgYW5kIHByZXNzIEVudGVyJyB9LFxyXG5cdCdmb3JtLmFjdGlvbi5jYW5jZWwnOiB7IHpoOiAnXHU1M0Q2XHU2RDg4JywgZW46ICdDYW5jZWwnIH0sXHJcblx0J2Zvcm0uYWN0aW9uLmRlbGV0ZSc6IHsgemg6ICdcdTUyMjBcdTk2NjQnLCBlbjogJ0RlbGV0ZScgfSxcclxuXHQnZm9ybS5hY3Rpb24uc2F2ZSc6IHsgemg6ICdcdTRGRERcdTVCNTgnLCBlbjogJ1NhdmUnIH0sXHJcblx0J2Zvcm0uZXJyb3IubmFtZVJlcXVpcmVkJzogeyB6aDogJ1x1OEJGN1x1NTg2Qlx1NTE5OVx1NTQwRFx1NzlGMCcsIGVuOiAnUGxlYXNlIGVudGVyIGEgbmFtZScgfSxcclxuXHQnZm9ybS5lcnJvci5wcmljZUludmFsaWQnOiB7IHpoOiAnXHU4QkY3XHU1ODZCXHU1MTk5XHU2NzA5XHU2NTQ4XHU3Njg0XHU0RUY3XHU2ODNDJywgZW46ICdQbGVhc2UgZW50ZXIgYSB2YWxpZCBwcmljZScgfSxcclxuXHQnZm9ybS5lcnJvci5mcm9tUmVxdWlyZWQnOiB7IHpoOiAnXHU4QkY3XHU5MDA5XHU2MkU5XHU4RDJEXHU1MTY1XHU2NUU1XHU2NzFGJywgZW46ICdQbGVhc2Ugc2VsZWN0IGEgcHVyY2hhc2UgZGF0ZScgfSxcclxuXHQnZm9ybS5lcnJvci50b0JlZm9yZUZyb20nOiB7IHpoOiAnXHU1MjMwXHU2NzFGXHU2NUU1XHU2NzFGXHU5NzAwXHU0RTBEXHU2NUU5XHU0RThFXHU4RDJEXHU1MTY1XHU2NUU1XHU2NzFGJywgZW46ICdFbmQgZGF0ZSBtdXN0IG5vdCBiZSBlYXJsaWVyIHRoYW4gcHVyY2hhc2UgZGF0ZScgfSxcclxuXHQnZm9ybS5lcnJvci5yZWN5Y2xlSW52YWxpZCc6IHsgemg6ICdcdTU2REVcdTY1MzZcdTRFRjdcdTY4M0NcdTY4M0NcdTVGMEZcdTRFMERcdTZCNjNcdTc4NkUnLCBlbjogJ0ludmFsaWQgcmVjeWNsZSBwcmljZSBmb3JtYXQnIH0sXHJcblx0J2Zvcm0uZXJyb3IucmVjeWNsZUd0UHJpY2UnOiB7IHpoOiAnXHU1NkRFXHU2NTM2XHU0RUY3XHU0RTBEXHU4MEZEXHU1OTI3XHU0RThFXHU0RUY3XHU2ODNDJywgZW46ICdSZWN5Y2xlIHByaWNlIG11c3Qgbm90IGV4Y2VlZCBwcmljZScgfSxcclxuXHJcblx0Ly8gVGFnIHBhbmVsXHJcblx0J3RhZ3Muc2VhcmNoLnBsYWNlaG9sZGVyJzogeyB6aDogJ1x1NjQxQ1x1N0QyMlx1NjgwN1x1N0I3RScsIGVuOiAnU2VhcmNoIHRhZ3MnIH0sXHJcblx0J3RhZ3Muc2VsZWN0QWxsJzogeyB6aDogJ1x1NTE2OFx1OTAwOScsIGVuOiAnU2VsZWN0IGFsbCcgfSxcclxuXHQndGFncy5kZXNlbGVjdEFsbCc6IHsgemg6ICdcdTUzRDZcdTZEODhcdTUxNjhcdTkwMDknLCBlbjogJ0Rlc2VsZWN0IGFsbCcgfSxcclxufTtcclxuXHJcbmZ1bmN0aW9uIGZvcm1hdFZhcnMoaW5wdXQ6IHN0cmluZywgdmFycz86IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IG51bWJlcj4pOiBzdHJpbmcge1xyXG5cdGlmICghdmFycykgcmV0dXJuIGlucHV0O1xyXG5cdHJldHVybiBpbnB1dC5yZXBsYWNlKC9cXHsoXFx3KylcXH0vZywgKF9tLCBrKSA9PiBTdHJpbmcodmFyc1trXSA/PyAnJykpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdChrZXk6IHN0cmluZywgdmFycz86IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IG51bWJlcj4sIGxvY2FsZT86ICd6aCcgfCAnZW4nKTogc3RyaW5nIHtcclxuXHRjb25zdCBsYW5nID0gbG9jYWxlIHx8IGN1cnJlbnRMb2NhbGU7XHJcblx0Y29uc3QgZW50cnkgPSAoZGljdCBhcyBhbnkpW2tleV0gYXMgeyB6aDogc3RyaW5nOyBlbjogc3RyaW5nIH0gfCB1bmRlZmluZWQ7XHJcblx0aWYgKCFlbnRyeSkgcmV0dXJuIGtleTtcclxuXHRjb25zdCByYXcgPSAoZW50cnkgYXMgYW55KVtsYW5nXSA/PyBlbnRyeS5lbiA/PyBrZXk7XHJcblx0cmV0dXJuIGZvcm1hdFZhcnMocmF3LCB2YXJzKTtcclxufVxyXG5cclxuXHJcbiIsICJpbXBvcnQgeyBBcHAsIFBsdWdpbiwgVEZpbGUsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IExhY0Nvc3RTZXRTZXR0aW5ncywgREVGQVVMVF9TRVRUSU5HUyB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgc2V0TG9jYWxlLCByZXNvbHZlTG9jYWxlLCB0IH0gZnJvbSAnLi9pMThuJztcbmltcG9ydCB7IEFzc2V0UmVwb3NpdG9yeSB9IGZyb20gJy4vcmVwb3NpdG9yaWVzL0Fzc2V0UmVwb3NpdG9yeSc7XG5pbXBvcnQgeyBBc3NldE1hbmFnZXJWaWV3IH0gZnJvbSAnLi9jb21wb25lbnRzL0Fzc2V0TWFuYWdlclZpZXcnO1xuaW1wb3J0IHsgQXNzZXRGb3JtTW9kYWwgfSBmcm9tICcuL2NvbXBvbmVudHMvbW9kYWxzL0Fzc2V0Rm9ybU1vZGFsJztcbmltcG9ydCB7IExhY0Nvc3RTZXRTZXR0aW5nVGFiIH0gZnJvbSAnLi9jb21wb25lbnRzL3NldHRpbmdzL0xhY0Nvc3RTZXRTZXR0aW5nVGFiJztcblxuXG4vLyBcdTRFM0JcdTYzRDJcdTRFRjZcdTdDN0JcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExhY0Nvc3RTZXRQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuXHRzZXR0aW5nczogTGFjQ29zdFNldFNldHRpbmdzO1xuXHRhc3NldFJlcG9zaXRvcnk6IEFzc2V0UmVwb3NpdG9yeTtcblxuXHRhc3luYyBvbmxvYWQoKSB7XG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblxuXHRcdC8vIFx1NTIxRFx1NTlDQlx1NTMxNlx1OEJFRFx1OEEwMFxuXHRcdHNldExvY2FsZSh0aGlzLnNldHRpbmdzLmxvY2FsZSB8fCAnYXV0bycpO1xuXG5cdFx0Ly8gXHU1MjFEXHU1OUNCXHU1MzE2QXNzZXRSZXBvc2l0b3J5XHVGRjA4XHU0RjdGXHU3NTI4XHU4QkJFXHU3RjZFXHU0RTJEXHU3Njg0XHU1MTY1XHU1M0UzXHU2NTg3XHU0RUY2XHU4REVGXHU1Rjg0XHVGRjA5XG5cdFx0dGhpcy5hc3NldFJlcG9zaXRvcnkgPSBuZXcgQXNzZXRSZXBvc2l0b3J5KHRoaXMuYXBwLCB0aGlzLnNldHRpbmdzLmVudHJ5RmlsZSB8fCAnTGFDL0Nvc3RTZXQvY29zdHNldC5tZCcpO1xuXG5cdFx0Ly8gXHU2Q0U4XHU1MThDXHU4OUM2XHU1NkZFXHVGRjA4XHU1MTQxXHU4QkI4IE9ic2lkaWFuIFx1NkI2M1x1NUUzOFx1NjA2Mlx1NTkwRFx1NUUwM1x1NUM0MFx1RkYwOVxuXHRcdHRoaXMucmVnaXN0ZXJWaWV3KCdsYWMtY29zdHNldC12aWV3JywgKGxlYWYpID0+IG5ldyBBc3NldE1hbmFnZXJWaWV3KGxlYWYsIHRoaXMuYXNzZXRSZXBvc2l0b3J5KSk7XG5cblx0XHQvLyBcdTZERkJcdTUyQTBcdTY1ODdcdTRFRjZcdTgzRENcdTUzNTVcdTk4Nzlcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQoXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2ZpbGUtbWVudScsIChtZW51LCBmaWxlKSA9PiB7XG5cdFx0XHRcdGlmICghdGhpcy5zZXR0aW5ncy5lbmFibGVDb250ZXh0TWVudSkgcmV0dXJuO1xuXHRcdFx0XHRpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlICYmIGZpbGUuZXh0ZW5zaW9uID09PSAnbWQnKSB7XG5cdFx0XHRcdFx0bWVudS5hZGRJdGVtKChpdGVtKSA9PiB7XG5cdFx0XHRcdFx0XHRpdGVtXG5cdFx0XHRcdFx0XHRcdC5zZXRUaXRsZSh0KCdtZW51Lm9wZW5XaXRoJykpXG5cdFx0XHRcdFx0XHRcdC5zZXRJY29uKCdwYWNrYWdlJylcblx0XHRcdFx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdC8vIFx1NEY3Rlx1NzUyOCBzZXRWaWV3U3RhdGUgXHU2MjUzXHU1RjAwXHU4OUM2XHU1NkZFXHVGRjBDXHU3ODZFXHU0RkREXHU2NjNFXHU3OTNBXHU2ODA3XHU1MUM2XHU2ODA3XHU5ODk4XHU2ODBGXHU0RTBFXHU1QkZDXHU4MjJBXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgbGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCd0YWInKTtcblx0XHRcdFx0XHRcdFx0XHRsZWFmLnNldFZpZXdTdGF0ZSh7XG5cdFx0XHRcdFx0XHRcdFx0XHR0eXBlOiAnbGFjLWNvc3RzZXQtdmlldycsXG5cdFx0XHRcdFx0XHRcdFx0XHRzdGF0ZTogeyBmaWxlUGF0aDogZmlsZS5wYXRoIH0sXG5cdFx0XHRcdFx0XHRcdFx0XHRhY3RpdmU6IHRydWVcblx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2UucmV2ZWFsTGVhZihsZWFmKTtcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cdFx0KTtcblxuXHRcdC8vIFx1NTIyMFx1OTY2NFx1NTE3Nlx1NEVENlx1NTQ3RFx1NEVFNFx1RkYwQ1x1NEVDNVx1NEZERFx1NzU1OVx1MjAxQ1x1NjI1M1x1NUYwMExhQy5Db3N0U2V0XHUyMDFEXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiAnb3Blbi1sYWMtY29zdHNldCcsXG5cdFx0XHRuYW1lOiB0KCdjb21tYW5kLm9wZW4nKSxcblx0XHRcdGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGVudHJ5UGF0aCA9IHRoaXMuc2V0dGluZ3MuZW50cnlGaWxlIHx8ICdMYUMvQ29zdFNldC9jb3N0c2V0Lm1kJztcblx0XHRcdFx0Y29uc3QgZW5zdXJlRm9sZGVyRXhpc3RzID0gYXN5bmMgKGZvbGRlclBhdGg6IHN0cmluZykgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IGZvbGRlciA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmb2xkZXJQYXRoKTtcblx0XHRcdFx0XHRpZiAoIWZvbGRlcikge1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlRm9sZGVyKGZvbGRlclBhdGgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fTtcblxuXHRcdFx0XHQvLyAxKSBcdTgyRTVcdTUxNjVcdTUzRTNcdTY1ODdcdTRFRjZcdTRFMERcdTVCNThcdTU3MjhcdUZGMUFcdTUyMUJcdTVFRkFcdTVFNzZcdTUxOTlcdTUxNjVcdTc5M0FcdTRGOEJcdTUxODVcdTVCQjlcdUZGMDhcdTU0MkJcdTc5M0FcdTRGOEJcdThENDRcdTRFQTdcdTY1ODdcdTRFRjZcdUZGMDlcblx0XHRcdFx0Y29uc3QgZW50cnlGaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGVudHJ5UGF0aCk7XG5cdFx0XHRcdGlmICghZW50cnlGaWxlKSB7XG5cdFx0XHRcdFx0Y29uc3QgcGFydHMgPSBlbnRyeVBhdGguc3BsaXQoJy8nKTtcblx0XHRcdFx0XHRjb25zdCBmb2xkZXJQYXRoID0gcGFydHMuc2xpY2UoMCwgLTEpLmpvaW4oJy8nKSB8fCAnJztcblx0XHRcdFx0XHRpZiAoZm9sZGVyUGF0aCkgYXdhaXQgZW5zdXJlRm9sZGVyRXhpc3RzKGZvbGRlclBhdGgpO1xuXG5cdFx0XHRcdFx0Ly8gXHU1MTk5XHU1MTY1XHU3OTNBXHU0RjhCXHU1MTY1XHU1M0UzXHU1MTg1XHU1QkI5XHVGRjA4XHU1NDJCXHU1RkM1XHU4OTgxIFRPTUwgXHU1OTM0XHU5MEU4ICsgXHU2RjE0XHU3OTNBXHU1M0NDXHU5NEZFXHVGRjA5XG5cdFx0XHRcdFx0Y29uc3Qgc2FtcGxlRW50cnkgPSBgIyBMYUMuQ29zdFNldCBcdTUxNjVcdTUzRTNcXG5cXG4jIFx1NEVFNVx1NEUwQlx1NEUzQVx1NTE2NVx1NTNFM1x1NTE0M1x1NjU3MFx1NjM2RVx1RkYwOFRPTUxcdUZGMDlcXG4jIFx1ODk4MVx1NkM0Mlx1RkYxQXR5cGUgPSBcXFwicm9vdFxcXCIgXHU0RTE0IHJlbmRlcnMgXHU1MzA1XHU1NDJCIFxcXCJjb3N0c2V0XFxcIlxcblxcbnR5cGUgPSBcXFwicm9vdFxcXCJcXG5yZW5kZXJzID0gW1xcXCJjb3N0c2V0XFxcIl1cXG5cXG4jIFx1NEVFNVx1NEUwQlx1NEUzQVx1NzkzQVx1NEY4Qlx1OEQ0NFx1NEVBN1x1RkYwQ1x1NjBBOFx1NTNFRlx1NEVFNVx1NTIyMFx1OTY2NFx1NUU3Nlx1NjZGRlx1NjM2Mlx1NEUzQVx1ODFFQVx1NURGMVx1NzY4NFx1OEQ0NFx1NEVBN1x1RkYxQVxcblxcbltbXHU2RjE0XHU3OTNBLVx1OTUyRVx1NzZEOF1dXFxuW1tcdTZGMTRcdTc5M0EtXHU4MDMzXHU2NzNBXV1cXG5bW1x1NkYxNFx1NzkzQS1cdThERUZcdTc1MzFcdTU2NjhdXVxcbmA7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKGVudHJ5UGF0aCwgc2FtcGxlRW50cnkpO1xuXG5cdFx0XHRcdFx0Ly8gXHU1NzI4XHU1NDBDXHU3NkVFXHU1RjU1XHU1MjFCXHU1RUZBXHU3OTNBXHU0RjhCXHU4RDQ0XHU0RUE3XHU2NTg3XHU0RUY2XHVGRjA4VE9NTCBcdTUxODVcdTVCQjlcdUZGMDlcblx0XHRcdFx0XHRjb25zdCBtYWtlQXNzZXRUb21sID0gKG5hbWU6IHN0cmluZywgaWNvbjogc3RyaW5nLCBwcmljZTogbnVtYmVyLCBmcm9tOiBzdHJpbmcsIHRvPzogc3RyaW5nLCByZWN5Y2xlPzogbnVtYmVyLCB0YWdzPzogc3RyaW5nW10pID0+IHtcblx0XHRcdFx0XHRcdGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuXHRcdFx0XHRcdFx0bGluZXMucHVzaChgbmFtZSA9IFwiJHtuYW1lfVwiYCk7XG5cdFx0XHRcdFx0XHRsaW5lcy5wdXNoKCcnKTtcblx0XHRcdFx0XHRcdGxpbmVzLnB1c2goJ1tzdHlsZV0nKTtcblx0XHRcdFx0XHRcdGxpbmVzLnB1c2goYGljb24gPSBcIiR7aWNvbn1cImApO1xuXHRcdFx0XHRcdFx0bGluZXMucHVzaCgnJyk7XG5cdFx0XHRcdFx0XHRsaW5lcy5wdXNoKCdbZGV0YWlsXScpO1xuXHRcdFx0XHRcdFx0bGluZXMucHVzaChgcHJpY2UgPSAke3ByaWNlfWApO1xuXHRcdFx0XHRcdFx0bGluZXMucHVzaChgYWN0aXZlX2Zyb20gPSBcIiR7ZnJvbX1cImApO1xuXHRcdFx0XHRcdFx0bGluZXMucHVzaChgYWN0aXZlX3RvID0gXCIke3RvIHx8ICcnfVwiYCk7XG5cdFx0XHRcdFx0XHRsaW5lcy5wdXNoKGByZWN5Y2xlX3ByaWNlID0gJHtyZWN5Y2xlID8/IDB9YCk7XG5cdFx0XHRcdFx0XHRsaW5lcy5wdXNoKGB0YWdzID0gWyR7KHRhZ3MgfHwgW10pLm1hcCh0ID0+IGBcIiR7dH1cImApLmpvaW4oJywgJyl9XWApO1xuXHRcdFx0XHRcdFx0bGluZXMucHVzaCgnJyk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gbGluZXMuam9pbignXFxuJyk7XG5cdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdGNvbnN0IGFzc2V0c0ZvbGRlciA9IGZvbGRlclBhdGggfHwgJ0xhQy9Db3N0U2V0Jztcblx0XHRcdFx0XHRhd2FpdCBlbnN1cmVGb2xkZXJFeGlzdHMoYXNzZXRzRm9sZGVyKTtcblx0XHRcdFx0XHRjb25zdCBhc3NldERlZnMgPSBbXG5cdFx0XHRcdFx0XHR7IGlkOiAnXHU2RjE0XHU3OTNBLVx1OTUyRVx1NzZEOCcsIGljb246ICdcdTIzMjhcdUZFMEYnLCBwcmljZTogMzk5LCBmcm9tOiAnMjAyNC0wMS0wMScsIHRvOiAnJywgcmVjeWNsZTogMCwgdGFnczogWydcdTY1NzBcdTc4MDEnLCAnXHU5NTJFXHU3NkQ4J10gfSxcblx0XHRcdFx0XHRcdHsgaWQ6ICdcdTZGMTRcdTc5M0EtXHU4MDMzXHU2NzNBJywgaWNvbjogJ1x1RDgzQ1x1REZBNycsIHByaWNlOiA1OTksIGZyb206ICcyMDI0LTAzLTE1JywgdG86ICcnLCByZWN5Y2xlOiAwLCB0YWdzOiBbJ1x1NjU3MFx1NzgwMScsICdcdTgwMzNcdTY3M0EnXSB9LFxuXHRcdFx0XHRcdFx0eyBpZDogJ1x1NkYxNFx1NzkzQS1cdThERUZcdTc1MzFcdTU2NjgnLCBpY29uOiAnXHVEODNEXHVEQ0Y2JywgcHJpY2U6IDMyOSwgZnJvbTogJzIwMjMtMTEtMjAnLCB0bzogJycsIHJlY3ljbGU6IDUwLCB0YWdzOiBbJ1x1N0Y1MVx1N0VEQyddIH1cblx0XHRcdFx0XHRdO1xuXHRcdFx0XHRcdGZvciAoY29uc3QgYSBvZiBhc3NldERlZnMpIHtcblx0XHRcdFx0XHRcdGNvbnN0IGZpbGVQYXRoID0gYCR7YXNzZXRzRm9sZGVyfS8ke2EuaWR9Lm1kYDtcblx0XHRcdFx0XHRcdGNvbnN0IGV4aXN0cyA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XG5cdFx0XHRcdFx0XHRcdGlmICghZXhpc3RzKSB7XG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKGZpbGVQYXRoLCBtYWtlQXNzZXRUb21sKGEuaWQsIGEuaWNvbiwgYS5wcmljZSwgYS5mcm9tLCBhLnRvLCBhLnJlY3ljbGUsIGEudGFncykpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gMikgXHU2ODIxXHU5QThDXHU1MTY1XHU1M0UzXHU2NTg3XHU0RUY2XHU2ODNDXHU1RjBGXHVGRjFBXHU1RTk0XHU0RTNBIFRPTUxcdUZGMDhcdTYyMTZcdTUzRUZcdTdFQ0ZcdTRFMzRcdTY1RjZcdThGNkNcdTYzNjJcdTRFM0FcdTUzRUZcdTg5RTNcdTY3OTBcdTc2ODQgVE9NTFx1RkYwOVx1RkYwQ1x1NEUxNCB0eXBlID0gXCJyb290XCIgXHU0RTE0IHJlbmRlcnMgXHU1MzA1XHU1NDJCIFwiY29zdHNldFwiXG5cdFx0XHRcdGxldCBpbnZhbGlkID0gZmFsc2U7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0Y29uc3QgZiA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChlbnRyeVBhdGgpO1xuXHRcdFx0XHRcdGlmIChmICYmIGYgaW5zdGFuY2VvZiBURmlsZSkge1xuXHRcdFx0XHRcdFx0Y29uc3QgcmF3ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmKTtcblx0XHRcdFx0XHRcdC8vIFx1NUMwNiBbWy4uLl1dIFx1NEUzNFx1NjVGNlx1NjZGRlx1NjM2Mlx1NEUzQSBcIi4uLlwiXHVGRjBDXHU5MDdGXHU1MTREXHU1RjcxXHU1NENEIFRPTUwgXHU1MjI0XHU2NUFEXG5cdFx0XHRcdFx0XHRjb25zdCB0b21sQ2FuZGlkYXRlID0gcmF3LnJlcGxhY2UoL1xcW1xcWyhbXlxcXV0rKVxcXVxcXS9nLCAoX20sIHAxKSA9PiBgXCIke1N0cmluZyhwMSkudHJpbSgpfVwiYCk7XG5cdFx0XHRcdFx0XHQvLyBcdTY2MkZcdTU0MjZcdTUzMDVcdTU0MkJcdTRFRkJcdTYxMEYgVE9NTCBcdTk1MkVcdTUwM0NcdThCRURcdTUzRTVcblx0XHRcdFx0XHRcdGNvbnN0IGhhc1RvbWxLdiA9IC8oXnxcXG4pXFxzKltBLVphLXowLTlfLl0rXFxzKj1cXHMqW15cXG5dKy9tLnRlc3QodG9tbENhbmRpZGF0ZSk7XG5cdFx0XHRcdFx0XHQvLyBcdTYzRDBcdTUzRDZcdTVFNzZcdTY4MjFcdTlBOEMgdHlwZVxuXHRcdFx0XHRcdFx0Y29uc3QgdHlwZU1hdGNoID0gdG9tbENhbmRpZGF0ZS5tYXRjaCgvKF58XFxuKVxccyp0eXBlXFxzKj1cXHMqXCIoW15cIl0qKVwiL20pO1xuXHRcdFx0XHRcdFx0Y29uc3QgdHlwZVZhbCA9IHR5cGVNYXRjaD8uWzJdIHx8ICcnO1xuXHRcdFx0XHRcdFx0Ly8gXHU2M0QwXHU1M0Q2XHU1RTc2XHU2ODIxXHU5QThDIHJlbmRlcnNcdUZGMDhcdTY1NzBcdTdFQzRcdUZGMDlcblx0XHRcdFx0XHRcdGNvbnN0IHJlbmRlcnNNYXRjaCA9IHRvbWxDYW5kaWRhdGUubWF0Y2goLyhefFxcbilcXHMqcmVuZGVyc1xccyo9XFxzKlxcWyhbXFxzXFxTXSo/KVxcXS9tKTtcblx0XHRcdFx0XHRcdGxldCByZW5kZXJzSGFzQ29zdHNldCA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0aWYgKHJlbmRlcnNNYXRjaCAmJiByZW5kZXJzTWF0Y2hbMl0pIHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgYXJyVGV4dCA9IHJlbmRlcnNNYXRjaFsyXTtcblx0XHRcdFx0XHRcdFx0cmVuZGVyc0hhc0Nvc3RzZXQgPSAvXFxcImNvc3RzZXRcXFwiL2kudGVzdChhcnJUZXh0KSB8fCAvKF58LHxcXHMpY29zdHNldCgsfFxcc3wkKS9pLnRlc3QoYXJyVGV4dCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpbnZhbGlkID0gIWhhc1RvbWxLdiB8fCB0eXBlVmFsICE9PSAncm9vdCcgfHwgIXJlbmRlcnNIYXNDb3N0c2V0O1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRpbnZhbGlkID0gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gY2F0Y2ggKF8pIHtcblx0XHRcdFx0XHRpbnZhbGlkID0gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoaW52YWxpZCkgbmV3IE5vdGljZSh0KCdub3RpY2UuaW52YWxpZEVudHJ5JykpO1xuXG5cdFx0XHRcdC8vIDMpIFx1NEY3Rlx1NzUyOFx1OTE0RFx1N0Y2RVx1NzY4NFx1NTE2NVx1NTNFM1x1NjU4N1x1NEVGNlx1NjI1M1x1NUYwMCBMYUMuQ29zdFNldCBcdTg5QzZcdTU2RkVcdUZGMDhcdTkwMUFcdThGQzcgc2V0Vmlld1N0YXRlIFx1Nzg2RVx1NEZERFx1NjgwN1x1NTFDNlx1NUJGQ1x1ODIyQVx1RkYwOVxuXHRcdFx0XHR0aGlzLmFzc2V0UmVwb3NpdG9yeSA9IG5ldyBBc3NldFJlcG9zaXRvcnkodGhpcy5hcHAsIGVudHJ5UGF0aCk7XG5cdFx0XHRcdGNvbnN0IGxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZigndGFiJyk7XG5cdFx0XHRcdGF3YWl0IGxlYWYuc2V0Vmlld1N0YXRlKHtcblx0XHRcdFx0XHR0eXBlOiAnbGFjLWNvc3RzZXQtdmlldycsXG5cdFx0XHRcdFx0c3RhdGU6IHsgZmlsZVBhdGg6IGVudHJ5UGF0aCB9LFxuXHRcdFx0XHRcdGFjdGl2ZTogdHJ1ZVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLnJldmVhbExlYWYobGVhZik7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblxuXHRcdC8vIFx1NkRGQlx1NTJBMFx1OEJCRVx1N0Y2RVx1NjgwN1x1N0I3RVxuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgTGFjQ29zdFNldFNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcblxuXHRcdC8vIFx1NkRGQlx1NTJBMFx1NzJCNlx1NjAwMVx1NjgwRlx1OTg3OVxuXHRcdHRoaXMuYWRkU3RhdHVzQmFySXRlbSgpLnNldFRleHQoJ0xhYy1Db3N0U2V0Jyk7XG5cdH1cblxuXHRvbnVubG9hZCgpIHtcblx0XHQvLyBcdTZFMDVcdTc0MDZcdThENDRcdTZFOTBcblx0fVxuXG5cdGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcblx0fVxuXG5cdGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcblx0XHRhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuXHRcdC8vIFx1NEZERFx1NUI1OFx1NTQwQ1x1NjVGNlx1NTIzN1x1NjVCMFx1OEJFRFx1OEEwMFx1RkYwOFx1NEVFNVx1NEZCRlx1OEJCRVx1N0Y2RVx1NTIwN1x1NjM2Mlx1NTM3M1x1NjVGNlx1NzUxRlx1NjU0OFx1RkYwOVxuXHRcdHNldExvY2FsZSh0aGlzLnNldHRpbmdzLmxvY2FsZSB8fCAnYXV0bycpO1xuXHR9XG59IiwgIi8vIFx1NjNEMlx1NEVGNlx1OEJCRVx1N0Y2RVx1NjNBNVx1NTNFM1xyXG5leHBvcnQgaW50ZXJmYWNlIExhY0Nvc3RTZXRTZXR0aW5ncyB7XHJcblx0ZGVmYXVsdEljb246IHN0cmluZztcclxuICAgIGVudHJ5RmlsZTogc3RyaW5nO1xyXG4gICAgZW5hYmxlQ29udGV4dE1lbnU6IGJvb2xlYW47IC8vIFx1NjYyRlx1NTQyNlx1NTQyRlx1NzUyOFx1NTNGM1x1OTUyRVx1ODNEQ1x1NTM1NVx1MjAxQ1x1NzUyOCBMYUMuQ29zdFNldCBcdTYyNTNcdTVGMDBcdTIwMURcclxuICAgIGRlZmF1bHRTb3J0OiAnbm9uZScgfCAnZGFpbHlEZXNjJyB8ICdwcmljZURlc2MnIHwgJ2RhdGVEZXNjJzsgLy8gXHU5RUQ4XHU4QkE0XHU2MzkyXHU1RThGXHJcbiAgICBsb2NhbGU/OiAnYXV0bycgfCAnemgnIHwgJ2VuJztcclxufVxyXG5cclxuLy8gXHU5RUQ4XHU4QkE0XHU4QkJFXHU3RjZFXHJcbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBMYWNDb3N0U2V0U2V0dGluZ3MgPSB7XHJcbiAgICBkZWZhdWx0SWNvbjogJ1x1RDgzRFx1RENFNicsXHJcbiAgICBlbnRyeUZpbGU6ICdMYUMvQ29zdFNldC9jb3N0c2V0Lm1kJyxcclxuICAgIGVuYWJsZUNvbnRleHRNZW51OiB0cnVlLFxyXG4gICAgZGVmYXVsdFNvcnQ6ICdub25lJyxcclxuICAgIGxvY2FsZTogJ2F1dG8nXHJcbn1cclxuIiwgImltcG9ydCB7IEFwcCwgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IEFzc2V0IH0gZnJvbSAnLi4vbW9kZWxzL0Fzc2V0JztcclxuXHJcbi8vIEFzc2V0UmVwb3NpdG9yeVx1N0M3QiAtIFx1NEY3Rlx1NzUyOE9ic2lkaWFuIEFQSVxyXG5leHBvcnQgY2xhc3MgQXNzZXRSZXBvc2l0b3J5IHtcclxuXHRwcml2YXRlIGFwcDogQXBwO1xyXG5cdHByaXZhdGUgcm9vdEZpbGVQYXRoOiBzdHJpbmc7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCByb290RmlsZVBhdGg6IHN0cmluZykge1xyXG5cdFx0dGhpcy5hcHAgPSBhcHA7XHJcblx0XHR0aGlzLnJvb3RGaWxlUGF0aCA9IHJvb3RGaWxlUGF0aDtcclxuXHR9XHJcblxyXG5cdC8vIFx1ODNCN1x1NTNENlx1OEQ0NFx1NEVBN1x1NjU4N1x1NEVGNlx1NTkzOVx1OERFRlx1NUY4NFx1RkYwOFx1NEVDRVx1NjgzOVx1NjU4N1x1NEVGNlx1OERFRlx1NUY4NFx1NjNBOFx1NUJGQ1x1RkYwOVxyXG5cdHByaXZhdGUgZ2V0QXNzZXRzRm9sZGVyKCk6IHN0cmluZyB7XHJcblx0XHRjb25zdCBwYXRoUGFydHMgPSB0aGlzLnJvb3RGaWxlUGF0aC5zcGxpdCgnLycpO1xyXG5cdFx0aWYgKHBhdGhQYXJ0cy5sZW5ndGggPiAxKSB7XHJcblx0XHRcdHJldHVybiBwYXRoUGFydHMuc2xpY2UoMCwgLTEpLmpvaW4oJy8nKTtcclxuXHRcdH1cclxuXHRcdHJldHVybiAnYXNzZXRzJzsgLy8gXHU5RUQ4XHU4QkE0XHU2NTg3XHU0RUY2XHU1OTM5XHJcblx0fVxyXG5cclxuXHQvLyBcdTUyQTBcdThGN0RcdTYyNDBcdTY3MDlcdThENDRcdTRFQTdcclxuXHRhc3luYyBsb2FkQWxsKCk6IFByb21pc2U8QXNzZXRbXT4ge1xyXG5cdFx0Y29uc3Qgcm9vdEZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgodGhpcy5yb290RmlsZVBhdGgpO1xyXG5cdFx0aWYgKCFyb290RmlsZSB8fCAhKHJvb3RGaWxlIGluc3RhbmNlb2YgVEZpbGUpKSB7XHJcblx0XHRcdHJldHVybiBbXTtcclxuXHRcdH1cclxuXHJcblx0XHR0cnkge1xyXG5cdFx0XHRjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChyb290RmlsZSk7XHJcblx0XHRcdGNvbnN0IG1hdGNoZXMgPSBjb250ZW50Lm1hdGNoKC9cXFtcXFsoW15cXF1dKylcXF1cXF0vZykgfHwgW107XHJcblx0XHRcdGNvbnN0IGxpbmtUYXJnZXRzID0gbWF0Y2hlc1xyXG5cdFx0XHRcdC5tYXAobSA9PiBtLnJlcGxhY2UoL15cXFtcXFt8XFxdXFxdJC9nLCAnJykpXHJcblx0XHRcdFx0Lm1hcChzID0+IHMuc3BsaXQoJ3wnKVswXT8udHJpbSgpKVxyXG5cdFx0XHRcdC5maWx0ZXIoQm9vbGVhbikgYXMgc3RyaW5nW107XHJcblx0XHRcdFxyXG5cdFx0XHRjb25zdCBhc3NldHM6IEFzc2V0W10gPSBbXTtcclxuXHRcdFx0Zm9yIChjb25zdCB0YXJnZXQgb2YgbGlua1RhcmdldHMpIHtcclxuXHRcdFx0XHRsZXQgZmlsZTogVEZpbGUgfCBudWxsID0gbnVsbDtcclxuXHRcdFx0XHR0cnkge1xyXG5cdFx0XHRcdFx0ZmlsZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0Rmlyc3RMaW5rcGF0aERlc3QodGFyZ2V0LCB0aGlzLnJvb3RGaWxlUGF0aCkgYXMgVEZpbGUgfCBudWxsO1xyXG5cdFx0XHRcdH0gY2F0Y2ggKF8pIHtcclxuXHRcdFx0XHRcdGZpbGUgPSBudWxsO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZiAoIWZpbGUpIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVDb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMucGFyc2VUb21sKHRoaXMucXVvdGVXaWtpbGlua3NGb3JUb21sKGZpbGVDb250ZW50KSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcblx0XHRcdFx0XHRjb25zdCBhc3NldElkID0gZmlsZS5iYXNlbmFtZSB8fCB0YXJnZXQ7XHJcblx0XHRcdFx0XHRjb25zdCBhc3NldCA9IG5ldyBBc3NldChhc3NldElkLCBkYXRhKTtcclxuXHRcdFx0XHRcdC8vIGhpZGRlbiBcdTVCNTdcdTZCQjVcdTRFQzVcdTUxODVcdTVCNThcdTRGN0ZcdTc1MjhcdUZGMENcdTUyQTBcdThGN0RcdTY1RjZcdTlFRDhcdThCQTRcdTUxNzNcdTk1RURcclxuXHRcdFx0XHRcdGFzc2V0LmhpZGRlbiA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0YXNzZXRzLnB1c2goYXNzZXQpO1xyXG5cdFx0XHRcdH0gY2F0Y2ggKGUpIHtcclxuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBsb2FkIGFzc2V0ICR7dGFyZ2V0fTpgLCBlKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIGFzc2V0cztcclxuXHRcdH0gY2F0Y2ggKGUpIHtcclxuXHRcdFx0Y29uc29sZS5lcnJvcignRmFpbGVkIHRvIGxvYWQgYXNzZXRzOicsIGUpO1xyXG5cdFx0XHRyZXR1cm4gW107XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvLyBcdTRGRERcdTVCNThcdThENDRcdTRFQTdcdUZGMDhcdTRFQzVcdTRGRUVcdTY1MzlcdTRFMEUgY29zdHNldCBcdTc2RjhcdTUxNzNcdTc2ODRcdTk1MkVcdUZGMUFuYW1lXHUzMDAxc3R5bGUuaWNvblx1MzAwMWRldGFpbC4qXHUzMDAxaGlkZGVuXHVGRjA5XHJcblx0YXN5bmMgc2F2ZUFzc2V0KGFzc2V0OiBBc3NldCk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0bGV0IHRhcmdldEZpbGU6IFRGaWxlIHwgbnVsbCA9IG51bGw7XHJcblx0XHR0cnkge1xyXG5cdFx0XHR0YXJnZXRGaWxlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaXJzdExpbmtwYXRoRGVzdChhc3NldC5pZCwgdGhpcy5yb290RmlsZVBhdGgpIGFzIFRGaWxlIHwgbnVsbDtcclxuXHRcdH0gY2F0Y2ggKF8pIHtcclxuXHRcdFx0dGFyZ2V0RmlsZSA9IG51bGw7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gXHU0RTBEXHU1MThEXHU2MjZCXHU2M0NGXHU1QjUwXHU3NkVFXHU1RjU1XHU2MjE2XHU5MDREXHU1Mzg2XHU2NTg3XHU0RUY2XHVGRjFBXHU0RUM1XHU0RjlEXHU4RDU2IE9ic2lkaWFuIFx1NzY4NFx1NTNDQ1x1OTRGRVx1ODlFM1x1Njc5MFxyXG5cclxuXHRcdFx0aWYgKCF0YXJnZXRGaWxlKSB7XHJcblx0XHRcdC8vIFx1NzZFRVx1NjgwN1x1NjU4N1x1NEVGNlx1NEUwRFx1NUI1OFx1NTcyOFx1RkYxQVx1NTcyOFx1NjgzOVx1NjU4N1x1NEVGNlx1NTQwQ1x1NzZFRVx1NUY1NVx1NEUwQlx1NTIxQlx1NUVGQVx1NjVCMFx1NjU4N1x1NEVGNlxyXG5cdFx0XHRsZXQgZmlsZU5hbWUgPSBgJHthc3NldC5pZH0ubWRgO1xyXG5cdFx0XHRsZXQgZmlsZVBhdGggPSBgJHt0aGlzLmdldEFzc2V0c0ZvbGRlcigpfS8ke2ZpbGVOYW1lfWA7XHJcblx0XHRcdC8vIFx1Nzg2RVx1NEZERFx1NjU4N1x1NEVGNlx1NTkzOVx1NUI1OFx1NTcyOFxyXG5cdFx0XHRjb25zdCBmb2xkZXIgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgodGhpcy5nZXRBc3NldHNGb2xkZXIoKSk7XHJcblx0XHRcdGlmICghZm9sZGVyKSB7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlRm9sZGVyKHRoaXMuZ2V0QXNzZXRzRm9sZGVyKCkpO1xyXG5cdFx0XHR9XHJcblx0XHRcdFx0XHRcdGNvbnN0IGluaXRpYWxDb250ZW50ID0gdGhpcy5kZXF1b3RlV2lraWxpbmtzKGFzc2V0LnRvVG9tbFN0cmluZygpKTtcclxuXHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoZmlsZVBhdGgsIGluaXRpYWxDb250ZW50KTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG5cdFx0XHR9IGNhdGNoIChlKSB7XHJcblx0XHRcdFx0Ly8gXHU1QzFEXHU4QkQ1XHU0RjdGXHU3NTI4IGVuY29kZSBcdTU0MEVcdTc2ODRcdTY1ODdcdTRFRjZcdTU0MERcdTUxOERcdTZCMjFcdTUyMUJcdTVFRkFcclxuXHRcdFx0XHRmaWxlTmFtZSA9IGAke2VuY29kZVVSSUNvbXBvbmVudChhc3NldC5pZCl9Lm1kYDtcclxuXHRcdFx0XHRmaWxlUGF0aCA9IGAke3RoaXMuZ2V0QXNzZXRzRm9sZGVyKCl9LyR7ZmlsZU5hbWV9YDtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoZmlsZVBhdGgsIGluaXRpYWxDb250ZW50KTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQvLyBcdTdFQUYgVE9NTCBcdTkxQ0RcdTUxOTlcdTZBMjFcdTVGMEZcdUZGMUFcdThCRkJcdTUzRDZcdTIxOTJcdTg5RTNcdTY3OTBcdTIxOTJcdTRFQzVcdTY1MzlcdTc2RjhcdTUxNzNcdTk1MkVcdTIxOTJcdTY1NzRcdTRGNTNcdTkxQ0RcdTUxOTlcdUZGMUJcdTZDRThcdTkxQ0FcdTdGNkVcdTk4NzZcdTRGRERcdTc1NTlcclxuXHRcdFx0Y29uc3QgZXhpc3RpbmcgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKHRhcmdldEZpbGUpO1xyXG5cdFx0XHRcdFx0Y29uc3QgcmV3cml0dGVuID0gdGhpcy5yZXdyaXRlVG9tbFdpdGhDb21tZW50c1RvcChleGlzdGluZywgYXNzZXQpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5hcHAudmF1bHQubW9kaWZ5KHRhcmdldEZpbGUsIHRoaXMuZGVxdW90ZVdpa2lsaW5rcyhyZXdyaXR0ZW4pKTsgICAgIFxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFx1NjZGNFx1NjVCMFx1NjgzOVx1NjU4N1x1NEVGNlx1NEUyRFx1NUJGOVx1OEJFNVx1OEQ0NFx1NEVBN1x1NzY4NFx1NTNDQ1x1OTRGRVx1NUYxNVx1NzUyOFxyXG5cdFx0YXdhaXQgdGhpcy51cGRhdGVSb290RmlsZShhc3NldC5pZCwgdHJ1ZSk7XHJcblx0fVxyXG5cclxuXHQvLyBcdTUyMjBcdTk2NjRcdThENDRcdTRFQTdcclxuXHRhc3luYyBkZWxldGVBc3NldChpZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHQvLyBcdTY2RjRcdTY1QjBcdTY4MzlcdTY1ODdcdTRFRjZcclxuXHRcdGF3YWl0IHRoaXMudXBkYXRlUm9vdEZpbGUoaWQsIGZhbHNlKTtcclxuXHR9XHJcblxyXG5cdC8vIFx1NkNFOFx1NjEwRlx1RkYxQWhpZGRlbiBcdTVCNTdcdTZCQjVcdTRFMERcdTYzMDFcdTRFNDVcdTUzMTZcdUZGMDhcdTRFQzVcdTUxODVcdTVCNThcdTRGN0ZcdTc1MjhcdUZGMDlcdUZGMENcdTZCNjRcdTU5MDRcdTRFMERcdTYzRDBcdTRGOUIgc2V0SGlkZGVuXHJcblxyXG5cdC8vIFx1NjZGNFx1NjVCMFx1NjgzOVx1NjU4N1x1NEVGNlxyXG5cdHByaXZhdGUgYXN5bmMgdXBkYXRlUm9vdEZpbGUoYXNzZXRJZDogc3RyaW5nLCBpc0FkZDogYm9vbGVhbik6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0Y29uc3Qgcm9vdFBhdGggPSB0aGlzLnJvb3RGaWxlUGF0aDtcclxuXHRcdGxldCByb290Q29udGVudCA9ICcnO1xyXG5cclxuXHRcdHRyeSB7XHJcblx0XHRcdGNvbnN0IHJvb3RGaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHJvb3RQYXRoKTtcclxuXHRcdFx0aWYgKHJvb3RGaWxlICYmIHJvb3RGaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuXHRcdFx0XHRyb290Q29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQocm9vdEZpbGUpO1xyXG5cdFx0XHR9XHJcblx0XHR9IGNhdGNoIChlKSB7XHJcblx0XHRcdC8vIFx1NjU4N1x1NEVGNlx1NEUwRFx1NUI1OFx1NTcyOFx1RkYwQ1x1NTIxQlx1NUVGQVx1NjVCMFx1NjU4N1x1NEVGNlxyXG5cdFx0fVxyXG5cclxuXHRcdFx0aWYgKGlzQWRkKSB7XHJcblx0XHRcdFx0XHQvLyBcdTZERkJcdTUyQTBcdThENDRcdTRFQTdcdTVGMTVcdTc1MjhcdUZGMUFcdTgyRTVcdTVERjJcdTVCNThcdTU3MjhcdTRFRkJcdTYxMEZcdTVGNjJcdTVGMEZcdTc2ODRcdTUzQ0NcdTk0RkVcdUZGMDhbW2lkXV0gXHU2MjE2IFtbaWR8YWxpYXNdXVx1RkYwOVx1NTIxOVx1NEUwRFx1OTFDRFx1NTkwRFx1NkRGQlx1NTJBMFxyXG5cdFx0XHRcdFx0Y29uc3QgaGFzQW55TGluayA9IG5ldyBSZWdFeHAoYFxcXFxbXFxcXFske2Fzc2V0SWR9KFxcXFx8W15cXFxcXV0rKT9cXFxcXVxcXFxdYCkudGVzdChyb290Q29udGVudCk7XHJcblx0XHRcdFx0XHRpZiAoIWhhc0FueUxpbmspIHtcclxuXHRcdFx0XHRcdFx0XHRyb290Q29udGVudCArPSBgXFxuW1ske2Fzc2V0SWR9XV1gO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0Ly8gXHU1MjIwXHU5NjY0XHU4RDQ0XHU0RUE3XHU1RjE1XHU3NTI4XHVGRjFBXHU1NDBDXHU2NUY2XHU3OUZCXHU5NjY0IFtbaWRdXSBcdTRFMEUgW1tpZHxhbGlhc11dIFx1NzY4NFx1NjU3NFx1ODg0Q1x1NjIxNlx1ODg0Q1x1NTE4NVx1NzI0N1x1NkJCNVxyXG5cdFx0XHRcdFx0cm9vdENvbnRlbnQgPSByb290Q29udGVudC5yZXBsYWNlKG5ldyBSZWdFeHAoYFxcXFxbXFxcXFske2Fzc2V0SWR9KFxcXFx8W15cXFxcXV0rKT9cXFxcXVxcXFxdYCwgJ2cnKSwgJycpO1xyXG5cdFx0XHRcdFx0cm9vdENvbnRlbnQgPSByb290Q29udGVudC5yZXBsYWNlKC9cXG57Myx9L2csICdcXG5cXG4nKS50cmltRW5kKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRjb25zdCBleGlzdGluZ1Jvb3QgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocm9vdFBhdGgpO1xyXG5cdFx0aWYgKGV4aXN0aW5nUm9vdCAmJiBleGlzdGluZ1Jvb3QgaW5zdGFuY2VvZiBURmlsZSkge1xyXG5cdFx0XHRhd2FpdCB0aGlzLmFwcC52YXVsdC5tb2RpZnkoZXhpc3RpbmdSb290LCByb290Q29udGVudCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUocm9vdFBhdGgsIHJvb3RDb250ZW50KTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8vIFx1ODlFM1x1Njc5MFRPTUxcdTUxODVcdTVCQjlcdUZGMDhcdTY1MkZcdTYzMDFcdTVENENcdTU5NTdcdTgyODJcdTU0MERcdUZGMENcdTU5ODIgW2Nvc3RzZXQuZGV0YWlsXVx1RkYwOVxyXG5cdHByaXZhdGUgcGFyc2VUb21sKGNvbnRlbnQ6IHN0cmluZyk6IGFueSB7XHJcblx0XHRjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xyXG5cdFx0Y29uc3QgcmVzdWx0OiBhbnkgPSB7fTtcclxuXHRcdGxldCBjdXJyZW50UGF0aDogc3RyaW5nW10gPSBbXTtcclxuXHJcblx0XHRjb25zdCBlbnN1cmVQYXRoID0gKHJvb3Q6IGFueSwgcGF0aDogc3RyaW5nW10pOiBhbnkgPT4ge1xyXG5cdFx0XHRsZXQgbm9kZSA9IHJvb3Q7XHJcblx0XHRcdGZvciAoY29uc3QgcGFydCBvZiBwYXRoKSB7XHJcblx0XHRcdFx0aWYgKCFub2RlW3BhcnRdIHx8IHR5cGVvZiBub2RlW3BhcnRdICE9PSAnb2JqZWN0Jykgbm9kZVtwYXJ0XSA9IHt9O1xyXG5cdFx0XHRcdG5vZGUgPSBub2RlW3BhcnRdO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiBub2RlO1xyXG5cdFx0fTtcclxuXHJcblx0XHRmb3IgKGNvbnN0IHJhdyBvZiBsaW5lcykge1xyXG5cdFx0XHRjb25zdCBsaW5lID0gcmF3LnRyaW0oKTtcclxuXHRcdFx0aWYgKCFsaW5lIHx8IGxpbmUuc3RhcnRzV2l0aCgnIycpKSBjb250aW51ZTtcclxuXHRcdFx0aWYgKGxpbmUuc3RhcnRzV2l0aCgnWycpICYmIGxpbmUuZW5kc1dpdGgoJ10nKSkge1xyXG5cdFx0XHRcdGNvbnN0IHNlY3Rpb24gPSBsaW5lLnNsaWNlKDEsIC0xKS50cmltKCk7XHJcblx0XHRcdFx0Y3VycmVudFBhdGggPSBzZWN0aW9uLnNwbGl0KCcuJykubWFwKHMgPT4gcy50cmltKCkpLmZpbHRlcihCb29sZWFuKTtcclxuXHRcdFx0XHRlbnN1cmVQYXRoKHJlc3VsdCwgY3VycmVudFBhdGgpO1xyXG5cdFx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0XHR9XHJcblx0XHRcdGNvbnN0IGVxID0gbGluZS5pbmRleE9mKCc9Jyk7XHJcblx0XHRcdGlmIChlcSA9PT0gLTEpIGNvbnRpbnVlO1xyXG5cdFx0XHRjb25zdCBjbGVhbktleSA9IGxpbmUuc2xpY2UoMCwgZXEpLnRyaW0oKTtcclxuXHRcdFx0bGV0IGNsZWFuVmFsdWUgPSBsaW5lLnNsaWNlKGVxICsgMSkudHJpbSgpO1xyXG5cclxuXHRcdFx0bGV0IHBhcnNlZFZhbHVlOiBhbnkgPSBjbGVhblZhbHVlO1xyXG5cdFx0XHRpZiAoY2xlYW5WYWx1ZS5zdGFydHNXaXRoKCdcIicpICYmIGNsZWFuVmFsdWUuZW5kc1dpdGgoJ1wiJykpIHtcclxuXHRcdFx0XHRwYXJzZWRWYWx1ZSA9IGNsZWFuVmFsdWUuc2xpY2UoMSwgLTEpO1xyXG5cdFx0XHR9IGVsc2UgaWYgKGNsZWFuVmFsdWUgPT09ICd0cnVlJyB8fCBjbGVhblZhbHVlID09PSAnZmFsc2UnKSB7XHJcblx0XHRcdFx0cGFyc2VkVmFsdWUgPSBjbGVhblZhbHVlID09PSAndHJ1ZSc7XHJcblx0XHRcdH0gZWxzZSBpZiAoY2xlYW5WYWx1ZS5zdGFydHNXaXRoKCdbJykgJiYgY2xlYW5WYWx1ZS5lbmRzV2l0aCgnXScpKSB7XHJcblx0XHRcdFx0Y29uc3QgYXJyYXlDb250ZW50ID0gY2xlYW5WYWx1ZS5zbGljZSgxLCAtMSkudHJpbSgpO1xyXG5cdFx0XHRcdHBhcnNlZFZhbHVlID0gYXJyYXlDb250ZW50ID8gYXJyYXlDb250ZW50LnNwbGl0KCcsJykubWFwKGl0ZW0gPT4gaXRlbS50cmltKCkucmVwbGFjZSgvXlwifFwiJC9nLCAnJykpIDogW107XHJcblx0XHRcdH0gZWxzZSBpZiAoIWlzTmFOKE51bWJlcihjbGVhblZhbHVlKSkpIHtcclxuXHRcdFx0XHRwYXJzZWRWYWx1ZSA9IE51bWJlcihjbGVhblZhbHVlKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKGN1cnJlbnRQYXRoLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0XHRjb25zdCBub2RlID0gZW5zdXJlUGF0aChyZXN1bHQsIGN1cnJlbnRQYXRoKTtcclxuXHRcdFx0XHRub2RlW2NsZWFuS2V5XSA9IHBhcnNlZFZhbHVlO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHJlc3VsdFtjbGVhbktleV0gPSBwYXJzZWRWYWx1ZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiByZXN1bHQ7XHJcblx0fVxyXG5cclxuXHQvLyBcdTdFQUYgVE9NTCBcdTkxQ0RcdTUxOTlcdTZBMjFcdTVGMEZcdUZGMUFcdTg5RTNcdTY3OTBcdTIxOTJcdTRGRUVcdTY1MzlcdTIxOTJzdHJpbmdpZnlcdUZGMUJcdTVDMDZcdTUzOUZcdTY3MDlcdTZDRThcdTkxQ0FcdTdGNkVcdTk4NzZcdTRGRERcdTc1NTlcclxuXHRwcml2YXRlIHJld3JpdGVUb21sV2l0aENvbW1lbnRzVG9wKGV4aXN0aW5nOiBzdHJpbmcsIGFzc2V0OiBBc3NldCk6IHN0cmluZyB7XHJcblx0XHRjb25zdCBjb21tZW50TGluZXM6IHN0cmluZ1tdID0gW107XHJcblx0XHRjb25zdCBvdGhlckxpbmVzOiBzdHJpbmdbXSA9IFtdO1xyXG5cdFx0Zm9yIChjb25zdCByYXcgb2YgZXhpc3Rpbmcuc3BsaXQoJ1xcbicpKSB7XHJcblx0XHRcdGNvbnN0IHQgPSByYXcudHJpbSgpO1xyXG5cdFx0XHRpZiAodC5zdGFydHNXaXRoKCcjJykpIGNvbW1lbnRMaW5lcy5wdXNoKHJhdyk7XHJcblx0XHRcdGVsc2Ugb3RoZXJMaW5lcy5wdXNoKHJhdyk7XHJcblx0XHR9XHJcbiAgICAgICAgICAgICAgICAvLyBcdTRGN0ZcdTc1MjhcdTVERjJcdTY3MDlcdThGN0JcdTkxQ0YgcGFyc2VyIFx1OEJGQlx1NTNENlx1NEUzQVx1NUJGOVx1OEM2MVxyXG4gICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkID0gdGhpcy5wYXJzZVRvbWwodGhpcy5xdW90ZVdpa2lsaW5rc0ZvclRvbWwob3RoZXJMaW5lcy5qb2luKCdcXG4nKSkpIHx8IHt9OyAgICAgXHJcblxyXG5cdFx0Ly8gXHU1RTk0XHU3NTI4XHU0RUM1IGNvc3RzZXQgXHU3NkY4XHU1MTczXHU3Njg0XHU1QjU3XHU2QkI1XHU2NkY0XHU2NUIwXHJcblx0XHQocGFyc2VkIGFzIGFueSlbJ25hbWUnXSA9IGFzc2V0Lm5hbWU7XHJcblx0XHRpZiAoIXBhcnNlZFsnc3R5bGUnXSB8fCB0eXBlb2YgcGFyc2VkWydzdHlsZSddICE9PSAnb2JqZWN0JykgcGFyc2VkWydzdHlsZSddID0ge307XHJcblx0XHRwYXJzZWRbJ3N0eWxlJ11bJ2ljb24nXSA9IGFzc2V0Lmljb247XHJcblx0XHRpZiAoIXBhcnNlZFsnZGV0YWlsJ10gfHwgdHlwZW9mIHBhcnNlZFsnZGV0YWlsJ10gIT09ICdvYmplY3QnKSBwYXJzZWRbJ2RldGFpbCddID0ge307XHJcblx0XHRwYXJzZWRbJ2RldGFpbCddWydwcmljZSddID0gTnVtYmVyKGFzc2V0LnByaWNlKSB8fCAwO1xyXG5cdFx0cGFyc2VkWydkZXRhaWwnXVsnYWN0aXZlX2Zyb20nXSA9IGFzc2V0LmFjdGl2ZUZyb20gPyBhc3NldC5hY3RpdmVGcm9tLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXSA6ICcnO1xyXG5cdFx0cGFyc2VkWydkZXRhaWwnXVsnYWN0aXZlX3RvJ10gPSBhc3NldC5hY3RpdmVUbyA/IGFzc2V0LmFjdGl2ZVRvLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXSA6ICcnO1xyXG5cdFx0cGFyc2VkWydkZXRhaWwnXVsncmVjeWNsZV9wcmljZSddID0gTnVtYmVyKGFzc2V0LnJlY3ljbGVQcmljZSkgfHwgMDtcclxuXHRcdHBhcnNlZFsnZGV0YWlsJ11bJ3RhZ3MnXSA9IEFycmF5LmlzQXJyYXkoYXNzZXQudGFncykgPyBhc3NldC50YWdzIDogW107XHJcblxyXG5cdFx0Y29uc3QgdG9tbEJvZHkgPSB0aGlzLnN0cmluZ2lmeVRvbWwocGFyc2VkKTtcclxuXHRcdGNvbnN0IGNvbW1lbnRCbG9jayA9IGNvbW1lbnRMaW5lcy5sZW5ndGggPiAwID8gY29tbWVudExpbmVzLmpvaW4oJ1xcbicpICsgJ1xcblxcbicgOiAnJztcclxuXHRcdHJldHVybiBjb21tZW50QmxvY2sgKyB0b21sQm9keTtcclxuXHR9XHJcblxyXG5cdC8vIFx1NUMwNiBKUyBcdTVCRjlcdThDNjFcdTdBMzNcdTVCOUFcdTU3MzBcdTVFOEZcdTUyMTdcdTUzMTZcdTRFM0EgVE9NTCBcdTY1ODdcdTY3MkNcdUZGMDhcdTY1MkZcdTYzMDFcdTU5MUFcdTVDNDJcdTgyODJcdTU0MERcdUZGMDlcclxuXHRwcml2YXRlIHN0cmluZ2lmeVRvbWwob2JqOiBhbnkpOiBzdHJpbmcge1xyXG5cdFx0Ly8gXHU2MkM2XHU1MjA2XHU0RTNBXHU5ODc2XHU1QzQyXHU2ODA3XHU5MUNGL1x1NjU3MFx1N0VDNCBcdTRFMEUgXHU1RDRDXHU1OTU3XHU1QkY5XHU4QzYxXHJcblx0XHRjb25zdCBpc1BsYWluT2JqZWN0ID0gKHY6IGFueSkgPT4gdiAmJiB0eXBlb2YgdiA9PT0gJ29iamVjdCcgJiYgIUFycmF5LmlzQXJyYXkodik7XHJcblx0XHRjb25zdCBrZXlzID0gT2JqZWN0LmtleXMob2JqIHx8IHt9KTtcclxuXHRcdGNvbnN0IHNjYWxhcktleXMgPSBrZXlzLmZpbHRlcihrID0+ICFpc1BsYWluT2JqZWN0KG9ialtrXSkpO1xyXG5cdFx0Y29uc3Qgb2JqZWN0S2V5cyA9IGtleXMuZmlsdGVyKGsgPT4gaXNQbGFpbk9iamVjdChvYmpba10pKTtcclxuXHJcblx0XHRjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcclxuXHRcdC8vIFx1NEYxOFx1NTE0OFx1OEY5M1x1NTFGQSBuYW1lXHJcblx0XHRpZiAoc2NhbGFyS2V5cy5pbmNsdWRlcygnbmFtZScpKSB7XHJcblx0XHRcdGxpbmVzLnB1c2godGhpcy5yZW5kZXJUb21sS2V5VmFsdWUoJ25hbWUnLCBvYmpbJ25hbWUnXSkpO1xyXG5cdFx0fVxyXG5cdFx0Ly8gXHU1MTc2XHU0RUQ2XHU5ODc2XHU1QzQyXHU2ODA3XHU5MUNGXHU2MzA5XHU1QjU3XHU2QkNEXHU1RThGXHJcblx0XHRzY2FsYXJLZXlzXHJcblx0XHRcdC5maWx0ZXIoayA9PiBrICE9PSAnbmFtZScpXHJcblx0XHRcdC5zb3J0KChhLCBiKSA9PiBhLmxvY2FsZUNvbXBhcmUoYikpXHJcblx0XHRcdC5mb3JFYWNoKGsgPT4gbGluZXMucHVzaCh0aGlzLnJlbmRlclRvbWxLZXlWYWx1ZShrLCBvYmpba10pKSk7XHJcblxyXG5cdFx0Ly8gXHU4MjgyXHU4RjkzXHU1MUZBXHU5ODdBXHU1RThGXHVGRjFBc3R5bGUsIGRldGFpbCBcdTRGMThcdTUxNDhcdUZGMENcdTUxNzZcdTVCODNcdTYzMDlcdTVCNTdcdTZCQ0RcdTVFOEZcclxuXHRcdGNvbnN0IHNlY3Rpb25PcmRlciA9IFsnc3R5bGUnLCAnZGV0YWlsJ107XHJcblx0XHRjb25zdCBvcmRlcmVkT2JqZWN0S2V5cyA9IFtcclxuXHRcdFx0Li4uc2VjdGlvbk9yZGVyLmZpbHRlcihrID0+IG9iamVjdEtleXMuaW5jbHVkZXMoaykpLFxyXG5cdFx0XHQuLi5vYmplY3RLZXlzLmZpbHRlcihrID0+ICFzZWN0aW9uT3JkZXIuaW5jbHVkZXMoaykpLnNvcnQoKGEsIGIpID0+IGEubG9jYWxlQ29tcGFyZShiKSlcclxuXHRcdF07XHJcblxyXG5cdFx0Zm9yIChjb25zdCBrIG9mIG9yZGVyZWRPYmplY3RLZXlzKSB7XHJcblx0XHRcdGxpbmVzLnB1c2goJycpO1xyXG5cdFx0XHR0aGlzLnJlbmRlclRvbWxTZWN0aW9uKGxpbmVzLCBba10sIG9ialtrXSk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIGxpbmVzLmpvaW4oJ1xcbicpLnJlcGxhY2UoL1xcbnszLH0vZywgJ1xcblxcbicpLnRyaW0oKSArICdcXG4nO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSByZW5kZXJUb21sU2VjdGlvbihvdXQ6IHN0cmluZ1tdLCBwYXRoOiBzdHJpbmdbXSwgdmFsdWU6IGFueSk6IHZvaWQge1xyXG5cdFx0b3V0LnB1c2goYFske3BhdGguam9pbignLicpfV1gKTtcclxuXHRcdGNvbnN0IGlzUGxhaW5PYmplY3QgPSAodjogYW55KSA9PiB2ICYmIHR5cGVvZiB2ID09PSAnb2JqZWN0JyAmJiAhQXJyYXkuaXNBcnJheSh2KTtcclxuXHRcdGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyh2YWx1ZSB8fCB7fSk7XHJcblx0XHRjb25zdCBzY2FsYXJLZXlzID0ga2V5cy5maWx0ZXIoayA9PiAhaXNQbGFpbk9iamVjdCh2YWx1ZVtrXSkpO1xyXG5cdFx0Y29uc3Qgb2JqZWN0S2V5cyA9IGtleXMuZmlsdGVyKGsgPT4gaXNQbGFpbk9iamVjdCh2YWx1ZVtrXSkpO1xyXG5cdFx0Ly8gXHU1MTQ4XHU4RjkzXHU1MUZBXHU2ODA3XHU5MUNGXHU5NTJFXHVGRjA4XHU2MzA5XHU1QjU3XHU2QkNEXHU1RThGXHVGRjA5XHJcblx0XHRzY2FsYXJLZXlzLnNvcnQoKGEsIGIpID0+IGEubG9jYWxlQ29tcGFyZShiKSkuZm9yRWFjaChrID0+IHtcclxuXHRcdFx0b3V0LnB1c2godGhpcy5yZW5kZXJUb21sS2V5VmFsdWUoaywgdmFsdWVba10pKTtcclxuXHRcdH0pO1xyXG5cdFx0Ly8gXHU1RDRDXHU1OTU3XHU1QkY5XHU4QzYxXHU0RjVDXHU0RTNBXHU1QjUwXHU4MjgyIFthLmJdXHJcblx0XHRjb25zdCBvcmRlcmVkT2JqZWN0S2V5cyA9IG9iamVjdEtleXMuc29ydCgoYSwgYikgPT4gYS5sb2NhbGVDb21wYXJlKGIpKTtcclxuXHRcdGZvciAoY29uc3QgayBvZiBvcmRlcmVkT2JqZWN0S2V5cykge1xyXG5cdFx0XHRvdXQucHVzaCgnJyk7XHJcblx0XHRcdHRoaXMucmVuZGVyVG9tbFNlY3Rpb24ob3V0LCBbLi4ucGF0aCwga10sIHZhbHVlW2tdKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHByaXZhdGUgcmVuZGVyVG9tbEtleVZhbHVlKGtleTogc3RyaW5nLCB2YWw6IGFueSk6IHN0cmluZyB7XHJcblx0XHRyZXR1cm4gYCR7a2V5fSA9ICR7dGhpcy50b21sVmFsdWUodmFsKX1gO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSB0b21sVmFsdWUodmFsOiBhbnkpOiBzdHJpbmcge1xyXG5cdFx0aWYgKHZhbCA9PT0gbnVsbCB8fCB2YWwgPT09IHVuZGVmaW5lZCkgcmV0dXJuICdcIlwiJztcclxuXHRcdGlmIChBcnJheS5pc0FycmF5KHZhbCkpIHtcclxuXHRcdFx0cmV0dXJuIGBbJHt2YWwubWFwKHYgPT4gdGhpcy50b21sVmFsdWUodikpLmpvaW4oJywgJyl9XWA7XHJcblx0XHR9XHJcblx0XHRzd2l0Y2ggKHR5cGVvZiB2YWwpIHtcclxuXHRcdFx0Y2FzZSAnbnVtYmVyJzpcclxuXHRcdFx0XHRyZXR1cm4gTnVtYmVyLmlzRmluaXRlKHZhbCkgPyBTdHJpbmcodmFsKSA6ICcwJztcclxuXHRcdFx0Y2FzZSAnYm9vbGVhbic6XHJcblx0XHRcdFx0cmV0dXJuIHZhbCA/ICd0cnVlJyA6ICdmYWxzZSc7XHJcblx0XHRcdGNhc2UgJ3N0cmluZyc6XHJcblx0XHRcdGRlZmF1bHQ6XHJcblx0XHRcdFx0cmV0dXJuIGBcIiR7U3RyaW5nKHZhbCkucmVwbGFjZSgvXFxcXC9nLCAnXFxcXFxcXFwnKS5yZXBsYWNlKC9cXFwiL2csICdcXFxcXCInKX1cImA7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuICAgICAgICAvLyBcdTVDMDZcdTg4RjhcdTc2ODQgW1suLi5dXSBcdTYyMTYgW1suLi58YWxpYXNdXSBcdTUzMDVcdTg4RjlcdTRFM0FcdTUzRUZcdTg4QUIgVE9NTCBcdTg5RTNcdTY3OTBcdTc2ODRcdTVCNTdcdTdCMjZcdTRFMzJcclxuICAgICAgICBwcml2YXRlIHF1b3RlV2lraWxpbmtzRm9yVG9tbChjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnQucmVwbGFjZSgvXFxbXFxbW15cXF1dK1xcXVxcXS9nLCAobWF0Y2g6IHN0cmluZywgb2Zmc2V0OiBudW1iZXIsIGZ1bGw6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBiZWZvcmUgPSBvZmZzZXQgPiAwID8gZnVsbFtvZmZzZXQgLSAxXSA6ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhZnRlciA9IG9mZnNldCArIG1hdGNoLmxlbmd0aCA8IGZ1bGwubGVuZ3RoID8gZnVsbFtvZmZzZXQgKyBtYXRjaC5sZW5ndGhdIDogJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoYmVmb3JlID09PSAnXCInICYmIGFmdGVyID09PSAnXCInKSB8fCAoYmVmb3JlID09PSAnXFwnJyAmJiBhZnRlciA9PT0gJ1xcJycpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoOyAvLyBhbHJlYWR5IHF1b3RlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBgXCIke21hdGNofVwiYDtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHU1QzA2IFwiW1suLi5dXVwiIFx1NjIxNiAnW1suLi5dXScgXHU1RjYyXHU1RjBGXHU4RkQ4XHU1MzlGXHU0RTNBXHU4OEY4XHU3Njg0XHU1M0NDXHU5NEZFXHJcbiAgICAgICAgcHJpdmF0ZSBkZXF1b3RlV2lraWxpbmtzKGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29udGVudC5yZXBsYWNlKC8oW1wiJ10pXFxbXFxbW15cXF1dK1xcXVxcXVxcMS9nLCAobWF0Y2g6IHN0cmluZykgPT4gbWF0Y2guc2xpY2UoMSwgLTEpKTtcclxuICAgICAgICB9XHJcbn1cclxuIiwgIi8vIEFzc2V0XHU1QjlFXHU0RjUzXHU3QzdCXHJcbmV4cG9ydCBjbGFzcyBBc3NldCB7XHJcblx0aWQ6IHN0cmluZztcclxuXHRuYW1lOiBzdHJpbmc7XHJcblx0aWNvbjogc3RyaW5nO1xyXG5cdHByaWNlOiBudW1iZXI7XHJcblx0YWN0aXZlRnJvbTogRGF0ZTtcclxuXHRhY3RpdmVUbz86IERhdGU7XHJcblx0cmVjeWNsZVByaWNlOiBudW1iZXI7XHJcblx0dGFnczogc3RyaW5nW107XHJcblx0aGlkZGVuOiBib29sZWFuO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihpZE9yUmF3RGF0YTogc3RyaW5nIHwgYW55LCB0b21sRGF0YT86IGFueSkge1xyXG5cdFx0aWYgKHR5cGVvZiBpZE9yUmF3RGF0YSA9PT0gJ3N0cmluZycgJiYgdG9tbERhdGEpIHtcclxuXHRcdFx0Ly8gVE9NTCBcdTZBMjFcdTVGMEZcdUZGMDhcdTRGMThcdTUxNDhcdThCRkJcdTUzRDYgW2Nvc3RzZXRdIFx1NTQ3RFx1NTQwRFx1N0E3QVx1OTVGNFx1RkYwQ1x1NTE3Q1x1NUJCOVx1NjVFN1x1N0VEM1x1Njc4NFx1RkYwOVxyXG5cdFx0XHR0aGlzLmlkID0gaWRPclJhd0RhdGE7XHJcblx0XHRcdGNvbnN0IHNyYyA9IHRvbWxEYXRhLmNvc3RzZXQgPyB0b21sRGF0YS5jb3N0c2V0IDogdG9tbERhdGE7XHJcblx0XHRcdHRoaXMubmFtZSA9IHNyYy5uYW1lIHx8ICcnO1xyXG5cdFx0XHQvLyBzdHlsZS5pY29uIFx1NTE3Q1x1NUJCOVx1NEUyNFx1NzlDRFx1Njc2NVx1NkU5MFxyXG5cdFx0XHR0aGlzLmljb24gPSBzcmMuc3R5bGU/Lmljb24gPz8gdG9tbERhdGEuc3R5bGU/Lmljb24gPz8gJ1x1RDgzRFx1RENFNic7XHJcblx0XHRcdGNvbnN0IGRldGFpbCA9IHNyYy5kZXRhaWwgPz8gdG9tbERhdGEuZGV0YWlsID8/IHt9O1xyXG5cdFx0XHR0aGlzLnByaWNlID0gTnVtYmVyKGRldGFpbC5wcmljZSkgfHwgMDtcclxuXHRcdFx0dGhpcy5hY3RpdmVGcm9tID0gdGhpcy5wYXJzZURhdGUoZGV0YWlsLmFjdGl2ZV9mcm9tKSB8fCBuZXcgRGF0ZSgpO1xyXG5cdFx0XHR0aGlzLmFjdGl2ZVRvID0gdGhpcy5wYXJzZURhdGUoZGV0YWlsLmFjdGl2ZV90bykgfHwgdW5kZWZpbmVkO1xyXG5cdFx0XHR0aGlzLnJlY3ljbGVQcmljZSA9IE51bWJlcihkZXRhaWwucmVjeWNsZV9wcmljZSkgfHwgMDtcclxuXHRcdFx0dGhpcy50YWdzID0gQXJyYXkuaXNBcnJheShkZXRhaWwudGFncykgPyBkZXRhaWwudGFncyA6IChkZXRhaWwudGFncyB8fCAnJykuc3BsaXQoJywnKS5tYXAoKGw6IHN0cmluZykgPT4gbC50cmltKCkpLmZpbHRlcigodGFnOiBzdHJpbmcpID0+IHRhZyk7XHJcblx0XHRcdHRoaXMuaGlkZGVuID0gISEoZGV0YWlsLmhpZGRlbiA/PyBzcmMuaGlkZGVuKTtcclxuXHRcdH0gZWxzZSBpZiAodHlwZW9mIGlkT3JSYXdEYXRhID09PSAnb2JqZWN0Jykge1xyXG5cdFx0XHQvLyBcdTYyNDFcdTVFNzNcdTVCRjlcdThDNjFcdTZBMjFcdTVGMEZcclxuXHRcdFx0dGhpcy5pZCA9IGlkT3JSYXdEYXRhLmlkIHx8ICcnO1xyXG5cdFx0XHR0aGlzLm5hbWUgPSBpZE9yUmF3RGF0YS5uYW1lIHx8ICcnO1xyXG5cdFx0XHR0aGlzLmljb24gPSBpZE9yUmF3RGF0YS5pY29uIHx8ICdcdUQ4M0RcdURDRTYnO1xyXG5cdFx0XHR0aGlzLnByaWNlID0gTnVtYmVyKGlkT3JSYXdEYXRhLnByaWNlKSB8fCAwO1xyXG5cdFx0XHR0aGlzLmFjdGl2ZUZyb20gPSB0aGlzLnBhcnNlRGF0ZShpZE9yUmF3RGF0YS5hY3RpdmVfZnJvbSB8fCBpZE9yUmF3RGF0YS5hY3RpdmVGcm9tKSB8fCBuZXcgRGF0ZSgpO1xyXG5cdFx0XHR0aGlzLmFjdGl2ZVRvID0gdGhpcy5wYXJzZURhdGUoaWRPclJhd0RhdGEuYWN0aXZlX3RvIHx8IGlkT3JSYXdEYXRhLmFjdGl2ZVRvKSB8fCB1bmRlZmluZWQ7XHJcblx0XHRcdHRoaXMucmVjeWNsZVByaWNlID0gTnVtYmVyKGlkT3JSYXdEYXRhLnJlY3ljbGVfcHJpY2UpIHx8IDA7XHJcblx0XHRcdHRoaXMudGFncyA9IEFycmF5LmlzQXJyYXkoaWRPclJhd0RhdGEudGFncykgPyBpZE9yUmF3RGF0YS50YWdzIDogKGlkT3JSYXdEYXRhLnRhZ3MgfHwgJycpLnNwbGl0KCcsJykubWFwKChsOiBzdHJpbmcpID0+IGwudHJpbSgpKS5maWx0ZXIoKHRhZzogc3RyaW5nKSA9PiB0YWcpO1xyXG5cdFx0XHR0aGlzLmhpZGRlbiA9ICEhaWRPclJhd0RhdGEuaGlkZGVuO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGFzc2V0IGRhdGEnKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHByaXZhdGUgcGFyc2VEYXRlKGRhdGVTdHI6IHN0cmluZyk6IERhdGUgfCB1bmRlZmluZWQge1xyXG5cdFx0aWYgKCFkYXRlU3RyKSByZXR1cm4gdW5kZWZpbmVkO1xyXG5cdFx0Y29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRhdGVTdHIpO1xyXG5cdFx0cmV0dXJuIGlzTmFOKGRhdGUuZ2V0VGltZSgpKSA/IHVuZGVmaW5lZCA6IGRhdGU7XHJcblx0fVxyXG5cclxuXHRnZXROYW1lKCkgeyByZXR1cm4gdGhpcy5uYW1lOyB9XHJcblx0Z2V0UHJpY2UoKSB7IHJldHVybiB0aGlzLnByaWNlOyB9XHJcblx0XHJcblx0Z2V0RGFpbHlDb3N0KG5vdzogRGF0ZSA9IG5ldyBEYXRlKCkpOiBudW1iZXIge1xyXG5cdFx0Y29uc3QgZnJvbSA9IHRoaXMuYWN0aXZlRnJvbTtcclxuXHRcdC8vIFx1OEJBMVx1N0I5N1x1NTIzMFx1OEZCRVx1NjVFNVx1NjcxRlx1RkYxQVx1ODJFNVx1NUI1OFx1NTcyOCBhY3RpdmVUb1x1RkYwQ1x1NTIxOVx1NEUwRSBub3cgXHU1M0Q2XHU4RjgzXHU2NUU5XHU4MDA1XHVGRjFCXHU1NDI2XHU1MjE5XHU1M0Q2IG5vd1xyXG5cdFx0Y29uc3QgZW5kID0gdGhpcy5hY3RpdmVUbyAmJiB0aGlzLmFjdGl2ZVRvLmdldFRpbWUoKSA8IG5vdy5nZXRUaW1lKCkgPyB0aGlzLmFjdGl2ZVRvIDogbm93O1xyXG5cdFx0Y29uc3QgZGF5cyA9IE1hdGgubWF4KDEsIE1hdGguZmxvb3IoKGVuZC5nZXRUaW1lKCkgLSBmcm9tLmdldFRpbWUoKSkgLyA4NjQwMDAwMCkpO1xyXG5cdFx0cmV0dXJuICh0aGlzLnByaWNlIC0gdGhpcy5yZWN5Y2xlUHJpY2UpIC8gZGF5cztcclxuXHR9XHJcblx0XHJcblx0Z2V0VXNhZ2VEYXlzKG5vdzogRGF0ZSA9IG5ldyBEYXRlKCkpOiBudW1iZXIge1xyXG5cdFx0Y29uc3QgZnJvbSA9IHRoaXMuYWN0aXZlRnJvbTtcclxuXHRcdGNvbnN0IGVuZCA9IHRoaXMuYWN0aXZlVG8gJiYgdGhpcy5hY3RpdmVUby5nZXRUaW1lKCkgPCBub3cuZ2V0VGltZSgpID8gdGhpcy5hY3RpdmVUbyA6IG5vdztcclxuXHRcdHJldHVybiBNYXRoLm1heCgxLCBNYXRoLmZsb29yKChlbmQuZ2V0VGltZSgpIC0gZnJvbS5nZXRUaW1lKCkpIC8gODY0MDAwMDApKTtcclxuXHR9XHJcblx0XHJcblx0aXNBY3RpdmUoZGF0ZTogRGF0ZSA9IG5ldyBEYXRlKCkpOiBib29sZWFuIHtcclxuXHRcdHJldHVybiB0aGlzLmFjdGl2ZUZyb20gPD0gZGF0ZSAmJiAoIXRoaXMuYWN0aXZlVG8gfHwgZGF0ZSA8IHRoaXMuYWN0aXZlVG8pO1xyXG5cdH1cclxuXHJcblx0dG9Ub21sU3RyaW5nKCk6IHN0cmluZyB7XHJcblx0XHRjb25zdCBmb3JtYXREYXRlID0gKGRhdGU6IERhdGUgfCB1bmRlZmluZWQpOiBzdHJpbmcgPT4ge1xyXG5cdFx0XHRpZiAoIWRhdGUpIHJldHVybiAnJztcclxuXHRcdFx0cmV0dXJuIGRhdGUudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xyXG5cdFx0fTtcclxuXHJcblx0XHRyZXR1cm4gYG5hbWUgPSBcIiR7dGhpcy5uYW1lfVwiXHJcblxyXG5bc3R5bGVdXHJcbmljb24gPSBcIiR7dGhpcy5pY29ufVwiXHJcblxyXG5bZGV0YWlsXVxyXG5wcmljZSA9ICR7dGhpcy5wcmljZX1cclxuYWN0aXZlX2Zyb20gPSBcIiR7Zm9ybWF0RGF0ZSh0aGlzLmFjdGl2ZUZyb20pfVwiXHJcbmFjdGl2ZV90byA9IFwiJHtmb3JtYXREYXRlKHRoaXMuYWN0aXZlVG8pfVwiXHJcbnJlY3ljbGVfcHJpY2UgPSAke3RoaXMucmVjeWNsZVByaWNlfVxyXG50YWdzID0gWyR7dGhpcy50YWdzLm1hcCh0YWcgPT4gYFwiJHt0YWd9XCJgKS5qb2luKCcsICcpfV1cclxuYDtcclxuXHR9XHJcblxyXG5cdC8vIFx1NEVDNVx1OEY5M1x1NTFGQSBjb3N0c2V0IFx1NTQ3RFx1NTQwRFx1N0E3QVx1OTVGNFx1NzY4NCBUT01MIFx1NzI0N1x1NkJCNVx1RkYwOFx1NzUyOFx1NEU4RVx1NUI4OVx1NTE2OFx1NTQwOFx1NUU3Nlx1RkYwOVxyXG5cdHRvQ29zdHNldFRvbWxTZWN0aW9ucygpOiBzdHJpbmcge1xyXG5cdFx0Y29uc3QgZm9ybWF0RGF0ZSA9IChkYXRlOiBEYXRlIHwgdW5kZWZpbmVkKTogc3RyaW5nID0+IHtcclxuXHRcdFx0aWYgKCFkYXRlKSByZXR1cm4gJyc7XHJcblx0XHRcdHJldHVybiBkYXRlLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcclxuXHRcdH07XHJcblx0XHRjb25zdCB0YWdzU3RyID0gdGhpcy50YWdzLm1hcCh0YWcgPT4gYFwiJHt0YWd9XCJgKS5qb2luKCcsICcpO1xyXG5cdFx0cmV0dXJuIGBbY29zdHNldF1cclxubmFtZSA9IFwiJHt0aGlzLm5hbWV9XCJcclxuaGlkZGVuID0gJHt0aGlzLmhpZGRlbiA/ICd0cnVlJyA6ICdmYWxzZSd9XHJcblxyXG5bY29zdHNldC5zdHlsZV1cclxuaWNvbiA9IFwiJHt0aGlzLmljb259XCJcclxuXHJcbltjb3N0c2V0LmRldGFpbF1cclxucHJpY2UgPSAke3RoaXMucHJpY2V9XHJcbmFjdGl2ZV9mcm9tID0gXCIke2Zvcm1hdERhdGUodGhpcy5hY3RpdmVGcm9tKX1cIlxyXG5hY3RpdmVfdG8gPSBcIiR7Zm9ybWF0RGF0ZSh0aGlzLmFjdGl2ZVRvKX1cIlxyXG5yZWN5Y2xlX3ByaWNlID0gJHt0aGlzLnJlY3ljbGVQcmljZX1cclxudGFncyA9IFske3RhZ3NTdHJ9XVxyXG5gO1xyXG5cdH1cclxufVxyXG4iLCAiaW1wb3J0IHsgQXBwLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IENvbmZpcm1Nb2RhbCB9IGZyb20gJy4vQ29uZmlybU1vZGFsJztcclxuaW1wb3J0IHsgQXNzZXRSZXBvc2l0b3J5IH0gZnJvbSAnLi4vLi4vcmVwb3NpdG9yaWVzL0Fzc2V0UmVwb3NpdG9yeSc7XHJcbmltcG9ydCB7IEFzc2V0IH0gZnJvbSAnLi4vLi4vbW9kZWxzL0Fzc2V0JztcclxuaW1wb3J0IHsgdCB9IGZyb20gJy4uLy4uL2kxOG4nO1xyXG5cclxuLy8gXHU4RDQ0XHU0RUE3XHU4ODY4XHU1MzU1XHU1RjM5XHU3QTk3XHVGRjA4XHU1OTBEXHU3NTI4XHU2NUU1XHU2NzFGL1x1NjgwN1x1N0I3RVx1NUYzOVx1N0E5N1x1OThDRVx1NjgzQ1x1RkYwOVxyXG5leHBvcnQgY2xhc3MgQXNzZXRGb3JtTW9kYWwge1xyXG5cdHByaXZhdGUgYXBwOiBBcHA7XHJcblx0cHJpdmF0ZSBhc3NldFJlcG9zaXRvcnk6IEFzc2V0UmVwb3NpdG9yeTtcclxuXHRwcml2YXRlIGFzc2V0PzogQXNzZXQ7XHJcblx0cHJpdmF0ZSBtYXNrRWw/OiBIVE1MRWxlbWVudDtcclxuXHRwcml2YXRlIG1vZGFsRWw/OiBIVE1MRWxlbWVudDtcclxuICAgIHByaXZhdGUgb25TYXZlZD86ICgpID0+IHZvaWQ7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBhc3NldFJlcG9zaXRvcnk6IEFzc2V0UmVwb3NpdG9yeSwgYXNzZXQ/OiBBc3NldCwgb25TYXZlZD86ICgpID0+IHZvaWQpIHtcclxuXHRcdHRoaXMuYXBwID0gYXBwO1xyXG5cdFx0dGhpcy5hc3NldFJlcG9zaXRvcnkgPSBhc3NldFJlcG9zaXRvcnk7XHJcblx0XHR0aGlzLmFzc2V0ID0gYXNzZXQ7XHJcbiAgICAgICAgdGhpcy5vblNhdmVkID0gb25TYXZlZDtcclxuXHR9XHJcblxyXG5cdG9wZW4oKSB7XHJcblx0XHQvLyBcdTkwNkVcdTdGNjlcclxuXHRcdHRoaXMubWFza0VsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHR0aGlzLm1hc2tFbC5jbGFzc05hbWUgPSAnZGF0ZS1waWNrZXItbWFzayc7XHJcblxyXG5cdFx0Ly8gXHU1RjM5XHU3QTk3XHU1QkI5XHU1NjY4XHVGRjA4XHU1OTBEXHU3NTI4XHU2NUU1XHU2NzFGXHU5MDA5XHU2MkU5XHU1NjY4XHU2ODM3XHU1RjBGXHU1RTc2XHU1MkEwXHU4MUVBXHU1QjlBXHU0RTQ5XHU2ODA3XHU4QkM2XHVGRjA5XHJcblx0XHR0aGlzLm1vZGFsRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdHRoaXMubW9kYWxFbC5jbGFzc05hbWUgPSAnZGF0ZS1waWNrZXItbW9kYWwgYXNzZXQtZm9ybS1tb2RhbCc7XHJcblx0XHQvLyBcdTZDRThcdTUxNjVcdTRFMDBcdTZCMjFcdTYwMjdcdTc2ODRcdTZBMkFcdTU0MTFcdTg4NjhcdTUzNTVcdTY4MzdcdTVGMEZcdUZGMENcdTk2NERcdTRGNEVcdTY1NzRcdTRGNTNcdTlBRDhcdTVFQTZcclxuXHRcdHRoaXMuaW5qZWN0QXNzZXRGb3JtU3R5bGVzKCk7XHJcblxyXG5cdFx0Y29uc3QgY29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0Y29udGVudC5jbGFzc05hbWUgPSAnZGF0ZS1waWNrZXItY29udGVudCc7XHJcblx0XHQoY29udGVudC5zdHlsZSBhcyBhbnkpLmdhcCA9ICcwcHgnO1xyXG5cclxuXHRcdC8vIFx1NTNCQlx1NjM4OVx1NjgwN1x1OTg5OFx1NjYzRVx1NzkzQVxyXG5cclxuXHRcdC8vIFx1ODg2OFx1NTM1NVxyXG5cdFx0Y29uc3QgZm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Zvcm0nKTtcclxuXHRcdGZvcm0uY2xhc3NOYW1lID0gJ2Fzc2V0LWZvcm0gYXNzZXQtZm9ybS0taG9yaXpvbnRhbCc7XHJcblx0XHRmb3JtLnN0eWxlLmRpc3BsYXkgPSAnZ3JpZCc7XHJcblx0XHQoZm9ybS5zdHlsZSBhcyBhbnkpLmdyaWRUZW1wbGF0ZUNvbHVtbnMgPSAnMWZyJztcclxuXHRcdGZvcm0uc3R5bGUucm93R2FwID0gJzBweCc7XHJcblx0XHQoZm9ybS5zdHlsZSBhcyBhbnkpLmdhcCA9ICcwcHgnO1xyXG5cclxuXHRcdC8vIFx1MjAxNFx1MjAxNCBcdTg4NjhcdTUzNTVcdTY4MjFcdTlBOENcdTVERTVcdTUxNzcgXHUyMDE0XHUyMDE0XHJcblx0XHRjb25zdCBlbnN1cmVFcnJvckVsID0gKGdyb3VwOiBIVE1MRWxlbWVudCk6IEhUTUxFbGVtZW50ID0+IHtcclxuXHRcdFx0bGV0IGVyciA9IGdyb3VwLnF1ZXJ5U2VsZWN0b3IoJy5maWVsZC1lcnJvcicpIGFzIEhUTUxFbGVtZW50IHwgbnVsbDtcclxuXHRcdFx0aWYgKCFlcnIpIHtcclxuXHRcdFx0XHRjb25zdCBmaWVsZCA9IGdyb3VwLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtLWZpZWxkJykgYXMgSFRNTEVsZW1lbnQgfCBudWxsO1xyXG5cdFx0XHRcdGVyciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0XHRcdGVyci5jbGFzc05hbWUgPSAnZmllbGQtZXJyb3InO1xyXG5cdFx0XHRcdGlmIChmaWVsZCkgZmllbGQuYXBwZW5kQ2hpbGQoZXJyKTtcclxuXHRcdFx0XHRlbHNlIGdyb3VwLmFwcGVuZENoaWxkKGVycik7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIGVycjtcclxuXHRcdH07XHJcblx0XHRjb25zdCBzZXRFcnJvciA9IChncm91cDogSFRNTEVsZW1lbnQsIG1lc3NhZ2U6IHN0cmluZykgPT4ge1xyXG5cdFx0XHRncm91cC5jbGFzc0xpc3QuYWRkKCdoYXMtZXJyb3InKTtcclxuXHRcdFx0Y29uc3QgaW5wdXQgPSBncm91cC5xdWVyeVNlbGVjdG9yKCdpbnB1dCwgdGV4dGFyZWEsIHNlbGVjdCcpIGFzIEhUTUxFbGVtZW50IHwgbnVsbDtcclxuXHRcdFx0aWYgKGlucHV0KSAoaW5wdXQgYXMgYW55KS5zZXRBdHRyaWJ1dGUoJ2FyaWEtaW52YWxpZCcsICd0cnVlJyk7XHJcblx0XHRcdGVuc3VyZUVycm9yRWwoZ3JvdXApLnRleHRDb250ZW50ID0gbWVzc2FnZTtcclxuXHRcdH07XHJcblx0XHRjb25zdCBjbGVhckVycm9yID0gKGdyb3VwOiBIVE1MRWxlbWVudCkgPT4ge1xyXG5cdFx0XHRncm91cC5jbGFzc0xpc3QucmVtb3ZlKCdoYXMtZXJyb3InKTtcclxuXHRcdFx0Y29uc3QgaW5wdXQgPSBncm91cC5xdWVyeVNlbGVjdG9yKCdpbnB1dCwgdGV4dGFyZWEsIHNlbGVjdCcpIGFzIEhUTUxFbGVtZW50IHwgbnVsbDtcclxuXHRcdFx0aWYgKGlucHV0KSAoaW5wdXQgYXMgYW55KS5zZXRBdHRyaWJ1dGUoJ2FyaWEtaW52YWxpZCcsICdmYWxzZScpO1xyXG5cdFx0XHRjb25zdCBlcnIgPSBncm91cC5xdWVyeVNlbGVjdG9yKCcuZmllbGQtZXJyb3InKSBhcyBIVE1MRWxlbWVudCB8IG51bGw7XHJcblx0XHRcdGlmIChlcnIpIGVyci5yZW1vdmUoKTtcclxuXHRcdH07XHJcblxyXG5cdFx0Ly8gXHU1NDBEXHU3OUYwXHJcblx0XHRjb25zdCBuYW1lR3JvdXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdG5hbWVHcm91cC5jbGFzc05hbWUgPSAnZm9ybS1ncm91cCc7XHJcblx0XHR7XHJcblx0XHRcdGNvbnN0IGxibCA9IHRoaXMuY3JlYXRlTGFiZWwodCgnZm9ybS5uYW1lJykpO1xyXG5cdFx0XHRsYmwuY2xhc3NMaXN0LmFkZCgnbGFiZWwtcmVxdWlyZWQnKTtcclxuXHRcdFx0bmFtZUdyb3VwLmFwcGVuZENoaWxkKGxibCk7XHJcblx0XHR9XHJcblx0XHRjb25zdCBuYW1lSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xyXG5cdFx0bmFtZUlucHV0LnR5cGUgPSAndGV4dCc7XHJcblx0XHRuYW1lSW5wdXQucGxhY2Vob2xkZXIgPSB0KCdmb3JtLmFzc2V0TmFtZS5wbGFjZWhvbGRlcicpO1xyXG5cdFx0aWYgKHRoaXMuYXNzZXQpIG5hbWVJbnB1dC52YWx1ZSA9IHRoaXMuYXNzZXQubmFtZTtcclxuXHRcdHtcclxuXHRcdFx0Y29uc3QgZmllbGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdFx0ZmllbGQuY2xhc3NOYW1lID0gJ2Zvcm0tZmllbGQnO1xyXG5cdFx0XHRmaWVsZC5hcHBlbmRDaGlsZChuYW1lSW5wdXQpO1xyXG5cdFx0XHRuYW1lR3JvdXAuYXBwZW5kQ2hpbGQoZmllbGQpO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5hcHBseVJvd0xheW91dChuYW1lR3JvdXApO1xyXG5cdFx0Zm9ybS5hcHBlbmRDaGlsZChuYW1lR3JvdXApO1xyXG5cdFx0Y29uc3QgdmFsaWRhdGVOYW1lID0gKCkgPT4ge1xyXG5cdFx0XHRjb25zdCB2ID0gKG5hbWVJbnB1dC52YWx1ZSB8fCAnJykudHJpbSgpO1xyXG5cdFx0XHRpZiAoIXYpIHsgc2V0RXJyb3IobmFtZUdyb3VwLCB0KCdmb3JtLmVycm9yLm5hbWVSZXF1aXJlZCcpKTsgcmV0dXJuIGZhbHNlOyB9XHJcblx0XHRcdGNsZWFyRXJyb3IobmFtZUdyb3VwKTsgcmV0dXJuIHRydWU7XHJcblx0XHR9O1xyXG5cdFx0bmFtZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgdmFsaWRhdGVOYW1lKTtcclxuXHRcdG5hbWVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgdmFsaWRhdGVOYW1lKTtcclxuXHJcblx0XHQvLyBcdTU2RkVcdTY4MDdcclxuXHRcdGNvbnN0IGljb25Hcm91cCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0aWNvbkdyb3VwLmNsYXNzTmFtZSA9ICdmb3JtLWdyb3VwJztcclxuXHRcdGljb25Hcm91cC5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUxhYmVsKHQoJ2Zvcm0uaWNvbicpKSk7XHJcblx0XHRjb25zdCBpY29uSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xyXG5cdFx0aWNvbklucHV0LnR5cGUgPSAndGV4dCc7XHJcblx0XHRpY29uSW5wdXQucGxhY2Vob2xkZXIgPSAnXHVEODNEXHVERTBBJyArIHQoJ2Zvcm0uaWNvbi5wbGFjZWhvbGRlcicpO1xyXG5cdFx0aWYgKHRoaXMuYXNzZXQpIGljb25JbnB1dC52YWx1ZSA9IHRoaXMuYXNzZXQuaWNvbjsgZWxzZSB7XHJcblx0XHRcdHRyeSB7XHJcblx0XHRcdFx0Y29uc3QgcGx1Z2luID0gKHRoaXMuYXBwIGFzIGFueSkucGx1Z2lucz8ucGx1Z2lucz8uWydsYWMtY29zdHNldCddO1xyXG5cdFx0XHRcdGNvbnN0IGZhbGxiYWNrID0gJ1x1RDgzRFx1RENFNic7XHJcblx0XHRcdFx0aWNvbklucHV0LnZhbHVlID0gKHBsdWdpbiAmJiBwbHVnaW4uc2V0dGluZ3MgJiYgcGx1Z2luLnNldHRpbmdzLmRlZmF1bHRJY29uKSA/IHBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0SWNvbiA6IGZhbGxiYWNrO1xyXG5cdFx0XHR9IGNhdGNoIChfKSB7XHJcblx0XHRcdFx0aWNvbklucHV0LnZhbHVlID0gJ1x1RDgzRFx1RENFNic7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGNvbnN0IGVuZm9yY2VTaW5nbGVFbW9qaSA9ICgpID0+IHtcclxuXHRcdFx0Y29uc3QgZmlyc3QgPSB0aGlzLmdldEZpcnN0RW1vamlHcmFwaGVtZShpY29uSW5wdXQudmFsdWUgfHwgJycpO1xyXG5cdFx0XHRpY29uSW5wdXQudmFsdWUgPSBmaXJzdCB8fCAnJztcclxuXHRcdH07XHJcblx0XHRpY29uSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBlbmZvcmNlU2luZ2xlRW1vamkpO1xyXG5cdFx0aWNvbklucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ3Bhc3RlJywgKGUpID0+IHsgc2V0VGltZW91dChlbmZvcmNlU2luZ2xlRW1vamksIDApOyB9KTtcclxuXHRcdHtcclxuXHRcdFx0Y29uc3QgZmllbGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdFx0ZmllbGQuY2xhc3NOYW1lID0gJ2Zvcm0tZmllbGQnO1xyXG5cdFx0XHRmaWVsZC5hcHBlbmRDaGlsZChpY29uSW5wdXQpO1xyXG5cdFx0XHRpY29uR3JvdXAuYXBwZW5kQ2hpbGQoZmllbGQpO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5hcHBseVJvd0xheW91dChpY29uR3JvdXApO1xyXG5cdFx0Zm9ybS5hcHBlbmRDaGlsZChpY29uR3JvdXApO1xyXG5cclxuXHRcdC8vIFx1NEVGN1x1NjgzQ1xyXG5cdFx0Y29uc3QgcHJpY2VHcm91cCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0cHJpY2VHcm91cC5jbGFzc05hbWUgPSAnZm9ybS1ncm91cCc7XHJcblx0XHR7XHJcblx0XHRcdGNvbnN0IGxibCA9IHRoaXMuY3JlYXRlTGFiZWwodCgnZm9ybS5wcmljZScpKTtcclxuXHRcdFx0bGJsLmNsYXNzTGlzdC5hZGQoJ2xhYmVsLXJlcXVpcmVkJyk7XHJcblx0XHRcdHByaWNlR3JvdXAuYXBwZW5kQ2hpbGQobGJsKTtcclxuXHRcdH1cclxuXHRcdGNvbnN0IHByaWNlSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcblx0XHRwcmljZUlucHV0LnR5cGUgPSAnbnVtYmVyJztcclxuXHRcdHByaWNlSW5wdXQucGxhY2Vob2xkZXIgPSB0KCdmb3JtLnByaWNlLnBsYWNlaG9sZGVyJyk7XHJcblx0XHRwcmljZUlucHV0LnN0ZXAgPSAnMC4wMSc7XHJcblx0XHRpZiAodGhpcy5hc3NldCkgcHJpY2VJbnB1dC52YWx1ZSA9IHRoaXMuYXNzZXQucHJpY2UudG9TdHJpbmcoKTtcclxuXHRcdC8vIFx1NEUwRSBjb3N0c2V0YXBwIFx1NUJGOVx1OUY1MFx1RkYxQVx1OEY5M1x1NTE2NVx1NEUwRVx1NTkzMVx1NzEyNlx1NjVGNlx1NTFDMFx1NTMxNlx1NEUzQVx1NTQwOFx1NkNENVx1NjU3MFx1NUI1N1x1NjgzQ1x1NUYwRlxyXG5cdFx0Y29uc3Qgc2FuaXRpemVOdW1lcmljID0gKGVsOiBIVE1MSW5wdXRFbGVtZW50KSA9PiB7XHJcblx0XHRcdGVsLnZhbHVlID0gdGhpcy5zYW5pdGl6ZU51bWVyaWNTdHJpbmcoZWwudmFsdWUgfHwgJycpO1xyXG5cdFx0fTtcclxuXHRcdGNvbnN0IGxpbWl0VHdvRGVjaW1hbHMgPSAoZWw6IEhUTUxJbnB1dEVsZW1lbnQpID0+IHtcclxuXHRcdFx0ZWwudmFsdWUgPSB0aGlzLmNsYW1wVHdvRGVjaW1hbHNTdHJpbmcoZWwudmFsdWUgfHwgJycpO1xyXG5cdFx0fTtcclxuXHRcdHByaWNlSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiBzYW5pdGl6ZU51bWVyaWMocHJpY2VJbnB1dCkpO1xyXG5cdFx0cHJpY2VJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgKCkgPT4geyBzYW5pdGl6ZU51bWVyaWMocHJpY2VJbnB1dCk7IGxpbWl0VHdvRGVjaW1hbHMocHJpY2VJbnB1dCk7IH0pO1xyXG5cdFx0e1xyXG5cdFx0XHRjb25zdCBmaWVsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0XHRmaWVsZC5jbGFzc05hbWUgPSAnZm9ybS1maWVsZCc7XHJcblx0XHRcdGZpZWxkLmFwcGVuZENoaWxkKHByaWNlSW5wdXQpO1xyXG5cdFx0XHRwcmljZUdyb3VwLmFwcGVuZENoaWxkKGZpZWxkKTtcclxuXHRcdH1cclxuXHRcdHRoaXMuYXBwbHlSb3dMYXlvdXQocHJpY2VHcm91cCk7XHJcblx0XHRmb3JtLmFwcGVuZENoaWxkKHByaWNlR3JvdXApO1xyXG5cdFx0Y29uc3QgdmFsaWRhdGVQcmljZSA9ICgpID0+IHtcclxuXHRcdFx0Y29uc3Qgc3RyID0gKHByaWNlSW5wdXQudmFsdWUgfHwgJycpLnRyaW0oKTtcclxuXHRcdFx0Y29uc3QgbnVtID0gdGhpcy5wYXJzZU1vbmV5KHN0cik7XHJcblx0XHRcdGlmIChudW0gPT09IG51bGwpIHsgc2V0RXJyb3IocHJpY2VHcm91cCwgdCgnZm9ybS5lcnJvci5wcmljZUludmFsaWQnKSk7IHJldHVybiBmYWxzZTsgfVxyXG5cdFx0XHRjbGVhckVycm9yKHByaWNlR3JvdXApOyByZXR1cm4gdHJ1ZTtcclxuXHRcdH07XHJcblx0XHRwcmljZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgdmFsaWRhdGVQcmljZSk7XHJcblx0XHRwcmljZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCB2YWxpZGF0ZVByaWNlKTtcclxuXHJcblx0XHQvLyBcdTVGMDBcdTU5Q0JcdTY1RTVcdTY3MUZcclxuXHRcdGNvbnN0IGZyb21Hcm91cCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0ZnJvbUdyb3VwLmNsYXNzTmFtZSA9ICdmb3JtLWdyb3VwJztcclxuXHRcdHtcclxuXHRcdFx0Y29uc3QgbGJsID0gdGhpcy5jcmVhdGVMYWJlbCh0KCdmb3JtLnB1cmNoYXNlT24nKSk7XHJcblx0XHRcdGxibC5jbGFzc0xpc3QuYWRkKCdsYWJlbC1yZXF1aXJlZCcpO1xyXG5cdFx0XHRmcm9tR3JvdXAuYXBwZW5kQ2hpbGQobGJsKTtcclxuXHRcdH1cclxuXHRcdGNvbnN0IGZyb21JbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0JykgYXMgSFRNTElucHV0RWxlbWVudDtcclxuXHRcdGZyb21JbnB1dC50eXBlID0gJ3RleHQnO1xyXG5cdFx0ZnJvbUlucHV0LnJlYWRPbmx5ID0gdHJ1ZTtcclxuXHRcdGZyb21JbnB1dC5wbGFjZWhvbGRlciA9IHQoJ2Zvcm0ucHVyY2hhc2VEYXRlJyk7XHJcblx0XHRmcm9tSW5wdXQudmFsdWUgPSB0aGlzLmFzc2V0ID8gdGhpcy5mb3JtYXREYXRlTG9jYWwodGhpcy5hc3NldC5hY3RpdmVGcm9tKSA6ICcnO1xyXG5cdFx0ZnJvbUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdFx0XHR0aGlzLm9wZW5EYXRlUGlja2VyKGZyb21JbnB1dC52YWx1ZSA/IG5ldyBEYXRlKGZyb21JbnB1dC52YWx1ZSkgOiAodGhpcy5hc3NldD8uYWN0aXZlRnJvbSB8fCBuZXcgRGF0ZSgpKSwgKHBpY2tlZCkgPT4ge1xyXG5cdFx0XHRcdGZyb21JbnB1dC52YWx1ZSA9IHRoaXMuZm9ybWF0RGF0ZUxvY2FsKHBpY2tlZCk7XHJcblx0XHRcdFx0Y2xlYXJFcnJvcihmcm9tR3JvdXApO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cdFx0e1xyXG5cdFx0XHRjb25zdCBmaWVsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0XHRmaWVsZC5jbGFzc05hbWUgPSAnZm9ybS1maWVsZCc7XHJcblx0XHRcdGZpZWxkLmFwcGVuZENoaWxkKGZyb21JbnB1dCk7XHJcblx0XHRcdGZyb21Hcm91cC5hcHBlbmRDaGlsZChmaWVsZCk7XHJcblx0XHR9XHJcblx0XHR0aGlzLmFwcGx5Um93TGF5b3V0KGZyb21Hcm91cCk7XHJcblx0XHRmb3JtLmFwcGVuZENoaWxkKGZyb21Hcm91cCk7XHJcblx0XHRjb25zdCB2YWxpZGF0ZUZyb20gPSAoKSA9PiB7XHJcblx0XHRcdGlmICghZnJvbUlucHV0LnZhbHVlKSB7IHNldEVycm9yKGZyb21Hcm91cCwgdCgnZm9ybS5lcnJvci5mcm9tUmVxdWlyZWQnKSk7IHJldHVybiBmYWxzZTsgfVxyXG5cdFx0XHRjbGVhckVycm9yKGZyb21Hcm91cCk7IHJldHVybiB0cnVlO1xyXG5cdFx0fTtcclxuXHRcdGZyb21JbnB1dC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgdmFsaWRhdGVGcm9tKTtcclxuXHJcblx0XHQvLyBcdTdFRDNcdTY3NUZcdTY1RTVcdTY3MUZcclxuXHRcdGNvbnN0IHRvR3JvdXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdHRvR3JvdXAuY2xhc3NOYW1lID0gJ2Zvcm0tZ3JvdXAnO1xyXG5cdFx0dG9Hcm91cC5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUxhYmVsKHQoJ2Zvcm0uZW5kRGF0ZScpKSk7XHJcblx0XHRjb25zdCB0b0lucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG5cdFx0dG9JbnB1dC50eXBlID0gJ3RleHQnO1xyXG5cdFx0dG9JbnB1dC5yZWFkT25seSA9IHRydWU7XHJcblx0XHR0b0lucHV0LnBsYWNlaG9sZGVyID0gdCgnZm9ybS5lbmREYXRlUGxhY2Vob2xkZXInKTtcclxuXHRcdHRvSW5wdXQudmFsdWUgPSAodGhpcy5hc3NldCAmJiB0aGlzLmFzc2V0LmFjdGl2ZVRvKSA/IHRoaXMuZm9ybWF0RGF0ZUxvY2FsKHRoaXMuYXNzZXQuYWN0aXZlVG8pIDogJyc7XHJcblx0XHRsZXQgY2xlYXJCdG46IEhUTUxCdXR0b25FbGVtZW50IHwgdW5kZWZpbmVkO1xyXG5cdFx0Y29uc3QgdXBkYXRlVG9DbGVhciA9ICgpID0+IHsgaWYgKGNsZWFyQnRuKSBjbGVhckJ0bi5zdHlsZS5kaXNwbGF5ID0gdG9JbnB1dC52YWx1ZSA/ICdpbmxpbmUtZmxleCcgOiAnbm9uZSc7IH07XHJcblx0XHR0b0lucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdFx0XHR0aGlzLm9wZW5EYXRlUGlja2VyKHRvSW5wdXQudmFsdWUgPyBuZXcgRGF0ZSh0b0lucHV0LnZhbHVlKSA6ICh0aGlzLmFzc2V0Py5hY3RpdmVUbyB8fCBuZXcgRGF0ZSgpKSwgKHBpY2tlZCkgPT4ge1xyXG5cdFx0XHRcdHRvSW5wdXQudmFsdWUgPSB0aGlzLmZvcm1hdERhdGVMb2NhbChwaWNrZWQpO1xyXG5cdFx0XHRcdHVwZGF0ZVRvQ2xlYXIoKTtcclxuXHRcdFx0XHQvLyBcdTY4MjFcdTlBOENcdTUzM0FcdTk1RjRcclxuXHRcdFx0XHRpZiAoZnJvbUlucHV0LnZhbHVlKSB7XHJcblx0XHRcdFx0XHRjb25zdCBmZCA9IG5ldyBEYXRlKGZyb21JbnB1dC52YWx1ZSk7XHJcblx0XHRcdFx0XHRjb25zdCB0ZCA9IG5ldyBEYXRlKHRvSW5wdXQudmFsdWUpO1xyXG5cdFx0XHRcdFx0aWYgKHRkLmdldFRpbWUoKSA8IGZkLmdldFRpbWUoKSkgc2V0RXJyb3IodG9Hcm91cCwgdCgnZm9ybS5lcnJvci50b0JlZm9yZUZyb20nKSk7IGVsc2UgY2xlYXJFcnJvcih0b0dyb3VwKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblx0XHR7XHJcblx0XHRcdGNvbnN0IGZpZWxkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHRcdGZpZWxkLmNsYXNzTmFtZSA9ICdmb3JtLWZpZWxkJztcclxuXHRcdFx0Y29uc3Qgd3JhcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0XHR3cmFwLmNsYXNzTmFtZSA9ICdpbnB1dC13aXRoLWNsZWFyJztcclxuXHRcdFx0d3JhcC5hcHBlbmRDaGlsZCh0b0lucHV0KTtcclxuXHRcdFx0Y2xlYXJCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuXHRcdFx0Y2xlYXJCdG4udHlwZSA9ICdidXR0b24nO1xyXG5cdFx0XHRjbGVhckJ0bi5jbGFzc05hbWUgPSAnaW5wdXQtY2xlYXInO1xyXG5cdFx0XHRjbGVhckJ0bi50ZXh0Q29udGVudCA9ICdcdTAwRDcnO1xyXG5cdFx0XHRjbGVhckJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpOyBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdHRvSW5wdXQudmFsdWUgPSAnJztcclxuXHRcdFx0XHR1cGRhdGVUb0NsZWFyKCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0XHR3cmFwLmFwcGVuZENoaWxkKGNsZWFyQnRuKTtcclxuXHRcdFx0ZmllbGQuYXBwZW5kQ2hpbGQod3JhcCk7XHJcblx0XHRcdHRvR3JvdXAuYXBwZW5kQ2hpbGQoZmllbGQpO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5hcHBseVJvd0xheW91dCh0b0dyb3VwKTtcclxuXHRcdGZvcm0uYXBwZW5kQ2hpbGQodG9Hcm91cCk7XHJcblx0XHQvLyBcdTUyMURcdTU5Q0JcdTUzMTZcdTZFMDVcdTk2NjRcdTYzMDlcdTk0QUVcdTUzRUZcdTg5QzFcdTYwMjdcclxuXHRcdHVwZGF0ZVRvQ2xlYXIoKTtcclxuXHJcblx0XHQvLyBcdTU2REVcdTY1MzZcdTRFRjdcdTY4M0NcclxuXHRcdGNvbnN0IHJlY3ljbGVHcm91cCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0cmVjeWNsZUdyb3VwLmNsYXNzTmFtZSA9ICdmb3JtLWdyb3VwJztcclxuXHRcdHJlY3ljbGVHcm91cC5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUxhYmVsKHQoJ2Zvcm0ucmVjeWNsZVByaWNlJykpKTtcclxuXHRcdGNvbnN0IHJlY3ljbGVJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0JykgYXMgSFRNTElucHV0RWxlbWVudDtcclxuXHRcdHJlY3ljbGVJbnB1dC50eXBlID0gJ251bWJlcic7XHJcblx0XHRyZWN5Y2xlSW5wdXQucGxhY2Vob2xkZXIgPSB0KCdmb3JtLnJlY3ljbGUucGxhY2Vob2xkZXInKTtcclxuXHRcdHJlY3ljbGVJbnB1dC5zdGVwID0gJzAuMDEnO1xyXG5cdFx0aWYgKHRoaXMuYXNzZXQpIHJlY3ljbGVJbnB1dC52YWx1ZSA9IHRoaXMuYXNzZXQucmVjeWNsZVByaWNlLnRvU3RyaW5nKCk7XHJcblx0XHRyZWN5Y2xlSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiBzYW5pdGl6ZU51bWVyaWMocmVjeWNsZUlucHV0KSk7XHJcblx0XHRyZWN5Y2xlSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsICgpID0+IHsgc2FuaXRpemVOdW1lcmljKHJlY3ljbGVJbnB1dCk7IGxpbWl0VHdvRGVjaW1hbHMocmVjeWNsZUlucHV0KTsgfSk7XHJcblx0XHR7XHJcblx0XHRcdGNvbnN0IGZpZWxkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHRcdGZpZWxkLmNsYXNzTmFtZSA9ICdmb3JtLWZpZWxkJztcclxuXHRcdFx0ZmllbGQuYXBwZW5kQ2hpbGQocmVjeWNsZUlucHV0KTtcclxuXHRcdFx0cmVjeWNsZUdyb3VwLmFwcGVuZENoaWxkKGZpZWxkKTtcclxuXHRcdH1cclxuXHRcdHRoaXMuYXBwbHlSb3dMYXlvdXQocmVjeWNsZUdyb3VwKTtcclxuXHRcdGZvcm0uYXBwZW5kQ2hpbGQocmVjeWNsZUdyb3VwKTtcclxuXHJcblxyXG5cdFx0Ly8gXHU2ODA3XHU3QjdFXHVGRjA4Y2hpcHMgKyBcdTU2REVcdThGNjZcdTc4NkVcdThCQTRcdUZGMDlcclxuXHRcdGNvbnN0IHRhZ3NHcm91cCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0dGFnc0dyb3VwLmNsYXNzTmFtZSA9ICdmb3JtLWdyb3VwJztcclxuXHRcdHRhZ3NHcm91cC5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUxhYmVsKHQoJ2Zvcm0udGFncycpKSk7XHJcblx0XHRsZXQgY3VycmVudFRhZ3M6IHN0cmluZ1tdID0gdGhpcy5hc3NldCA/IFsuLi4odGhpcy5hc3NldC50YWdzIHx8IFtdKV0gOiBbXTtcclxuXHRcdGNvbnN0IHRhZ3NXcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHR0YWdzV3JhcHBlci5jbGFzc05hbWUgPSAndGFncy1pbnB1dCc7XHJcblx0XHRjb25zdCB0YWdzSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcblx0XHR0YWdzSW5wdXQudHlwZSA9ICd0ZXh0JztcclxuXHRcdHRhZ3NJbnB1dC5wbGFjZWhvbGRlciA9IHQoJ2Zvcm0udGFncy5wbGFjZWhvbGRlcicpO1xyXG5cdFx0dGFnc1dyYXBwZXIuYXBwZW5kQ2hpbGQodGFnc0lucHV0KTtcclxuXHRcdHtcclxuXHRcdFx0Y29uc3QgZmllbGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdFx0ZmllbGQuY2xhc3NOYW1lID0gJ2Zvcm0tZmllbGQnO1xyXG5cdFx0XHRmaWVsZC5hcHBlbmRDaGlsZCh0YWdzV3JhcHBlcik7XHJcblx0XHRcdHRhZ3NHcm91cC5hcHBlbmRDaGlsZChmaWVsZCk7XHJcblx0XHR9XHJcblx0XHR0aGlzLmFwcGx5Um93TGF5b3V0KHRhZ3NHcm91cCk7XHJcblx0XHRmb3JtLmFwcGVuZENoaWxkKHRhZ3NHcm91cCk7XHJcblxyXG5cdFx0Y29uc3Qgbm9ybWFsaXplID0gKHRzdHI6IHN0cmluZykgPT4gdHN0ci50cmltKCk7XHJcblx0XHRjb25zdCBhZGRUYWcgPSAocmF3OiBzdHJpbmcpID0+IHtcclxuXHRcdFx0Y29uc3QgcGllY2VzID0gcmF3LnNwbGl0KC9bXHVGRjBDLFxcc10rLykubWFwKG5vcm1hbGl6ZSkuZmlsdGVyKEJvb2xlYW4pO1xyXG5cdFx0XHRwaWVjZXMuZm9yRWFjaChwID0+IHsgaWYgKCFjdXJyZW50VGFncy5pbmNsdWRlcyhwKSkgY3VycmVudFRhZ3MucHVzaChwKTsgfSk7XHJcblx0XHRcdHN5bmNDaGlwcygpO1xyXG5cdFx0XHR0YWdzSW5wdXQudmFsdWUgPSAnJztcclxuXHRcdH07XHJcblx0XHRjb25zdCByZW1vdmVUYWcgPSAodmFsdWU6IHN0cmluZykgPT4ge1xyXG5cdFx0XHRjdXJyZW50VGFncyA9IGN1cnJlbnRUYWdzLmZpbHRlcih0ZyA9PiB0ZyAhPT0gdmFsdWUpO1xyXG5cdFx0XHRzeW5jQ2hpcHMoKTtcclxuXHRcdH07XHJcblx0XHRjb25zdCBzeW5jQ2hpcHMgPSAoKSA9PiB7XHJcblx0XHRcdEFycmF5LmZyb20odGFnc1dyYXBwZXIucXVlcnlTZWxlY3RvckFsbCgnLnRhZy1jaGlwJykpLmZvckVhY2goZWwgPT4gZWwucmVtb3ZlKCkpO1xyXG5cdFx0XHRjdXJyZW50VGFncy5mb3JFYWNoKHRhZyA9PiB7XHJcblx0XHRcdFx0Y29uc3QgY2hpcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcclxuXHRcdFx0XHRjaGlwLmNsYXNzTmFtZSA9ICd0YWctY2hpcCc7XHJcblx0XHRcdFx0Y2hpcC50ZXh0Q29udGVudCA9IHRhZztcclxuXHRcdFx0XHRjb25zdCBybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG5cdFx0XHRcdHJtLnR5cGUgPSAnYnV0dG9uJztcclxuXHRcdFx0XHRybS5jbGFzc05hbWUgPSAncmVtb3ZlJztcclxuXHRcdFx0XHRybS50ZXh0Q29udGVudCA9ICdcdTAwRDcnO1xyXG5cdFx0XHRcdHJtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gcmVtb3ZlVGFnKHRhZykpO1xyXG5cdFx0XHRcdGNoaXAuYXBwZW5kQ2hpbGQocm0pO1xyXG5cdFx0XHRcdHRhZ3NXcmFwcGVyLmluc2VydEJlZm9yZShjaGlwLCB0YWdzSW5wdXQpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH07XHJcblxyXG5cdFx0Ly8gXHU1MjFEXHU1OUNCXHU2RTMyXHU2N0QzXHU1REYyXHU1QjU4XHU1NzI4XHU2ODA3XHU3QjdFXHJcblx0XHRzeW5jQ2hpcHMoKTtcclxuXHJcblx0XHQvLyBcdThGOTNcdTUxNjVcdTRFQTRcdTRFOTJcdUZGMUFFbnRlciBcdTYyMTZcdTkwMTdcdTUzRjdcdTYzRDBcdTRFQTRcdUZGMUJCYWNrc3BhY2UgXHU1MjIwXHU5NjY0XHU2NzAwXHU1NDBFXHU0RTAwXHU0RTJBXHJcblx0XHR0YWdzSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlOiBLZXlib2FyZEV2ZW50KSA9PiB7XHJcblx0XHRcdGlmIChlLmtleSA9PT0gJ0VudGVyJyB8fCBlLmtleSA9PT0gJywnIHx8IGUua2V5ID09PSAnXHVGRjBDJykge1xyXG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRpZiAodGFnc0lucHV0LnZhbHVlLnRyaW0oKSkgYWRkVGFnKHRhZ3NJbnB1dC52YWx1ZSk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKGUua2V5ID09PSAnQmFja3NwYWNlJyAmJiAhdGFnc0lucHV0LnZhbHVlICYmIGN1cnJlbnRUYWdzLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0cmVtb3ZlVGFnKGN1cnJlbnRUYWdzW2N1cnJlbnRUYWdzLmxlbmd0aCAtIDFdKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHR0YWdzSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsICgpID0+IHtcclxuXHRcdFx0aWYgKHRhZ3NJbnB1dC52YWx1ZS50cmltKCkpIGFkZFRhZyh0YWdzSW5wdXQudmFsdWUpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gXHU2NENEXHU0RjVDXHU2MzA5XHU5NEFFXHJcblx0XHRjb25zdCBhY3Rpb25zID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHRhY3Rpb25zLmNsYXNzTmFtZSA9ICdmb3JtLWFjdGlvbnMnO1xyXG5cdFx0Y29uc3QgY2FuY2VsQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcblx0XHRjYW5jZWxCdG4udHlwZSA9ICdidXR0b24nO1xyXG5cdFx0Y2FuY2VsQnRuLnRleHRDb250ZW50ID0gdCgnZm9ybS5hY3Rpb24uY2FuY2VsJyk7XHJcblx0XHRjYW5jZWxCdG4uY2xhc3NOYW1lID0gJ2Zvcm0tYnRuIGZvcm0tYnRuLXNlY29uZGFyeSc7XHJcblx0XHRjb25zdCBkZWxldGVCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuXHRcdGRlbGV0ZUJ0bi50eXBlID0gJ2J1dHRvbic7XHJcblx0XHRkZWxldGVCdG4udGV4dENvbnRlbnQgPSB0KCdmb3JtLmFjdGlvbi5kZWxldGUnKTtcclxuXHRcdGRlbGV0ZUJ0bi5jbGFzc05hbWUgPSAnZm9ybS1idG4gZm9ybS1idG4tZGFuZ2VyJztcclxuXHRcdGNvbnN0IHNhdmVCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuXHRcdHNhdmVCdG4udHlwZSA9ICdzdWJtaXQnO1xyXG5cdFx0c2F2ZUJ0bi50ZXh0Q29udGVudCA9IHQoJ2Zvcm0uYWN0aW9uLnNhdmUnKTtcclxuXHRcdHNhdmVCdG4uY2xhc3NOYW1lID0gJ2Zvcm0tYnRuIGZvcm0tYnRuLXByaW1hcnknO1xyXG5cdFx0YWN0aW9ucy5hcHBlbmRDaGlsZChjYW5jZWxCdG4pO1xyXG5cdFx0aWYgKHRoaXMuYXNzZXQpIGFjdGlvbnMuYXBwZW5kQ2hpbGQoZGVsZXRlQnRuKTtcclxuXHRcdGFjdGlvbnMuYXBwZW5kQ2hpbGQoc2F2ZUJ0bik7XHJcblx0XHRmb3JtLmFwcGVuZENoaWxkKGFjdGlvbnMpO1xyXG5cclxuXHRcdGNvbnRlbnQuYXBwZW5kQ2hpbGQoZm9ybSk7XHJcblx0XHR0aGlzLm1vZGFsRWwuYXBwZW5kQ2hpbGQoY29udGVudCk7XHJcblx0XHR0aGlzLm1hc2tFbC5hcHBlbmRDaGlsZCh0aGlzLm1vZGFsRWwpO1xyXG5cdFx0ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLm1hc2tFbCk7XHJcblxyXG5cdFx0Ly8gXHU0RThCXHU0RUY2XHJcblx0XHRjb25zdCBjbG9zZSA9ICgpID0+IHRoaXMuY2xvc2UoKTtcclxuXHRcdHRoaXMubWFza0VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHsgaWYgKGUudGFyZ2V0ID09PSB0aGlzLm1hc2tFbCkgY2xvc2UoKTsgfSk7XHJcblx0XHRjYW5jZWxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zZSk7XHJcblx0XHRpZiAodGhpcy5hc3NldCkge1xyXG5cdFx0XHRkZWxldGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0aWYgKCF0aGlzLmFzc2V0KSByZXR1cm47XHJcblx0XHRcdFx0Y29uc3Qgb2sgPSBhd2FpdCBuZXcgQ29uZmlybU1vZGFsKHQoJ3ZpZXcuY29uZmlybURlbGV0ZUFzc2V0JywgeyBuYW1lOiB0aGlzLmFzc2V0Lm5hbWUgfSksIHQoJ2NvbW1vbi5kZWxldGUnKSwgdCgnY29tbW9uLmNhbmNlbCcpLCB0cnVlKS5vcGVuKCk7XHJcblx0XHRcdFx0aWYgKCFvaykgcmV0dXJuO1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMuYXNzZXRSZXBvc2l0b3J5LmRlbGV0ZUFzc2V0KHRoaXMuYXNzZXQuaWQpO1xyXG5cdFx0XHRcdGlmICh0aGlzLm9uU2F2ZWQpIHRoaXMub25TYXZlZCgpO1xyXG5cdFx0XHRcdGNsb3NlKCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdFx0Zm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBhc3luYyAoZSkgPT4ge1xyXG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdC8vIFx1NkUwNVx1NzQwNlx1OEZDN1x1NUY4MFx1OTUxOVx1OEJFRlxyXG5cdFx0XHRjbGVhckVycm9yKG5hbWVHcm91cCk7IGNsZWFyRXJyb3IocHJpY2VHcm91cCk7IGNsZWFyRXJyb3IoZnJvbUdyb3VwKTsgY2xlYXJFcnJvcih0b0dyb3VwKTsgY2xlYXJFcnJvcihyZWN5Y2xlR3JvdXApO1xyXG5cdFx0XHQvLyBcdTU3RkFcdTc4NDBcdTVGQzVcdTU4NkJcdTRFMEVcdTY4M0NcdTVGMEZcdTY4MjFcdTlBOENcclxuXHRcdFx0Y29uc3QgbmFtZVZhbCA9IChuYW1lSW5wdXQudmFsdWUgfHwgJycpLnRyaW0oKTtcclxuXHRcdFx0Y29uc3QgcHJpY2VTdHIgPSAocHJpY2VJbnB1dC52YWx1ZSB8fCAnJykudHJpbSgpO1xyXG5cdFx0XHRjb25zdCBwcmljZU51bSA9IHRoaXMucGFyc2VNb25leShwcmljZVN0cik7XHJcblx0XHRcdGxldCB2YWxpZCA9IHRydWU7XHJcblx0XHRcdGlmICghbmFtZVZhbCkgeyBzZXRFcnJvcihuYW1lR3JvdXAsIHQoJ2Zvcm0uZXJyb3IubmFtZVJlcXVpcmVkJykpOyB2YWxpZCA9IGZhbHNlOyB9XHJcblx0XHRcdGlmIChwcmljZU51bSA9PT0gbnVsbCkgeyBzZXRFcnJvcihwcmljZUdyb3VwLCB0KCdmb3JtLmVycm9yLnByaWNlSW52YWxpZCcpKTsgdmFsaWQgPSBmYWxzZTsgfVxyXG5cdFx0XHRpZiAoIWZyb21JbnB1dC52YWx1ZSkgeyBzZXRFcnJvcihmcm9tR3JvdXAsIHQoJ2Zvcm0uZXJyb3IuZnJvbVJlcXVpcmVkJykpOyB2YWxpZCA9IGZhbHNlOyB9XHJcblx0XHRcdGlmICghdmFsaWQpIHtcclxuXHRcdFx0XHRjb25zdCBmaXJzdEVyciA9IFtuYW1lR3JvdXAsIHByaWNlR3JvdXAsIGZyb21Hcm91cF0uZmluZChnID0+IGcuY2xhc3NMaXN0LmNvbnRhaW5zKCdoYXMtZXJyb3InKSkgYXMgSFRNTEVsZW1lbnQgfCB1bmRlZmluZWQ7XHJcblx0XHRcdFx0aWYgKGZpcnN0RXJyKSB7XHJcblx0XHRcdFx0XHQoZmlyc3RFcnIucXVlcnlTZWxlY3RvcignaW5wdXQnKSBhcyBIVE1MSW5wdXRFbGVtZW50IHwgbnVsbCk/LmZvY3VzKCk7XHJcblx0XHRcdFx0XHRmaXJzdEVyci5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnc21vb3RoJywgYmxvY2s6ICdjZW50ZXInIH0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdFx0Y29uc3QgZnJvbURhdGUgPSBuZXcgRGF0ZShmcm9tSW5wdXQudmFsdWUpO1xyXG5cdFx0XHRjb25zdCBwcmljZVZhbHVlID0gcHJpY2VOdW0gYXMgbnVtYmVyO1xyXG5cdFx0XHRsZXQgdG9EYXRlOiBEYXRlIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xyXG5cdFx0XHRpZiAodG9JbnB1dC52YWx1ZSkge1xyXG5cdFx0XHRcdGNvbnN0IGQgPSBuZXcgRGF0ZSh0b0lucHV0LnZhbHVlKTtcclxuXHRcdFx0XHRpZiAoZC5nZXRUaW1lKCkgPCBmcm9tRGF0ZS5nZXRUaW1lKCkpIHsgc2V0RXJyb3IodG9Hcm91cCwgdCgnZm9ybS5lcnJvci50b0JlZm9yZUZyb20nKSk7ICh0b0dyb3VwLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0JykgYXMgSFRNTElucHV0RWxlbWVudCB8IG51bGwpPy5mb2N1cygpOyByZXR1cm47IH1cclxuXHRcdFx0XHR0b0RhdGUgPSBkO1xyXG5cdFx0XHR9XHJcblx0XHRcdGNvbnN0IHJlY3ljbGVTdHIgPSAocmVjeWNsZUlucHV0LnZhbHVlIHx8ICcnKS50cmltKCk7XHJcblx0XHRcdGNvbnN0IHJlY3ljbGVOdW0gPSByZWN5Y2xlU3RyID8gdGhpcy5wYXJzZU1vbmV5KHJlY3ljbGVTdHIpIDogMDtcclxuXHRcdFx0aWYgKHJlY3ljbGVTdHIgJiYgcmVjeWNsZU51bSA9PT0gbnVsbCkgeyBzZXRFcnJvcihyZWN5Y2xlR3JvdXAsIHQoJ2Zvcm0uZXJyb3IucmVjeWNsZUludmFsaWQnKSk7IHJldHVybjsgfVxyXG5cdFx0XHRpZiAoKHJlY3ljbGVOdW0gfHwgMCkgPiBwcmljZVZhbHVlKSB7IHNldEVycm9yKHJlY3ljbGVHcm91cCwgdCgnZm9ybS5lcnJvci5yZWN5Y2xlR3RQcmljZScpKTsgcmV0dXJuOyB9XHJcblxyXG5cdFx0XHRjb25zdCBhc3NldERhdGEgPSB7XHJcblx0XHRcdFx0aWQ6IHRoaXMuYXNzZXQ/LmlkIHx8IG5hbWVWYWwsXHJcblx0XHRcdFx0bmFtZTogbmFtZVZhbCxcclxuXHRcdFx0XHRpY29uOiBpY29uSW5wdXQudmFsdWUgfHwgJ1x1RDgzRFx1RENFNicsXHJcblx0XHRcdFx0cHJpY2U6IHByaWNlVmFsdWUsXHJcblx0XHRcdFx0YWN0aXZlRnJvbTogZnJvbURhdGUsXHJcblx0XHRcdFx0YWN0aXZlVG86IHRvRGF0ZSxcclxuXHRcdFx0XHRyZWN5Y2xlUHJpY2U6IHJlY3ljbGVOdW0gfHwgMCxcclxuXHRcdFx0XHR0YWdzOiBjdXJyZW50VGFnc1xyXG5cdFx0XHR9O1xyXG5cdFx0XHR0cnkge1xyXG5cdFx0XHRcdGNvbnN0IGFzc2V0ID0gbmV3IEFzc2V0KGFzc2V0RGF0YSk7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5hc3NldFJlcG9zaXRvcnkuc2F2ZUFzc2V0KGFzc2V0KTtcclxuXHRcdFx0XHRpZiAodGhpcy5vblNhdmVkKSB0aGlzLm9uU2F2ZWQoKTtcclxuXHRcdFx0XHRjbG9zZSgpO1xyXG5cdFx0XHR9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcblx0XHRcdFx0bmV3IE5vdGljZSh0KCdub3RpY2Uuc2F2ZUZhaWxlZCcsIHsgbXNnOiBlcnJvci5tZXNzYWdlIH0pKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGluamVjdEFzc2V0Rm9ybVN0eWxlcygpIHtcclxuXHRcdGNvbnN0IFNUWUxFX0lEID0gJ2Fzc2V0LWZvcm0taW5saW5lLXN0eWxlcyc7XHJcblx0XHRpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoU1RZTEVfSUQpKSByZXR1cm47XHJcblx0XHRjb25zdCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XHJcblx0XHRzdHlsZS5pZCA9IFNUWUxFX0lEO1xyXG5cdFx0c3R5bGUudGV4dENvbnRlbnQgPSBgXHJcblx0XHRcdC8qIFx1NTIzMFx1NjcxRlx1OEY5M1x1NTE2NVx1NkUwNVx1OTY2NFx1NjMwOVx1OTRBRSAqL1xyXG5cdFx0XHQuZGF0ZS1waWNrZXItbW9kYWwuYXNzZXQtZm9ybS1tb2RhbCAuaW5wdXQtd2l0aC1jbGVhciB7IHBvc2l0aW9uOiByZWxhdGl2ZTsgfVxyXG5cdFx0XHQuZGF0ZS1waWNrZXItbW9kYWwuYXNzZXQtZm9ybS1tb2RhbCAuaW5wdXQtd2l0aC1jbGVhciAuaW5wdXQtY2xlYXIgeyBwb3NpdGlvbjogYWJzb2x1dGU7IHJpZ2h0OiA2cHg7IHRvcDogNTAlOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSk7IHdpZHRoOiAxOHB4OyBoZWlnaHQ6IDE4cHg7IGJvcmRlci1yYWRpdXM6IDUwJTsgZGlzcGxheTogbm9uZTsgYWxpZ24taXRlbXM6IGNlbnRlcjsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IGZvbnQtc2l6ZTogMTRweDsgbGluZS1oZWlnaHQ6IDE4cHg7IH1cclxuXHRcdFx0LyogXHU1RjM5XHU3QTk3XHU1QkI5XHU1NjY4XHU2NkY0XHU3RDI3XHU1MUQxICovXHJcblx0XHRcdC5kYXRlLXBpY2tlci1tb2RhbC5hc3NldC1mb3JtLW1vZGFsIHsgbWF4LWhlaWdodDogODB2aDsgb3ZlcmZsb3c6IGF1dG87IH1cclxuXHRcdFx0LmRhdGUtcGlja2VyLW1vZGFsLmFzc2V0LWZvcm0tbW9kYWwgLmRhdGUtcGlja2VyLWNvbnRlbnQgeyBwYWRkaW5nOiAxNnB4IDIwcHg7IGRpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IGdhcDogMCAhaW1wb3J0YW50OyB9XHJcblx0XHRcdC5kYXRlLXBpY2tlci1tb2RhbC5hc3NldC1mb3JtLW1vZGFsIC5kYXRlLXBpY2tlci10aXRsZSB7IGZvbnQtc2l6ZTogMTRweDsgbWFyZ2luLWJvdHRvbTogNnB4OyB9XHJcblxyXG5cdFx0XHQvKiBcdTZBMkFcdTU0MTFcdTg4NjhcdTUzNTVcdTVFMDNcdTVDNDBcdUZGMENcdTUzOEJcdTdGMjlcdTU3ODJcdTc2RjRcdTdBN0FcdTc2N0QgKi9cclxuXHRcdFx0LmRhdGUtcGlja2VyLW1vZGFsLmFzc2V0LWZvcm0tbW9kYWwgLmFzc2V0LWZvcm0uYXNzZXQtZm9ybS0taG9yaXpvbnRhbCB7IGZvbnQtc2l6ZTogMTUuNXB4OyBkaXNwbGF5OiBncmlkICFpbXBvcnRhbnQ7IGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyOyByb3ctZ2FwOiA4cHggIWltcG9ydGFudDsgY29sdW1uLWdhcDogMCAhaW1wb3J0YW50OyBnYXA6IDhweCAhaW1wb3J0YW50OyB9XHJcblx0XHRcdC5kYXRlLXBpY2tlci1tb2RhbC5hc3NldC1mb3JtLW1vZGFsIC5hc3NldC1mb3JtLmFzc2V0LWZvcm0tLWhvcml6b250YWwgLmZvcm0tZ3JvdXAgeyBkaXNwbGF5OiBncmlkICFpbXBvcnRhbnQ7IGdyaWQtdGVtcGxhdGUtY29sdW1uczogNjRweCAxZnI7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGNvbHVtbi1nYXA6IDhweDsgcm93LWdhcDogMDsgbWFyZ2luOiAwICFpbXBvcnRhbnQ7IHBhZGRpbmc6IDAgIWltcG9ydGFudDsgfVxyXG5cdFx0XHQuZGF0ZS1waWNrZXItbW9kYWwuYXNzZXQtZm9ybS1tb2RhbCAuYXNzZXQtZm9ybS5hc3NldC1mb3JtLS1ob3Jpem9udGFsIGxhYmVsIHsgbWluLXdpZHRoOiA2NHB4OyBtYXJnaW46IDA7IHRleHQtYWxpZ246IHJpZ2h0OyBqdXN0aWZ5LXNlbGY6IGVuZDsgfVxyXG5cdFx0XHQuZGF0ZS1waWNrZXItbW9kYWwuYXNzZXQtZm9ybS1tb2RhbCAuYXNzZXQtZm9ybS5hc3NldC1mb3JtLS1ob3Jpem9udGFsIC5mb3JtLWZpZWxkIHsgd2lkdGg6IDEwMCU7IG1hcmdpbjogMCAhaW1wb3J0YW50OyBwYWRkaW5nOiAwICFpbXBvcnRhbnQ7IH1cclxuXHRcdFx0LyogXHU1MzhCXHU3RjI5XHU4RjkzXHU1MTY1XHU2M0E3XHU0RUY2XHU5QUQ4XHU1RUE2XHU0RTBFXHU1MTg1XHU4RkI5XHU4REREICovXHJcblx0XHRcdC5kYXRlLXBpY2tlci1tb2RhbC5hc3NldC1mb3JtLW1vZGFsIC5hc3NldC1mb3JtLmFzc2V0LWZvcm0tLWhvcml6b250YWwgaW5wdXRbdHlwZT1cInRleHRcIl0sXHJcblx0XHRcdC5kYXRlLXBpY2tlci1tb2RhbC5hc3NldC1mb3JtLW1vZGFsIC5hc3NldC1mb3JtLmFzc2V0LWZvcm0tLWhvcml6b250YWwgaW5wdXRbdHlwZT1cIm51bWJlclwiXSB7IGhlaWdodDogMzJweDsgcGFkZGluZzogNHB4IDEwcHg7IGZvbnQtc2l6ZTogMTUuNXB4OyBsaW5lLWhlaWdodDogMS40NTsgfVxyXG5cdFx0XHQvKiBcdTY4MDdcdTdCN0VcdThGOTNcdTUxNjVcdTRFMEUgY2hpcCBcdTY2RjRcdTdEMjdcdTUxRDEgKi9cclxuXHRcdFx0LmRhdGUtcGlja2VyLW1vZGFsLmFzc2V0LWZvcm0tbW9kYWwgLmFzc2V0LWZvcm0uYXNzZXQtZm9ybS0taG9yaXpvbnRhbCAudGFncy1pbnB1dCB7IGRpc3BsYXk6IGZsZXg7IGZsZXgtd3JhcDogd3JhcDsgZ2FwOiA0cHg7IH1cclxuXHRcdFx0LmRhdGUtcGlja2VyLW1vZGFsLmFzc2V0LWZvcm0tbW9kYWwgLmFzc2V0LWZvcm0uYXNzZXQtZm9ybS0taG9yaXpvbnRhbCAudGFnLWNoaXAgeyBmb250LXNpemU6IDEycHg7IGhlaWdodDogMThweDsgbGluZS1oZWlnaHQ6IDE4cHg7IHBhZGRpbmc6IDAgNnB4OyBib3JkZXItcmFkaXVzOiA0cHg7IH1cclxuXHRcdFx0LmRhdGUtcGlja2VyLW1vZGFsLmFzc2V0LWZvcm0tbW9kYWwgLmFzc2V0LWZvcm0uYXNzZXQtZm9ybS0taG9yaXpvbnRhbCAudGFnLWNoaXAgLnJlbW92ZSB7IHdpZHRoOiAxNnB4OyBoZWlnaHQ6IDE2cHg7IGxpbmUtaGVpZ2h0OiAxNnB4OyBmb250LXNpemU6IDEycHg7IG1hcmdpbi1sZWZ0OiA0cHg7IH1cclxuXHRcdFx0LmRhdGUtcGlja2VyLW1vZGFsLmFzc2V0LWZvcm0tbW9kYWwgLmFzc2V0LWZvcm0uYXNzZXQtZm9ybS0taG9yaXpvbnRhbCAudGFncy1pbnB1dCBpbnB1dCB7IGZsZXg6IDE7IG1pbi13aWR0aDogMTIwcHg7IGhlaWdodDogMjhweDsgcGFkZGluZzogNHB4IDEwcHg7IGZvbnQtc2l6ZTogMTQuNXB4OyB9XHJcblxyXG5cdFx0XHQvKiBcdTVGQzVcdTU4NkJcdTRFMEVcdTk1MTlcdThCRUZcdTY4MzdcdTVGMEYgKi9cclxuXHRcdFx0LmRhdGUtcGlja2VyLW1vZGFsLmFzc2V0LWZvcm0tbW9kYWwgLmxhYmVsLXJlcXVpcmVkOjphZnRlciB7IGNvbnRlbnQ6ICcgKic7IGNvbG9yOiAjZmY0ZDRmOyBtYXJnaW4tbGVmdDogMnB4OyB9XHJcblx0XHRcdC5kYXRlLXBpY2tlci1tb2RhbC5hc3NldC1mb3JtLW1vZGFsIC5mb3JtLWdyb3VwLmhhcy1lcnJvciBpbnB1dFt0eXBlPVwidGV4dFwiXSxcclxuXHRcdFx0LmRhdGUtcGlja2VyLW1vZGFsLmFzc2V0LWZvcm0tbW9kYWwgLmZvcm0tZ3JvdXAuaGFzLWVycm9yIGlucHV0W3R5cGU9XCJudW1iZXJcIl0geyBib3JkZXItY29sb3I6ICNmZjRkNGYgIWltcG9ydGFudDsgYm94LXNoYWRvdzogMCAwIDAgMXB4ICNmZjRkNGYgaW5zZXQ7IH1cclxuXHRcdFx0LmRhdGUtcGlja2VyLW1vZGFsLmFzc2V0LWZvcm0tbW9kYWwgLmZpZWxkLWVycm9yIHsgbWFyZ2luLXRvcDogNHB4OyBjb2xvcjogI2ZmODU4NzsgZm9udC1zaXplOiAxMnB4OyBsaW5lLWhlaWdodDogMS4zOyB9XHJcblx0XHRcdC5kYXRlLXBpY2tlci1tb2RhbC5hc3NldC1mb3JtLW1vZGFsIC5maWVsZC1lcnJvcjplbXB0eSB7IGRpc3BsYXk6IG5vbmU7IG1hcmdpbi10b3A6IDA7IH1cclxuXHJcblx0XHRcdC8qIFx1NjRDRFx1NEY1Q1x1NjMwOVx1OTRBRVx1NTMzQVx1NjZGNFx1N0QyN1x1NTFEMSAqL1xyXG5cdFx0XHQuZGF0ZS1waWNrZXItbW9kYWwuYXNzZXQtZm9ybS1tb2RhbCAuZm9ybS1hY3Rpb25zIHsgbWFyZ2luLXRvcDogMTJweDsgZ2FwOiAxNnB4OyBkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgfVxyXG5cdFx0XHQuZGF0ZS1waWNrZXItbW9kYWwuYXNzZXQtZm9ybS1tb2RhbCAuZm9ybS1idG4geyBoZWlnaHQ6IDM0cHg7IHBhZGRpbmc6IDAgMTRweDsgZm9udC1zaXplOiAxNHB4OyB9XHJcblx0XHRgO1xyXG5cdFx0ZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZSk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGFwcGx5Um93TGF5b3V0KGdyb3VwOiBIVE1MRWxlbWVudCkge1xyXG5cdFx0Z3JvdXAuc3R5bGUuZGlzcGxheSA9ICdncmlkJztcclxuXHRcdChncm91cC5zdHlsZSBhcyBhbnkpLmdyaWRUZW1wbGF0ZUNvbHVtbnMgPSAnNzJweCAxZnInO1xyXG5cdFx0Z3JvdXAuc3R5bGUuYWxpZ25JdGVtcyA9ICdjZW50ZXInO1xyXG5cdFx0Z3JvdXAuc3R5bGUuY29sdW1uR2FwID0gJzhweCc7XHJcblx0XHRncm91cC5zdHlsZS5yb3dHYXAgPSAnMHB4JztcclxuXHRcdGdyb3VwLnN0eWxlLm1hcmdpbiA9ICcwJztcclxuXHRcdGNvbnN0IGxhYmVsID0gZ3JvdXAucXVlcnlTZWxlY3RvcignbGFiZWwnKSBhcyBIVE1MRWxlbWVudCB8IG51bGw7XHJcblx0XHRpZiAobGFiZWwpIHtcclxuXHRcdFx0bGFiZWwuc3R5bGUubWluV2lkdGggPSAnNzJweCc7XHJcblx0XHRcdGxhYmVsLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lLWJsb2NrJztcclxuXHRcdFx0bGFiZWwuc3R5bGUubWFyZ2luID0gJzAnO1xyXG5cdFx0fVxyXG5cdFx0Y29uc3QgZmllbGQgPSBncm91cC5xdWVyeVNlbGVjdG9yKCcuZm9ybS1maWVsZCcpIGFzIEhUTUxFbGVtZW50IHwgbnVsbDtcclxuXHRcdGlmIChmaWVsZCkge1xyXG5cdFx0XHRmaWVsZC5zdHlsZS53aWR0aCA9ICcxMDAlJztcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGNsb3NlKCkge1xyXG5cdFx0aWYgKHRoaXMubWFza0VsICYmIHRoaXMubWFza0VsLnBhcmVudEVsZW1lbnQpIHtcclxuXHRcdFx0dGhpcy5tYXNrRWwucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZCh0aGlzLm1hc2tFbCk7XHJcblx0XHR9XHJcblx0XHR0aGlzLm1hc2tFbCA9IHVuZGVmaW5lZDtcclxuXHRcdHRoaXMubW9kYWxFbCA9IHVuZGVmaW5lZDtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgZm9ybWF0RGF0ZUxvY2FsKGRhdGU6IERhdGUpOiBzdHJpbmcge1xyXG5cdFx0Y29uc3QgZCA9IG5ldyBEYXRlKGRhdGUuZ2V0VGltZSgpIC0gZGF0ZS5nZXRUaW1lem9uZU9mZnNldCgpICogNjAwMDApO1xyXG5cdFx0cmV0dXJuIGQudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xyXG5cdH1cclxuXHJcblx0Ly8gXHUyMDE0XHUyMDE0IFx1OTFEMVx1OTg5RFx1NUI1N1x1N0IyNlx1NEUzMlx1NTkwNFx1NzQwNlx1RkYwOFx1NjIxMFx1NzE5Rlx1OTAzQlx1OEY5MVx1RkYwOVx1MjAxNFx1MjAxNFxyXG5cdHByaXZhdGUgc2FuaXRpemVOdW1lcmljU3RyaW5nKHZhbHVlOiBzdHJpbmcpOiBzdHJpbmcge1xyXG5cdFx0bGV0IHYgPSAodmFsdWUgfHwgJycpLnJlcGxhY2UoL1teXFxkLl0vZywgJycpOyAvLyBcdTRFQzVcdTY1NzBcdTVCNTdcdTU0OENcdTcwQjlcclxuXHRcdHYgPSB2LnJlcGxhY2UoL15cXC4vLCAnJyk7IC8vIFx1NTNCQlx1OTY2NFx1NUYwMFx1NTkzNFx1NzY4NFx1NzBCOVxyXG5cdFx0diA9IHYucmVwbGFjZSgvXFwuKD89LipcXC4pL2csICcnKTsgLy8gXHU1M0VBXHU0RkREXHU3NTU5XHU0RTAwXHU0RTJBXHU3MEI5XHJcblx0XHRyZXR1cm4gdjtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgY2xhbXBUd29EZWNpbWFsc1N0cmluZyh2YWx1ZTogc3RyaW5nKTogc3RyaW5nIHtcclxuXHRcdGNvbnN0IG0gPSAodmFsdWUgfHwgJycpLm1hdGNoKC9eKFxcZCspKD86XFwuKFxcZCopKT8kLyk7XHJcblx0XHRpZiAoIW0pIHJldHVybiAnJztcclxuXHRcdGNvbnN0IGludFBhcnQgPSBtWzFdO1xyXG5cdFx0Y29uc3QgZGVjUGFydCA9IChtWzJdIHx8ICcnKS5zbGljZSgwLCAyKTtcclxuXHRcdHJldHVybiBkZWNQYXJ0ID8gYCR7aW50UGFydH0uJHtkZWNQYXJ0fWAgOiBpbnRQYXJ0O1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBwYXJzZU1vbmV5KHZhbHVlOiBzdHJpbmcpOiBudW1iZXIgfCBudWxsIHtcclxuXHRcdGNvbnN0IHNhbml0aXplZCA9IHRoaXMuc2FuaXRpemVOdW1lcmljU3RyaW5nKHZhbHVlKTtcclxuXHRcdGNvbnN0IGNsYW1wZWQgPSB0aGlzLmNsYW1wVHdvRGVjaW1hbHNTdHJpbmcoc2FuaXRpemVkKTtcclxuXHRcdGlmIChjbGFtcGVkID09PSAnJykgcmV0dXJuIG51bGw7XHJcblx0XHRjb25zdCBudW0gPSBOdW1iZXIoY2xhbXBlZCk7XHJcblx0XHRyZXR1cm4gTnVtYmVyLmlzRmluaXRlKG51bSkgJiYgbnVtID49IDAgPyBudW0gOiBudWxsO1xyXG5cdH1cclxuXHJcblx0Ly8gXHU0RTBFIGNvc3RzZXRhcHAgXHU1QkY5XHU5RjUwXHVGRjFBXHU3NTI4IHN1cnJvZ2F0ZSBwYWlyIFx1NTMzOVx1OTE0RFx1ODNCN1x1NTNENlx1N0IyQ1x1NEUwMFx1NEUyQSBlbW9qaVxyXG5cdHByaXZhdGUgZ2V0Rmlyc3RFbW9qaUdyYXBoZW1lKGlucHV0OiBzdHJpbmcpOiBzdHJpbmcge1xyXG5cdFx0Y29uc3QgZW1vamlSZWdleCA9IC9bXFx1RDgwMC1cXHVEQkZGXVtcXHVEQzAwLVxcdURGRkZdLzsgLy8gY29zdHNldGFwcCBcdTU0MENcdTZCM0VcdTVCOUVcdTczQjBcclxuXHRcdGNvbnN0IG0gPSAoaW5wdXQgfHwgJycpLm1hdGNoKGVtb2ppUmVnZXgpO1xyXG5cdFx0cmV0dXJuIG0gPyBtWzBdIDogJyc7XHJcblx0fVxyXG5cclxuXHQvLyBcdTVGMzlcdTUxRkFcdTY1RTVcdTY3MUZcdTkwMDlcdTYyRTlcdTU2NjhcdUZGMDhcdTU5MERcdTc1MjhcdTY1RTVcdTY3MUYvXHU2ODA3XHU3QjdFXHU1RjM5XHU3QTk3XHU5OENFXHU2ODNDXHVGRjA5XHJcblx0cHJpdmF0ZSBvcGVuRGF0ZVBpY2tlcihjdXJyZW50RGF0ZTogRGF0ZSwgb25Db25maXJtOiAocGlja2VkOiBEYXRlKSA9PiB2b2lkKSB7XHJcblx0XHQvLyBcdTUyMUJcdTVFRkFcdTkwNkVcdTdGNjlcdTVDNDJcclxuXHRcdGNvbnN0IG1hc2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdG1hc2suY2xhc3NOYW1lID0gJ2RhdGUtcGlja2VyLW1hc2snO1xyXG5cclxuXHRcdC8vIFx1NTIxQlx1NUVGQVx1NjVFNVx1NjcxRlx1OTAwOVx1NjJFOVx1NTY2OFx1NUYzOVx1N0E5N1xyXG5cdFx0Y29uc3QgcGlja2VyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHRwaWNrZXIuY2xhc3NOYW1lID0gJ2RhdGUtcGlja2VyLW1vZGFsJztcclxuXHJcblx0XHQvLyBcdTUyMUJcdTVFRkFcdTY1RTVcdTY3MUZcdTkwMDlcdTYyRTlcdTU2NjhcdTUxODVcdTVCQjlcclxuXHRcdGNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdGNvbnRlbnQuY2xhc3NOYW1lID0gJ2RhdGUtcGlja2VyLWNvbnRlbnQnO1xyXG5cclxuXHRcdC8vIFx1NjgwN1x1OTg5OFxyXG5cdFx0Y29uc3QgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdHRpdGxlLmNsYXNzTmFtZSA9ICdkYXRlLXBpY2tlci10aXRsZSc7XHJcblx0XHR0aXRsZS50ZXh0Q29udGVudCA9IHQoJ2RhdGUucGljaycpO1xyXG5cclxuXHRcdC8vIFx1NEUwOVx1NTIxN1x1NkVEQVx1OEY2RVxyXG5cdFx0Y29uc3Qgd2hlZWxDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdHdoZWVsQ29udGFpbmVyLmNsYXNzTmFtZSA9ICdkYXRlLXdoZWVsLWNvbnRhaW5lcic7XHJcblxyXG5cdFx0Y29uc3QgY3VycmVudFllYXIgPSBjdXJyZW50RGF0ZS5nZXRGdWxsWWVhcigpO1xyXG5cdFx0Y29uc3QgY3VycmVudE1vbnRoID0gY3VycmVudERhdGUuZ2V0TW9udGgoKSArIDE7XHJcblx0XHRjb25zdCBjdXJyZW50RGF5ID0gY3VycmVudERhdGUuZ2V0RGF0ZSgpO1xyXG5cclxuXHRcdGNvbnN0IHllYXJDb2x1bW4gPSB0aGlzLmNyZWF0ZVdoZWVsQ29sdW1uKHQoJ2RhdGUueWVhcicpLCB0aGlzLmdlbmVyYXRlWWVhcnMoY3VycmVudFllYXIpLCBjdXJyZW50WWVhciwgKHllYXIpID0+IHtcclxuXHRcdFx0dGhpcy51cGRhdGVEYXlzQ29sdW1uKGRheUNvbHVtbiwgeWVhciwgbW9udGhDb2x1bW4uc2VsZWN0ZWRWYWx1ZSk7XHJcblx0XHR9LCBmYWxzZSk7XHJcblx0XHRjb25zdCBtb250aENvbHVtbiA9IHRoaXMuY3JlYXRlV2hlZWxDb2x1bW4odCgnZGF0ZS5tb250aCcpLCB0aGlzLmdlbmVyYXRlTW9udGhzKCksIGN1cnJlbnRNb250aCwgKG1vbnRoKSA9PiB7XHJcblx0XHRcdHRoaXMudXBkYXRlRGF5c0NvbHVtbihkYXlDb2x1bW4sIHllYXJDb2x1bW4uc2VsZWN0ZWRWYWx1ZSwgbW9udGgpO1xyXG5cdFx0fSwgdHJ1ZSk7XHJcblx0XHRjb25zdCBkYXlDb2x1bW4gPSB0aGlzLmNyZWF0ZVdoZWVsQ29sdW1uKHQoJ2RhdGUuZGF5JyksIHRoaXMuZ2VuZXJhdGVEYXlzKGN1cnJlbnRZZWFyLCBjdXJyZW50TW9udGgpLCBjdXJyZW50RGF5LCB1bmRlZmluZWQsIHRydWUpO1xyXG5cclxuXHRcdHdoZWVsQ29udGFpbmVyLmFwcGVuZENoaWxkKHllYXJDb2x1bW4uZWxlbWVudCk7XHJcblx0XHR3aGVlbENvbnRhaW5lci5hcHBlbmRDaGlsZChtb250aENvbHVtbi5lbGVtZW50KTtcclxuXHRcdHdoZWVsQ29udGFpbmVyLmFwcGVuZENoaWxkKGRheUNvbHVtbi5lbGVtZW50KTtcclxuXHJcblx0XHQvLyBcdTYzMDlcdTk0QUVcclxuXHRcdGNvbnN0IGFjdGlvbnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdGFjdGlvbnMuY2xhc3NOYW1lID0gJ2RhdGUtcGlja2VyLWFjdGlvbnMnO1xyXG5cdFx0Y29uc3QgY2FuY2VsQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcblx0XHRjYW5jZWxCdG4uY2xhc3NOYW1lID0gJ2RhdGUtcGlja2VyLWJ0biBkYXRlLXBpY2tlci1idG4tY2FuY2VsJztcclxuXHRcdGNhbmNlbEJ0bi50ZXh0Q29udGVudCA9IHQoJ2NvbW1vbi5jYW5jZWwnKTtcclxuXHRcdGNvbnN0IGNvbmZpcm1CdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuXHRcdGNvbmZpcm1CdG4uY2xhc3NOYW1lID0gJ2RhdGUtcGlja2VyLWJ0biBkYXRlLXBpY2tlci1idG4tY29uZmlybSc7XHJcblx0XHRjb25maXJtQnRuLnRleHRDb250ZW50ID0gdCgnY29tbW9uLmNvbmZpcm0nKTtcclxuXHJcblx0XHRhY3Rpb25zLmFwcGVuZENoaWxkKGNhbmNlbEJ0bik7XHJcblx0XHRhY3Rpb25zLmFwcGVuZENoaWxkKGNvbmZpcm1CdG4pO1xyXG5cdFx0Y29udGVudC5hcHBlbmRDaGlsZCh0aXRsZSk7XHJcblx0XHRjb250ZW50LmFwcGVuZENoaWxkKHdoZWVsQ29udGFpbmVyKTtcclxuXHRcdGNvbnRlbnQuYXBwZW5kQ2hpbGQoYWN0aW9ucyk7XHJcblx0XHRwaWNrZXIuYXBwZW5kQ2hpbGQoY29udGVudCk7XHJcblx0XHRtYXNrLmFwcGVuZENoaWxkKHBpY2tlcik7XHJcblx0XHRkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG1hc2spO1xyXG5cclxuXHRcdGNvbnN0IGNsb3NlUGlja2VyID0gKCkgPT4geyBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG1hc2spOyB9O1xyXG5cdFx0bWFzay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7IGlmIChlLnRhcmdldCA9PT0gbWFzaykgY2xvc2VQaWNrZXIoKTsgfSk7XHJcblx0XHRjYW5jZWxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zZVBpY2tlcik7XHJcblx0XHRjb25maXJtQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdFx0XHRjb25zdCB5ZWFyID0geWVhckNvbHVtbi5zZWxlY3RlZFZhbHVlO1xyXG5cdFx0XHRjb25zdCBtb250aCA9IG1vbnRoQ29sdW1uLnNlbGVjdGVkVmFsdWU7XHJcblx0XHRcdGNvbnN0IGRheSA9IGRheUNvbHVtbi5zZWxlY3RlZFZhbHVlO1xyXG5cdFx0XHRjb25zdCBwaWNrZWQgPSBuZXcgRGF0ZShgJHt5ZWFyfS0ke21vbnRoLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX0tJHtkYXkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfWApO1xyXG5cdFx0XHRvbkNvbmZpcm0ocGlja2VkKTtcclxuXHRcdFx0Y2xvc2VQaWNrZXIoKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBnZW5lcmF0ZVllYXJzKGN1cnJlbnRZZWFyOiBudW1iZXIpOiBudW1iZXJbXSB7XHJcblx0XHRjb25zdCBtaW5ZZWFyID0gMTkwMDtcclxuXHRcdGNvbnN0IG5vd1llYXIgPSBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCk7XHJcblx0XHRjb25zdCBtYXhZZWFyID0gbm93WWVhciArIDc7XHJcblx0XHRjb25zdCB5ZWFyczogbnVtYmVyW10gPSBbXTtcclxuXHRcdGZvciAobGV0IGkgPSBtaW5ZZWFyOyBpIDw9IG1heFllYXI7IGkrKykgeWVhcnMucHVzaChpKTtcclxuXHRcdHJldHVybiB5ZWFycztcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgZ2VuZXJhdGVNb250aHMoKTogbnVtYmVyW10ge1xyXG5cdFx0cmV0dXJuIEFycmF5LmZyb20oeyBsZW5ndGg6IDEyIH0sIChfLCBpKSA9PiBpICsgMSk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGdlbmVyYXRlRGF5cyh5ZWFyOiBudW1iZXIsIG1vbnRoOiBudW1iZXIpOiBudW1iZXJbXSB7XHJcblx0XHRjb25zdCBkYXlzSW5Nb250aCA9IG5ldyBEYXRlKHllYXIsIG1vbnRoLCAwKS5nZXREYXRlKCk7XHJcblx0XHRyZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aDogZGF5c0luTW9udGggfSwgKF8sIGkpID0+IGkgKyAxKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgY3JlYXRlV2hlZWxDb2x1bW4oc3VmZml4OiBzdHJpbmcsIHZhbHVlczogbnVtYmVyW10sIHNlbGVjdGVkVmFsdWU6IG51bWJlciwgb25DaGFuZ2U/OiAodmFsdWU6IG51bWJlcikgPT4gdm9pZCwgaXNJbmZpbml0ZTogYm9vbGVhbiA9IGZhbHNlKTogeyBlbGVtZW50OiBIVE1MRWxlbWVudCwgc2VsZWN0ZWRWYWx1ZTogbnVtYmVyIH0ge1xyXG5cdFx0Y29uc3QgY29sdW1uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHRjb2x1bW4uY2xhc3NOYW1lID0gJ2RhdGUtd2hlZWwtY29sdW1uJztcclxuXHRcdGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0Y29udGFpbmVyLmNsYXNzTmFtZSA9ICdkYXRlLXdoZWVsLWl0ZW1zJztcclxuXHJcblx0XHRsZXQgc2VsZWN0ZWRJbmRleCA9IHZhbHVlcy5pbmRleE9mKHNlbGVjdGVkVmFsdWUpO1xyXG5cdFx0bGV0IGN1cnJlbnRTZWxlY3RlZFZhbHVlID0gc2VsZWN0ZWRWYWx1ZTtcclxuXHRcdGNvbnN0IGFwaSA9IHsgZWxlbWVudDogY29sdW1uLCBzZWxlY3RlZFZhbHVlOiBjdXJyZW50U2VsZWN0ZWRWYWx1ZSB9O1xyXG5cdFx0Y29uc3QgaXRlbUhlaWdodCA9IDQwO1xyXG5cclxuXHRcdGlmIChpc0luZmluaXRlKSB7XHJcblx0XHRcdGNvbnN0IHJlcGVhdENvdW50ID0gNTtcclxuXHRcdFx0Y29uc3QgdG90YWxJdGVtcyA9IHZhbHVlcy5sZW5ndGggKiByZXBlYXRDb3VudDtcclxuXHRcdFx0Y29uc3QgbWlkZGxlR3JvdXBJbmRleCA9IDI7XHJcblx0XHRcdGNvbnN0IGluaXRpYWxTY3JvbGxUb3AgPSBtaWRkbGVHcm91cEluZGV4ICogdmFsdWVzLmxlbmd0aCAqIGl0ZW1IZWlnaHQgKyBzZWxlY3RlZEluZGV4ICogaXRlbUhlaWdodDtcclxuXHRcdFx0Zm9yIChsZXQgcmVwZWF0ID0gMDsgcmVwZWF0IDwgcmVwZWF0Q291bnQ7IHJlcGVhdCsrKSB7XHJcblx0XHRcdFx0dmFsdWVzLmZvckVhY2goKHZhbHVlLCBpbmRleCkgPT4ge1xyXG5cdFx0XHRcdFx0Y29uc3QgaXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0XHRcdFx0aXRlbS5jbGFzc05hbWUgPSAnZGF0ZS13aGVlbC1pdGVtJztcclxuXHRcdFx0XHRcdGl0ZW0udGV4dENvbnRlbnQgPSBgJHt2YWx1ZS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9JHtzdWZmaXh9YDtcclxuXHRcdFx0XHRcdGl0ZW0uZGF0YXNldC52YWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCk7XHJcblx0XHRcdFx0XHRpdGVtLmRhdGFzZXQuaW5kZXggPSAocmVwZWF0ICogdmFsdWVzLmxlbmd0aCArIGluZGV4KS50b1N0cmluZygpO1xyXG5cdFx0XHRcdFx0aXRlbS5kYXRhc2V0LnJlYWxWYWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCk7XHJcblx0XHRcdFx0XHRjb250YWluZXIuYXBwZW5kQ2hpbGQoaXRlbSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdFx0Y29udGFpbmVyLnN0eWxlLmhlaWdodCA9IGAke3RvdGFsSXRlbXMgKiBpdGVtSGVpZ2h0fXB4YDtcclxuXHRcdFx0Y29uc3QgaW5pdGlhbEl0ZW1JbmRleCA9IG1pZGRsZUdyb3VwSW5kZXggKiB2YWx1ZXMubGVuZ3RoICsgc2VsZWN0ZWRJbmRleDtcclxuXHRcdFx0Y29uc3QgaXRlbXMgPSBBcnJheS5mcm9tKGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuZGF0ZS13aGVlbC1pdGVtJykpIGFzIEhUTUxFbGVtZW50W107XHJcblx0XHRcdGlmIChpdGVtc1tpbml0aWFsSXRlbUluZGV4XSkge1xyXG5cdFx0XHRcdGl0ZW1zLmZvckVhY2goKGVsLCBpZHgpID0+IGVsLmNsYXNzTGlzdC50b2dnbGUoJ3NlbGVjdGVkJywgaWR4ID09PSBpbml0aWFsSXRlbUluZGV4KSk7XHJcblx0XHRcdH1cclxuXHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuXHRcdFx0XHRjb250YWluZXIuc2Nyb2xsVG9wID0gaW5pdGlhbFNjcm9sbFRvcDtcclxuXHRcdFx0fSk7XHJcblx0XHRcdGxldCBpc1Njcm9sbGluZyA9IGZhbHNlO1xyXG5cdFx0XHRjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgKCkgPT4ge1xyXG5cdFx0XHRcdGlmIChpc1Njcm9sbGluZykgcmV0dXJuO1xyXG5cdFx0XHRcdGNvbnN0IHNjcm9sbFRvcCA9IGNvbnRhaW5lci5zY3JvbGxUb3A7XHJcblx0XHRcdFx0Y29uc3QgY3VycmVudEluZGV4ID0gTWF0aC5yb3VuZChzY3JvbGxUb3AgLyBpdGVtSGVpZ2h0KTtcclxuXHRcdFx0XHRjb25zdCByZWFsSW5kZXggPSAoKGN1cnJlbnRJbmRleCAlIHZhbHVlcy5sZW5ndGgpICsgdmFsdWVzLmxlbmd0aCkgJSB2YWx1ZXMubGVuZ3RoO1xyXG5cdFx0XHRcdGNvbnN0IHJlYWxWYWx1ZSA9IHZhbHVlc1tyZWFsSW5kZXhdO1xyXG5cdFx0XHRcdGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuZGF0ZS13aGVlbC1pdGVtJykuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHtcclxuXHRcdFx0XHRcdGNvbnN0IGl0ZW1SZWFsSW5kZXggPSBpbmRleCAlIHZhbHVlcy5sZW5ndGg7XHJcblx0XHRcdFx0XHRpdGVtLmNsYXNzTGlzdC50b2dnbGUoJ3NlbGVjdGVkJywgaXRlbVJlYWxJbmRleCA9PT0gcmVhbEluZGV4KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRzZWxlY3RlZEluZGV4ID0gcmVhbEluZGV4O1xyXG5cdFx0XHRcdGN1cnJlbnRTZWxlY3RlZFZhbHVlID0gcmVhbFZhbHVlO1xyXG5cdFx0XHRcdChhcGkgYXMgYW55KS5zZWxlY3RlZFZhbHVlID0gcmVhbFZhbHVlO1xyXG5cdFx0XHRcdGlmIChvbkNoYW5nZSkgb25DaGFuZ2UoY3VycmVudFNlbGVjdGVkVmFsdWUpO1xyXG5cdFx0XHRcdGNvbnN0IG1heFNjcm9sbFRvcCA9IChyZXBlYXRDb3VudCAtIDEpICogdmFsdWVzLmxlbmd0aCAqIGl0ZW1IZWlnaHQ7XHJcblx0XHRcdFx0aWYgKHNjcm9sbFRvcCA+PSBtYXhTY3JvbGxUb3ApIHtcclxuXHRcdFx0XHRcdGlzU2Nyb2xsaW5nID0gdHJ1ZTtcclxuXHRcdFx0XHRcdGNvbnN0IG9mZnNldCA9IHNjcm9sbFRvcCAtIG1heFNjcm9sbFRvcDtcclxuXHRcdFx0XHRcdGNvbnRhaW5lci5zY3JvbGxUb3AgPSB2YWx1ZXMubGVuZ3RoICogaXRlbUhlaWdodCArIG9mZnNldDtcclxuXHRcdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4geyBpc1Njcm9sbGluZyA9IGZhbHNlOyB9LCA1MCk7XHJcblx0XHRcdFx0fSBlbHNlIGlmIChzY3JvbGxUb3AgPD0gMCkge1xyXG5cdFx0XHRcdFx0aXNTY3JvbGxpbmcgPSB0cnVlO1xyXG5cdFx0XHRcdFx0Y29uc3Qgb2Zmc2V0ID0gc2Nyb2xsVG9wO1xyXG5cdFx0XHRcdFx0Y29udGFpbmVyLnNjcm9sbFRvcCA9IChyZXBlYXRDb3VudCAtIDIpICogdmFsdWVzLmxlbmd0aCAqIGl0ZW1IZWlnaHQgKyBvZmZzZXQ7XHJcblx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHsgaXNTY3JvbGxpbmcgPSBmYWxzZTsgfSwgNTApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHQvLyBcdTUxNDFcdThCQjhcdTc2RjRcdTYzQTVcdTcwQjlcdTUxRkJcdTkwMDlcdTYyRTlcclxuXHRcdFx0Y29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2KSA9PiB7XHJcblx0XHRcdFx0Y29uc3QgdGFyZ2V0ID0gZXYudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0XHRcdGNvbnN0IGl0ZW1FbCA9IHRhcmdldCAmJiB0YXJnZXQuY2xvc2VzdCA/ICh0YXJnZXQuY2xvc2VzdCgnLmRhdGUtd2hlZWwtaXRlbScpIGFzIEhUTUxFbGVtZW50IHwgbnVsbCkgOiBudWxsO1xyXG5cdFx0XHRcdGlmICghaXRlbUVsKSByZXR1cm47XHJcblx0XHRcdFx0Y29uc3QgY2xpY2tlZEluZGV4ID0gTnVtYmVyKGl0ZW1FbC5kYXRhc2V0LmluZGV4IHx8ICcwJyk7XHJcblx0XHRcdFx0Y29uc3QgcmVhbEluZGV4ID0gKChjbGlja2VkSW5kZXggJSB2YWx1ZXMubGVuZ3RoKSArIHZhbHVlcy5sZW5ndGgpICUgdmFsdWVzLmxlbmd0aDtcclxuXHRcdFx0XHRjb25zdCBtaWRkbGVJbmRleCA9IG1pZGRsZUdyb3VwSW5kZXggKiB2YWx1ZXMubGVuZ3RoICsgcmVhbEluZGV4O1xyXG5cdFx0XHRcdGNvbnRhaW5lci5zY3JvbGxUb3AgPSBtaWRkbGVJbmRleCAqIGl0ZW1IZWlnaHQ7XHJcblx0XHRcdFx0c2VsZWN0ZWRJbmRleCA9IHJlYWxJbmRleDtcclxuXHRcdFx0XHRjdXJyZW50U2VsZWN0ZWRWYWx1ZSA9IHZhbHVlc1tyZWFsSW5kZXhdO1xyXG5cdFx0XHRcdChhcGkgYXMgYW55KS5zZWxlY3RlZFZhbHVlID0gY3VycmVudFNlbGVjdGVkVmFsdWU7XHJcblx0XHRcdFx0aWYgKG9uQ2hhbmdlKSBvbkNoYW5nZShjdXJyZW50U2VsZWN0ZWRWYWx1ZSk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dmFsdWVzLmZvckVhY2goKHZhbHVlLCBpbmRleCkgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IGl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdFx0XHRpdGVtLmNsYXNzTmFtZSA9ICdkYXRlLXdoZWVsLWl0ZW0nO1xyXG5cdFx0XHRcdGl0ZW0udGV4dENvbnRlbnQgPSBgJHt2YWx1ZS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9JHtzdWZmaXh9YDtcclxuXHRcdFx0XHRpdGVtLmRhdGFzZXQudmFsdWUgPSB2YWx1ZS50b1N0cmluZygpO1xyXG5cdFx0XHRcdGl0ZW0uZGF0YXNldC5pbmRleCA9IGluZGV4LnRvU3RyaW5nKCk7XHJcblx0XHRcdFx0aWYgKHZhbHVlID09PSBjdXJyZW50U2VsZWN0ZWRWYWx1ZSkgaXRlbS5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpO1xyXG5cdFx0XHRcdGNvbnRhaW5lci5hcHBlbmRDaGlsZChpdGVtKTtcclxuXHRcdFx0fSk7XHJcblx0XHRcdGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCAoKSA9PiB7XHJcblx0XHRcdFx0Y29uc3Qgc2Nyb2xsVG9wID0gY29udGFpbmVyLnNjcm9sbFRvcDtcclxuXHRcdFx0XHRjb25zdCBuZXdJbmRleCA9IE1hdGgucm91bmQoc2Nyb2xsVG9wIC8gaXRlbUhlaWdodCk7XHJcblx0XHRcdFx0aWYgKG5ld0luZGV4ICE9PSBzZWxlY3RlZEluZGV4ICYmIG5ld0luZGV4ID49IDAgJiYgbmV3SW5kZXggPCB2YWx1ZXMubGVuZ3RoKSB7XHJcblx0XHRcdFx0XHRjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmRhdGUtd2hlZWwtaXRlbScpLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7XHJcblx0XHRcdFx0XHRcdGl0ZW0uY2xhc3NMaXN0LnRvZ2dsZSgnc2VsZWN0ZWQnLCBpbmRleCA9PT0gbmV3SW5kZXgpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRzZWxlY3RlZEluZGV4ID0gbmV3SW5kZXg7XHJcblx0XHRcdFx0XHRjdXJyZW50U2VsZWN0ZWRWYWx1ZSA9IHZhbHVlc1tuZXdJbmRleF07XHJcblx0XHRcdFx0XHQoYXBpIGFzIGFueSkuc2VsZWN0ZWRWYWx1ZSA9IGN1cnJlbnRTZWxlY3RlZFZhbHVlO1xyXG5cdFx0XHRcdFx0aWYgKG9uQ2hhbmdlKSBvbkNoYW5nZShjdXJyZW50U2VsZWN0ZWRWYWx1ZSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdFx0Ly8gXHU1MTQxXHU4QkI4XHU3NkY0XHU2M0E1XHU3MEI5XHU1MUZCXHU5MDA5XHU2MkU5XHJcblx0XHRcdGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldikgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IHRhcmdldCA9IGV2LnRhcmdldCBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0XHRjb25zdCBpdGVtRWwgPSB0YXJnZXQgJiYgdGFyZ2V0LmNsb3Nlc3QgPyAodGFyZ2V0LmNsb3Nlc3QoJy5kYXRlLXdoZWVsLWl0ZW0nKSBhcyBIVE1MRWxlbWVudCB8IG51bGwpIDogbnVsbDtcclxuXHRcdFx0XHRpZiAoIWl0ZW1FbCkgcmV0dXJuO1xyXG5cdFx0XHRcdGNvbnN0IGlkeCA9IE51bWJlcihpdGVtRWwuZGF0YXNldC5pbmRleCB8fCAnMCcpO1xyXG5cdFx0XHRcdC8vIFx1N0FDQlx1NTM3M1x1NjZGNFx1NjVCMFx1OTAwOVx1NEUyRFx1NjgzN1x1NUYwRlxyXG5cdFx0XHRcdGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuZGF0ZS13aGVlbC1pdGVtJykuZm9yRWFjaCgoZWwsIGkpID0+IHtcclxuXHRcdFx0XHRcdGVsLmNsYXNzTGlzdC50b2dnbGUoJ3NlbGVjdGVkJywgaSA9PT0gaWR4KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRjb250YWluZXIuc2Nyb2xsVG9wID0gaWR4ICogaXRlbUhlaWdodDtcclxuXHRcdFx0XHRzZWxlY3RlZEluZGV4ID0gaWR4O1xyXG5cdFx0XHRcdGN1cnJlbnRTZWxlY3RlZFZhbHVlID0gdmFsdWVzW2lkeF07XHJcblx0XHRcdFx0KGFwaSBhcyBhbnkpLnNlbGVjdGVkVmFsdWUgPSBjdXJyZW50U2VsZWN0ZWRWYWx1ZTtcclxuXHRcdFx0XHRpZiAob25DaGFuZ2UpIG9uQ2hhbmdlKGN1cnJlbnRTZWxlY3RlZFZhbHVlKTtcclxuXHRcdFx0fSk7XHJcblx0XHRcdHNldFRpbWVvdXQoKCkgPT4geyBjb250YWluZXIuc2Nyb2xsVG9wID0gc2VsZWN0ZWRJbmRleCAqIGl0ZW1IZWlnaHQ7IH0sIDApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbHVtbi5hcHBlbmRDaGlsZChjb250YWluZXIpO1xyXG5cdFx0cmV0dXJuIGFwaSBhcyBhbnk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHVwZGF0ZURheXNDb2x1bW4oZGF5Q29sdW1uOiB7IGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBzZWxlY3RlZFZhbHVlOiBudW1iZXIgfSwgeWVhcjogbnVtYmVyLCBtb250aDogbnVtYmVyKTogdm9pZCB7XHJcblx0XHRjb25zdCBjb250YWluZXIgPSBkYXlDb2x1bW4uZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZGF0ZS13aGVlbC1pdGVtcycpIGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0Y29uc3QgY3VycmVudERheSA9IGRheUNvbHVtbi5zZWxlY3RlZFZhbHVlO1xyXG5cdFx0Y29uc3QgbmV3RGF5cyA9IHRoaXMuZ2VuZXJhdGVEYXlzKHllYXIsIG1vbnRoKTtcclxuXHRcdC8vIFx1NUI4OVx1NTE2OFx1NkUwNVx1N0E3QVx1NUJCOVx1NTY2OFx1RkYwQ1x1OTA3Rlx1NTE0RFx1NEY3Rlx1NzUyOCBpbm5lckhUTUxcclxuXHRcdHdoaWxlIChjb250YWluZXIuZmlyc3RDaGlsZCkgY29udGFpbmVyLnJlbW92ZUNoaWxkKGNvbnRhaW5lci5maXJzdENoaWxkKTtcclxuXHRcdGNvbnN0IHJlcGVhdENvdW50ID0gNTtcclxuXHRcdGNvbnN0IGl0ZW1IZWlnaHQgPSA0MDtcclxuXHRcdGNvbnN0IG1pZGRsZUdyb3VwSW5kZXggPSAyO1xyXG5cdFx0Y29uc3QgbWF4RGF5ID0gTWF0aC5tYXgoLi4ubmV3RGF5cyk7XHJcblx0XHRjb25zdCBzZWxlY3RlZERheSA9IE1hdGgubWluKGN1cnJlbnREYXksIG1heERheSk7XHJcblx0XHRjb25zdCBzZWxlY3RlZEluZGV4ID0gbmV3RGF5cy5pbmRleE9mKHNlbGVjdGVkRGF5KTtcclxuXHRcdGZvciAobGV0IHJlcGVhdCA9IDA7IHJlcGVhdCA8IHJlcGVhdENvdW50OyByZXBlYXQrKykge1xyXG5cdFx0XHRuZXdEYXlzLmZvckVhY2goKGRheSwgaW5kZXgpID0+IHtcclxuXHRcdFx0XHRjb25zdCBpdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHRcdFx0aXRlbS5jbGFzc05hbWUgPSAnZGF0ZS13aGVlbC1pdGVtJztcclxuXHRcdFx0XHRpdGVtLnRleHRDb250ZW50ID0gYCR7ZGF5LnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX0ke3QoJ2RhdGUuZGF5Jyl9YDtcclxuXHRcdFx0XHRpdGVtLmRhdGFzZXQudmFsdWUgPSBkYXkudG9TdHJpbmcoKTtcclxuXHRcdFx0XHRpdGVtLmRhdGFzZXQuaW5kZXggPSAocmVwZWF0ICogbmV3RGF5cy5sZW5ndGggKyBpbmRleCkudG9TdHJpbmcoKTtcclxuXHRcdFx0XHRpdGVtLmRhdGFzZXQucmVhbFZhbHVlID0gZGF5LnRvU3RyaW5nKCk7XHJcblx0XHRcdFx0Y29udGFpbmVyLmFwcGVuZENoaWxkKGl0ZW0pO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHRcdGNvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSBgJHtuZXdEYXlzLmxlbmd0aCAqIHJlcGVhdENvdW50ICogaXRlbUhlaWdodH1weGA7XHJcblx0XHRjb25zdCBpbml0aWFsSXRlbUluZGV4RGF5ID0gbWlkZGxlR3JvdXBJbmRleCAqIG5ld0RheXMubGVuZ3RoICsgc2VsZWN0ZWRJbmRleDtcclxuXHRcdGNvbnN0IGRheUl0ZW1zID0gQXJyYXkuZnJvbShjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmRhdGUtd2hlZWwtaXRlbScpKSBhcyBIVE1MRWxlbWVudFtdO1xyXG5cdFx0aWYgKGRheUl0ZW1zW2luaXRpYWxJdGVtSW5kZXhEYXldKSB7XHJcblx0XHRcdGRheUl0ZW1zLmZvckVhY2goKGVsLCBpZHgpID0+IGVsLmNsYXNzTGlzdC50b2dnbGUoJ3NlbGVjdGVkJywgaWR4ID09PSBpbml0aWFsSXRlbUluZGV4RGF5KSk7XHJcblx0XHR9XHJcblx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4geyBjb250YWluZXIuc2Nyb2xsVG9wID0gbWlkZGxlR3JvdXBJbmRleCAqIG5ld0RheXMubGVuZ3RoICogaXRlbUhlaWdodCArIHNlbGVjdGVkSW5kZXggKiBpdGVtSGVpZ2h0OyB9KTtcclxuXHRcdGxldCBpc1Njcm9sbGluZyA9IGZhbHNlO1xyXG5cdFx0Y29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsICgpID0+IHtcclxuXHRcdFx0aWYgKGlzU2Nyb2xsaW5nKSByZXR1cm47XHJcblx0XHRcdGNvbnN0IHNjcm9sbFRvcCA9IGNvbnRhaW5lci5zY3JvbGxUb3A7XHJcblx0XHRcdGNvbnN0IGN1cnJlbnRJbmRleCA9IE1hdGgucm91bmQoc2Nyb2xsVG9wIC8gaXRlbUhlaWdodCk7XHJcblx0XHRcdGNvbnN0IHJlYWxJbmRleCA9IGN1cnJlbnRJbmRleCAlIG5ld0RheXMubGVuZ3RoO1xyXG5cdFx0XHRjb25zdCByZWFsVmFsdWUgPSBuZXdEYXlzW3JlYWxJbmRleF07XHJcblx0XHRcdGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuZGF0ZS13aGVlbC1pdGVtJykuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHtcclxuXHRcdFx0XHRjb25zdCBpdGVtUmVhbEluZGV4ID0gaW5kZXggJSBuZXdEYXlzLmxlbmd0aDtcclxuXHRcdFx0XHRpdGVtLmNsYXNzTGlzdC50b2dnbGUoJ3NlbGVjdGVkJywgaXRlbVJlYWxJbmRleCA9PT0gcmVhbEluZGV4KTtcclxuXHRcdFx0fSk7XHJcblx0XHRcdChkYXlDb2x1bW4gYXMgYW55KS5zZWxlY3RlZFZhbHVlID0gcmVhbFZhbHVlO1xyXG5cdFx0XHRjb25zdCBtYXhTY3JvbGxUb3AgPSAocmVwZWF0Q291bnQgLSAxKSAqIG5ld0RheXMubGVuZ3RoICogaXRlbUhlaWdodDtcclxuXHRcdFx0aWYgKHNjcm9sbFRvcCA+PSBtYXhTY3JvbGxUb3ApIHtcclxuXHRcdFx0XHRpc1Njcm9sbGluZyA9IHRydWU7XHJcblx0XHRcdFx0Y29uc3Qgb2Zmc2V0ID0gc2Nyb2xsVG9wIC0gbWF4U2Nyb2xsVG9wO1xyXG5cdFx0XHRcdGNvbnRhaW5lci5zY3JvbGxUb3AgPSBuZXdEYXlzLmxlbmd0aCAqIGl0ZW1IZWlnaHQgKyBvZmZzZXQ7XHJcblx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7IGlzU2Nyb2xsaW5nID0gZmFsc2U7IH0sIDUwKTtcclxuXHRcdFx0fSBlbHNlIGlmIChzY3JvbGxUb3AgPD0gMCkge1xyXG5cdFx0XHRcdGlzU2Nyb2xsaW5nID0gdHJ1ZTtcclxuXHRcdFx0XHRjb25zdCBvZmZzZXQgPSBzY3JvbGxUb3A7XHJcblx0XHRcdFx0Y29udGFpbmVyLnNjcm9sbFRvcCA9IChyZXBlYXRDb3VudCAtIDIpICogbmV3RGF5cy5sZW5ndGggKiBpdGVtSGVpZ2h0ICsgb2Zmc2V0O1xyXG5cdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4geyBpc1Njcm9sbGluZyA9IGZhbHNlOyB9LCA1MCk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIFx1NTE0MVx1OEJCOFx1NzZGNFx1NjNBNVx1NzBCOVx1NTFGQlx1OTAwOVx1NjJFOVx1NjdEMFx1NEUwMFx1NTkyOVxyXG5cdFx0Y29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2KSA9PiB7XHJcblx0XHRcdGNvbnN0IHRhcmdldCA9IGV2LnRhcmdldCBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0Y29uc3QgaXRlbUVsID0gdGFyZ2V0ICYmIHRhcmdldC5jbG9zZXN0ID8gKHRhcmdldC5jbG9zZXN0KCcuZGF0ZS13aGVlbC1pdGVtJykgYXMgSFRNTEVsZW1lbnQgfCBudWxsKSA6IG51bGw7XHJcblx0XHRcdGlmICghaXRlbUVsKSByZXR1cm47XHJcblx0XHRcdGNvbnN0IGNsaWNrZWRJbmRleCA9IE51bWJlcihpdGVtRWwuZGF0YXNldC5pbmRleCB8fCAnMCcpO1xyXG5cdFx0XHRjb25zdCByZWFsSW5kZXggPSBjbGlja2VkSW5kZXggJSBuZXdEYXlzLmxlbmd0aDtcclxuXHRcdFx0Y29uc3QgbWlkZGxlSW5kZXggPSBtaWRkbGVHcm91cEluZGV4ICogbmV3RGF5cy5sZW5ndGggKyByZWFsSW5kZXg7XHJcblx0XHRcdGNvbnRhaW5lci5zY3JvbGxUb3AgPSBtaWRkbGVJbmRleCAqIGl0ZW1IZWlnaHQ7XHJcblx0XHRcdChkYXlDb2x1bW4gYXMgYW55KS5zZWxlY3RlZFZhbHVlID0gbmV3RGF5c1tyZWFsSW5kZXhdO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cdHByaXZhdGUgY3JlYXRlTGFiZWwodGV4dDogc3RyaW5nKTogSFRNTEVsZW1lbnQge1xyXG5cdFx0Y29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xyXG5cdFx0ZWwudGV4dENvbnRlbnQgPSB0ZXh0O1xyXG5cdFx0cmV0dXJuIGVsO1xyXG5cdH1cclxufVxyXG4iLCAiZXhwb3J0IGNsYXNzIENvbmZpcm1Nb2RhbCB7XHJcbiAgICBwcml2YXRlIG1hc2tFbD86IEhUTUxFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBtb2RhbEVsPzogSFRNTEVsZW1lbnQ7XHJcblxyXG4gICAgcHJpdmF0ZSBtZXNzYWdlOiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIGNvbmZpcm1UZXh0OiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIGNhbmNlbFRleHQ6IHN0cmluZztcclxuICAgIHByaXZhdGUgZGFuZ2VyOiBib29sZWFuO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZywgY29uZmlybVRleHQ6IHN0cmluZyA9ICdcdTc4NkVcdTVCOUEnLCBjYW5jZWxUZXh0OiBzdHJpbmcgPSAnXHU1M0Q2XHU2RDg4JywgZGFuZ2VyOiBib29sZWFuID0gZmFsc2UpIHtcclxuICAgICAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xyXG4gICAgICAgIHRoaXMuY29uZmlybVRleHQgPSBjb25maXJtVGV4dDtcclxuICAgICAgICB0aGlzLmNhbmNlbFRleHQgPSBjYW5jZWxUZXh0O1xyXG4gICAgICAgIHRoaXMuZGFuZ2VyID0gZGFuZ2VyO1xyXG4gICAgfVxyXG5cclxuICAgIG9wZW4oKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPGJvb2xlYW4+KChyZXNvbHZlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5qZWN0U3R5bGVzT25jZSgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5tYXNrRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgdGhpcy5tYXNrRWwuY2xhc3NOYW1lID0gJ2RhdGUtcGlja2VyLW1hc2snO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5tb2RhbEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIHRoaXMubW9kYWxFbC5jbGFzc05hbWUgPSAnZGF0ZS1waWNrZXItbW9kYWwnO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBjb250ZW50LmNsYXNzTmFtZSA9ICdkYXRlLXBpY2tlci1jb250ZW50JztcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIHRpdGxlLmNsYXNzTmFtZSA9ICdkYXRlLXBpY2tlci10aXRsZSc7XHJcbiAgICAgICAgICAgIC8vIFx1NjgwN1x1OTg5OFx1OTY4Rlx1OEJFRFx1OEEwMFxyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgeyB0IH0gPSByZXF1aXJlKCcuLi8uLi9pMThuJyk7XHJcbiAgICAgICAgICAgICAgICB0aXRsZS50ZXh0Q29udGVudCA9IHQoJ2NvbmZpcm0udGl0bGUnKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoXykge1xyXG4gICAgICAgICAgICAgICAgdGl0bGUudGV4dENvbnRlbnQgPSAnXHU3ODZFXHU4QkE0XHU2NENEXHU0RjVDJztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgbXNnRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgbXNnRWwuY2xhc3NOYW1lID0gJ2NvbmZpcm0tbWVzc2FnZSc7XHJcbiAgICAgICAgICAgIG1zZ0VsLnRleHRDb250ZW50ID0gdGhpcy5tZXNzYWdlO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgYWN0aW9ucyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBhY3Rpb25zLmNsYXNzTmFtZSA9ICdkYXRlLXBpY2tlci1hY3Rpb25zJztcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGNhbmNlbEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgICAgICAgICBjYW5jZWxCdG4uY2xhc3NOYW1lID0gJ2RhdGUtcGlja2VyLWJ0biBkYXRlLXBpY2tlci1idG4tY2FuY2VsJztcclxuICAgICAgICAgICAgY2FuY2VsQnRuLnRleHRDb250ZW50ID0gdGhpcy5jYW5jZWxUZXh0O1xyXG5cclxuICAgICAgICAgICAgY29uc3QgY29uZmlybUJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgICAgICAgICBjb25maXJtQnRuLmNsYXNzTmFtZSA9ICdkYXRlLXBpY2tlci1idG4gZGF0ZS1waWNrZXItYnRuLWNvbmZpcm0nO1xyXG4gICAgICAgICAgICBjb25maXJtQnRuLnRleHRDb250ZW50ID0gdGhpcy5jb25maXJtVGV4dDtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZGFuZ2VyKSBjb25maXJtQnRuLmNsYXNzTGlzdC5hZGQoJ2RhbmdlcicpO1xyXG5cclxuICAgICAgICAgICAgYWN0aW9ucy5hcHBlbmRDaGlsZChjYW5jZWxCdG4pO1xyXG4gICAgICAgICAgICBhY3Rpb25zLmFwcGVuZENoaWxkKGNvbmZpcm1CdG4pO1xyXG4gICAgICAgICAgICBjb250ZW50LmFwcGVuZENoaWxkKHRpdGxlKTtcclxuICAgICAgICAgICAgY29udGVudC5hcHBlbmRDaGlsZChtc2dFbCk7XHJcbiAgICAgICAgICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQoYWN0aW9ucyk7XHJcbiAgICAgICAgICAgIHRoaXMubW9kYWxFbC5hcHBlbmRDaGlsZChjb250ZW50KTtcclxuICAgICAgICAgICAgdGhpcy5tYXNrRWwuYXBwZW5kQ2hpbGQodGhpcy5tb2RhbEVsKTtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLm1hc2tFbCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBjbG9zZSA9IChyZXN1bHQ6IGJvb2xlYW4pID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm1hc2tFbCAmJiB0aGlzLm1hc2tFbC5wYXJlbnRFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXNrRWwucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZCh0aGlzLm1hc2tFbCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1hc2tFbCA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIHRoaXMubW9kYWxFbCA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMubWFza0VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHsgaWYgKGUudGFyZ2V0ID09PSB0aGlzLm1hc2tFbCkgY2xvc2UoZmFsc2UpOyB9KTtcclxuICAgICAgICAgICAgY2FuY2VsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gY2xvc2UoZmFsc2UpKTtcclxuICAgICAgICAgICAgY29uZmlybUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IGNsb3NlKHRydWUpKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGluamVjdFN0eWxlc09uY2UoKSB7XHJcbiAgICAgICAgY29uc3QgU1RZTEVfSUQgPSAnbGFjLWNvbmZpcm0tbW9kYWwtc3R5bGVzJztcclxuICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoU1RZTEVfSUQpKSByZXR1cm47XHJcbiAgICAgICAgY29uc3Qgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xyXG4gICAgICAgIHN0eWxlLmlkID0gU1RZTEVfSUQ7XHJcbiAgICAgICAgc3R5bGUudGV4dENvbnRlbnQgPSBgXHJcbiAgICAgICAgICAgIC5kYXRlLXBpY2tlci1tb2RhbCAuY29uZmlybS1tZXNzYWdlIHsgY29sb3I6ICNGNUY2RkE7IGxpbmUtaGVpZ2h0OiAxLjY7IHBhZGRpbmc6IDhweCAwIDE2cHg7IH1cclxuICAgICAgICAgICAgLmRhdGUtcGlja2VyLW1vZGFsIC5kYXRlLXBpY2tlci1idG4uZGFuZ2VyIHsgYmFja2dyb3VuZDogIzdhMWUxZTsgY29sb3I6ICNmZmY7IH1cclxuICAgICAgICAgICAgLmRhdGUtcGlja2VyLW1vZGFsIC5kYXRlLXBpY2tlci1idG4uZGFuZ2VyOmhvdmVyIHsgYmFja2dyb3VuZDogIzk5MjUyNTsgfVxyXG4gICAgICAgIGA7XHJcbiAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZSk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG4iLCAiaW1wb3J0IHsgQXNzZXRGb3JtTW9kYWwgfSBmcm9tICcuL21vZGFscy9Bc3NldEZvcm1Nb2RhbCc7XG5pbXBvcnQgeyBJdGVtVmlldywgV29ya3NwYWNlTGVhZiwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgQ29uZmlybU1vZGFsIH0gZnJvbSAnLi9tb2RhbHMvQ29uZmlybU1vZGFsJztcbmltcG9ydCB7IEFzc2V0UmVwb3NpdG9yeSB9IGZyb20gJy4uL3JlcG9zaXRvcmllcy9Bc3NldFJlcG9zaXRvcnknO1xuaW1wb3J0IHsgQXNzZXQgfSBmcm9tICcuLi9tb2RlbHMvQXNzZXQnO1xuaW1wb3J0IHsgVG9wU3VtbWFyeSwgVG9wU3VtbWFyeVByb3BzIH0gZnJvbSAnLi9Ub3BTdW1tYXJ5JztcbmltcG9ydCB7IExpbmVDaGFydCwgTGluZUNoYXJ0UHJvcHMgfSBmcm9tICcuL0xpbmVDaGFydCc7XG5pbXBvcnQgeyBUYWdQYW5lbCwgVGFnUGFuZWxQcm9wcyB9IGZyb20gJy4vVGFnUGFuZWwnO1xuaW1wb3J0IHsgdCB9IGZyb20gJy4uL2kxOG4nO1xuXG4vLyBcdThENDRcdTRFQTdcdTdCQTFcdTc0MDZcdTU2NjhcdTg5QzZcdTU2RkVcbmV4cG9ydCBjbGFzcyBBc3NldE1hbmFnZXJWaWV3IGV4dGVuZHMgSXRlbVZpZXcge1xuXHRwcml2YXRlIGFzc2V0UmVwb3NpdG9yeTogQXNzZXRSZXBvc2l0b3J5O1xuXHRwcml2YXRlIGFzc2V0czogQXNzZXRbXSA9IFtdO1xuXHRwcml2YXRlIGZpbGVQYXRoPzogc3RyaW5nO1xuXHRwcml2YXRlIHRvcFN1bW1hcnlDb21wb25lbnQ/OiBUb3BTdW1tYXJ5O1xuXHRwcml2YXRlIHRhZ1BhbmVsQ29tcG9uZW50PzogVGFnUGFuZWw7XG5cdHByaXZhdGUgc2VsZWN0ZWREYXRlPzogRGF0ZTsgLy8gXHU1RjUzXHU1MjREXHU5MDA5XHU2MkU5XHU3Njg0XHU2NUU1XHU2NzFGXG5cdHByaXZhdGUgc2VsZWN0ZWRUYWdzOiBzdHJpbmdbXSA9IFtdOyAvLyBcdTVGNTNcdTUyNERcdTkwMDlcdTYyRTlcdTc2ODRcdTY4MDdcdTdCN0Vcblx0cHJpdmF0ZSBhY3Rpb25CYXJFbD86IEhUTUxFbGVtZW50OyAvLyBcdTk4NzZcdTkwRThcdTdFREZcdThCQTFcdTRFMEJcdTY1QjlcdTc2ODRcdTYzMDlcdTk0QUVcdTUzNjFcdTcyNDdcblx0cHJpdmF0ZSBzZWFyY2hRdWVyeTogc3RyaW5nID0gJyc7XG4gICAgcHJpdmF0ZSBzb3J0TW9kZTogJ25vbmUnIHwgJ2RhaWx5RGVzYycgfCAncHJpY2VEZXNjJyB8ICdkYXRlRGVzYycgPSAnbm9uZSc7XG5cblx0Y29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZiwgYXNzZXRSZXBvc2l0b3J5OiBBc3NldFJlcG9zaXRvcnksIGZpbGVQYXRoPzogc3RyaW5nKSB7XG5cdFx0c3VwZXIobGVhZik7XG5cdFx0dGhpcy5hc3NldFJlcG9zaXRvcnkgPSBhc3NldFJlcG9zaXRvcnk7XG5cdFx0dGhpcy5maWxlUGF0aCA9IGZpbGVQYXRoO1xuXHRcdHRoaXMuc2VsZWN0ZWREYXRlID0gbmV3IERhdGUoKTsgLy8gXHU1MjFEXHU1OUNCXHU1MzE2XHU0RTNBXHU1RjUzXHU1MjREXHU2NUU1XHU2NzFGXG5cdH1cblxuXHRnZXRWaWV3VHlwZSgpOiBzdHJpbmcge1xuXHRcdHJldHVybiAnbGFjLWNvc3RzZXQtdmlldyc7XG5cdH1cblxuXHRnZXREaXNwbGF5VGV4dCgpOiBzdHJpbmcge1xuXHRcdHJldHVybiAnTGFDLkNvc3RTZXQnO1xuXHR9XG5cblx0Z2V0SWNvbigpOiBzdHJpbmcge1xuXHRcdHJldHVybiAncGFja2FnZSc7XG5cdH1cblxuXHRhc3luYyBvbk9wZW4oKSB7XG5cdFx0Y29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xuXHRcdGNvbnRhaW5lckVsLmFkZENsYXNzKCdwYWdlLXJvb3QnKTtcblxuXHRcdC8vIFx1Nzg2RVx1NEZERFx1N0E4NFx1NUJCRFx1NUVBNlx1NEUwQlx1NjgwN1x1OTg5OFx1NjgwRlx1NzY4NFx1ODNEQ1x1NTM1NS9cdThGRDRcdTU2REVcdTYzMDlcdTk0QUVcdTRFMERcdTg4QUJcdTRFM0JcdTk4OThcdTk2OTBcdTg1Q0Zcblx0XHR0aGlzLmluamVjdEhlYWRlckZpeFN0eWxlcygpO1xuXG5cdFx0Ly8gXHU1MjFEXHU1OUNCXHU1MzE2XHU5RUQ4XHU4QkE0XHU2MzkyXHU1RThGXHU4MUVBXHU4QkJFXHU3RjZFXG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IHBsdWdpbiA9ICh0aGlzLmFwcCBhcyBhbnkpLnBsdWdpbnM/LnBsdWdpbnM/LlsnbGFjLWNvc3RzZXQnXTtcblx0XHRcdGlmIChwbHVnaW4gJiYgcGx1Z2luLnNldHRpbmdzICYmIHBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0U29ydCkge1xuXHRcdFx0XHR0aGlzLnNvcnRNb2RlID0gcGx1Z2luLnNldHRpbmdzLmRlZmF1bHRTb3J0O1xuXHRcdFx0fVxuXHRcdH0gY2F0Y2ggKF8pIHt9XG5cblx0XHQvLyBcdTU5ODJcdTY3OUNcdTRGMjBcdTUxNjVcdTRFODZcdTY1ODdcdTRFRjZcdThERUZcdTVGODRcdUZGMENcdTc2RjRcdTYzQTVcdTRGN0ZcdTc1MjhcdThCRTVcdTY1ODdcdTRFRjZcbiAgICAgICAgaWYgKHRoaXMuZmlsZVBhdGgpIHtcblx0XHRcdHRoaXMudXNlRmlsZSh0aGlzLmZpbGVQYXRoKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBcdTgyRTVcdTY3MkFcdTRGMjBcdTUxNjVcdTY1ODdcdTRFRjZcdThERUZcdTVGODRcdUZGMUFcdTRFMERcdTg5ODFcdTVGMzlcdTUxRkFcdTY1ODdcdTRFRjZcdTUyMTdcdTg4NjhcdUZGMENcdTY2M0VcdTc5M0FcdThGN0JcdTkxQ0ZcdTYzRDBcdTc5M0Fcblx0XHRjb25zdCBoaW50ID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KCk7XG5cdFx0aGludC5zdHlsZS5wYWRkaW5nID0gJzE2cHgnO1xuXHRcdGhpbnQuc3R5bGUub3BhY2l0eSA9ICcwLjgnO1xuXHRcdGhpbnQudGV4dENvbnRlbnQgPSB0KCd2aWV3LmhpbnQub3BlbkZyb21NZW51Jyk7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0YXN5bmMgb25DbG9zZSgpIHtcblx0XHRjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuXHRcdGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cdFx0Ly8gXHU2RTA1XHU3NDA2XHU1MkE4XHU2MDAxXHU2Q0U4XHU1MTY1XHU3Njg0XHU2ODM3XHU1RjBGXHU0RTBFXHU1RjM5XHU3QTk3XG5cdFx0dHJ5IHsgdGhpcy5jbG9zZUV4aXN0aW5nU29ydE1lbnUoKTsgfSBjYXRjaCAoXykge31cblx0XHRbJ2xhYy1jb3N0c2V0LWFjdGlvbmJhci1zdHlsZXMnLCAnbGFjLWNvc3RzZXQtaGVhZGVyLXN0eWxlcyddLmZvckVhY2goKGlkKSA9PiB7XG5cdFx0XHRjb25zdCBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcblx0XHRcdGlmIChlbCAmJiBlbC5wYXJlbnRFbGVtZW50KSBlbC5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKGVsKTtcblx0XHR9KTtcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgdXNlRmlsZShmaWxlUGF0aDogc3RyaW5nKSB7XG5cdFx0Ly8gXHU5MUNEXHU2NUIwXHU1MjFEXHU1OUNCXHU1MzE2QXNzZXRSZXBvc2l0b3J5XG5cdFx0Y29uc3QgcGx1Z2luID0gKHRoaXMuYXBwIGFzIGFueSkucGx1Z2lucy5wbHVnaW5zWydsYWMtY29zdHNldCddO1xuXHRcdGlmIChwbHVnaW4pIHtcblx0XHRcdHBsdWdpbi5hc3NldFJlcG9zaXRvcnkgPSBuZXcgQXNzZXRSZXBvc2l0b3J5KHRoaXMuYXBwLCBmaWxlUGF0aCk7XG5cdFx0XHR0aGlzLmFzc2V0UmVwb3NpdG9yeSA9IHBsdWdpbi5hc3NldFJlcG9zaXRvcnk7XG5cdFx0XHRcblx0XHRcdHRoaXMubG9hZEFzc2V0cygpO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgbG9hZEFzc2V0cygpIHtcblx0XHR0aGlzLmFzc2V0cyA9IGF3YWl0IHRoaXMuYXNzZXRSZXBvc2l0b3J5LmxvYWRBbGwoKTtcblx0XHR0aGlzLnJlbmRlckFzc2V0cygpO1xuXHR9XG5cblx0cHJpdmF0ZSBzaG93RmlsZVNlbGVjdG9yKCkge1xuXHRcdGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcblx0XHRjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6IHQoJ3ZpZXcuc2VsZWN0Um9vdC50aXRsZScpIH0pO1xuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiB0KCd2aWV3LnNlbGVjdFJvb3QuZGVzYycpIH0pO1xuXG5cdFx0Y29uc3QgZmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG5cdFx0Y29uc3QgZmlsZUxpc3QgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoJ2ZpbGUtbGlzdCcpO1xuXHRcdFxuXHRcdGZpbGVzLmZvckVhY2goZmlsZSA9PiB7XG5cdFx0XHRjb25zdCBmaWxlSXRlbSA9IGZpbGVMaXN0LmNyZWF0ZURpdignZmlsZS1pdGVtJyk7XG5cdFx0XHRmaWxlSXRlbS5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiBmaWxlLnBhdGggfSk7XG5cdFx0XHRmaWxlSXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcblx0XHRcdFx0Ly8gXHU5MUNEXHU2NUIwXHU1MjFEXHU1OUNCXHU1MzE2QXNzZXRSZXBvc2l0b3J5XG5cdFx0XHRcdGNvbnN0IHBsdWdpbiA9ICh0aGlzLmFwcCBhcyBhbnkpLnBsdWdpbnMucGx1Z2luc1snbGFjLWNvc3RzZXQnXTtcblx0XHRcdFx0aWYgKHBsdWdpbikge1xuXHRcdFx0XHRcdHBsdWdpbi5hc3NldFJlcG9zaXRvcnkgPSBuZXcgQXNzZXRSZXBvc2l0b3J5KHRoaXMuYXBwLCBmaWxlLnBhdGgpO1xuXHRcdFx0XHRcdHRoaXMuYXNzZXRSZXBvc2l0b3J5ID0gcGx1Z2luLmFzc2V0UmVwb3NpdG9yeTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHR0aGlzLmxvYWRBc3NldHMoKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH1cblxuXHRwcml2YXRlIHJlbmRlckFzc2V0cygpIHtcblx0XHRjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuXHRcdFxuXHRcdC8vIFx1NkUwNVx1N0E3QVx1NUJCOVx1NTY2OFx1RkYwQ1x1OTA3Rlx1NTE0RFx1OTFDRFx1NTkwRFx1OEZGRFx1NTJBMCBUb3BTdW1tYXJ5IFx1NEUwRVx1NTIxN1x1ODg2OFxuXHRcdGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cdFx0Y29udGFpbmVyRWwuYWRkQ2xhc3MoJ3BhZ2Utcm9vdCcpO1xuXHRcdFxuXHRcdC8vIFx1NTIxQlx1NUVGQVx1OTg3Nlx1OTBFOFx1N0VERlx1OEJBMVx1NTMzQVx1NTdERlxuXHRcdHRoaXMucmVuZGVyVG9wU3VtbWFyeShjb250YWluZXJFbCk7XG5cdFx0Ly8gXHU5ODc2XHU5MEU4XHU3RURGXHU4QkExXHU0RTBCXHU2NUI5XHU3Njg0XHU2NENEXHU0RjVDXHU2NzYxXG5cdFx0dGhpcy5yZW5kZXJBY3Rpb25CYXIoY29udGFpbmVyRWwpO1xuXHRcdFxuXHRcdGNvbnN0IGFzc2V0c0NvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdignYXNzZXRzLWNvbnRhaW5lcicpO1xuXHRcdHRoaXMucmVuZGVyQXNzZXRDYXJkcyhhc3NldHNDb250YWluZXIpO1xuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJBc3NldENhcmRzKGFzc2V0c0NvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcblx0XHRhc3NldHNDb250YWluZXIuZW1wdHkoKTtcblx0XHRpZiAodGhpcy5hc3NldHMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRhc3NldHNDb250YWluZXIuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IHQoJ3ZpZXcuZW1wdHknKSB9KTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0Y29uc3QgY2FsY0RhdGUgPSB0aGlzLnNlbGVjdGVkRGF0ZSB8fCBuZXcgRGF0ZSgpO1xuXHRcdGxldCB2aXNpYmxlQXNzZXRzID0gdGhpcy5hc3NldHMuZmlsdGVyKGEgPT4gYS5hY3RpdmVGcm9tIDw9IGNhbGNEYXRlKTtcblx0XHRpZiAodGhpcy5zZWxlY3RlZFRhZ3MubGVuZ3RoID4gMCkge1xuXHRcdFx0dmlzaWJsZUFzc2V0cyA9IHZpc2libGVBc3NldHMuZmlsdGVyKGEgPT4gYS50YWdzPy5zb21lKHQgPT4gdGhpcy5zZWxlY3RlZFRhZ3MuaW5jbHVkZXModCkpKTtcblx0XHR9XG5cdFx0Ly8gXHU2NDFDXHU3RDIyXHU4RkM3XHU2RUU0XHVGRjFBXHU1NDBEXHU3OUYwXHU2MjE2XHU2ODA3XHU3QjdFXHU1MzA1XHU1NDJCXG5cdFx0aWYgKHRoaXMuc2VhcmNoUXVlcnkgJiYgdGhpcy5zZWFyY2hRdWVyeS50cmltKCkpIHtcblx0XHRcdGNvbnN0IHEgPSB0aGlzLnNlYXJjaFF1ZXJ5LnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0dmlzaWJsZUFzc2V0cyA9IHZpc2libGVBc3NldHMuZmlsdGVyKGEgPT4ge1xuXHRcdFx0XHRjb25zdCBuYW1lSGl0ID0gKGEubmFtZSB8fCAnJykudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxKTtcblx0XHRcdFx0Y29uc3QgdGFnSGl0ID0gKGEudGFncyB8fCBbXSkuc29tZSh0ID0+ICh0IHx8ICcnKS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHEpKTtcblx0XHRcdFx0cmV0dXJuIG5hbWVIaXQgfHwgdGFnSGl0O1xuXHRcdFx0fSk7XG5cdFx0fVxuICAgICAgICAvLyBcdTYzOTJcdTVFOEZcbiAgICAgICAgaWYgKHRoaXMuc29ydE1vZGUgIT09ICdub25lJykge1xuICAgICAgICAgICAgdmlzaWJsZUFzc2V0cyA9IFsuLi52aXNpYmxlQXNzZXRzXS5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc29ydE1vZGUgPT09ICdkYWlseURlc2MnKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFDb3N0ID0gYS5nZXREYWlseUNvc3QoY2FsY0RhdGUpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBiQ29zdCA9IGIuZ2V0RGFpbHlDb3N0KGNhbGNEYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJDb3N0IC0gYUNvc3Q7IC8vIFx1NjVFNVx1NTc0N1x1NjIxMFx1NjcyQ1x1OTY0RFx1NUU4RlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zb3J0TW9kZSA9PT0gJ3ByaWNlRGVzYycpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE51bWJlcihiLnByaWNlIHx8IDApIC0gTnVtYmVyKGEucHJpY2UgfHwgMCk7IC8vIFx1NEVGN1x1NjgzQ1x1OTY0RFx1NUU4RlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zb3J0TW9kZSA9PT0gJ2RhdGVEZXNjJykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhdCA9IGEuYWN0aXZlRnJvbT8uZ2V0VGltZT8uKCkgfHwgMDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYnQgPSBiLmFjdGl2ZUZyb20/LmdldFRpbWU/LigpIHx8IDA7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBidCAtIGF0OyAvLyBcdThEMkRcdTUxNjVcdTY1RTVcdTY3MUZcdUZGMDhhY3RpdmVGcm9tXHVGRjA5XHU5NjREXHU1RThGXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblx0XHR2aXNpYmxlQXNzZXRzLmZvckVhY2goYXNzZXQgPT4ge1xuXHRcdFx0Y29uc3QgaXNFeHBpcmVkID0gISEoYXNzZXQuYWN0aXZlVG8gJiYgYXNzZXQuYWN0aXZlVG8gPD0gY2FsY0RhdGUpO1xuXHRcdFx0Y29uc3QgZW5kVGV4dCA9IGlzRXhwaXJlZCA/IGFzc2V0LmFjdGl2ZVRvIS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF0gOiB0KCd2aWV3LnRvTm93Jyk7XG5cdFx0XHRjb25zdCBhc3NldEVsID0gYXNzZXRzQ29udGFpbmVyLmNyZWF0ZURpdignYXNzZXQtY2FyZCcpO1xuXHRcdFx0aWYgKGlzRXhwaXJlZCkgYXNzZXRFbC5hZGRDbGFzcygnYXNzZXQtY2FyZC0tZXhwaXJlZCcpO1xuXHRcdFx0aWYgKGFzc2V0LmhpZGRlbikgYXNzZXRFbC5hZGRDbGFzcygnaGlkZGVuJyk7XG5cdFx0XHQvLyBcdTY3ODRcdTVFRkFcdTVCODlcdTUxNjhcdTc2ODQgRE9NIFx1N0VEM1x1Njc4NFx1RkYwQ1x1OTA3Rlx1NTE0RCBpbm5lckhUTUxcblx0XHRcdGNvbnN0IGluZm9FbCA9IGFzc2V0RWwuY3JlYXRlRGl2KCdhc3NldC1pbmZvJyk7XG5cdFx0XHRjb25zdCB0aXRsZUVsID0gaW5mb0VsLmNyZWF0ZURpdignYXNzZXQtdGl0bGUnKTtcblx0XHRcdHRpdGxlRWwudGV4dENvbnRlbnQgPSBgJHthc3NldC5pY29ufSAke2Fzc2V0Lm5hbWV9YDtcblx0XHRcdGNvbnN0IGRhdGVFbCA9IGluZm9FbC5jcmVhdGVEaXYoJ2Fzc2V0LWRhdGUnKTtcblx0XHRcdGRhdGVFbC50ZXh0Q29udGVudCA9IGAke3QoJ3ZpZXcudXNlZERheXMnLCB7IGRheXM6IGFzc2V0LmdldFVzYWdlRGF5cyhjYWxjRGF0ZSkgfSl9ICgke2Fzc2V0LmFjdGl2ZUZyb20udG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdfSB+ICR7YXNzZXQuYWN0aXZlVG8gPyBlbmRUZXh0IDogdCgndmlldy50b05vdycpfSlgO1xuXHRcdFx0Y29uc3QgbGFiZWxzU2Nyb2xsRWwgPSBpbmZvRWwuY3JlYXRlRGl2KCdhc3NldC1sYWJlbHMtc2Nyb2xsJyk7XG5cdFx0XHQoYXNzZXQudGFncyB8fCBbXSkuZm9yRWFjaCh0YWcgPT4ge1xuXHRcdFx0XHRjb25zdCB0YWdFbCA9IGxhYmVsc1Njcm9sbEVsLmNyZWF0ZVNwYW4oJ3RhZycpO1xuXHRcdFx0XHR0YWdFbC50ZXh0Q29udGVudCA9IHRhZztcblx0XHRcdH0pO1xuXHRcdFx0Y29uc3QgY29zdHNFbCA9IGFzc2V0RWwuY3JlYXRlRGl2KCdhc3NldC1jb3N0cycpO1xuXHRcdFx0Y29uc3QgY29zdHNMaW5lID0gY29zdHNFbC5jcmVhdGVEaXYoJ2Fzc2V0LWNvc3RzLWxpbmUnKTtcblx0XHRcdGNvbnN0IHByaWNlTWV0YSA9IGNvc3RzTGluZS5jcmVhdGVEaXYoJ2Fzc2V0LXByaWNlJyk7XG5cdFx0XHRwcmljZU1ldGEudGV4dENvbnRlbnQgPSBgJHt0KCd2aWV3LmRhaWx5Jyl9XFx1MDBBMGA7XG5cdFx0XHRjb25zdCBkYWlseUNvc3QgPSBjb3N0c0xpbmUuY3JlYXRlRGl2KCdhc3NldC1kYWlseWNvc3QnKTtcblx0XHRcdGRhaWx5Q29zdC50ZXh0Q29udGVudCA9IHRoaXMuZ2V0Q3VycmVuY3lTeW1ib2woKSArIGAke2Fzc2V0LmdldERhaWx5Q29zdChjYWxjRGF0ZSkudG9GaXhlZCgyKX1gO1xuXHRcdFx0Y29uc3QgcHJpY2VMaW5lID0gY29zdHNFbC5jcmVhdGVEaXYoJ2Fzc2V0LXByaWNlJyk7XG5cdFx0XHRwcmljZUxpbmUudGV4dENvbnRlbnQgPSBgJHt0KCd2aWV3LnByaWNlJyl9ICR7dGhpcy5nZXRDdXJyZW5jeVN5bWJvbCgpfSR7YXNzZXQucHJpY2V9YDtcblx0XHRcdGNvbnN0IHJlY3ljbGVMaW5lID0gY29zdHNFbC5jcmVhdGVEaXYoJ2Fzc2V0LXByaWNlJyk7XG5cdFx0XHRyZWN5Y2xlTGluZS50ZXh0Q29udGVudCA9IGAke3QoJ3ZpZXcucmVjeWNsZVByaWNlJyl9ICR7dGhpcy5nZXRDdXJyZW5jeVN5bWJvbCgpfSR7YXNzZXQucmVjeWNsZVByaWNlfWA7XG5cdFx0XHRsZXQgZGlkTG9uZ1ByZXNzID0gZmFsc2U7XG5cdFx0XHRsZXQgaXNUb3VjaEFjdGl2ZSA9IGZhbHNlO1xuXHRcdFx0bGV0IGxhc3RUb3VjaFRpbWUgPSAwO1xuXHRcdFx0bGV0IGxhc3RQb2ludGVyVHlwZTogc3RyaW5nID0gJyc7XG5cdFx0XHRhc3NldEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcblx0XHRcdFx0aWYgKGRpZExvbmdQcmVzcykge1xuXHRcdFx0XHRcdGRpZExvbmdQcmVzcyA9IGZhbHNlO1xuXHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0XHRuZXcgQXNzZXRGb3JtTW9kYWwodGhpcy5hcHAsIHRoaXMuYXNzZXRSZXBvc2l0b3J5LCBhc3NldCwgKCkgPT4gdGhpcy5sb2FkQXNzZXRzKCkpLm9wZW4oKTtcblx0XHRcdH0pO1xuXG5cdFx0XHQvLyBcdTk1N0ZcdTYzMDlcdTk2OTBcdTg1Q0YvXHU2MDYyXHU1OTBEXHU2NjNFXHU3OTNBXHVGRjBDXHU0RUM1XHU1MTg1XHU1QjU4XHU1MjA3XHU2MzYyXHVGRjFCXHU0RUM1XHU1MjM3XHU2NUIwXHU5ODc2XHU5MEU4XHU2NTcwXHU1QjU3XHVGRjBDXHU0RTBEXHU1MjM3XHU2NUIwXHU1NkZFXHU4ODY4XG5cdFx0XHRsZXQgcHJlc3NUaW1lcjogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG5cdFx0XHRjb25zdCBzdGFydFByZXNzID0gKGV2PzogTW91c2VFdmVudCB8IFRvdWNoRXZlbnQpID0+IHtcblx0XHRcdFx0Ly8gXHU0RUM1XHU1NENEXHU1RTk0XHU5RjIwXHU2ODA3XHU1REU2XHU5NTJFXG5cdFx0XHRcdGlmIChldiAmJiAnYnV0dG9uJyBpbiBldiAmJiB0eXBlb2YgZXYuYnV0dG9uID09PSAnbnVtYmVyJyAmJiBldi5idXR0b24gIT09IDApIHJldHVybjtcblx0XHRcdFx0aWYgKHByZXNzVGltZXIpIHdpbmRvdy5jbGVhclRpbWVvdXQocHJlc3NUaW1lcik7XG5cdFx0XHRcdHByZXNzVGltZXIgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdFx0ZGlkTG9uZ1ByZXNzID0gdHJ1ZTtcblx0XHRcdFx0XHRhc3NldC5oaWRkZW4gPSAhYXNzZXQuaGlkZGVuO1xuXHRcdFx0XHRcdGFzc2V0RWwuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZGVuJywgYXNzZXQuaGlkZGVuKTtcblx0XHRcdFx0XHR0aGlzLnJlZnJlc2hUb3BOdW1iZXJzT25seSgpO1xuXHRcdFx0XHR9LCA1MDApO1xuXHRcdFx0fTtcblx0XHRcdGNvbnN0IGNhbmNlbFByZXNzID0gKCkgPT4geyBpZiAocHJlc3NUaW1lcikgeyB3aW5kb3cuY2xlYXJUaW1lb3V0KHByZXNzVGltZXIpOyBwcmVzc1RpbWVyID0gbnVsbDsgfSB9O1xuXHRcdFx0YXNzZXRFbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBzdGFydFByZXNzKTtcblx0XHRcdGFzc2V0RWwuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcmRvd24nLCAocGV2OiBQb2ludGVyRXZlbnQpID0+IHsgbGFzdFBvaW50ZXJUeXBlID0gKHBldiBhcyBhbnkpLnBvaW50ZXJUeXBlIHx8ICcnOyB9KTtcblx0XHRcdGNvbnN0IG9uVG91Y2hTdGFydCA9IChldjogVG91Y2hFdmVudCkgPT4geyBpc1RvdWNoQWN0aXZlID0gdHJ1ZTsgbGFzdFRvdWNoVGltZSA9IERhdGUubm93KCk7IHN0YXJ0UHJlc3MoZXYpOyB9O1xuXHRcdFx0YXNzZXRFbC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0Jywgb25Ub3VjaFN0YXJ0LCB7IHBhc3NpdmU6IHRydWUgfSBhcyBhbnkpO1xuXHRcdFx0YXNzZXRFbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgY2FuY2VsUHJlc3MpO1xuXHRcdFx0YXNzZXRFbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgY2FuY2VsUHJlc3MpO1xuXHRcdFx0Y29uc3Qgb25Ub3VjaEVuZCA9ICgpID0+IHsgaXNUb3VjaEFjdGl2ZSA9IGZhbHNlOyBjYW5jZWxQcmVzcygpOyB9O1xuXHRcdFx0YXNzZXRFbC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIG9uVG91Y2hFbmQpO1xuXHRcdFx0YXNzZXRFbC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGNhbmNlbCcsIG9uVG91Y2hFbmQpO1xuXHRcdFx0Ly8gXHU3OTgxXHU3NTI4XHU1M0YzXHU5NTJFXHU1MjIwXHU5NjY0XHVGRjFBXHU0RTBEXHU1MThEXHU3RUQxXHU1QjlBIGNvbnRleHRtZW51IFx1NTIyMFx1OTY2NFx1ODg0Q1x1NEUzQVxuXHRcdH0pO1xuXHR9XG5cblx0Ly8gXHU0RUM1XHU1MjM3XHU2NUIwXHU5ODc2XHU5MEU4XHU2NTcwXHU1QjU3IChcdTYzOTJcdTk2NjQgaGlkZGVuIFx1OEQ0NFx1NEVBNylcdUZGMENcdTRFMERcdTUyMzdcdTY1QjBcdTU2RkVcdTg4NjhcdTMwMDFcdTRFMERcdTkxQ0RcdTVFRkFcdTUyMTdcdTg4Njhcblx0cHJpdmF0ZSByZWZyZXNoVG9wTnVtYmVyc09ubHkoKSB7XG5cdFx0aWYgKCF0aGlzLnRvcFN1bW1hcnlDb21wb25lbnQpIHJldHVybjtcblx0XHRjb25zdCBjYWxjRGF0ZSA9IHRoaXMuc2VsZWN0ZWREYXRlIHx8IG5ldyBEYXRlKCk7XG5cdFx0Y29uc3QgYWN0aXZlQXNzZXRzID0gdGhpcy5hc3NldHMuZmlsdGVyKGEgPT4gYS5pc0FjdGl2ZShjYWxjRGF0ZSkgJiYgIWEuaGlkZGVuKTtcblx0XHRjb25zdCBmaWx0ZXJlZEFjdGl2ZUFzc2V0cyA9IHRoaXMuYXBwbHlUYWdGaWx0ZXIoYWN0aXZlQXNzZXRzKTtcblx0XHRjb25zdCB0b3RhbENvc3QgPSBmaWx0ZXJlZEFjdGl2ZUFzc2V0cy5yZWR1Y2UoKHN1bSwgYSkgPT4gc3VtICsgYS5wcmljZSwgMCk7XG5cdFx0Y29uc3QgdG90YWxSZWN5Y2xlID0gZmlsdGVyZWRBY3RpdmVBc3NldHMucmVkdWNlKChzdW0sIGEpID0+IHN1bSArIGEucmVjeWNsZVByaWNlLCAwKTtcblx0XHRjb25zdCB0b3RhbERhaWx5Q29zdCA9IGZpbHRlcmVkQWN0aXZlQXNzZXRzLnJlZHVjZSgoc3VtLCBhKSA9PiBzdW0gKyBhLmdldERhaWx5Q29zdChjYWxjRGF0ZSksIDApO1xuXHRcdHRoaXMudG9wU3VtbWFyeUNvbXBvbmVudC51cGRhdGVOdW1iZXJzKHRvdGFsRGFpbHlDb3N0LCB0b3RhbENvc3QsIHRvdGFsUmVjeWNsZSk7XG5cdH1cblxuXHQvLyBcdTk4NzZcdTkwRThcdTdFREZcdThCQTFcdTRFMEJcdTY1QjlcdTc2ODRcdTY0Q0RcdTRGNUNcdTY3NjFcdUZGMDhcdTY0MUNcdTdEMjIgLyBcdTYzOTJcdTVFOEYgLyBcdTZERkJcdTUyQTBcdUZGMDlcblx0cHJpdmF0ZSByZW5kZXJBY3Rpb25CYXIoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KSB7XG5cdFx0dGhpcy5pbmplY3RBY3Rpb25CYXJTdHlsZXMoKTtcblx0XHRjb25zdCBiYXIgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoJ2xhYy1hY3Rpb25iYXItY2FyZCcpO1xuXHRcdHRoaXMuYWN0aW9uQmFyRWwgPSBiYXI7XG5cblx0XHQvLyBcdTdBODRcdTVDNEZcdThGRDRcdTU2REVcdTYzMDlcdTk0QUVcdUZGMDhcdTkwN0ZcdTUxNERcdTdDRkJcdTdFREZcdTY4MDdcdTk4OThcdTY4MEZcdTk2OTBcdTg1Q0ZcdTY1RjZcdTY1RTBcdTU5MDRcdThGRDRcdTU2REVcdUZGMDlcblx0XHRjb25zdCBiYWNrQnRuID0gYmFyLmNyZWF0ZURpdih7IGNsczogJ2xhYy1pY29uLWJ0biBiYWNrJywgYXR0cjogeyB0aXRsZTogdCgndmlldy5iYWNrJykgfSB9KTtcblx0XHRiYWNrQnRuLmFwcGVuZENoaWxkKHRoaXMuc3ZnQmFjaygpKTtcblx0XHRiYWNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdC8vIFx1NzZGNFx1NjNBNVx1NTE3M1x1OTVFRFx1NUY1M1x1NTI0RFx1NTNGNlx1NUI1MFx1RkYwOFx1NjgwN1x1N0I3RVx1RkYwOVx1RkYwQ1x1N0I0OVx1NjU0OFx1MjAxQ1x1OEZENFx1NTZERS9cdTUxNzNcdTk1RURcdTIwMURcblx0XHRcdHRyeSB7IHRoaXMubGVhZi5kZXRhY2goKTsgfSBjYXRjaCAoXykge31cblx0XHR9KTtcblxuXHRcdC8vIFx1NURFNlx1NEZBN1x1RkYxQVx1NjQxQ1x1N0QyMlx1OEY5M1x1NTE2NVx1RkYwOFx1NTE4NVx1NUQ0Q1x1NTZGRVx1NjgwN1x1NjMwOVx1OTRBRVx1RkYwOVxuXHRcdGNvbnN0IHNlYXJjaFdyYXAgPSBiYXIuY3JlYXRlRGl2KCdsYWMtYWN0aW9uYmFyLXNlYXJjaCcpO1xuXHRcdGNvbnN0IHNlYXJjaEljb25CdG4gPSBzZWFyY2hXcmFwLmNyZWF0ZUVsKCdidXR0b24nLCB7IGNsczogJ2xhYy1pY29uLWJ0biBzZWFyY2gtaWNvbicsIGF0dHI6IHsgdHlwZTogJ2J1dHRvbicsICdhcmlhLWxhYmVsJzogdCgndmlldy5zZWFyY2guYXJpYScpIH0gfSk7XG5cdFx0c2VhcmNoSWNvbkJ0bi5hcHBlbmRDaGlsZCh0aGlzLnN2Z1NlYXJjaCgpKTtcblx0XHRjb25zdCBzZWFyY2hJbnB1dCA9IHNlYXJjaFdyYXAuY3JlYXRlRWwoJ2lucHV0JywgeyBhdHRyOiB7IHR5cGU6ICd0ZXh0JywgcGxhY2Vob2xkZXI6IHQoJ3ZpZXcuc2VhcmNoLnBsYWNlaG9sZGVyJykgfSB9KSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuXHRcdGlmICh0aGlzLnNlYXJjaFF1ZXJ5KSBzZWFyY2hJbnB1dC52YWx1ZSA9IHRoaXMuc2VhcmNoUXVlcnk7XG5cdFx0c2VhcmNoSWNvbkJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHNlYXJjaElucHV0LmZvY3VzKCkpO1xuXHRcdHNlYXJjaElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xuXHRcdFx0dGhpcy5zZWFyY2hRdWVyeSA9IHNlYXJjaElucHV0LnZhbHVlIHx8ICcnO1xuXHRcdFx0dGhpcy5yZWZyZXNoQXNzZXRMaXN0T25seSgpO1xuXHRcdH0pO1xuXG5cdFx0Ly8gXHU1M0YzXHU0RkE3XHVGRjFBXHU2NENEXHU0RjVDXHU2MzA5XHU5NEFFXHU1MzNBXHVGRjA4XHU2MzkyXHU1RThGXHUzMDAxXHU2REZCXHU1MkEwXHVGRjA5XG5cdFx0Y29uc3QgYWN0aW9ucyA9IGJhci5jcmVhdGVEaXYoJ2xhYy1hY3Rpb25iYXItYWN0aW9ucycpO1xuXHRcdGNvbnN0IHNvcnRCdG4gPSBhY3Rpb25zLmNyZWF0ZURpdih7IGNsczogJ2xhYy1pY29uLWJ0biBzb3J0JywgYXR0cjogeyB0aXRsZTogdCgndmlldy5zb3J0LnRpdGxlJykgfSB9KTtcblx0XHRzb3J0QnRuLmFwcGVuZENoaWxkKHRoaXMuc3ZnU29ydCgpKTtcblx0XHRjb25zdCBhcHBseVNvcnRCdG5TdGF0ZSA9ICgpID0+IHtcblx0XHRcdHNvcnRCdG4uY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJywgdGhpcy5zb3J0TW9kZSAhPT0gJ25vbmUnKTtcblx0XHRcdHNvcnRCdG4uc2V0QXR0cignZGF0YS1tb2RlJywgdGhpcy5zb3J0TW9kZSk7XG5cdFx0XHRzb3J0QnRuLnNldEF0dHIoJ2FyaWEtcHJlc3NlZCcsIFN0cmluZyh0aGlzLnNvcnRNb2RlICE9PSAnbm9uZScpKTtcblx0XHRcdGNvbnN0IHRpdGxlID0gdGhpcy5zb3J0TW9kZSA9PT0gJ2RhaWx5RGVzYycgPyB0KCd2aWV3LnNvcnQudGl0bGUuZGFpbHlEZXNjJylcblx0XHRcdFx0OiB0aGlzLnNvcnRNb2RlID09PSAncHJpY2VEZXNjJyA/IHQoJ3ZpZXcuc29ydC50aXRsZS5wcmljZURlc2MnKVxuXHRcdFx0XHQ6IHRoaXMuc29ydE1vZGUgPT09ICdkYXRlRGVzYycgPyB0KCd2aWV3LnNvcnQudGl0bGUuZGF0ZURlc2MnKVxuXHRcdFx0XHQ6IHQoJ3ZpZXcuc29ydC50aXRsZScpO1xuICAgICAgICAgICAgc29ydEJ0bi5zZXRBdHRyKCd0aXRsZScsIHRpdGxlKTtcblx0XHR9O1xuXHRcdGFwcGx5U29ydEJ0blN0YXRlKCk7XG4gICAgICAgIHNvcnRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdGhpcy5vcGVuU29ydE1lbnUoc29ydEJ0biwgKG1vZGUpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnNvcnRNb2RlID0gbW9kZTtcbiAgICAgICAgICAgICAgICBhcHBseVNvcnRCdG5TdGF0ZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaEFzc2V0TGlzdE9ubHkoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuXHRcdGNvbnN0IGFkZEJ0biA9IGFjdGlvbnMuY3JlYXRlRGl2KHsgY2xzOiAnbGFjLWljb24tYnRuIGFkZCcsIGF0dHI6IHsgdGl0bGU6IHQoJ3ZpZXcuYWRkJykgfSB9KTtcblx0XHRhZGRCdG4uYXBwZW5kQ2hpbGQodGhpcy5zdmdQbHVzKCkpO1xuXHRcdGFkZEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblx0XHRcdG5ldyBBc3NldEZvcm1Nb2RhbCh0aGlzLmFwcCwgdGhpcy5hc3NldFJlcG9zaXRvcnksIHVuZGVmaW5lZCwgKCkgPT4gdGhpcy5sb2FkQXNzZXRzKCkpLm9wZW4oKTtcblx0XHR9KTtcblx0fVxuXG5cdHByaXZhdGUgcmVmcmVzaEFzc2V0TGlzdE9ubHkoKSB7XG5cdFx0Y29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcblx0XHRjb25zdCBsaXN0RWwgPSBjb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKCcuYXNzZXRzLWNvbnRhaW5lcicpO1xuXHRcdGlmIChsaXN0RWwpIHtcblx0XHRcdChsaXN0RWwgYXMgSFRNTEVsZW1lbnQpLnJlbW92ZSgpO1xuXHRcdFx0Y29uc3QgbmV3TGlzdCA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdignYXNzZXRzLWNvbnRhaW5lcicpO1xuXHRcdFx0dGhpcy5yZW5kZXJBc3NldENhcmRzKG5ld0xpc3QpO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgaW5qZWN0QWN0aW9uQmFyU3R5bGVzKCkge1xuXHRcdGNvbnN0IFNUWUxFX0lEID0gJ2xhYy1jb3N0c2V0LWFjdGlvbmJhci1zdHlsZXMnO1xuXHRcdGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChTVFlMRV9JRCkpIHJldHVybjtcblx0XHRjb25zdCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG5cdFx0c3R5bGUuaWQgPSBTVFlMRV9JRDtcblx0XHRzdHlsZS50ZXh0Q29udGVudCA9IGBcblx0XHRcdC8qIFx1NjMwOVx1OTRBRVx1NTM2MVx1NzI0N1x1RkYxQVx1NEUwRSB0b3Atc3VtbWFyeSAvIGFzc2V0LWNhcmQgXHU1NDBDXHU5OENFXHU2ODNDXHVGRjBDXHU0RUM1XHU5QUQ4XHU1RUE2XHU2NkY0XHU1QzBGICovXG5cdFx0XHQubGFjLWFjdGlvbmJhci1jYXJkIHsgZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBnYXA6IDEwcHg7IHBhZGRpbmc6IDZweCAxMHB4OyBtYXJnaW46IDBweCAxNHB4IDhweDsgYm9yZGVyLXJhZGl1czogOHB4OyBiYWNrZ3JvdW5kOiAjMjMyNjJGOyBib3gtc2hhZG93OiAwIDJweCA4cHggcmdiYSgwLDAsMCwwLjE4KTsgfVxuXHRcdFx0LmxhYy1hY3Rpb25iYXItc2VhcmNoIHsgcG9zaXRpb246IHJlbGF0aXZlOyBmbGV4OiAxOyBtaW4td2lkdGg6IDA7IH1cblx0XHRcdC5sYWMtYWN0aW9uYmFyLXNlYXJjaCBpbnB1dCB7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDMwcHg7IHBhZGRpbmc6IDRweCA4cHggNHB4IDMwcHg7IGJvcmRlci1yYWRpdXM6IDhweDsgYm9yZGVyOiAxcHggc29saWQgIzNBM0Q0NjsgYmFja2dyb3VuZDogIzJBMkQzNjsgY29sb3I6ICNGNUY2RkE7IGZvbnQtc2l6ZTogMTNweDsgbGluZS1oZWlnaHQ6IDIwcHg7IH1cblx0XHRcdC5sYWMtYWN0aW9uYmFyLXNlYXJjaCBpbnB1dDo6cGxhY2Vob2xkZXIgeyBjb2xvcjogI0EwQTNCMTsgfVxuXHRcdFx0LmxhYy1hY3Rpb25iYXItc2VhcmNoIC5zZWFyY2gtaWNvbiB7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogOHB4OyB0b3A6IDUwJTsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUpOyB3aWR0aDogMTZweDsgaGVpZ2h0OiAxNnB4OyBwYWRkaW5nOiAwOyBib3JkZXI6IG5vbmU7IGJhY2tncm91bmQ6IHRyYW5zcGFyZW50OyBjb2xvcjogI0M5Q0JEMzsgfVxuXHRcdFx0LmxhYy1hY3Rpb25iYXItYWN0aW9ucyB7IGRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGdhcDogOHB4OyB9XG5cdFx0XHQubGFjLWljb24tYnRuIHsgd2lkdGg6IDMycHg7IGhlaWdodDogMzJweDsgZGlzcGxheTogaW5saW5lLWZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGp1c3RpZnktY29udGVudDogY2VudGVyOyBib3JkZXItcmFkaXVzOiA4cHg7IGJvcmRlcjogbm9uZSAhaW1wb3J0YW50OyBvdXRsaW5lOiBub25lICFpbXBvcnRhbnQ7IGJhY2tncm91bmQ6IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7IGJveC1zaGFkb3c6IG5vbmUgIWltcG9ydGFudDsgY29sb3I6ICNDOUNCRDM7IGN1cnNvcjogcG9pbnRlcjsgfVxuXHRcdFx0LmxhYy1pY29uLWJ0bi5hZGQgeyBjb2xvcjogI2YzZTcwMDsgfVxuXHRcdFx0LmxhYy1pY29uLWJ0bi5iYWNrIHsgZGlzcGxheTogaW5saW5lLWZsZXg7IGNvbG9yOiAjQzlDQkQzOyB9XG5cdFx0XHQubGFjLWljb24tYnRuOmhvdmVyIHsgZmlsdGVyOiBicmlnaHRuZXNzKDEuMDUpOyB9XG5cdFx0XHQubGFjLWljb24tYnRuIHN2ZyB7IHdpZHRoOiAyMHB4OyBoZWlnaHQ6IDIwcHg7IGRpc3BsYXk6YmxvY2s7IH1cblx0XHRcdC5sYWMtaWNvbi1idG4gc3ZnICogeyBzdHJva2U6IGN1cnJlbnRDb2xvciAhaW1wb3J0YW50OyBmaWxsOiBub25lICFpbXBvcnRhbnQ7IHN0cm9rZS13aWR0aDogMiAhaW1wb3J0YW50OyB9XG5cdFx0XHQubGFjLWljb24tYnRuLmFjdGl2ZSB7IGJhY2tncm91bmQ6ICMyRjMxMzk7IH1cblx0XHRcdC8qIFx1OTY5MFx1ODVDRlx1NjAwMVx1NjgzN1x1NUYwRlx1RkYwOFx1NUJGOVx1OUY1MCBjb3N0c2V0YXBwXHVGRjA5ICovXG5cdFx0XHQuYXNzZXQtY2FyZC5oaWRkZW4geyBvcGFjaXR5OiAwLjM7IGZpbHRlcjogZ3JheXNjYWxlKDAuNSk7IH1cbiAgICAgICAgICAgIC8qIFx1NjM5Mlx1NUU4Rlx1ODNEQ1x1NTM1NSAqL1xuICAgICAgICAgICAgLmxhYy1zb3J0LW1lbnUgeyBwb3NpdGlvbjogZml4ZWQ7IG1pbi13aWR0aDogMTYwcHg7IGJhY2tncm91bmQ6ICMyMzI2MkY7IGNvbG9yOiAjRjVGNkZBOyBib3JkZXItcmFkaXVzOiAxMHB4OyBvdmVyZmxvdzogaGlkZGVuOyBib3gtc2hhZG93OiAwIDhweCAxOHB4IHJnYmEoMCwwLDAsMC4zNSk7IGJvcmRlcjogMXB4IHNvbGlkICMzQTNENDY7IHotaW5kZXg6IDk5OTk7IH1cbiAgICAgICAgICAgIC5sYWMtc29ydC1tZW51IC5tZW51LWl0ZW0geyBwYWRkaW5nOiAxMHB4IDE0cHg7IGN1cnNvcjogcG9pbnRlcjsgYm9yZGVyLXRvcDogMXB4IHNvbGlkICMyRTMxM0E7IHRyYW5zaXRpb246IGJhY2tncm91bmQgMTIwbXMgZWFzZSwgY29sb3IgMTIwbXMgZWFzZTsgfVxuICAgICAgICAgICAgLmxhYy1zb3J0LW1lbnUgLm1lbnUtaXRlbTpmaXJzdC1jaGlsZCB7IGJvcmRlci10b3A6IG5vbmU7IH1cbiAgICAgICAgICAgIC5sYWMtc29ydC1tZW51IC5tZW51LWl0ZW06aG92ZXIgeyBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjE0LCAwLCAwLjEyKTsgY29sb3I6IGluaGVyaXQ7IH1cbiAgICAgICAgICAgIC5sYWMtc29ydC1tZW51IC5tZW51LWl0ZW0uYWN0aXZlIHsgY29sb3I6ICNGRkQ3MDA7IH1cblxuXHRcdFx0LyogXHU1QzBGXHU0RThFIDcyMHB4IFx1NjVGNlx1N0QyN1x1NTFEMVx1NUUwM1x1NUM0MCAqL1xuXHRcdFx0QG1lZGlhIChtYXgtd2lkdGg6IDcyMHB4KSB7XG5cdFx0XHRcdC5sYWMtYWN0aW9uYmFyLWNhcmQgeyBnYXA6IDhweDsgfVxuXHRcdFx0XHQubGFjLWFjdGlvbmJhci1zZWFyY2ggaW5wdXQgeyBwYWRkaW5nLWxlZnQ6IDMwcHg7IH1cblx0XHRcdH1cblx0XHRgO1xuXHRcdGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuXHR9XG5cblx0cHJpdmF0ZSBpbmplY3RIZWFkZXJGaXhTdHlsZXMoKSB7XG5cdFx0Y29uc3QgU1RZTEVfSUQgPSAnbGFjLWNvc3RzZXQtaGVhZGVyLXN0eWxlcyc7XG5cdFx0aWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFNUWUxFX0lEKSkgcmV0dXJuO1xuXHRcdGNvbnN0IHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcblx0XHRzdHlsZS5pZCA9IFNUWUxFX0lEO1xuXHRcdHN0eWxlLnRleHRDb250ZW50ID0gYFxuXHRcdFx0LyogXHU0RUM1XHU0RjVDXHU3NTI4XHU0RThFXHU2NzJDXHU4OUM2XHU1NkZFXHVGRjFBXHU0RkREXHU4QkMxXHU3QTg0XHU1QkJEXHU2NUY2XHU0RTVGXHU2NjNFXHU3OTNBXHU2ODA3XHU5ODk4XHU2ODBGXHU4M0RDXHU1MzU1L1x1OEZENFx1NTZERVx1NTMzQVx1NTdERiAqL1xuXHRcdFx0LndvcmtzcGFjZS1sZWFmW2RhdGEtdHlwZT1cImxhYy1jb3N0c2V0LXZpZXdcIl0gLnZpZXctaGVhZGVyIHtcblx0XHRcdFx0ZGlzcGxheTogZmxleCAhaW1wb3J0YW50O1xuXHRcdFx0XHRhbGlnbi1pdGVtczogY2VudGVyICFpbXBvcnRhbnQ7XG5cdFx0XHRcdGZsZXgtd3JhcDogbm93cmFwICFpbXBvcnRhbnQ7XG5cdFx0XHRcdHZpc2liaWxpdHk6IHZpc2libGUgIWltcG9ydGFudDtcblx0XHRcdFx0aGVpZ2h0OiBhdXRvICFpbXBvcnRhbnQ7XG5cdFx0XHRcdG1pbi1oZWlnaHQ6IDM2cHggIWltcG9ydGFudDtcblx0XHRcdH1cblx0XHRcdC53b3Jrc3BhY2UtbGVhZltkYXRhLXR5cGU9XCJsYWMtY29zdHNldC12aWV3XCJdIC52aWV3LWhlYWRlci10aXRsZS1jb250YWluZXIgeyBtaW4td2lkdGg6IDAgIWltcG9ydGFudDsgZGlzcGxheTogZmxleCAhaW1wb3J0YW50OyB9XG5cdFx0XHQud29ya3NwYWNlLWxlYWZbZGF0YS10eXBlPVwibGFjLWNvc3RzZXQtdmlld1wiXSAudmlldy1oZWFkZXItdGl0bGUgeyBmbGV4OiAxIDEgYXV0byAhaW1wb3J0YW50OyBtaW4td2lkdGg6IDAgIWltcG9ydGFudDsgb3ZlcmZsb3c6IGhpZGRlbjsgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7IHdoaXRlLXNwYWNlOiBub3dyYXA7IH1cblx0XHRcdC53b3Jrc3BhY2UtbGVhZltkYXRhLXR5cGU9XCJsYWMtY29zdHNldC12aWV3XCJdIC52aWV3LWhlYWRlciAudmlldy1hY3Rpb25zIHsgZmxleDogMCAwIGF1dG8gIWltcG9ydGFudDsgZGlzcGxheTogaW5saW5lLWZsZXggIWltcG9ydGFudDsgZ2FwOiA2cHg7IHZpc2liaWxpdHk6IHZpc2libGUgIWltcG9ydGFudDsgfVxuXHRcdFx0QG1lZGlhIChtYXgtd2lkdGg6IDcyMHB4KSB7XG5cdFx0XHRcdC53b3Jrc3BhY2UtbGVhZltkYXRhLXR5cGU9XCJsYWMtY29zdHNldC12aWV3XCJdIC52aWV3LWhlYWRlci10aXRsZSB7IG1heC13aWR0aDogNDUlOyB9XG5cdFx0XHR9XG5cdFx0XHRAbWVkaWEgKG1heC13aWR0aDogNTYwcHgpIHtcblx0XHRcdFx0LndvcmtzcGFjZS1sZWFmW2RhdGEtdHlwZT1cImxhYy1jb3N0c2V0LXZpZXdcIl0gLnZpZXctaGVhZGVyLXRpdGxlIHsgbWF4LXdpZHRoOiAzNSU7IH1cblx0XHRcdH1cblx0XHRgO1xuXHRcdGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuXHR9XG5cbiAgICBwcml2YXRlIG9wZW5Tb3J0TWVudShhbmNob3JFbDogSFRNTEVsZW1lbnQsIG9uU2VsZWN0OiAobW9kZTogJ25vbmUnIHwgJ2RhaWx5RGVzYycgfCAncHJpY2VEZXNjJyB8ICdkYXRlRGVzYycpID0+IHZvaWQpIHtcbiAgICAgICAgLy8gXHU4MkU1XHU1REYyXHU1QjU4XHU1NzI4XHU1MTQ4XHU2RTA1XHU3NDA2XG4gICAgICAgIHRoaXMuY2xvc2VFeGlzdGluZ1NvcnRNZW51KCk7XG5cbiAgICAgICAgY29uc3QgcmVjdCA9IGFuY2hvckVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBjb25zdCBtZW51ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIG1lbnUuY2xhc3NOYW1lID0gJ2xhYy1zb3J0LW1lbnUnO1xuXG4gICAgICAgIGNvbnN0IGJ1aWxkSXRlbSA9IChsYWJlbDogc3RyaW5nLCB2YWx1ZTogJ25vbmUnIHwgJ2RhaWx5RGVzYycgfCAncHJpY2VEZXNjJyB8ICdkYXRlRGVzYycpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIGl0ZW0uY2xhc3NOYW1lID0gJ21lbnUtaXRlbScgKyAodGhpcy5zb3J0TW9kZSA9PT0gdmFsdWUgPyAnIGFjdGl2ZScgOiAnJyk7XG4gICAgICAgICAgICBpdGVtLnRleHRDb250ZW50ID0gbGFiZWw7XG4gICAgICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2KSA9PiB7XG4gICAgICAgICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV4dCA9IHRoaXMuc29ydE1vZGUgPT09IHZhbHVlID8gJ25vbmUnIDogdmFsdWU7XG4gICAgICAgICAgICAgICAgb25TZWxlY3QobmV4dCBhcyBhbnkpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VFeGlzdGluZ1NvcnRNZW51KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgICB9O1xuXG5cdFx0bWVudS5hcHBlbmRDaGlsZChidWlsZEl0ZW0odCgndmlldy5zb3J0Lm1lbnUuZGFpbHlEZXNjJyksICdkYWlseURlc2MnKSk7XG5cdFx0bWVudS5hcHBlbmRDaGlsZChidWlsZEl0ZW0odCgndmlldy5zb3J0Lm1lbnUucHJpY2VEZXNjJyksICdwcmljZURlc2MnKSk7XG5cdFx0bWVudS5hcHBlbmRDaGlsZChidWlsZEl0ZW0odCgndmlldy5zb3J0Lm1lbnUuZGF0ZURlc2MnKSwgJ2RhdGVEZXNjJykpO1xuXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobWVudSk7XG4gICAgICAgIC8vIFx1NUI5QVx1NEY0RFx1NTIzMFx1NjMwOVx1OTRBRVx1NEUwQlx1NjVCOVxuICAgICAgICBjb25zdCB0b3AgPSByZWN0LmJvdHRvbSArIDY7XG4gICAgICAgIGNvbnN0IGxlZnQgPSBNYXRoLm1pbihNYXRoLm1heCg4LCByZWN0LmxlZnQpLCB3aW5kb3cuaW5uZXJXaWR0aCAtIDE4MCk7XG4gICAgICAgIG1lbnUuc3R5bGUudG9wID0gYCR7dG9wfXB4YDtcbiAgICAgICAgbWVudS5zdHlsZS5sZWZ0ID0gYCR7bGVmdH1weGA7XG5cblx0XHRjb25zdCBvbkRvY0NsaWNrID0gKGV2OiBNb3VzZUV2ZW50KSA9PiB7XG5cdFx0XHRpZiAoIW1lbnUuY29udGFpbnMoZXYudGFyZ2V0IGFzIE5vZGUpKSB0aGlzLmNsb3NlRXhpc3RpbmdTb3J0TWVudSgpO1xuXHRcdH07XG5cdFx0Y29uc3Qgb25Fc2MgPSAoZXY6IEtleWJvYXJkRXZlbnQpID0+IHtcblx0XHRcdGlmIChldi5rZXkgPT09ICdFc2NhcGUnKSB0aGlzLmNsb3NlRXhpc3RpbmdTb3J0TWVudSgpO1xuXHRcdH07XG5cdFx0Ly8gXHU0RjdGXHU3NTI4IHJlZ2lzdGVyRG9tRXZlbnQgXHU0RUU1XHU0RkJGXHU1NzI4XHU4OUM2XHU1NkZFXHU1Mzc4XHU4RjdEXHU2NUY2XHU4MUVBXHU1MkE4XHU2RTA1XHU3NDA2XG5cdFx0dGhpcy5yZWdpc3RlckRvbUV2ZW50KGRvY3VtZW50LCAnbW91c2Vkb3duJywgb25Eb2NDbGljayBhcyBhbnksIHsgb25jZTogdHJ1ZSB9IGFzIGFueSk7XG5cdFx0dGhpcy5yZWdpc3RlckRvbUV2ZW50KGRvY3VtZW50LCAna2V5ZG93bicsIG9uRXNjIGFzIGFueSwgeyBvbmNlOiB0cnVlIH0gYXMgYW55KTtcblx0XHQobWVudSBhcyBhbnkpLl9jbGVhbnVwID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIC8vIFx1OEJBOVx1ODlDNlx1NTZGRVx1NTNFRlx1ODhBQiBzZXRWaWV3U3RhdGUgXHU2MDYyXHU1OTBEXHU0RTBFXHU1QkZDXHU4MjJBXHVGRjFBXHU0RkREXHU1QjU4L1x1NUU5NFx1NzUyOFx1NzJCNlx1NjAwMVxuICAgIGdldFN0YXRlKCk6IGFueSB7XG4gICAgICAgIHJldHVybiB7IGZpbGVQYXRoOiB0aGlzLmZpbGVQYXRoIH07XG4gICAgfVxuXG4gICAgYXN5bmMgc2V0U3RhdGUoc3RhdGU6IGFueSwgcmVzdWx0OiBhbnkpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgbmV4dFBhdGggPSBzdGF0ZT8uZmlsZVBhdGggYXMgc3RyaW5nIHwgdW5kZWZpbmVkO1xuICAgICAgICBpZiAobmV4dFBhdGggJiYgbmV4dFBhdGggIT09IHRoaXMuZmlsZVBhdGgpIHtcbiAgICAgICAgICAgIHRoaXMuZmlsZVBhdGggPSBuZXh0UGF0aDtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudXNlRmlsZShuZXh0UGF0aCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gXHU4MkU1XHU2NUUwXHU4REVGXHU1Rjg0XHVGRjBDXHU2RTA1XHU3QTdBXHU1RTc2XHU2M0QwXHU3OTNBXG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRhaW5lckVsLmVtcHR5KCk7XG4gICAgICAgIGNvbnRhaW5lckVsLmFkZENsYXNzKCdwYWdlLXJvb3QnKTtcbiAgICAgICAgY29uc3QgaGludCA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdigpO1xuICAgICAgICBoaW50LnN0eWxlLnBhZGRpbmcgPSAnMTZweCc7XG4gICAgICAgIGhpbnQuc3R5bGUub3BhY2l0eSA9ICcwLjgnO1xuICAgICAgICBoaW50LnRleHRDb250ZW50ID0gJ1x1NEVDRVx1NjU4N1x1NEVGNlx1NzY4NFx1NTNGM1x1OTUyRVx1ODNEQ1x1NTM1NVx1NEUyRFx1OTAwOVx1NjJFOSBcdTIwMUNcdTc1MjggTGFDLkNvc3RTZXQgXHU2MjUzXHU1RjAwXHUyMDFEXHUzMDAyJztcbiAgICB9XG5cbiAgICBwcml2YXRlIGNsb3NlRXhpc3RpbmdTb3J0TWVudSgpIHtcbiAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubGFjLXNvcnQtbWVudScpIGFzIEhUTUxFbGVtZW50IHwgbnVsbDtcbiAgICAgICAgaWYgKGV4aXN0aW5nKSB7XG4gICAgICAgICAgICBjb25zdCBjbGVhbnVwID0gKGV4aXN0aW5nIGFzIGFueSkuX2NsZWFudXAgYXMgKCgpID0+IHZvaWQpIHwgdW5kZWZpbmVkO1xuICAgICAgICAgICAgaWYgKGNsZWFudXApIGNsZWFudXAoKTtcbiAgICAgICAgICAgIGV4aXN0aW5nLnJlbW92ZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG5cdHByaXZhdGUgc3ZnU2VhcmNoKCk6IFNWR1NWR0VsZW1lbnQge1xuXHRcdGNvbnN0IHN2ZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnc3ZnJyk7XG5cdFx0c3ZnLnNldEF0dHJpYnV0ZSgndmlld0JveCcsICcwIDAgMjQgMjQnKTtcblx0XHRzdmcuc2V0QXR0cmlidXRlKCdmaWxsJywgJ25vbmUnKTtcblx0XHRjb25zdCBjaXJjbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ2NpcmNsZScpO1xuXHRcdGNpcmNsZS5zZXRBdHRyaWJ1dGUoJ2N4JywgJzExJyk7XG5cdFx0Y2lyY2xlLnNldEF0dHJpYnV0ZSgnY3knLCAnMTEnKTtcblx0XHRjaXJjbGUuc2V0QXR0cmlidXRlKCdyJywgJzcnKTtcblx0XHRjaXJjbGUuc2V0QXR0cmlidXRlKCdzdHJva2UnLCAnY3VycmVudENvbG9yJyk7XG5cdFx0Y2lyY2xlLnNldEF0dHJpYnV0ZSgnc3Ryb2tlLXdpZHRoJywgJzInKTtcblx0XHRzdmcuYXBwZW5kQ2hpbGQoY2lyY2xlKTtcblx0XHRjb25zdCBsaW5lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdsaW5lJyk7XG5cdFx0bGluZS5zZXRBdHRyaWJ1dGUoJ3gxJywgJzIwJyk7XG5cdFx0bGluZS5zZXRBdHRyaWJ1dGUoJ3kxJywgJzIwJyk7XG5cdFx0bGluZS5zZXRBdHRyaWJ1dGUoJ3gyJywgJzE2LjY1Jyk7XG5cdFx0bGluZS5zZXRBdHRyaWJ1dGUoJ3kyJywgJzE2LjY1Jyk7XG5cdFx0bGluZS5zZXRBdHRyaWJ1dGUoJ3N0cm9rZScsICdjdXJyZW50Q29sb3InKTtcblx0XHRsaW5lLnNldEF0dHJpYnV0ZSgnc3Ryb2tlLXdpZHRoJywgJzInKTtcblx0XHRsaW5lLnNldEF0dHJpYnV0ZSgnc3Ryb2tlLWxpbmVjYXAnLCAncm91bmQnKTtcblx0XHRzdmcuYXBwZW5kQ2hpbGQobGluZSk7XG5cdFx0cmV0dXJuIHN2ZyBhcyBTVkdTVkdFbGVtZW50O1xuXHR9XG5cblx0cHJpdmF0ZSBzdmdQbHVzKCk6IFNWR1NWR0VsZW1lbnQge1xuXHRcdGNvbnN0IHN2ZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnc3ZnJyk7XG5cdFx0c3ZnLnNldEF0dHJpYnV0ZSgndmlld0JveCcsICcwIDAgMjQgMjQnKTtcblx0XHRzdmcuc2V0QXR0cmlidXRlKCdmaWxsJywgJ25vbmUnKTtcblx0XHRjb25zdCBwYXRoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdwYXRoJyk7XG5cdFx0cGF0aC5zZXRBdHRyaWJ1dGUoJ2QnLCAnTTEyIDV2MTRNNSAxMmgxNCcpO1xuXHRcdHBhdGguc2V0QXR0cmlidXRlKCdzdHJva2UnLCAnY3VycmVudENvbG9yJyk7XG5cdFx0cGF0aC5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS13aWR0aCcsICcyJyk7XG5cdFx0cGF0aC5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS1saW5lY2FwJywgJ3JvdW5kJyk7XG5cdFx0c3ZnLmFwcGVuZENoaWxkKHBhdGgpO1xuXHRcdHJldHVybiBzdmcgYXMgU1ZHU1ZHRWxlbWVudDtcblx0fVxuXG5cdHByaXZhdGUgc3ZnU29ydCgpOiBTVkdTVkdFbGVtZW50IHtcblx0XHRjb25zdCBzdmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3N2ZycpO1xuXHRcdHN2Zy5zZXRBdHRyaWJ1dGUoJ3ZpZXdCb3gnLCAnMCAwIDI0IDI0Jyk7XG5cdFx0c3ZnLnNldEF0dHJpYnV0ZSgnZmlsbCcsICdub25lJyk7XG5cdFx0Y29uc3QgcDEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3BhdGgnKTtcblx0XHRwMS5zZXRBdHRyaWJ1dGUoJ2QnLCAnTTggOWw0LTQgNCA0Jyk7XG5cdFx0cDEuc2V0QXR0cmlidXRlKCdzdHJva2UnLCAnY3VycmVudENvbG9yJyk7XG5cdFx0cDEuc2V0QXR0cmlidXRlKCdzdHJva2Utd2lkdGgnLCAnMicpO1xuXHRcdHAxLnNldEF0dHJpYnV0ZSgnc3Ryb2tlLWxpbmVjYXAnLCAncm91bmQnKTtcblx0XHRwMS5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS1saW5lam9pbicsICdyb3VuZCcpO1xuXHRcdHN2Zy5hcHBlbmRDaGlsZChwMSk7XG5cdFx0Y29uc3QgcDIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3BhdGgnKTtcblx0XHRwMi5zZXRBdHRyaWJ1dGUoJ2QnLCAnTTE2IDE1bC00IDQtNC00Jyk7XG5cdFx0cDIuc2V0QXR0cmlidXRlKCdzdHJva2UnLCAnY3VycmVudENvbG9yJyk7XG5cdFx0cDIuc2V0QXR0cmlidXRlKCdzdHJva2Utd2lkdGgnLCAnMicpO1xuXHRcdHAyLnNldEF0dHJpYnV0ZSgnc3Ryb2tlLWxpbmVjYXAnLCAncm91bmQnKTtcblx0XHRwMi5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS1saW5lam9pbicsICdyb3VuZCcpO1xuXHRcdHN2Zy5hcHBlbmRDaGlsZChwMik7XG5cdFx0cmV0dXJuIHN2ZyBhcyBTVkdTVkdFbGVtZW50O1xuXHR9XG5cblx0cHJpdmF0ZSBzdmdCYWNrKCk6IFNWR1NWR0VsZW1lbnQge1xuXHRcdGNvbnN0IHN2ZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnc3ZnJyk7XG5cdFx0c3ZnLnNldEF0dHJpYnV0ZSgndmlld0JveCcsICcwIDAgMjQgMjQnKTtcblx0XHRzdmcuc2V0QXR0cmlidXRlKCdmaWxsJywgJ25vbmUnKTtcblx0XHRjb25zdCBwYXRoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdwYXRoJyk7XG5cdFx0cGF0aC5zZXRBdHRyaWJ1dGUoJ2QnLCAnTTE1IDE4bC02LTYgNi02Jyk7XG5cdFx0cGF0aC5zZXRBdHRyaWJ1dGUoJ3N0cm9rZScsICdjdXJyZW50Q29sb3InKTtcblx0XHRwYXRoLnNldEF0dHJpYnV0ZSgnc3Ryb2tlLXdpZHRoJywgJzInKTtcblx0XHRwYXRoLnNldEF0dHJpYnV0ZSgnc3Ryb2tlLWxpbmVjYXAnLCAncm91bmQnKTtcblx0XHRwYXRoLnNldEF0dHJpYnV0ZSgnc3Ryb2tlLWxpbmVqb2luJywgJ3JvdW5kJyk7XG5cdFx0c3ZnLmFwcGVuZENoaWxkKHBhdGgpO1xuXHRcdHJldHVybiBzdmcgYXMgU1ZHU1ZHRWxlbWVudDtcblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyVG9wU3VtbWFyeShjb250YWluZXJFbDogSFRNTEVsZW1lbnQpIHtcblx0XHQvLyBcdThCQTFcdTdCOTdcdTdFREZcdThCQTFcdTY1NzBcdTYzNkVcblx0XHRjb25zdCBjYWxjRGF0ZSA9IHRoaXMuc2VsZWN0ZWREYXRlIHx8IG5ldyBEYXRlKCk7XG5cdFx0Y29uc3QgYWN0aXZlQXNzZXRzID0gdGhpcy5hc3NldHMuZmlsdGVyKGFzc2V0ID0+IGFzc2V0LmlzQWN0aXZlKGNhbGNEYXRlKSAmJiAhYXNzZXQuaGlkZGVuKTtcblx0XHRjb25zdCBmaWx0ZXJlZEFjdGl2ZUFzc2V0cyA9IHRoaXMuYXBwbHlUYWdGaWx0ZXIoYWN0aXZlQXNzZXRzKTtcblx0XHRjb25zdCB0b3RhbENvc3QgPSBmaWx0ZXJlZEFjdGl2ZUFzc2V0cy5yZWR1Y2UoKHN1bSwgYXNzZXQpID0+IHN1bSArIGFzc2V0LnByaWNlLCAwKTtcblx0XHRjb25zdCB0b3RhbFJlY3ljbGUgPSBmaWx0ZXJlZEFjdGl2ZUFzc2V0cy5yZWR1Y2UoKHN1bSwgYXNzZXQpID0+IHN1bSArIGFzc2V0LnJlY3ljbGVQcmljZSwgMCk7XG5cdFx0Y29uc3QgdG90YWxEYWlseUNvc3QgPSBmaWx0ZXJlZEFjdGl2ZUFzc2V0cy5yZWR1Y2UoKHN1bSwgYXNzZXQpID0+IHN1bSArIGFzc2V0LmdldERhaWx5Q29zdChjYWxjRGF0ZSksIDApO1xuXHRcdFxuXHRcdC8vIFx1ODNCN1x1NTNENlx1NjI0MFx1NjcwOVx1NjgwN1x1N0I3RVx1RkYwOFx1NEVDRVx1NTE2OFx1OTBFOFx1OEQ0NFx1NEVBN1x1NjUzNlx1OTZDNlx1RkYwOVx1RkYwQ1x1NUU3Nlx1OEZEQlx1ODg0Q1x1NTZGQVx1NUI5QVx1OTg3QVx1NUU4Rlx1NjM5Mlx1NUU4Rlx1RkYwOFx1NEUyRFx1NjU4N1x1MzAwMVx1NUZGRFx1NzU2NVx1NTkyN1x1NUMwRlx1NTE5OVx1MzAwMVx1NjU3MFx1NTAzQ1x1OTg3QVx1NUU4Rlx1RkYwOVxuXHRcdGNvbnN0IGFsbFRhZ3MgPSBuZXcgU2V0PHN0cmluZz4oKTtcblx0XHR0aGlzLmFzc2V0cy5mb3JFYWNoKGFzc2V0ID0+IHtcblx0XHRcdChhc3NldC50YWdzIHx8IFtdKS5mb3JFYWNoKHRhZyA9PiBhbGxUYWdzLmFkZCh0YWcpKTtcblx0XHR9KTtcblx0XHRjb25zdCBjb2xsYXRvciA9IG5ldyBJbnRsLkNvbGxhdG9yKCd6aCcsIHsgc2Vuc2l0aXZpdHk6ICdiYXNlJywgbnVtZXJpYzogdHJ1ZSB9KTtcblx0XHRjb25zdCB0YWdzQXJyYXkgPSBBcnJheS5mcm9tKGFsbFRhZ3MpLnNvcnQoKGEsIGIpID0+IGNvbGxhdG9yLmNvbXBhcmUoYSwgYikpO1xuXG5cdFx0Ly8gXHU4QkExXHU3Qjk3XHU1RTc0XHU0RUZEXHU4MzAzXHU1NkY0XHVGRjFBXHU0RUNFXHU2NzAwXHU2NUU5XHU4RDQ0XHU0RUE3XHU1RTc0XHU0RUZEXHU1MjMwXHU2NzJBXHU2NzY1N1x1NUU3NFxuXHRcdGNvbnN0IGN1cnJlbnRZZWFyID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpO1xuXHRcdGNvbnN0IG1heFllYXIgPSBjdXJyZW50WWVhciArIDc7IC8vIFx1NjcyQVx1Njc2NTdcdTVFNzRcblx0XHRcblx0XHRsZXQgbWluWWVhciA9IGN1cnJlbnRZZWFyOyAvLyBcdTlFRDhcdThCQTRcdTY3MDBcdTVDMEZcdTVFNzRcdTRFRkRcdTRFM0FcdTVGNTNcdTUyNERcdTVFNzRcdTRFRkRcblx0XHRpZiAodGhpcy5hc3NldHMubGVuZ3RoID4gMCkge1xuXHRcdFx0Ly8gXHU2MjdFXHU1MjMwXHU2MjQwXHU2NzA5XHU4RDQ0XHU0RUE3XHU0RTJEXHU3Njg0XHU2NzAwXHU2NUU5XHU1RTc0XHU0RUZEXG5cdFx0XHRjb25zdCBlYXJsaWVzdFllYXIgPSBNYXRoLm1pbiguLi50aGlzLmFzc2V0cy5tYXAoYXNzZXQgPT4gYXNzZXQuYWN0aXZlRnJvbS5nZXRGdWxsWWVhcigpKSk7XG5cdFx0XHRtaW5ZZWFyID0gZWFybGllc3RZZWFyO1xuXHRcdH1cblxuXHRcdC8vIFx1OEJBMVx1N0I5N1x1NTZGRVx1ODg2OFx1NjU3MFx1NjM2RSAtIFx1NEY3Rlx1NzUyOFx1NEUyNFx1NkI2NVx1NkUzMlx1NjdEM1x1N0I1Nlx1NzU2NVx1RkYwOFx1NTdGQVx1NEU4RVx1N0I1Qlx1OTAwOVx1NTQwRVx1NzY4NFx1OEQ0NFx1NEVBN1x1RkYwOVxuXHRcdGNvbnN0IHRyZW5kUG9pbnRzID0gdGhpcy5jYWxjVHJlbmRQb2ludHMoZmlsdGVyZWRBY3RpdmVBc3NldHMsIDMwKTtcblxuXHRcdGNvbnNvbGUubG9nKCdcdTZFMzJcdTY3RDNcdTk4NzZcdTkwRThcdTdFREZcdThCQTFcdTUzM0FcdTU3REY6JywgeyBcblx0XHRcdGFjdGl2ZUFzc2V0czogYWN0aXZlQXNzZXRzLmxlbmd0aCwgXG5cdFx0XHR0b3RhbENvc3QsIFxuXHRcdFx0dG90YWxSZWN5Y2xlLCBcblx0XHRcdHRvdGFsRGFpbHlDb3N0LCBcblx0XHRcdHRhZ3NBcnJheSxcblx0XHRcdHllYXJSYW5nZTogeyBtaW5ZZWFyLCBtYXhZZWFyIH1cblx0XHR9KTtcblxuXHRcdC8vIFx1NTIxQlx1NUVGQVRvcFN1bW1hcnlcdTdFQzRcdTRFRjZcblx0XHRjb25zdCB0b3BTdW1tYXJ5RWwgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoKTtcblx0XHRjb25zdCB0b3BTdW1tYXJ5UHJvcHM6IFRvcFN1bW1hcnlQcm9wcyA9IHtcblx0XHRcdHRvdGFsRGFpbHlDb3N0LFxuXHRcdFx0dG90YWxDb3N0LFxuXHRcdFx0dG90YWxSZWN5Y2xlLFxuXHRcdFx0dGFnczogdGFnc0FycmF5LFxuXHRcdFx0c2VsZWN0ZWRUYWdzOiB0aGlzLnNlbGVjdGVkVGFncyxcblx0XHRcdG9uVGFnQ2xpY2s6ICh0YWc6IHN0cmluZyB8IHN0cmluZ1tdKSA9PiB7XG5cdFx0XHRcdC8vIFx1NjUyRlx1NjMwMVx1NTM1NVx1NEUyQVx1NjgwN1x1N0I3RVx1NTIwN1x1NjM2Mlx1NjIxNlx1NjI3OVx1OTFDRlx1OEJCRVx1N0Y2RVxuXHRcdFx0XHRpZiAoQXJyYXkuaXNBcnJheSh0YWcpKSB7XG5cdFx0XHRcdFx0dGhpcy5zZWxlY3RlZFRhZ3MgPSBbLi4ubmV3IFNldCh0YWcpXTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRpZiAodGhpcy5zZWxlY3RlZFRhZ3MuaW5jbHVkZXModGFnKSkge1xuXHRcdFx0XHRcdFx0dGhpcy5zZWxlY3RlZFRhZ3MgPSB0aGlzLnNlbGVjdGVkVGFncy5maWx0ZXIodCA9PiB0ICE9PSB0YWcpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHR0aGlzLnNlbGVjdGVkVGFncyA9IFsuLi50aGlzLnNlbGVjdGVkVGFncywgdGFnXTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0Ly8gXHU5MUNEXHU2NUIwXHU2RTMyXHU2N0QzXHU5ODc1XHU5NzYyXHU0RUU1XHU1M0NEXHU2NjIwXHU3QjVCXHU5MDA5XG5cdFx0XHRcdHRoaXMucmVuZGVyQXNzZXRzKCk7XG5cdFx0XHR9LFxuXHRcdFx0dHJlbmRQb2ludHMsXG5cdFx0XHRzZWxlY3RlZERhdGU6IHRoaXMuc2VsZWN0ZWREYXRlLFxuXHRcdFx0b25DaGFydFNlbGVjdDogKHg6IG51bWJlcikgPT4ge1xuXHRcdFx0XHRjb25zb2xlLmxvZygnXHU1NkZFXHU4ODY4XHU5MDA5XHU2MkU5OicsIHgpO1xuXHRcdFx0XHQvLyBcdTU0MEVcdTdFRURcdTUzRUZcdTRFRTVcdTZERkJcdTUyQTBcdTU2RkVcdTg4NjhcdTRFQTRcdTRFOTJcdTUyOUZcdTgwRkRcblx0XHRcdH0sXG5cdFx0XHRvbkNoYXJ0V2lkdGg6ICh3OiBudW1iZXIpID0+IHtcblx0XHRcdFx0Y29uc29sZS5sb2coJ1x1NTZGRVx1ODg2OFx1NUJCRFx1NUVBNjonLCB3KTtcblx0XHRcdH0sXG5cdFx0XHRvbkRhdGVQaWNrOiAoZGF0ZVN0cjogc3RyaW5nKSA9PiB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKCdcdTY1RTVcdTY3MUZcdTkwMDlcdTYyRTk6JywgZGF0ZVN0cik7XG5cdFx0XHRcdC8vIFx1NTkwNFx1NzQwNlx1NjVFNVx1NjcxRlx1OTAwOVx1NjJFOVx1OTAzQlx1OEY5MVx1RkYxQVx1NEVDNVx1NjZGNFx1NjVCMFx1N0FENlx1N0VCRlx1NEUwRVx1NjU3MFx1NUI1N1x1RkYwQ1x1NEUwRFx1OTFDRFx1N0I5N1x1NjI5OFx1N0VCRlxuXHRcdFx0XHRjb25zdCBzZWxlY3RlZERhdGUgPSBuZXcgRGF0ZShkYXRlU3RyKTtcblx0XHRcdFx0dGhpcy5zZWxlY3RlZERhdGUgPSBzZWxlY3RlZERhdGU7IC8vIFx1NjZGNFx1NjVCMFx1NzJCNlx1NjAwMVxuXHRcdFx0XHRpZiAodGhpcy50b3BTdW1tYXJ5Q29tcG9uZW50KSB7XG5cdFx0XHRcdFx0dGhpcy50b3BTdW1tYXJ5Q29tcG9uZW50LnVwZGF0ZVNlbGVjdGlvbihudWxsLCBzZWxlY3RlZERhdGUpO1xuXHRcdFx0XHRcdC8vIFx1NTQwQ1x1NkI2NVx1NjZGNFx1NjVCMFx1OTg3Nlx1OTBFOFx1NjU3MFx1NUI1N1xuXHRcdFx0XHRcdGNvbnN0IGNhbGNEYXRlID0gc2VsZWN0ZWREYXRlO1xuXHRcdFx0XHRcdGNvbnN0IGFjdGl2ZUFzc2V0cyA9IHRoaXMuYXNzZXRzLmZpbHRlcihhc3NldCA9PiBhc3NldC5pc0FjdGl2ZShjYWxjRGF0ZSkgJiYgIWFzc2V0LmhpZGRlbik7XG5cdFx0XHRcdFx0Y29uc3QgZmlsdGVyZWRBY3RpdmVBc3NldHMgPSB0aGlzLmFwcGx5VGFnRmlsdGVyKGFjdGl2ZUFzc2V0cyk7XG5cdFx0XHRcdFx0Y29uc3QgdG90YWxDb3N0ID0gZmlsdGVyZWRBY3RpdmVBc3NldHMucmVkdWNlKChzdW0sIGFzc2V0KSA9PiBzdW0gKyBhc3NldC5wcmljZSwgMCk7XG5cdFx0XHRcdFx0Y29uc3QgdG90YWxSZWN5Y2xlID0gZmlsdGVyZWRBY3RpdmVBc3NldHMucmVkdWNlKChzdW0sIGFzc2V0KSA9PiBzdW0gKyBhc3NldC5yZWN5Y2xlUHJpY2UsIDApO1xuXHRcdFx0XHRcdGNvbnN0IHRvdGFsRGFpbHlDb3N0ID0gZmlsdGVyZWRBY3RpdmVBc3NldHMucmVkdWNlKChzdW0sIGFzc2V0KSA9PiBzdW0gKyBhc3NldC5nZXREYWlseUNvc3QoY2FsY0RhdGUpLCAwKTtcblx0XHRcdFx0XHR0aGlzLnRvcFN1bW1hcnlDb21wb25lbnQudXBkYXRlTnVtYmVycyh0b3RhbERhaWx5Q29zdCwgdG90YWxDb3N0LCB0b3RhbFJlY3ljbGUpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdC8vIFx1NEVDNVx1NTIzN1x1NjVCMFx1NTIxN1x1ODg2OFxuXHRcdFx0XHRjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuXHRcdFx0XHRjb25zdCBsaXN0RWwgPSBjb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKCcuYXNzZXRzLWNvbnRhaW5lcicpO1xuXHRcdFx0XHRpZiAobGlzdEVsKSB7XG5cdFx0XHRcdFx0Ly8gXHU5MUNEXHU2NUIwXHU2RTMyXHU2N0QzXHU2NTc0XHU0RTJBXHU4OUM2XHU1NkZFXHU0RjFBXHU5MUNEXHU1RUZBXHU1NkZFXHU4ODY4XHVGRjBDXHU4RkQ5XHU5MUNDXHU1M0VBXHU5MUNEXHU1RUZBXHU1MjE3XHU4ODY4XHU1MzNBXHU1N0RGXG5cdFx0XHRcdFx0KGxpc3RFbCBhcyBIVE1MRWxlbWVudCkucmVtb3ZlKCk7XG5cdFx0XHRcdFx0Y29uc3QgbmV3TGlzdCA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdignYXNzZXRzLWNvbnRhaW5lcicpO1xuXHRcdFx0XHRcdHRoaXMucmVuZGVyQXNzZXRDYXJkcyhuZXdMaXN0KTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyBcdTgyRTVcdTk5OTZcdTZCMjFcdThGREJcdTUxNjVcdUZGMENcdTZCNjNcdTVFMzhcdTY1NzRcdTRGNTNcdTZFMzJcdTY3RDNcblx0XHRcdFx0XHR0aGlzLnJlbmRlckFzc2V0cygpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0bWluWWVhcixcblx0XHRcdG1heFllYXJcblx0XHR9O1xuXG5cdFx0dGhpcy50b3BTdW1tYXJ5Q29tcG9uZW50ID0gbmV3IFRvcFN1bW1hcnkodG9wU3VtbWFyeUVsLCB0b3BTdW1tYXJ5UHJvcHMpO1xuXHRcdHRoaXMudG9wU3VtbWFyeUNvbXBvbmVudC5yZW5kZXIoKTtcblxuXHRcdC8vIFx1NUYwMlx1NkI2NVx1N0VDNlx1NTMxNlx1NTZGRVx1ODg2OFx1RkYwOFx1NTdGQVx1NEU4RVx1NUY1M1x1NTI0RFx1N0I1Qlx1OTAwOVx1NTQwRVx1NzY4NFx1OEQ0NFx1NEVBN1x1RkYwOVxuXHRcdHRoaXMucmVuZGVyQ2hhcnRXaXRoUHJvZ3Jlc3NpdmVSZWZpbmVtZW50KGZpbHRlcmVkQWN0aXZlQXNzZXRzKTtcblx0XHRcblx0XHRjb25zb2xlLmxvZygnXHU5ODc2XHU5MEU4XHU3RURGXHU4QkExXHU1MzNBXHU1N0RGXHU1REYyXHU1MjFCXHU1RUZBOicsIHRvcFN1bW1hcnlFbCk7XG5cdH1cblxuXHRwcml2YXRlIGdldEN1cnJlbmN5U3ltYm9sKCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIHQoJ2N1cnJlbmN5LnN5bWJvbCcpO1xuXHR9XG5cblx0Ly8gXHU2RTEwXHU4RkRCXHU1RjBGXHU3RUM2XHU1MzE2XHU2RTMyXHU2N0QzXHVGRjA4XHU1M0MyXHU4MDAzY29zdHNldGFwcFx1NUI5RVx1NzNCMFx1RkYwOVxuXHRwcml2YXRlIHJlbmRlckNoYXJ0V2l0aFByb2dyZXNzaXZlUmVmaW5lbWVudChhc3NldHM6IEFzc2V0W10pIHtcblx0XHRpZiAoYXNzZXRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXHRcdFxuXHRcdC8vIFx1OEJBMVx1N0I5N1x1NjI0MFx1NjcwOVx1OEQ0NFx1NEVBN1x1NzY4NCBhY3RpdmVfdG8gXHU2NzAwXHU1OTI3XHU1MDNDXG5cdFx0bGV0IG1heEFjdGl2ZVRvID0gMDtcblx0XHRhc3NldHMuZm9yRWFjaChhID0+IHtcblx0XHRcdGNvbnN0IHRvID0gYS5hY3RpdmVUbztcblx0XHRcdGlmICh0bykge1xuXHRcdFx0XHRjb25zdCB0ID0gdG8uZ2V0VGltZSgpO1xuXHRcdFx0XHRpZiAodCAmJiB0ID4gbWF4QWN0aXZlVG8pIG1heEFjdGl2ZVRvID0gdDtcblx0XHRcdH1cblx0XHR9KTtcblx0XHRjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuXHRcdGNvbnN0IG1heERhdGUgPSBtYXhBY3RpdmVUbyAmJiBtYXhBY3RpdmVUbyA+IG5vdy5nZXRUaW1lKCkgPyBuZXcgRGF0ZShtYXhBY3RpdmVUbykgOiBub3c7XG5cdFx0XG5cdFx0Ly8gXHU3QjJDXHU0RTAwXHU2QjY1XHVGRjFBXHU1MjFEXHU1OUNCXHU3MEI5XHU1RTc2XHU4ODRDXG5cdFx0Y29uc3QgaW5pdGlhbFBvaW50cyA9IHRoaXMuY2FsY1RyZW5kUG9pbnRzKGFzc2V0cywgMzAsIHVuZGVmaW5lZCwgbWF4RGF0ZSk7XG5cdFx0aWYgKHRoaXMudG9wU3VtbWFyeUNvbXBvbmVudCkge1xuXHRcdFx0dGhpcy50b3BTdW1tYXJ5Q29tcG9uZW50LnVwZGF0ZUNoYXJ0KGluaXRpYWxQb2ludHMpO1xuXHRcdH1cblx0XHRcblx0XHQvLyBcdTdCMkNcdTRFOENcdTZCNjVcdUZGMUFcdTVGMDJcdTZCNjVcdTdFQzZcdTUzMTZcdTVFNzZcdTg4NEMgLSAzMCozMFx1NEUyQVx1NzBCOVxuXHRcdHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xuXHRcdFx0Y29uc3Qgc2VnUHJvbWlzZXM6IFByb21pc2U8eyBkYXRlOiBEYXRlOyB2YWx1ZTogbnVtYmVyOyB9W10+W10gPSBbXTtcblx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgaW5pdGlhbFBvaW50cy5sZW5ndGggLSAxOyBpKyspIHtcblx0XHRcdFx0c2VnUHJvbWlzZXMucHVzaChcblx0XHRcdFx0XHRQcm9taXNlLnJlc29sdmUodGhpcy5jYWxjVHJlbmRQb2ludHMoYXNzZXRzLCAzMCwgaW5pdGlhbFBvaW50c1tpXS5kYXRlLCBpbml0aWFsUG9pbnRzW2kgKyAxXS5kYXRlKSkudGhlbihzZWdQb2ludHMgPT4ge1xuXHRcdFx0XHRcdFx0aWYgKGkgPiAwKSByZXR1cm4gc2VnUG9pbnRzLnNsaWNlKDEpOyAvLyBcdTkwN0ZcdTUxNERcdTkxQ0RcdTU5MERcdTcwQjlcblx0XHRcdFx0XHRcdHJldHVybiBzZWdQb2ludHM7XG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0KTtcblx0XHRcdH1cblx0XHRcdGNvbnN0IHNlZ1Jlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbChzZWdQcm9taXNlcyk7XG5cdFx0XHRjb25zdCBmaW5lUG9pbnRzID0gc2VnUmVzdWx0cy5mbGF0KCk7XG5cdFx0XHRpZiAodGhpcy50b3BTdW1tYXJ5Q29tcG9uZW50KSB7XG5cdFx0XHRcdHRoaXMudG9wU3VtbWFyeUNvbXBvbmVudC51cGRhdGVDaGFydChmaW5lUG9pbnRzKTtcblx0XHRcdH1cblx0XHR9LCA1MDApO1xuXHR9XG5cblx0Ly8gXHU1QzA2XHU2ODA3XHU3QjdFXHU3QjVCXHU5MDA5XHU1RTk0XHU3NTI4XHU1MjMwXHU3RUQ5XHU1QjlBXHU4RDQ0XHU0RUE3XHU5NkM2XG5cdHByaXZhdGUgYXBwbHlUYWdGaWx0ZXIoaW5wdXQ6IEFzc2V0W10pOiBBc3NldFtdIHtcblx0XHRpZiAoIXRoaXMuc2VsZWN0ZWRUYWdzIHx8IHRoaXMuc2VsZWN0ZWRUYWdzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIGlucHV0O1xuXHRcdHJldHVybiBpbnB1dC5maWx0ZXIoYSA9PiBhLnRhZ3M/LnNvbWUodCA9PiB0aGlzLnNlbGVjdGVkVGFncy5pbmNsdWRlcyh0KSkpO1xuXHR9XG5cblx0cHJpdmF0ZSBjYWxjVHJlbmRQb2ludHMoYXNzZXRzOiBBc3NldFtdLCBjb3VudDogbnVtYmVyLCBmcm9tRGF0ZT86IERhdGUsIHRvRGF0ZT86IERhdGUpOiB7IGRhdGU6IERhdGUsIHZhbHVlOiBudW1iZXIgfVtdIHtcblx0XHRpZiAoYXNzZXRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIFtdO1xuXHRcdFxuXHRcdGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG5cdFx0Y29uc3QgbWluRGF0ZSA9IGZyb21EYXRlIHx8IG5ldyBEYXRlKE1hdGgubWluKC4uLmFzc2V0cy5tYXAoYSA9PiBhLmFjdGl2ZUZyb20uZ2V0VGltZSgpKSkpO1xuXHRcdGNvbnN0IG1heEFjdGl2ZVRvID0gTWF0aC5tYXgoLi4uYXNzZXRzLm1hcChhID0+IHtcblx0XHRcdGNvbnN0IHRvID0gYS5hY3RpdmVUbztcblx0XHRcdGlmICh0bykge1xuXHRcdFx0XHRjb25zdCB0ID0gdG8uZ2V0VGltZSgpO1xuXHRcdFx0XHRpZiAoIWlzTmFOKHQpKSByZXR1cm4gdDtcblx0XHRcdH1cblx0XHRcdHJldHVybiBub3cuZ2V0VGltZSgpO1xuXHRcdH0pKTtcblx0XHRjb25zdCBtYXhEYXRlID0gdG9EYXRlIHx8IG5ldyBEYXRlKG1heEFjdGl2ZVRvKTtcblx0XHRcblx0XHRjb25zdCBwb2ludHM6IHsgZGF0ZTogRGF0ZSwgdmFsdWU6IG51bWJlciB9W10gPSBbXTtcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyBpKyspIHtcblx0XHRcdGNvbnN0IHQgPSBtaW5EYXRlLmdldFRpbWUoKSArIChtYXhEYXRlLmdldFRpbWUoKSAtIG1pbkRhdGUuZ2V0VGltZSgpKSAqIGkgLyAoY291bnQgLSAxKTtcblx0XHRcdGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSh0KTtcblx0XHRcdGxldCB0b3RhbENvc3QgPSAwO1xuXHRcdFx0XG5cdFx0XHQvLyBcdThCQTFcdTdCOTdcdTU3MjhcdThCRTVcdTY1RjZcdTk1RjRcdTcwQjlcdTZEM0JcdThEQzNcdTc2ODRcdThENDRcdTRFQTdcdTc2ODRcdTY1RTVcdTU3NDdcdTYyMTBcdTY3MkNcdTYwM0JcdTU0OENcblx0XHRcdGFzc2V0cy5mb3JFYWNoKGEgPT4ge1xuXHRcdFx0XHRjb25zdCBjb3N0ID0gdGhpcy5jYWxjRGFpbHlDb3N0KGEucHJpY2UsIGEucmVjeWNsZVByaWNlLCBhLmFjdGl2ZUZyb20sIGEuYWN0aXZlVG8sIGRhdGUpO1xuXHRcdFx0XHRpZiAoaXNGaW5pdGUoY29zdCkpIHRvdGFsQ29zdCArPSBjb3N0O1xuXHRcdFx0fSk7XG5cdFx0XHRcblx0XHRcdHBvaW50cy5wdXNoKHsgZGF0ZSwgdmFsdWU6IHRvdGFsQ29zdCB9KTtcblx0XHR9XG5cdFx0cmV0dXJuIHBvaW50cztcblx0fVxuXG5cdC8vIFx1OEJBMVx1N0I5N1x1NjVFNVx1NTc0N1x1NjIxMFx1NjcyQ1x1RkYwOFx1NTNDMlx1ODAwM2Nvc3RzZXRhcHBcdTdCOTdcdTZDRDVcdUZGMDlcblx0cHJpdmF0ZSBjYWxjRGFpbHlDb3N0KHByaWNlOiBudW1iZXIsIHJlY3ljbGU6IG51bWJlciwgZnJvbTogRGF0ZSwgdG86IERhdGUgfCBudWxsIHwgdW5kZWZpbmVkLCBub3c6IERhdGUpOiBudW1iZXIge1xuXHRcdGlmICghZnJvbSkgcmV0dXJuIDA7XG5cdFx0Y29uc3QgZGF5cyA9IE1hdGguZmxvb3IoKG5vdy5nZXRUaW1lKCkgLSBmcm9tLmdldFRpbWUoKSkgLyA4NjQwMDAwMCkgKyAxO1xuXHRcdGlmICghdG8gfHwgdG8gPiBub3cpIHtcblx0XHRcdHJlY3ljbGUgPSAwO1xuXHRcdH1cblx0XHRpZiAoIWlzRmluaXRlKGRheXMpIHx8IGRheXMgPD0gMCkgcmV0dXJuIDA7XG5cdFx0Y29uc3QgcmVzdWx0ID0gKE51bWJlcihwcmljZSkgLSBOdW1iZXIocmVjeWNsZSB8fCAwKSkgLyBkYXlzO1xuXHRcdHJldHVybiBpc0Zpbml0ZShyZXN1bHQpID8gcmVzdWx0IDogMDtcblx0fVxuXG59XG4iLCAiZXhwb3J0IGludGVyZmFjZSBUYWdQYW5lbFByb3BzIHtcclxuXHR0YWdzOiBzdHJpbmdbXTtcclxuXHRzZWxlY3RlZFRhZ3M6IHN0cmluZ1tdO1xyXG5cdG9uVGFnQ2xpY2s6ICh0YWc6IHN0cmluZyB8IHN0cmluZ1tdKSA9PiB2b2lkO1xyXG5cdG1heEhlaWdodD86IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFRhZ1BhbmVsIHtcclxuXHRwcml2YXRlIGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudDtcclxuXHRwcml2YXRlIHByb3BzOiBUYWdQYW5lbFByb3BzO1xyXG5cdHByaXZhdGUgcGFuZWxWaXNpYmxlOiBib29sZWFuID0gZmFsc2U7XHJcblx0cHJpdmF0ZSBwYW5lbFNlbGVjdGVkOiBzdHJpbmdbXSA9IFtdO1xyXG5cdHByaXZhdGUgc2VhcmNoS2V5d29yZDogc3RyaW5nID0gJyc7XHJcblx0cHJpdmF0ZSBtYXNrRWw/OiBIVE1MRWxlbWVudDtcclxuXHRwcml2YXRlIHBhbmVsRWw/OiBIVE1MRWxlbWVudDtcclxuXHRwcml2YXRlIGxhYmVsc0VsPzogSFRNTEVsZW1lbnQ7XHJcblx0cHJpdmF0ZSBzZWFyY2hFbD86IEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgICAvLyBpMThuIFx1NUVGNlx1NTQwRVx1NTJBMFx1OEY3RFx1RkYwQ1x1OTA3Rlx1NTE0RFx1Nzg2Q1x1NEY5RFx1OEQ1Nlx1RkYxQVx1NEY3Rlx1NzUyOFx1NTJBOFx1NjAwMVx1NUJGQ1x1NTE2NVxyXG5cclxuXHRjb25zdHJ1Y3Rvcihjb250YWluZXJFbDogSFRNTEVsZW1lbnQsIHByb3BzOiBUYWdQYW5lbFByb3BzKSB7XHJcblx0XHR0aGlzLmNvbnRhaW5lckVsID0gY29udGFpbmVyRWw7XHJcblx0XHR0aGlzLnByb3BzID0gcHJvcHM7XHJcblx0XHR0aGlzLnBhbmVsU2VsZWN0ZWQgPSBbLi4ucHJvcHMuc2VsZWN0ZWRUYWdzXTtcclxuXHR9XHJcblxyXG5cdHJlbmRlcigpOiB2b2lkIHtcclxuXHRcdHRoaXMuY29udGFpbmVyRWwuZW1wdHkoKTtcclxuXHRcdHRoaXMuY29udGFpbmVyRWwuYWRkQ2xhc3MoJ3RvcC1zdW1tYXJ5LWxhYmVscycpO1xyXG5cdFx0XHJcblx0XHQvLyBcdThCQkVcdTdGNkVcdTY3MDBcdTU5MjdcdTlBRDhcdTVFQTZcclxuXHRcdGlmICh0aGlzLnByb3BzLm1heEhlaWdodCkge1xyXG5cdFx0XHR0aGlzLmNvbnRhaW5lckVsLnN0eWxlLm1heEhlaWdodCA9IHRoaXMucHJvcHMubWF4SGVpZ2h0O1xyXG5cdFx0XHR0aGlzLmNvbnRhaW5lckVsLnN0eWxlLm92ZXJmbG93WSA9IHRoaXMucHJvcHMubWF4SGVpZ2h0ICE9PSAnYXV0bycgPyAnYXV0bycgOiAndmlzaWJsZSc7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gXHU2RTMyXHU2N0QzXHU2ODA3XHU3QjdFXHU1MjE3XHU4ODY4XHJcblx0XHR0aGlzLnJlbmRlclRhZ0xpc3QoKTtcclxuXHRcdFxyXG5cdFx0Ly8gXHU2RTMyXHU2N0QzXHU5MDA5XHU2MkU5XHU5NzYyXHU2NzdGXHVGRjA4XHU1OTgyXHU2NzlDXHU1M0VGXHU4OUMxXHVGRjA5XHJcblx0XHRpZiAodGhpcy5wYW5lbFZpc2libGUpIHtcclxuXHRcdFx0dGhpcy5yZW5kZXJTZWxlY3Rpb25QYW5lbCgpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSByZW5kZXJUYWdMaXN0KCk6IHZvaWQge1xyXG5cdFx0dGhpcy5wcm9wcy50YWdzLmZvckVhY2godGFnID0+IHtcclxuXHRcdFx0Y29uc3QgbGFiZWxFbCA9IHRoaXMuY29udGFpbmVyRWwuY3JlYXRlU3BhbigndG9wLXN1bW1hcnktbGFiZWwnKTtcclxuXHRcdFx0bGFiZWxFbC50ZXh0Q29udGVudCA9IHRhZztcclxuXHRcdFx0XHJcblx0XHRcdGlmICh0aGlzLnByb3BzLnNlbGVjdGVkVGFncy5pbmNsdWRlcyh0YWcpKSB7XHJcblx0XHRcdFx0bGFiZWxFbC5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0bGFiZWxFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHR0aGlzLnByb3BzLm9uVGFnQ2xpY2sodGFnKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBcdTZERkJcdTUyQTBcdTcwQjlcdTUxRkJcdTRFOEJcdTRFRjZcdTY3NjVcdTY2M0VcdTc5M0FcdTkwMDlcdTYyRTlcdTk3NjJcdTY3N0ZcclxuXHRcdHRoaXMuY29udGFpbmVyRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0XHRcdHRoaXMuc2hvd1NlbGVjdGlvblBhbmVsKCk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgc2hvd1NlbGVjdGlvblBhbmVsKCk6IHZvaWQge1xyXG5cdFx0dGhpcy5wYW5lbFZpc2libGUgPSB0cnVlO1xyXG5cdFx0dGhpcy5wYW5lbFNlbGVjdGVkID0gWy4uLnRoaXMucHJvcHMuc2VsZWN0ZWRUYWdzXTtcclxuXHRcdHRoaXMucmVuZGVyKCk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGhpZGVTZWxlY3Rpb25QYW5lbCgpOiB2b2lkIHtcclxuXHRcdHRoaXMucGFuZWxWaXNpYmxlID0gZmFsc2U7XHJcblx0XHRpZiAodGhpcy5tYXNrRWwgJiYgdGhpcy5tYXNrRWwucGFyZW50RWxlbWVudCkge1xyXG5cdFx0XHR0aGlzLm1hc2tFbC5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKHRoaXMubWFza0VsKTtcclxuXHRcdH1cclxuXHRcdHRoaXMubWFza0VsID0gdW5kZWZpbmVkO1xyXG5cdFx0dGhpcy5wYW5lbEVsID0gdW5kZWZpbmVkO1xyXG5cdFx0dGhpcy5sYWJlbHNFbCA9IHVuZGVmaW5lZDtcclxuXHRcdHRoaXMuc2VhcmNoRWwgPSB1bmRlZmluZWQ7XHJcblx0XHR0aGlzLnJlbmRlcigpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSByZW5kZXJTZWxlY3Rpb25QYW5lbCgpOiB2b2lkIHtcclxuXHRcdC8vIFx1NTkwRFx1NzUyOFx1OTA2RVx1N0Y2OVx1NUM0Mlx1NEUwRVx1OTc2Mlx1Njc3Rlx1RkYwQ1x1OTA3Rlx1NTE0RFx1OTFDRFx1NUVGQVx1NUJGQ1x1ODFGNFx1NkVEQVx1NTJBOFx1NEUyMlx1NTkzMVxyXG5cdFx0aWYgKCF0aGlzLm1hc2tFbCkge1xyXG5cdFx0XHR0aGlzLm1hc2tFbCA9IHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRGl2KCd0b3Atc3VtbWFyeS1wYW5lbC1tYXNrJyk7XHJcblx0XHRcdHRoaXMubWFza0VsLnN0eWxlLnpJbmRleCA9ICc5OTk5JztcclxuXHRcdFx0dGhpcy5tYXNrRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0XHRcdFx0dGhpcy5jb25maXJtU2VsZWN0aW9uKCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICghdGhpcy5wYW5lbEVsKSB7XHJcblx0XHRcdHRoaXMucGFuZWxFbCA9IHRoaXMubWFza0VsLmNyZWF0ZURpdigndG9wLXN1bW1hcnktcGFuZWwnKTtcclxuXHRcdFx0dGhpcy5wYW5lbEVsLnN0eWxlLnpJbmRleCA9ICcxMDAwMCc7XHJcblx0XHRcdHRoaXMucGFuZWxFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gXHU2NDFDXHU3RDIyXHU2ODQ2XHVGRjFBXHU1MjFCXHU1RUZBXHU2MjE2XHU1OTBEXHU3NTI4XHVGRjBDXHU1RTc2XHU3RUQxXHU1QjlBXHU4RjkzXHU1MTY1XHJcblx0XHRpZiAoIXRoaXMuc2VhcmNoRWwpIHtcclxuXHRcdFx0dGhpcy5zZWFyY2hFbCA9IHRoaXMucGFuZWxFbC5jcmVhdGVFbCgnaW5wdXQnLCB7XHJcblx0XHRcdFx0Y2xzOiAndG9wLXN1bW1hcnktcGFuZWwtc2VhcmNoJyxcclxuXHRcdFx0XHRwbGFjZWhvbGRlcjogKHJlcXVpcmUoJy4uL2kxOG4nKSBhcyBhbnkpPy50Py4oJ3RhZ3Muc2VhcmNoLnBsYWNlaG9sZGVyJykgfHwgJ1x1NjQxQ1x1N0QyMlx1NjgwN1x1N0I3RScsXHJcblx0XHRcdFx0dHlwZTogJ3RleHQnXHJcblx0XHRcdH0pIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcblx0XHRcdHRoaXMuc2VhcmNoRWwuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XHJcblx0XHRcdFx0dGhpcy5zZWFyY2hLZXl3b3JkID0gKHRoaXMuc2VhcmNoRWw/LnZhbHVlIHx8ICcnKS50cmltKCk7XHJcblx0XHRcdFx0dGhpcy5yZW5kZXJTZWxlY3Rpb25QYW5lbCgpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHRcdGlmICh0aGlzLnNlYXJjaEVsKSB7XHJcblx0XHRcdHRoaXMuc2VhcmNoRWwudmFsdWUgPSB0aGlzLnNlYXJjaEtleXdvcmQ7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gXHU2ODA3XHU3QjdFXHU1MjE3XHU4ODY4XHVGRjA4XHU1M0VGXHU2RURBXHU1MkE4XHVGRjA5XHJcblx0XHRjb25zdCBwcmV2U2Nyb2xsVG9wID0gdGhpcy5sYWJlbHNFbCA/IHRoaXMubGFiZWxzRWwuc2Nyb2xsVG9wIDogMDtcclxuXHRcdGlmICghdGhpcy5sYWJlbHNFbCkge1xyXG5cdFx0XHR0aGlzLmxhYmVsc0VsID0gdGhpcy5wYW5lbEVsLmNyZWF0ZURpdigndG9wLXN1bW1hcnktcGFuZWwtbGFiZWxzJyk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLmxhYmVsc0VsLmVtcHR5KCk7XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3QgbG93ZXIgPSB0aGlzLnNlYXJjaEtleXdvcmQudG9Mb3dlckNhc2UoKTtcclxuXHRcdGNvbnN0IHZpc2libGVUYWdzID0gbG93ZXIgPyB0aGlzLnByb3BzLnRhZ3MuZmlsdGVyKHQgPT4gdC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGxvd2VyKSkgOiB0aGlzLnByb3BzLnRhZ3M7XHJcblx0XHR2aXNpYmxlVGFncy5mb3JFYWNoKHRhZyA9PiB7XHJcblx0XHRcdGNvbnN0IGxhYmVsRWwgPSB0aGlzLmxhYmVsc0VsIS5jcmVhdGVTcGFuKCd0b3Atc3VtbWFyeS1wYW5lbC1sYWJlbCcpO1xyXG5cdFx0XHRsYWJlbEVsLnRleHRDb250ZW50ID0gdGFnO1xyXG5cdFx0XHRpZiAodGhpcy5wYW5lbFNlbGVjdGVkLmluY2x1ZGVzKHRhZykpIHtcclxuXHRcdFx0XHRsYWJlbEVsLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGxhYmVsRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0XHRcdFx0Ly8gXHU0RUM1XHU2NkY0XHU2NUIwXHU1MTg1XHU1QkI5XHVGRjBDXHU0RTBEXHU5NTAwXHU2QkMxXHU5NzYyXHU2NzdGXHVGRjBDXHU0RkREXHU3NTU5XHU2RURBXHU1MkE4XHU0RjREXHU3RjZFXHJcblx0XHRcdFx0dGhpcy50b2dnbGVUYWdTZWxlY3Rpb24odGFnKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHRcdC8vIFx1NjA2Mlx1NTkwRFx1NkVEQVx1NTJBOFx1NEY0RFx1N0Y2RVxyXG5cdFx0aWYgKHRoaXMubGFiZWxzRWwpIHtcclxuXHRcdFx0dGhpcy5sYWJlbHNFbC5zY3JvbGxUb3AgPSBwcmV2U2Nyb2xsVG9wO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFx1NUU5NVx1OTBFOFx1NjRDRFx1NEY1Q1x1NjMwOVx1OTRBRVx1RkYwOFx1ODJFNVx1NjcyQVx1NTIxQlx1NUVGQVx1NTIxOVx1NTIxQlx1NUVGQVx1NEUwMFx1NkIyMVx1RkYwOVxyXG5cdFx0bGV0IGFjdGlvbnNFbCA9IHRoaXMucGFuZWxFbC5xdWVyeVNlbGVjdG9yKCcudG9wLXN1bW1hcnktcGFuZWwtYWN0aW9ucycpIGFzIEhUTUxFbGVtZW50IHwgbnVsbDtcclxuXHRcdGlmICghYWN0aW9uc0VsKSB7XHJcblx0XHRcdGFjdGlvbnNFbCA9IHRoaXMucGFuZWxFbC5jcmVhdGVEaXYoJ3RvcC1zdW1tYXJ5LXBhbmVsLWFjdGlvbnMnKTtcclxuXHRcdFx0YWN0aW9uc0VsLnN0eWxlLnBhZGRpbmcgPSAnOHB4IDE2cHggMTJweCAxNnB4JztcclxuXHRcdFx0Y29uc3Qgc2VsZWN0QWxsQnRuID0gYWN0aW9uc0VsLmNyZWF0ZVNwYW4oJ3BhbmVsLWJ0bicpO1xyXG5cdFx0XHRzZWxlY3RBbGxCdG4udGV4dENvbnRlbnQgPSAocmVxdWlyZSgnLi4vaTE4bicpIGFzIGFueSk/LnQ/LigndGFncy5zZWxlY3RBbGwnKSB8fCAnXHU1MTY4XHU5MDA5JztcclxuXHRcdFx0c2VsZWN0QWxsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdFx0XHRcdHRoaXMucGFuZWxTZWxlY3RlZCA9IFsuLi50aGlzLnByb3BzLnRhZ3NdO1xyXG5cdFx0XHRcdHRoaXMucmVuZGVyU2VsZWN0aW9uUGFuZWwoKTtcclxuXHRcdFx0fSk7XHJcblx0XHRcdGNvbnN0IGRlc2VsZWN0QWxsQnRuID0gYWN0aW9uc0VsLmNyZWF0ZVNwYW4oJ3BhbmVsLWJ0bicpO1xyXG5cdFx0XHRkZXNlbGVjdEFsbEJ0bi50ZXh0Q29udGVudCA9IChyZXF1aXJlKCcuLi9pMThuJykgYXMgYW55KT8udD8uKCd0YWdzLmRlc2VsZWN0QWxsJykgfHwgJ1x1NTNENlx1NkQ4OFx1NTE2OFx1OTAwOSc7XHJcblx0XHRcdGRlc2VsZWN0QWxsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdFx0XHRcdHRoaXMucGFuZWxTZWxlY3RlZCA9IFtdO1xyXG5cdFx0XHRcdHRoaXMucmVuZGVyU2VsZWN0aW9uUGFuZWwoKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHRvZ2dsZVRhZ1NlbGVjdGlvbih0YWc6IHN0cmluZyk6IHZvaWQge1xyXG5cdFx0aWYgKHRoaXMucGFuZWxTZWxlY3RlZC5pbmNsdWRlcyh0YWcpKSB7XHJcblx0XHRcdHRoaXMucGFuZWxTZWxlY3RlZCA9IHRoaXMucGFuZWxTZWxlY3RlZC5maWx0ZXIodCA9PiB0ICE9PSB0YWcpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5wYW5lbFNlbGVjdGVkLnB1c2godGFnKTtcclxuXHRcdH1cclxuXHRcdHRoaXMucmVuZGVyU2VsZWN0aW9uUGFuZWwoKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgY29uZmlybVNlbGVjdGlvbigpOiB2b2lkIHtcclxuXHRcdHRoaXMucHJvcHMub25UYWdDbGljayh0aGlzLnBhbmVsU2VsZWN0ZWQpO1xyXG5cdFx0dGhpcy5oaWRlU2VsZWN0aW9uUGFuZWwoKTtcclxuXHR9XHJcblxyXG5cdC8vIFx1NjZGNFx1NjVCMFx1NjgwN1x1N0I3RVxyXG5cdHVwZGF0ZVRhZ3ModGFnczogc3RyaW5nW10sIHNlbGVjdGVkVGFnczogc3RyaW5nW10pOiB2b2lkIHtcclxuXHRcdHRoaXMucHJvcHMudGFncyA9IHRhZ3M7XHJcblx0XHR0aGlzLnByb3BzLnNlbGVjdGVkVGFncyA9IHNlbGVjdGVkVGFncztcclxuXHRcdHRoaXMucmVuZGVyKCk7XHJcblx0fVxyXG59XHJcbiIsICJpbXBvcnQgeyBBc3NldCB9IGZyb20gJy4uL21vZGVscy9Bc3NldCc7XG5pbXBvcnQgeyBUYWdQYW5lbCwgVGFnUGFuZWxQcm9wcyB9IGZyb20gJy4vVGFnUGFuZWwnO1xuaW1wb3J0IHsgdCB9IGZyb20gJy4uL2kxOG4nO1xuXG5leHBvcnQgaW50ZXJmYWNlIFRvcFN1bW1hcnlQcm9wcyB7XG5cdHRvdGFsRGFpbHlDb3N0OiBudW1iZXI7XG5cdHRvdGFsQ29zdDogbnVtYmVyO1xuXHR0b3RhbFJlY3ljbGU6IG51bWJlcjtcblx0dGFnczogc3RyaW5nW107XG5cdHNlbGVjdGVkVGFnczogc3RyaW5nW107XG5cdG9uVGFnQ2xpY2s6ICh0YWc6IHN0cmluZyB8IHN0cmluZ1tdKSA9PiB2b2lkO1xuXHR0cmVuZFBvaW50czogeyBkYXRlOiBEYXRlLCB2YWx1ZTogbnVtYmVyIH1bXTtcblx0c2VsZWN0ZWREYXRlPzogRGF0ZTtcblx0c2VsZWN0ZWRYPzogbnVtYmVyIHwgbnVsbDtcblx0b25DaGFydFNlbGVjdD86ICh4OiBudW1iZXIpID0+IHZvaWQ7XG5cdG9uQ2hhcnRXaWR0aD86ICh3OiBudW1iZXIpID0+IHZvaWQ7XG5cdG9uRGF0ZVBpY2s/OiAoZGF0ZVN0cjogc3RyaW5nKSA9PiB2b2lkO1xuXHRtaW5EYXRlU3RyPzogc3RyaW5nO1xuXHRtYXhEYXRlU3RyPzogc3RyaW5nO1xuXHRtaW5ZZWFyPzogbnVtYmVyO1xuXHRtYXhZZWFyPzogbnVtYmVyO1xufVxuXG5leHBvcnQgY2xhc3MgVG9wU3VtbWFyeSB7XG5cdHByaXZhdGUgY29udGFpbmVyRWw6IEhUTUxFbGVtZW50O1xuXHRwcml2YXRlIHByb3BzOiBUb3BTdW1tYXJ5UHJvcHM7XG5cdHByaXZhdGUgY2hhcnRDb21wb25lbnQ/OiBhbnk7IC8vIExpbmVDaGFydFx1N0VDNFx1NEVGNlx1NUYxNVx1NzUyOFxuXHRwcml2YXRlIHRhZ1BhbmVsQ29tcG9uZW50PzogVGFnUGFuZWw7XG5cblx0Y29uc3RydWN0b3IoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50LCBwcm9wczogVG9wU3VtbWFyeVByb3BzKSB7XG5cdFx0dGhpcy5jb250YWluZXJFbCA9IGNvbnRhaW5lckVsO1xuXHRcdHRoaXMucHJvcHMgPSBwcm9wcztcblx0fVxuXG5cdHByaXZhdGUgZm9ybWF0RGF0ZUxvY2FsKGRhdGU6IERhdGUpOiBzdHJpbmcge1xuXHRcdGNvbnN0IGQgPSBuZXcgRGF0ZShkYXRlLmdldFRpbWUoKSAtIGRhdGUuZ2V0VGltZXpvbmVPZmZzZXQoKSAqIDYwMDAwKTtcblx0XHRyZXR1cm4gZC50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07XG5cdH1cblxuXHRyZW5kZXIoKTogdm9pZCB7XG5cdFx0dGhpcy5jb250YWluZXJFbC5lbXB0eSgpO1xuXHRcdHRoaXMuY29udGFpbmVyRWwuYWRkQ2xhc3MoJ3RvcC1zdW1tYXJ5Jyk7XG5cblx0XHQvLyBcdTUyMUJcdTVFRkFcdTY1NzBcdTVCNTdcdTUzM0FcdTU3REZcblx0XHR0aGlzLnJlbmRlck51bWJlcnMoKTtcblx0XHRcblx0XHQvLyBcdTUyMUJcdTVFRkFcdTY4MDdcdTdCN0VcdTUzM0FcdTU3REZcblx0XHR0aGlzLnJlbmRlckxhYmVscygpO1xuXHRcdFxuXHRcdC8vIFx1NTIxQlx1NUVGQVx1NTZGRVx1ODg2OFx1NTMzQVx1NTdERlxuXHRcdHRoaXMucmVuZGVyQ2hhcnQoKTtcblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyTnVtYmVycygpOiB2b2lkIHtcblx0XHRjb25zdCBudW1iZXJzRWwgPSB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZURpdigndG9wLXN1bW1hcnktbnVtYmVycycpO1xuXHRcdFxuXHRcdC8vIFx1NURFNlx1NEZBN1x1NjVFNVx1NTc0N1x1NjIxMFx1NjcyQ1xuXHRcdGNvbnN0IGRhaWx5RWwgPSBudW1iZXJzRWwuY3JlYXRlRGl2KCd0b3Atc3VtbWFyeS1kYWlseScpO1xuXHRcdGNvbnN0IGRhdGVFbCA9IGRhaWx5RWwuY3JlYXRlRGl2KCd0b3Atc3VtbWFyeS1kYXRlJyk7XG5cdFx0ZGF0ZUVsLnRleHRDb250ZW50ID0gdGhpcy5mb3JtYXREYXRlTG9jYWwodGhpcy5wcm9wcy5zZWxlY3RlZERhdGUgfHwgbmV3IERhdGUoKSk7XG5cdFx0ZGF0ZUVsLmFkZENsYXNzKCdjbGlja2FibGUnKTtcblx0XHRkYXRlRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG5cdFx0XHR0aGlzLnNob3dEYXRlUGlja2VyKCk7XG5cdFx0fSk7XG5cdFx0Y29uc3QgZGFpbHlDb3N0RWwgPSBkYWlseUVsLmNyZWF0ZURpdigndG9wLXN1bW1hcnktZGFpbHljb3N0Jyk7XG5cdFx0ZGFpbHlDb3N0RWwudGV4dENvbnRlbnQgPSBgJHt0aGlzLmdldEN1cnJlbmN5U3ltYm9sKCl9JHt0aGlzLnByb3BzLnRvdGFsRGFpbHlDb3N0LnRvRml4ZWQoMil9YDtcblxuXHRcdC8vIFx1NTNGM1x1NEZBN1x1NkM0N1x1NjAzQlxuXHRcdGNvbnN0IHN1bW1hcnlFbCA9IG51bWJlcnNFbC5jcmVhdGVEaXYoJ3RvcC1zdW1tYXJ5LXN1bW1hcnknKTtcblx0XHRcblx0XHRjb25zdCB0b3RhbEVsID0gc3VtbWFyeUVsLmNyZWF0ZURpdigndG9wLXN1bW1hcnktdG90YWwnKTtcblx0XHRjb25zdCB0b3RhbE1ldGFFbCA9IHRvdGFsRWwuY3JlYXRlU3BhbigndG9wLXN1bW1hcnktbWV0YScpO1xuXHRcdHRvdGFsTWV0YUVsLnRleHRDb250ZW50ID0gdCgndG9wLnRvdGFsJyk7XG5cdFx0Y29uc3QgdG90YWxDb3N0RWwgPSB0b3RhbEVsLmNyZWF0ZVNwYW4oJ3RvcC1zdW1tYXJ5LXRvdGFsY29zdCcpO1xuXHRcdHRvdGFsQ29zdEVsLnRleHRDb250ZW50ID0gYCR7dGhpcy5nZXRDdXJyZW5jeVN5bWJvbCgpfSR7dGhpcy5wcm9wcy50b3RhbENvc3QudG9Mb2NhbGVTdHJpbmcoKX1gO1xuXG5cdFx0Y29uc3QgcmVjeWNsZUVsID0gc3VtbWFyeUVsLmNyZWF0ZURpdigndG9wLXN1bW1hcnktdG90YWwnKTtcblx0XHRjb25zdCByZWN5Y2xlTWV0YUVsID0gcmVjeWNsZUVsLmNyZWF0ZVNwYW4oJ3RvcC1zdW1tYXJ5LW1ldGEnKTtcblx0XHRyZWN5Y2xlTWV0YUVsLnRleHRDb250ZW50ID0gdCgndG9wLnJlY3ljbGUnKTtcblx0XHRjb25zdCByZWN5Y2xlQ29zdEVsID0gcmVjeWNsZUVsLmNyZWF0ZVNwYW4oJ3RvcC1zdW1tYXJ5LXRvdGFsY29zdCcpO1xuXHRcdHJlY3ljbGVDb3N0RWwudGV4dENvbnRlbnQgPSBgJHt0aGlzLmdldEN1cnJlbmN5U3ltYm9sKCl9JHt0aGlzLnByb3BzLnRvdGFsUmVjeWNsZS50b0xvY2FsZVN0cmluZygpfWA7XG5cdH1cblxuXHRwcml2YXRlIHJlbmRlckxhYmVscygpOiB2b2lkIHtcblx0XHRjb25zdCBsYWJlbHNFbCA9IHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRGl2KCd0b3Atc3VtbWFyeS1sYWJlbHMnKTtcblx0XHRjb25zdCBwYW5lbFByb3BzOiBUYWdQYW5lbFByb3BzID0ge1xuXHRcdFx0dGFnczogdGhpcy5wcm9wcy50YWdzLFxuXHRcdFx0c2VsZWN0ZWRUYWdzOiB0aGlzLnByb3BzLnNlbGVjdGVkVGFncyxcblx0XHRcdG9uVGFnQ2xpY2s6IHRoaXMucHJvcHMub25UYWdDbGljayxcblx0XHRcdG1heEhlaWdodDogJzQ4cHgnXG5cdFx0fTtcblx0XHR0aGlzLnRhZ1BhbmVsQ29tcG9uZW50ID0gbmV3IFRhZ1BhbmVsKGxhYmVsc0VsLCBwYW5lbFByb3BzKTtcblx0XHR0aGlzLnRhZ1BhbmVsQ29tcG9uZW50LnJlbmRlcigpO1xuXHR9XG5cblx0cHJpdmF0ZSBnZXRDdXJyZW5jeVN5bWJvbCgpOiBzdHJpbmcge1xuXHRcdHJldHVybiB0KCdjdXJyZW5jeS5zeW1ib2wnKTtcblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyQ2hhcnQoKTogdm9pZCB7XG5cdFx0Y29uc3QgY2hhcnRFbCA9IHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRGl2KCd0b3Atc3VtbWFyeS1jaGFydCcpO1xuXHRcdGNvbnN0IGNhbnZhcyA9IGNoYXJ0RWwuY3JlYXRlRWwoJ2NhbnZhcycpIGFzIEhUTUxDYW52YXNFbGVtZW50O1xuXHRcdGNhbnZhcy5pZCA9ICd0cmVuZC1jYW52YXMnO1xuXHRcdGNhbnZhcy53aWR0aCA9IDEwMDtcblx0XHRjYW52YXMuaGVpZ2h0ID0gMjA7XG5cblx0XHQvLyBcdTZFMzJcdTY3RDNcdTU2RkVcdTg4Njhcblx0XHR0aGlzLnJlbmRlckNoYXJ0Q2FudmFzKGNhbnZhcyk7XG5cdH1cblxuXHRwcml2YXRlIHJlbmRlckNoYXJ0Q2FudmFzKGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQpOiB2b2lkIHtcblx0XHRpZiAodGhpcy5wcm9wcy50cmVuZFBvaW50cy5sZW5ndGggPCAyKSByZXR1cm47XG5cdFx0XG5cdFx0Y29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG5cdFx0aWYgKCFjdHgpIHJldHVybjtcblx0XHRcblx0XHQvLyBcdThCQkVcdTdGNkVDYW52YXNcdTVDM0FcdTVCRjhcblx0XHRjb25zdCByZWN0ID0gY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXHRcdGNhbnZhcy53aWR0aCA9IHJlY3Qud2lkdGg7XG5cdFx0Y2FudmFzLmhlaWdodCA9IHJlY3QuaGVpZ2h0O1xuXHRcdFxuXHRcdGNvbnN0IHdpZHRoID0gY2FudmFzLndpZHRoO1xuXHRcdGNvbnN0IGhlaWdodCA9IGNhbnZhcy5oZWlnaHQ7XG5cdFx0Y29uc3QgcGFkID0gMDtcblx0XHRcblx0XHQvLyBcdThCQTFcdTdCOTdcdTY1NzBcdTUwM0NcdTgzMDNcdTU2RjRcblx0XHRjb25zdCB2YWx1ZXMgPSB0aGlzLnByb3BzLnRyZW5kUG9pbnRzLm1hcChwID0+IHAudmFsdWUpO1xuXHRcdGNvbnN0IG1pblZhbHVlID0gTWF0aC5taW4oLi4udmFsdWVzKTtcblx0XHRjb25zdCBtYXhWYWx1ZSA9IE1hdGgubWF4KC4uLnZhbHVlcyk7XG5cdFx0Y29uc3QgcmFuZ2UgPSBtYXhWYWx1ZSAtIG1pblZhbHVlO1xuXHRcdFxuXHRcdC8vIFx1NTk4Mlx1Njc5Q1x1NjU3MFx1NjM2RVx1ODMwM1x1NTZGNFx1NUY4OFx1NUMwRlx1RkYwQ1x1NEY3Rlx1NzUyOFx1N0VCRlx1NjAyN1x1N0YyOVx1NjUzRVx1RkYxQlx1NTQyNlx1NTIxOVx1NEY3Rlx1NzUyOFx1NUJGOVx1NjU3MFx1N0YyOVx1NjUzRVxuXHRcdGNvbnN0IHVzZUxvZ1NjYWxlID0gcmFuZ2UgPiAxMDA7XG5cdFx0XG5cdFx0Y29uc3QgZ2V0WCA9IChpOiBudW1iZXIpID0+IHBhZCArICh3aWR0aCAtIDIgKiBwYWQpICogaSAvICh0aGlzLnByb3BzLnRyZW5kUG9pbnRzLmxlbmd0aCAtIDEpO1xuXHRcdGNvbnN0IGdldFkgPSAodjogbnVtYmVyKSA9PiB7XG5cdFx0XHRpZiAodXNlTG9nU2NhbGUpIHtcblx0XHRcdFx0Y29uc3QgbG9nVmFsdWUgPSBNYXRoLmxvZyh2ICsgMSk7XG5cdFx0XHRcdGNvbnN0IGxvZ01pbiA9IE1hdGgubG9nKG1pblZhbHVlICsgMSk7XG5cdFx0XHRcdGNvbnN0IGxvZ01heCA9IE1hdGgubG9nKG1heFZhbHVlICsgMSk7XG5cdFx0XHRcdHJldHVybiBoZWlnaHQgLSBwYWQgLSAoKGxvZ1ZhbHVlIC0gbG9nTWluKSAvIE1hdGgubWF4KGxvZ01heCAtIGxvZ01pbiwgMC41KSkgKiAoaGVpZ2h0IC0gMiAqIHBhZCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXR1cm4gaGVpZ2h0IC0gcGFkIC0gKCh2IC0gbWluVmFsdWUpIC8gTWF0aC5tYXgocmFuZ2UsIDAuNSkpICogKGhlaWdodCAtIDIgKiBwYWQpO1xuXHRcdFx0fVxuXHRcdH07XG5cdFx0Y29uc3QgZ2V0Q29sb3JCeVZhbHVlID0gKHY6IG51bWJlcikgPT4ge1xuXHRcdFx0Ly8gXHU0RjdGXHU3NTI4XHU1QkY5XHU2NTcwXHU3RjI5XHU2NTNFXHU4QkExXHU3Qjk3XHU5ODlDXHU4MjcyXHVGRjA4XHU1M0MyXHU4MDAzY29zdHNldGFwcFx1NUI5RVx1NzNCMFx1RkYwOVxuXHRcdFx0Y29uc3QgbG9nVmFsdWUgPSBNYXRoLmxvZyh2ICsgMSk7XG5cdFx0XHRjb25zdCBsb2dNaW4gPSBNYXRoLmxvZyhtaW5WYWx1ZSArIDEpO1xuXHRcdFx0Y29uc3QgbG9nTWF4ID0gTWF0aC5sb2cobWF4VmFsdWUgKyAxKTtcblx0XHRcdFxuXHRcdFx0aWYgKGxvZ01heCA9PT0gbG9nTWluKSByZXR1cm4gJ3JnYigyNTUsMjU1LDApJzsgLy8gXHU1OTgyXHU2NzlDXHU1M0VBXHU2NzA5XHU0RTAwXHU0RTJBXHU1MDNDXHVGRjBDXHU2NjNFXHU3OTNBXHU5RUM0XHU4MjcyXG5cdFx0XHRcblx0XHRcdGNvbnN0IHQgPSAobG9nVmFsdWUgLSBsb2dNaW4pIC8gKGxvZ01heCAtIGxvZ01pbik7XG5cdFx0XHRcblx0XHRcdC8vIFx1NTIwNlx1NkJCNVx1NkUxMFx1NTNEOFx1RkYxQVx1NTI0RFx1NTM0QVx1NkJCNVx1N0VGRlx1ODI3Mlx1NTIzMFx1OUVDNFx1ODI3Mlx1RkYwQ1x1NTQwRVx1NTM0QVx1NkJCNVx1OUVDNFx1ODI3Mlx1NTIzMFx1N0VBMlx1ODI3MlxuXHRcdFx0aWYgKHQgPD0gMC41KSB7XG5cdFx0XHRcdGNvbnN0IHIgPSBNYXRoLnJvdW5kKDIgKiB0ICogMjU1KTsgLy8gXHU3RUEyXHU4MjcyXHU1MjA2XHU5MUNGXHVGRjFBMCAtPiAyNTVcblx0XHRcdFx0cmV0dXJuIGByZ2IoJHtyfSwyNTUsMClgOyAvLyBcdTdFRkZcdTgyNzJcdTUyMzBcdTlFQzRcdTgyNzJcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNvbnN0IGcgPSBNYXRoLnJvdW5kKCgxIC0gMiAqICh0IC0gMC41KSkgKiAyNTUpOyAvLyBcdTdFRkZcdTgyNzJcdTUyMDZcdTkxQ0ZcdUZGMUEyNTUgLT4gMFxuXHRcdFx0XHRyZXR1cm4gYHJnYigyNTUsJHtnfSwwKWA7IC8vIFx1OUVDNFx1ODI3Mlx1NTIzMFx1N0VBMlx1ODI3MlxuXHRcdFx0fVxuXHRcdH07XG5cdFx0XG5cdFx0Ly8gXHU2RTA1XHU3QTdBXHU3NTNCXHU1RTAzXG5cdFx0Y3R4LmNsZWFyUmVjdCgwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcblx0XHRjdHgubGluZVdpZHRoID0gMTtcblx0XHRcblx0XHQvLyBcdTdFRDhcdTUyMzZcdTYyOThcdTdFQkZcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucHJvcHMudHJlbmRQb2ludHMubGVuZ3RoIC0gMTsgaSsrKSB7XG5cdFx0XHRjb25zdCBwMSA9IHRoaXMucHJvcHMudHJlbmRQb2ludHNbaV07XG5cdFx0XHRjb25zdCBwMiA9IHRoaXMucHJvcHMudHJlbmRQb2ludHNbaSArIDFdO1xuXHRcdFx0Y29uc3QgeDEgPSBnZXRYKGkpO1xuXHRcdFx0Y29uc3QgeTEgPSBnZXRZKHAxLnZhbHVlKTtcblx0XHRcdGNvbnN0IHgyID0gZ2V0WChpICsgMSk7XG5cdFx0XHRjb25zdCB5MiA9IGdldFkocDIudmFsdWUpO1xuXHRcdFx0XG5cdFx0XHRjdHguYmVnaW5QYXRoKCk7XG5cdFx0XHRjdHguc3Ryb2tlU3R5bGUgPSBnZXRDb2xvckJ5VmFsdWUocDEudmFsdWUpO1xuXHRcdFx0Y3R4Lm1vdmVUbyh4MSwgeTEpO1xuXHRcdFx0Y3R4LmxpbmVUbyh4MiwgeTIpO1xuXHRcdFx0Y3R4LnN0cm9rZSgpO1xuXHRcdH1cblx0XHRcblx0XHQvLyBcdTdFRDhcdTUyMzZcdTkwMDlcdTRFMkRcdTdFQkZcdUZGMDhcdTVGNTNcdTUyNERcdTY1RTVcdTY3MUZcdUZGMDlcblx0XHQvLyBcdTY1MkZcdTYzMDFcdTRFMjRcdTc5Q0RcdTY1QjlcdTVGMEZcdUZGMUFcblx0XHQvLyAxKSBcdTU5MTZcdTkwRThcdTc2RjRcdTYzQTVcdTRGMjBcdTUxNjUgc2VsZWN0ZWRYIFx1NTBDRlx1N0QyMFxuXHRcdC8vIDIpIFx1NTkxNlx1OTBFOFx1NEVDNVx1NEYyMFx1NTE2NSBzZWxlY3RlZERhdGVcdUZGMENcdTYyMTFcdTRFRUNcdTU3MjhcdThGRDlcdTkxQ0NcdTYzMDlcdTY1RjZcdTk1RjRcdTZCRDRcdTRGOEJcdThCQTFcdTdCOTcgWFxuXHRcdGxldCBzZWxlY3RlZFhUb0RyYXc6IG51bWJlciB8IG51bGwgPSBudWxsO1xuXHRcdGlmICh0aGlzLnByb3BzLnNlbGVjdGVkWCAhPT0gbnVsbCAmJiB0aGlzLnByb3BzLnNlbGVjdGVkWCAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRzZWxlY3RlZFhUb0RyYXcgPSB0aGlzLnByb3BzLnNlbGVjdGVkWDtcblx0XHR9IGVsc2UgaWYgKHRoaXMucHJvcHMuc2VsZWN0ZWREYXRlKSB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRjb25zdCB0aW1lcyA9IHRoaXMucHJvcHMudHJlbmRQb2ludHMubWFwKHAgPT4gcC5kYXRlLmdldFRpbWUoKSk7XG5cdFx0XHRcdGNvbnN0IG1pblRpbWUgPSBNYXRoLm1pbiguLi50aW1lcyk7XG5cdFx0XHRcdGNvbnN0IG1heFRpbWUgPSBNYXRoLm1heCguLi50aW1lcyk7XG5cdFx0XHRcdGNvbnN0IGN1ciA9IHRoaXMucHJvcHMuc2VsZWN0ZWREYXRlLmdldFRpbWUoKTtcblx0XHRcdFx0Y29uc3QgZGVub20gPSBNYXRoLm1heChtYXhUaW1lIC0gbWluVGltZSwgMSk7XG5cdFx0XHRcdGNvbnN0IHJhdGlvID0gKGN1ciAtIG1pblRpbWUpIC8gZGVub207XG5cdFx0XHRcdHNlbGVjdGVkWFRvRHJhdyA9IHBhZCArICh3aWR0aCAtIDIgKiBwYWQpICogTWF0aC5taW4oTWF0aC5tYXgocmF0aW8sIDApLCAxKTtcblx0XHRcdH0gY2F0Y2ggKF8pIHtcblx0XHRcdFx0c2VsZWN0ZWRYVG9EcmF3ID0gbnVsbDtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoc2VsZWN0ZWRYVG9EcmF3ICE9PSBudWxsICYmIHNlbGVjdGVkWFRvRHJhdyAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRjdHguYmVnaW5QYXRoKCk7XG5cdFx0XHRjdHguc3Ryb2tlU3R5bGUgPSAnI0ZGRDYwMCc7XG5cdFx0XHRjdHgubGluZVdpZHRoID0gMTtcblx0XHRcdGN0eC5tb3ZlVG8oc2VsZWN0ZWRYVG9EcmF3LCAwKTtcblx0XHRcdGN0eC5saW5lVG8oc2VsZWN0ZWRYVG9EcmF3LCBoZWlnaHQpO1xuXHRcdFx0Y3R4LnN0cm9rZSgpO1xuXHRcdH1cblxuXHRcdC8vIFx1N0VEMVx1NUI5QVx1NzBCOVx1NTFGQlx1NEU4Qlx1NEVGNlx1RkYxQVx1NUMwNlx1NzBCOVx1NTFGQlx1NEY0RFx1N0Y2RVx1NjYyMFx1NUMwNFx1NEUzQVx1NjVFNVx1NjcxRlx1NUU3Nlx1NjZGNFx1NjVCMFx1OTAwOVx1NjJFOVxuXHRcdGlmICghKGNhbnZhcyBhcyBhbnkpLl9sYWNfY2xpY2tfYm91bmQpIHtcblx0XHRcdChjYW52YXMgYXMgYW55KS5fbGFjX2NsaWNrX2JvdW5kID0gdHJ1ZTtcblx0XHRcdGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldjogTW91c2VFdmVudCkgPT4ge1xuXHRcdFx0XHRjb25zdCB4ID0gKGV2IGFzIGFueSkub2Zmc2V0WCA/PyAoZXYuY2xpZW50WCAtIGNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0KTtcblx0XHRcdFx0Y29uc3QgdXNhYmxlV2lkdGggPSBNYXRoLm1heCh3aWR0aCAtIDIgKiBwYWQsIDEpO1xuXHRcdFx0XHRjb25zdCByYXRpbyA9IE1hdGgubWluKE1hdGgubWF4KCh4IC0gcGFkKSAvIHVzYWJsZVdpZHRoLCAwKSwgMSk7XG5cdFx0XHRcdGNvbnN0IGlkeCA9IE1hdGgucm91bmQocmF0aW8gKiAodGhpcy5wcm9wcy50cmVuZFBvaW50cy5sZW5ndGggLSAxKSk7XG5cdFx0XHRcdGNvbnN0IGNsYW1wZWRJZHggPSBNYXRoLm1pbihNYXRoLm1heChpZHgsIDApLCB0aGlzLnByb3BzLnRyZW5kUG9pbnRzLmxlbmd0aCAtIDEpO1xuXHRcdFx0XHRjb25zdCBwaWNrZWREYXRlID0gdGhpcy5wcm9wcy50cmVuZFBvaW50c1tjbGFtcGVkSWR4XS5kYXRlO1xuXG5cdFx0XHRcdHRoaXMudXBkYXRlU2VsZWN0aW9uKHgsIHBpY2tlZERhdGUpO1xuXHRcdFx0XHQvLyBcdTkwMUFcdTc3RTVcdTU5MTZcdTVDNDJcdTUyMzdcdTY1QjBcdUZGMDhcdTU5MERcdTc1MjhcdTczQjBcdTY3MDkgb25EYXRlUGljayBcdTZENDFcdTdBMEJcdUZGMDlcblx0XHRcdFx0aWYgKHRoaXMucHJvcHMub25EYXRlUGljaykge1xuXHRcdFx0XHRcdHRoaXMucHJvcHMub25EYXRlUGljayh0aGlzLmZvcm1hdERhdGVMb2NhbChwaWNrZWREYXRlKSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0Ly8gXHU1M0VGXHU5MDA5XHVGRjFBXHU0RTVGXHU2MjhBXHU1MENGXHU3RDIwXHU0RjREXHU3RjZFXHU1NkRFXHU0RjIwXG5cdFx0XHRcdGlmICh0aGlzLnByb3BzLm9uQ2hhcnRTZWxlY3QpIHtcblx0XHRcdFx0XHR0aGlzLnByb3BzLm9uQ2hhcnRTZWxlY3QoeCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXG5cdC8vIFx1NjZGNFx1NjVCMFx1NTZGRVx1ODg2OFx1NjU3MFx1NjM2RVxuXHR1cGRhdGVDaGFydCh0cmVuZFBvaW50czogeyBkYXRlOiBEYXRlLCB2YWx1ZTogbnVtYmVyIH1bXSk6IHZvaWQge1xuXHRcdHRoaXMucHJvcHMudHJlbmRQb2ludHMgPSB0cmVuZFBvaW50cztcblx0XHRjb25zdCBjYW52YXMgPSB0aGlzLmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoJyN0cmVuZC1jYW52YXMnKSBhcyBIVE1MQ2FudmFzRWxlbWVudDtcblx0XHRpZiAoY2FudmFzKSB7XG5cdFx0XHR0aGlzLnJlbmRlckNoYXJ0Q2FudmFzKGNhbnZhcyk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gXHU2NkY0XHU2NUIwXHU5MDA5XHU0RTJEXHU3MkI2XHU2MDAxXG5cdHVwZGF0ZVNlbGVjdGlvbihzZWxlY3RlZFg6IG51bWJlciB8IG51bGwsIHNlbGVjdGVkRGF0ZT86IERhdGUpOiB2b2lkIHtcblx0XHR0aGlzLnByb3BzLnNlbGVjdGVkWCA9IHNlbGVjdGVkWDtcblx0XHRpZiAoc2VsZWN0ZWREYXRlKSB7XG5cdFx0XHR0aGlzLnByb3BzLnNlbGVjdGVkRGF0ZSA9IHNlbGVjdGVkRGF0ZTtcblx0XHRcdGNvbnN0IGRhdGVMYWJlbCA9IHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvcignLnRvcC1zdW1tYXJ5LWRhdGUnKSBhcyBIVE1MRWxlbWVudCB8IG51bGw7XG5cdFx0XHRpZiAoZGF0ZUxhYmVsKSB7XG5cdFx0XHRcdGRhdGVMYWJlbC50ZXh0Q29udGVudCA9IHRoaXMuZm9ybWF0RGF0ZUxvY2FsKHNlbGVjdGVkRGF0ZSk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGNvbnN0IGNhbnZhcyA9IHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvcignI3RyZW5kLWNhbnZhcycpIGFzIEhUTUxDYW52YXNFbGVtZW50O1xuXHRcdGlmIChjYW52YXMpIHtcblx0XHRcdHRoaXMucmVuZGVyQ2hhcnRDYW52YXMoY2FudmFzKTtcblx0XHR9XG5cdH1cblxuXHQvLyBcdTUzRUFcdTY2RjRcdTY1QjBcdTY1NzBcdTVCNTdcdUZGMDhcdTRFMERcdTkxQ0RcdTdFRDhcdTU2RkVcdTg4NjhcdTY1NzBcdTYzNkVcdUZGMDlcblx0dXBkYXRlTnVtYmVycyh0b3RhbERhaWx5Q29zdDogbnVtYmVyLCB0b3RhbENvc3Q6IG51bWJlciwgdG90YWxSZWN5Y2xlOiBudW1iZXIpOiB2b2lkIHtcblx0XHR0aGlzLnByb3BzLnRvdGFsRGFpbHlDb3N0ID0gdG90YWxEYWlseUNvc3Q7XG5cdFx0dGhpcy5wcm9wcy50b3RhbENvc3QgPSB0b3RhbENvc3Q7XG5cdFx0dGhpcy5wcm9wcy50b3RhbFJlY3ljbGUgPSB0b3RhbFJlY3ljbGU7XG5cblx0XHRjb25zdCBkYWlseSA9IHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvcignLnRvcC1zdW1tYXJ5LWRhaWx5Y29zdCcpIGFzIEhUTUxFbGVtZW50IHwgbnVsbDtcblx0XHRpZiAoZGFpbHkpIGRhaWx5LnRleHRDb250ZW50ID0gYCR7dGhpcy5nZXRDdXJyZW5jeVN5bWJvbCgpfSR7dG90YWxEYWlseUNvc3QudG9GaXhlZCgyKX1gO1xuXG5cdFx0Y29uc3QgdG90YWxzID0gdGhpcy5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yQWxsKCcudG9wLXN1bW1hcnktdG90YWxjb3N0Jyk7XG5cdFx0aWYgKHRvdGFscyAmJiB0b3RhbHMubGVuZ3RoID4gMCkge1xuXHRcdFx0Y29uc3QgdG90YWxFbCA9IHRvdGFsc1swXSBhcyBIVE1MRWxlbWVudDtcblx0XHRcdGlmICh0b3RhbEVsKSB0b3RhbEVsLnRleHRDb250ZW50ID0gYCR7dGhpcy5nZXRDdXJyZW5jeVN5bWJvbCgpfSR7dG90YWxDb3N0LnRvTG9jYWxlU3RyaW5nKCl9YDtcblx0XHRcdGNvbnN0IHJlY3ljbGVFbCA9IHRvdGFsc1sxXSBhcyBIVE1MRWxlbWVudCB8IHVuZGVmaW5lZCBhcyBhbnk7XG5cdFx0XHRpZiAocmVjeWNsZUVsKSAocmVjeWNsZUVsIGFzIEhUTUxFbGVtZW50KS50ZXh0Q29udGVudCA9IGAke3RoaXMuZ2V0Q3VycmVuY3lTeW1ib2woKX0ke3RvdGFsUmVjeWNsZS50b0xvY2FsZVN0cmluZygpfWA7XG5cdFx0fVxuXHR9XG5cblx0Ly8gXHU2NjNFXHU3OTNBXHU2NUU1XHU2NzFGXHU5MDA5XHU2MkU5XHU1NjY4XG5cdHByaXZhdGUgc2hvd0RhdGVQaWNrZXIoKTogdm9pZCB7XG5cdFx0Ly8gXHU1MjFCXHU1RUZBXHU5MDZFXHU3RjY5XHU1QzQyXG5cdFx0Y29uc3QgbWFzayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdG1hc2suY2xhc3NOYW1lID0gJ2RhdGUtcGlja2VyLW1hc2snO1xuXHRcdFxuXHRcdC8vIFx1NTIxQlx1NUVGQVx1NjVFNVx1NjcxRlx1OTAwOVx1NjJFOVx1NTY2OFx1NUYzOVx1N0E5N1xuXHRcdGNvbnN0IHBpY2tlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdHBpY2tlci5jbGFzc05hbWUgPSAnZGF0ZS1waWNrZXItbW9kYWwnO1xuXHRcdFxuXHRcdC8vIFx1NTIxQlx1NUVGQVx1NjVFNVx1NjcxRlx1OTAwOVx1NjJFOVx1NTY2OFx1NTE4NVx1NUJCOVxuXHRcdGNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHRjb250ZW50LmNsYXNzTmFtZSA9ICdkYXRlLXBpY2tlci1jb250ZW50Jztcblx0XHRcblx0XHQvLyBcdTUyMUJcdTVFRkFcdTY4MDdcdTk4OThcblx0XHRjb25zdCB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdHRpdGxlLmNsYXNzTmFtZSA9ICdkYXRlLXBpY2tlci10aXRsZSc7XG5cdFx0dGl0bGUudGV4dENvbnRlbnQgPSB0KCdkYXRlLnBpY2snKTtcblx0XHRcblx0XHQvLyBcdTUyMUJcdTVFRkFcdTRFMDlcdTUyMTdcdTZFREFcdThGNkVcdTkwMDlcdTYyRTlcdTU2Njhcblx0XHRjb25zdCB3aGVlbENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdHdoZWVsQ29udGFpbmVyLmNsYXNzTmFtZSA9ICdkYXRlLXdoZWVsLWNvbnRhaW5lcic7XG5cdFx0XG5cdFx0Ly8gXHU4M0I3XHU1M0Q2XHU1RjUzXHU1MjREXHU2NUU1XHU2NzFGXHVGRjA4XHU0RTBFXHU5ODc2XHU5MEU4XHU2NjNFXHU3OTNBXHU3Njg0XHU2NUU1XHU2NzFGXHU0RkREXHU2MzAxXHU0RTAwXHU4MUY0XHVGRjA5XG5cdFx0Y29uc3QgY3VycmVudERhdGUgPSB0aGlzLnByb3BzLnNlbGVjdGVkRGF0ZSB8fCBuZXcgRGF0ZSgpO1xuXHRcdGNvbnN0IGN1cnJlbnRZZWFyID0gY3VycmVudERhdGUuZ2V0RnVsbFllYXIoKTtcblx0XHRjb25zdCBjdXJyZW50TW9udGggPSBjdXJyZW50RGF0ZS5nZXRNb250aCgpICsgMTtcblx0XHRjb25zdCBjdXJyZW50RGF5ID0gY3VycmVudERhdGUuZ2V0RGF0ZSgpO1xuXHRcdFxuXHRcdC8vIFx1NTIxQlx1NUVGQVx1NUU3NFx1NEVGRFx1NTIxN1x1RkYwOFx1NEUwRFx1NUZBQVx1NzNBRlx1RkYwOVxuXHRcdGNvbnN0IHllYXJDb2x1bW4gPSB0aGlzLmNyZWF0ZVdoZWVsQ29sdW1uKHQoJ2RhdGUueWVhcicpLCB0aGlzLmdlbmVyYXRlWWVhcnMoY3VycmVudFllYXIpLCBjdXJyZW50WWVhciwgKHllYXIpID0+IHtcblx0XHRcdHRoaXMudXBkYXRlRGF5c0NvbHVtbihkYXlDb2x1bW4sIHllYXIsIG1vbnRoQ29sdW1uLnNlbGVjdGVkVmFsdWUpO1xuXHRcdH0sIGZhbHNlKTtcblxuXHRcdC8vIFx1NTIxQlx1NUVGQVx1NjcwOFx1NEVGRFx1NTIxN1x1RkYwOFx1NUZBQVx1NzNBRlx1NkVEQVx1NTJBOFx1RkYwOVxuXHRcdGNvbnN0IG1vbnRoQ29sdW1uID0gdGhpcy5jcmVhdGVXaGVlbENvbHVtbih0KCdkYXRlLm1vbnRoJyksIHRoaXMuZ2VuZXJhdGVNb250aHMoKSwgY3VycmVudE1vbnRoLCAobW9udGgpID0+IHtcblx0XHRcdHRoaXMudXBkYXRlRGF5c0NvbHVtbihkYXlDb2x1bW4sIHllYXJDb2x1bW4uc2VsZWN0ZWRWYWx1ZSwgbW9udGgpO1xuXHRcdH0sIHRydWUpO1xuXG5cdFx0Ly8gXHU1MjFCXHU1RUZBXHU2NUU1XHU2NzFGXHU1MjE3XHVGRjA4XHU1RkFBXHU3M0FGXHU2RURBXHU1MkE4XHVGRjA5XG5cdFx0Y29uc3QgZGF5Q29sdW1uID0gdGhpcy5jcmVhdGVXaGVlbENvbHVtbih0KCdkYXRlLmRheScpLCB0aGlzLmdlbmVyYXRlRGF5cyhjdXJyZW50WWVhciwgY3VycmVudE1vbnRoKSwgY3VycmVudERheSwgdW5kZWZpbmVkLCB0cnVlKTtcblx0XHRcblx0XHR3aGVlbENvbnRhaW5lci5hcHBlbmRDaGlsZCh5ZWFyQ29sdW1uLmVsZW1lbnQpO1xuXHRcdHdoZWVsQ29udGFpbmVyLmFwcGVuZENoaWxkKG1vbnRoQ29sdW1uLmVsZW1lbnQpO1xuXHRcdHdoZWVsQ29udGFpbmVyLmFwcGVuZENoaWxkKGRheUNvbHVtbi5lbGVtZW50KTtcblx0XHRcblx0XHQvLyBcdTUyMUJcdTVFRkFcdTYzMDlcdTk0QUVcdTUzM0FcdTU3REZcblx0XHRjb25zdCBhY3Rpb25zID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0YWN0aW9ucy5jbGFzc05hbWUgPSAnZGF0ZS1waWNrZXItYWN0aW9ucyc7XG5cdFx0XG5cdFx0Y29uc3QgY2FuY2VsQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG5cdFx0Y2FuY2VsQnRuLmNsYXNzTmFtZSA9ICdkYXRlLXBpY2tlci1idG4gZGF0ZS1waWNrZXItYnRuLWNhbmNlbCc7XG5cdFx0Y2FuY2VsQnRuLnRleHRDb250ZW50ID0gdCgnY29tbW9uLmNhbmNlbCcpO1xuXHRcdFxuXHRcdGNvbnN0IGNvbmZpcm1CdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcblx0XHRjb25maXJtQnRuLmNsYXNzTmFtZSA9ICdkYXRlLXBpY2tlci1idG4gZGF0ZS1waWNrZXItYnRuLWNvbmZpcm0nO1xuXHRcdGNvbmZpcm1CdG4udGV4dENvbnRlbnQgPSB0KCdjb21tb24uY29uZmlybScpO1xuXHRcdFxuXHRcdC8vIFx1N0VDNFx1ODhDNVx1N0VEM1x1Njc4NFxuXHRcdGFjdGlvbnMuYXBwZW5kQ2hpbGQoY2FuY2VsQnRuKTtcblx0XHRhY3Rpb25zLmFwcGVuZENoaWxkKGNvbmZpcm1CdG4pO1xuXHRcdGNvbnRlbnQuYXBwZW5kQ2hpbGQodGl0bGUpO1xuXHRcdGNvbnRlbnQuYXBwZW5kQ2hpbGQod2hlZWxDb250YWluZXIpO1xuXHRcdGNvbnRlbnQuYXBwZW5kQ2hpbGQoYWN0aW9ucyk7XG5cdFx0cGlja2VyLmFwcGVuZENoaWxkKGNvbnRlbnQpO1xuXHRcdG1hc2suYXBwZW5kQ2hpbGQocGlja2VyKTtcblx0XHRcblx0XHQvLyBcdTZERkJcdTUyQTBcdTUyMzBcdTk4NzVcdTk3NjJcblx0XHRkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG1hc2spO1xuXHRcdFxuXHRcdC8vIFx1NEU4Qlx1NEVGNlx1NTkwNFx1NzQwNlxuXHRcdGNvbnN0IGNsb3NlUGlja2VyID0gKCkgPT4ge1xuXHRcdFx0ZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChtYXNrKTtcblx0XHR9O1xuXHRcdFxuXHRcdG1hc2suYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuXHRcdFx0aWYgKGUudGFyZ2V0ID09PSBtYXNrKSB7XG5cdFx0XHRcdGNsb3NlUGlja2VyKCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0XG5cdFx0Y2FuY2VsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xvc2VQaWNrZXIpO1xuXHRcdFxuXHRcdGNvbmZpcm1CdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG5cdFx0XHRjb25zdCB5ZWFyID0geWVhckNvbHVtbi5zZWxlY3RlZFZhbHVlO1xuXHRcdFx0Y29uc3QgbW9udGggPSBtb250aENvbHVtbi5zZWxlY3RlZFZhbHVlO1xuXHRcdFx0Y29uc3QgZGF5ID0gZGF5Q29sdW1uLnNlbGVjdGVkVmFsdWU7XG5cdFx0XHRjb25zdCBzZWxlY3RlZERhdGVTdHIgPSBgJHt5ZWFyfS0ke21vbnRoLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX0tJHtkYXkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfWA7XG5cdFx0XHRcblx0XHRcdGlmICh0aGlzLnByb3BzLm9uRGF0ZVBpY2spIHtcblx0XHRcdFx0dGhpcy5wcm9wcy5vbkRhdGVQaWNrKHNlbGVjdGVkRGF0ZVN0cik7XG5cdFx0XHR9XG5cdFx0XHRjbG9zZVBpY2tlcigpO1xuXHRcdH0pO1xuXHR9XG5cblx0Ly8gXHU3NTFGXHU2MjEwXHU1RTc0XHU0RUZEXHU2NTcwXHU3RUM0XG5cdHByaXZhdGUgZ2VuZXJhdGVZZWFycyhjdXJyZW50WWVhcjogbnVtYmVyKTogbnVtYmVyW10ge1xuXHRcdGNvbnN0IG1pblllYXIgPSB0aGlzLnByb3BzLm1pblllYXIgfHwgKGN1cnJlbnRZZWFyIC0gNSk7XG5cdFx0Y29uc3QgbWF4WWVhciA9IHRoaXMucHJvcHMubWF4WWVhciB8fCAoY3VycmVudFllYXIgKyA1KTtcblx0XHRcblx0XHRjb25zdCB5ZWFycyA9IFtdO1xuXHRcdGZvciAobGV0IGkgPSBtaW5ZZWFyOyBpIDw9IG1heFllYXI7IGkrKykge1xuXHRcdFx0eWVhcnMucHVzaChpKTtcblx0XHR9XG5cdFx0cmV0dXJuIHllYXJzO1xuXHR9XG5cblx0Ly8gXHU3NTFGXHU2MjEwXHU2NzA4XHU0RUZEXHU2NTcwXHU3RUM0XG5cdHByaXZhdGUgZ2VuZXJhdGVNb250aHMoKTogbnVtYmVyW10ge1xuXHRcdHJldHVybiBBcnJheS5mcm9tKHsgbGVuZ3RoOiAxMiB9LCAoXywgaSkgPT4gaSArIDEpO1xuXHR9XG5cblx0Ly8gXHU3NTFGXHU2MjEwXHU2NUU1XHU2NzFGXHU2NTcwXHU3RUM0XG5cdHByaXZhdGUgZ2VuZXJhdGVEYXlzKHllYXI6IG51bWJlciwgbW9udGg6IG51bWJlcik6IG51bWJlcltdIHtcblx0XHRjb25zdCBkYXlzSW5Nb250aCA9IG5ldyBEYXRlKHllYXIsIG1vbnRoLCAwKS5nZXREYXRlKCk7XG5cdFx0cmV0dXJuIEFycmF5LmZyb20oeyBsZW5ndGg6IGRheXNJbk1vbnRoIH0sIChfLCBpKSA9PiBpICsgMSk7XG5cdH1cblxuXHQvLyBcdTUyMUJcdTVFRkFcdTZFREFcdThGNkVcdTUyMTdcblx0cHJpdmF0ZSBjcmVhdGVXaGVlbENvbHVtbihzdWZmaXg6IHN0cmluZywgdmFsdWVzOiBudW1iZXJbXSwgc2VsZWN0ZWRWYWx1ZTogbnVtYmVyLCBvbkNoYW5nZT86ICh2YWx1ZTogbnVtYmVyKSA9PiB2b2lkLCBpc0luZmluaXRlOiBib29sZWFuID0gZmFsc2UpOiB7IGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBzZWxlY3RlZFZhbHVlOiBudW1iZXIgfSB7XG5cdFx0Y29uc3QgY29sdW1uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0Y29sdW1uLmNsYXNzTmFtZSA9ICdkYXRlLXdoZWVsLWNvbHVtbic7XG5cdFx0XG5cdFx0Y29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0Y29udGFpbmVyLmNsYXNzTmFtZSA9ICdkYXRlLXdoZWVsLWl0ZW1zJztcblx0XHRcblx0XHRsZXQgc2VsZWN0ZWRJbmRleCA9IHZhbHVlcy5pbmRleE9mKHNlbGVjdGVkVmFsdWUpO1xuXHRcdGxldCBjdXJyZW50U2VsZWN0ZWRWYWx1ZSA9IHNlbGVjdGVkVmFsdWU7XG5cdFx0Y29uc3QgYXBpID0geyBlbGVtZW50OiBjb2x1bW4sIHNlbGVjdGVkVmFsdWU6IGN1cnJlbnRTZWxlY3RlZFZhbHVlIH07XG5cdFx0Y29uc3QgaXRlbUhlaWdodCA9IDQwOyAvLyBDU1NcdTRFMkRcdTVCOUFcdTRFNDlcdTc2ODRpdGVtXHU5QUQ4XHU1RUE2XG5cdFx0XG5cdFx0aWYgKGlzSW5maW5pdGUpIHtcblx0XHRcdC8vIFx1NUZBQVx1NzNBRlx1NkVEQVx1NTJBOFx1RkYxQVx1NTIxQlx1NUVGQVx1NTkxQVx1NEUyQVx1OTFDRFx1NTkwRFx1NzY4NFx1OTAwOVx1OTg3OVx1OTg3OVxuXHRcdFx0Y29uc3QgcmVwZWF0Q291bnQgPSA1OyAvLyBcdTkxQ0RcdTU5MEQ1XHU2QjIxXHVGRjBDXHU2MDNCXHU1MTcxMTVcdTdFQzRcdTY1NzBcdTYzNkVcblx0XHRcdGNvbnN0IHRvdGFsSXRlbXMgPSB2YWx1ZXMubGVuZ3RoICogcmVwZWF0Q291bnQ7XG5cdFx0XHRcblx0XHRcdC8vIFx1OEJBMVx1N0I5N1x1NTIxRFx1NTlDQlx1NkVEQVx1NTJBOFx1NEY0RFx1N0Y2RVx1RkYwOFx1OEJBOVx1OTAwOVx1NEUyRFx1OTg3OVx1NTcyOFx1NEUyRFx1OTVGNFx1RkYwQ1x1NUU3Nlx1Nzg2RVx1NEZERFx1NjcwOVx1OERCM1x1NTkxRlx1NzY4NFx1NEUwQVx1NEUwQlx1NkVEQVx1NTJBOFx1N0E3QVx1OTVGNFx1RkYwOVxuXHRcdFx0Ly8gXHU0RjdGXHU3NTI4XHU0RTJEXHU5NUY0XHU3RUM0XHVGRjA4XHU3QjJDM1x1N0VDNFx1RkYwQ1x1N0QyMlx1NUYxNVx1NEUzQTJcdUZGMDlcdTRGNUNcdTRFM0FcdThENzdcdTU5Q0JcdTRGNERcdTdGNkVcblx0XHRcdGNvbnN0IG1pZGRsZUdyb3VwSW5kZXggPSAyOyAvLyBcdTdCMkMzXHU3RUM0XHVGRjA4MCwxLDIsMyw0XHU0RTJEXHU3Njg0Mlx1RkYwOVxuXHRcdFx0Y29uc3QgaW5pdGlhbFNjcm9sbFRvcCA9IG1pZGRsZUdyb3VwSW5kZXggKiB2YWx1ZXMubGVuZ3RoICogaXRlbUhlaWdodCArIHNlbGVjdGVkSW5kZXggKiBpdGVtSGVpZ2h0O1xuXHRcdFx0XG5cdFx0XHQvLyBcdTUyMUJcdTVFRkFcdTkxQ0RcdTU5MERcdTc2ODRcdTkwMDlcdTk4NzlcdTk4Nzlcblx0XHRcdGZvciAobGV0IHJlcGVhdCA9IDA7IHJlcGVhdCA8IHJlcGVhdENvdW50OyByZXBlYXQrKykge1xuXHRcdFx0XHR2YWx1ZXMuZm9yRWFjaCgodmFsdWUsIGluZGV4KSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgaXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdFx0XHRcdGl0ZW0uY2xhc3NOYW1lID0gJ2RhdGUtd2hlZWwtaXRlbSc7XG5cdFx0XHRcdFx0aXRlbS50ZXh0Q29udGVudCA9IGAke3ZhbHVlLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX0ke3N1ZmZpeH1gO1xuXHRcdFx0XHRcdGl0ZW0uZGF0YXNldC52YWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCk7XG5cdFx0XHRcdFx0aXRlbS5kYXRhc2V0LmluZGV4ID0gKHJlcGVhdCAqIHZhbHVlcy5sZW5ndGggKyBpbmRleCkudG9TdHJpbmcoKTtcblx0XHRcdFx0XHRpdGVtLmRhdGFzZXQucmVhbFZhbHVlID0gdmFsdWUudG9TdHJpbmcoKTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRjb250YWluZXIuYXBwZW5kQ2hpbGQoaXRlbSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHQvLyBcdThCQkVcdTdGNkVcdTVCQjlcdTU2NjhcdTlBRDhcdTVFQTZcdTU0OENcdTUyMURcdTU5Q0JcdTZFREFcdTUyQThcdTRGNERcdTdGNkVcblx0XHRcdGNvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSBgJHt0b3RhbEl0ZW1zICogaXRlbUhlaWdodH1weGA7XG5cdFx0XHQvLyBcdTUxNDhcdTY4MDdcdThCQjBcdTkwMDlcdTRFMkRcdTk4NzlcdUZGMDhcdTRFMkRcdTk1RjRcdTdFQzRcdTVCRjlcdTVFOTRcdTdEMjJcdTVGMTVcdUZGMDlcblx0XHRcdGNvbnN0IGluaXRpYWxJdGVtSW5kZXggPSBtaWRkbGVHcm91cEluZGV4ICogdmFsdWVzLmxlbmd0aCArIHNlbGVjdGVkSW5kZXg7XG5cdFx0XHRjb25zdCBpdGVtcyA9IEFycmF5LmZyb20oY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5kYXRlLXdoZWVsLWl0ZW0nKSkgYXMgSFRNTEVsZW1lbnRbXTtcblx0XHRcdGlmIChpdGVtc1tpbml0aWFsSXRlbUluZGV4XSkge1xuXHRcdFx0XHRpdGVtcy5mb3JFYWNoKChlbCwgaWR4KSA9PiBlbC5jbGFzc0xpc3QudG9nZ2xlKCdzZWxlY3RlZCcsIGlkeCA9PT0gaW5pdGlhbEl0ZW1JbmRleCkpO1xuXHRcdFx0fVxuXHRcdFx0Ly8gXHU3QjQ5XHU0RTAwXHU1RTI3XHU1MThEXHU4QkJFXHU3RjZFc2Nyb2xsVG9wXHVGRjBDXHU5MDdGXHU1MTREXHU5OTk2XHU2QjIxXHU2NUUwXHU2Q0Q1XHU1NDExXHU0RTBBXHU2RURBXHU3Njg0XHU5NUVFXHU5ODk4XG5cdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuXHRcdFx0XHRjb250YWluZXIuc2Nyb2xsVG9wID0gaW5pdGlhbFNjcm9sbFRvcDtcblx0XHRcdH0pO1xuXHRcdFx0XG5cdFx0XHQvLyBcdTZFREFcdTUyQThcdTRFOEJcdTRFRjZcdTU5MDRcdTc0MDZcdUZGMDhcdTVGQUFcdTczQUZcdTZFREFcdTUyQThcdUZGMDlcblx0XHRcdGxldCBpc1Njcm9sbGluZyA9IGZhbHNlO1xuXHRcdFx0Y29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsICgpID0+IHtcblx0XHRcdFx0aWYgKGlzU2Nyb2xsaW5nKSByZXR1cm47XG5cdFx0XHRcdFxuXHRcdFx0XHRjb25zdCBzY3JvbGxUb3AgPSBjb250YWluZXIuc2Nyb2xsVG9wO1xuXHRcdFx0XHRjb25zdCBjdXJyZW50SW5kZXggPSBNYXRoLnJvdW5kKHNjcm9sbFRvcCAvIGl0ZW1IZWlnaHQpO1xuXHRcdFx0XHRjb25zdCByZWFsSW5kZXggPSAoKGN1cnJlbnRJbmRleCAlIHZhbHVlcy5sZW5ndGgpICsgdmFsdWVzLmxlbmd0aCkgJSB2YWx1ZXMubGVuZ3RoO1xuXHRcdFx0XHRjb25zdCByZWFsVmFsdWUgPSB2YWx1ZXNbcmVhbEluZGV4XTtcblx0XHRcdFx0XG5cdFx0XHRcdC8vIFx1NjZGNFx1NjVCMFx1OTAwOVx1NEUyRFx1NzJCNlx1NjAwMVxuXHRcdFx0XHRjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmRhdGUtd2hlZWwtaXRlbScpLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgaXRlbVJlYWxJbmRleCA9IGluZGV4ICUgdmFsdWVzLmxlbmd0aDtcblx0XHRcdFx0XHRpdGVtLmNsYXNzTGlzdC50b2dnbGUoJ3NlbGVjdGVkJywgaXRlbVJlYWxJbmRleCA9PT0gcmVhbEluZGV4KTtcblx0XHRcdFx0fSk7XG5cdFx0XHRcdFxuXHRcdFx0XHRzZWxlY3RlZEluZGV4ID0gcmVhbEluZGV4O1xuXHRcdFx0XHRjdXJyZW50U2VsZWN0ZWRWYWx1ZSA9IHJlYWxWYWx1ZTtcblx0XHRcdFx0YXBpLnNlbGVjdGVkVmFsdWUgPSByZWFsVmFsdWU7XG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBcdTg5RTZcdTUzRDFcdTUzRDhcdTUzMTZcdTU2REVcdThDMDNcblx0XHRcdFx0aWYgKG9uQ2hhbmdlKSB7XG5cdFx0XHRcdFx0b25DaGFuZ2UoY3VycmVudFNlbGVjdGVkVmFsdWUpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBcdTVGQUFcdTczQUZcdTZFREFcdTUyQThcdTkwM0JcdThGOTFcdUZGMUFcdTVGNTNcdTZFREFcdTUyQThcdTUyMzBcdThGQjlcdTc1NENcdTY1RjZcdUZGMENcdTkxQ0RcdTdGNkVcdTRGNERcdTdGNkVcblx0XHRcdFx0Y29uc3QgbWF4U2Nyb2xsVG9wID0gKHJlcGVhdENvdW50IC0gMSkgKiB2YWx1ZXMubGVuZ3RoICogaXRlbUhlaWdodDtcblx0XHRcdFx0Y29uc3QgbWluU2Nyb2xsVG9wID0gdmFsdWVzLmxlbmd0aCAqIGl0ZW1IZWlnaHQ7XG5cdFx0XHRcdFxuXHRcdFx0XHRpZiAoc2Nyb2xsVG9wID49IG1heFNjcm9sbFRvcCkge1xuXHRcdFx0XHRcdGlzU2Nyb2xsaW5nID0gdHJ1ZTtcblx0XHRcdFx0XHQvLyBcdTRFQ0VcdTdCMkM1XHU3RUM0XHU4REYzXHU4RjZDXHU1MjMwXHU3QjJDMlx1N0VDNFx1RkYwOFx1NEZERFx1NjMwMVx1NzZGOFx1NUJGOVx1NEY0RFx1N0Y2RVx1RkYwOVxuXHRcdFx0XHRcdGNvbnN0IG9mZnNldCA9IHNjcm9sbFRvcCAtIG1heFNjcm9sbFRvcDtcblx0XHRcdFx0XHRjb250YWluZXIuc2Nyb2xsVG9wID0gdmFsdWVzLmxlbmd0aCAqIGl0ZW1IZWlnaHQgKyBvZmZzZXQ7XG5cdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7IGlzU2Nyb2xsaW5nID0gZmFsc2U7IH0sIDUwKTtcblx0XHRcdFx0fSBlbHNlIGlmIChzY3JvbGxUb3AgPD0gMCkge1xuXHRcdFx0XHRcdGlzU2Nyb2xsaW5nID0gdHJ1ZTtcblx0XHRcdFx0XHQvLyBcdTRFQ0VcdTdCMkMxXHU3RUM0XHU4REYzXHU4RjZDXHU1MjMwXHU3QjJDNFx1N0VDNFx1RkYwOFx1NEZERFx1NjMwMVx1NzZGOFx1NUJGOVx1NEY0RFx1N0Y2RVx1RkYwOVxuXHRcdFx0XHRcdGNvbnN0IG9mZnNldCA9IHNjcm9sbFRvcDtcblx0XHRcdFx0XHRjb250YWluZXIuc2Nyb2xsVG9wID0gKHJlcGVhdENvdW50IC0gMikgKiB2YWx1ZXMubGVuZ3RoICogaXRlbUhlaWdodCArIG9mZnNldDtcblx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHsgaXNTY3JvbGxpbmcgPSBmYWxzZTsgfSwgNTApO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdFx0Ly8gXHU1MTQxXHU4QkI4XHU3NkY0XHU2M0E1XHU3MEI5XHU1MUZCXHU5MDA5XHU2MkU5XG5cdFx0XHRjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXYpID0+IHtcblx0XHRcdFx0Y29uc3QgdGFyZ2V0ID0gZXYudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xuXHRcdFx0XHRjb25zdCBpdGVtRWwgPSB0YXJnZXQgJiYgdGFyZ2V0LmNsb3Nlc3QgPyAodGFyZ2V0LmNsb3Nlc3QoJy5kYXRlLXdoZWVsLWl0ZW0nKSBhcyBIVE1MRWxlbWVudCB8IG51bGwpIDogbnVsbDtcblx0XHRcdFx0aWYgKCFpdGVtRWwpIHJldHVybjtcblx0XHRcdFx0Y29uc3QgY2xpY2tlZEluZGV4ID0gTnVtYmVyKGl0ZW1FbC5kYXRhc2V0LmluZGV4IHx8ICcwJyk7XG5cdFx0XHRcdGNvbnN0IHJlYWxJbmRleCA9ICgoY2xpY2tlZEluZGV4ICUgdmFsdWVzLmxlbmd0aCkgKyB2YWx1ZXMubGVuZ3RoKSAlIHZhbHVlcy5sZW5ndGg7XG5cdFx0XHRcdGNvbnN0IG1pZGRsZUluZGV4ID0gbWlkZGxlR3JvdXBJbmRleCAqIHZhbHVlcy5sZW5ndGggKyByZWFsSW5kZXg7XG5cdFx0XHRcdGNvbnRhaW5lci5zY3JvbGxUb3AgPSBtaWRkbGVJbmRleCAqIGl0ZW1IZWlnaHQ7XG5cdFx0XHRcdHNlbGVjdGVkSW5kZXggPSByZWFsSW5kZXg7XG5cdFx0XHRcdGN1cnJlbnRTZWxlY3RlZFZhbHVlID0gdmFsdWVzW3JlYWxJbmRleF07XG5cdFx0XHRcdGFwaS5zZWxlY3RlZFZhbHVlID0gY3VycmVudFNlbGVjdGVkVmFsdWU7XG5cdFx0XHRcdGlmIChvbkNoYW5nZSkgb25DaGFuZ2UoY3VycmVudFNlbGVjdGVkVmFsdWUpO1xuXHRcdFx0fSk7XG5cdFx0XHRcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gXHU2NjZFXHU5MDFBXHU2RURBXHU1MkE4XHVGRjFBXHU1RTc0XHU0RUZEXHU1MjE3XHU0RTBEXHU5NzAwXHU4OTgxXHU1RkFBXHU3M0FGXG5cdFx0XHR2YWx1ZXMuZm9yRWFjaCgodmFsdWUsIGluZGV4KSA9PiB7XG5cdFx0XHRcdGNvbnN0IGl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHRcdFx0aXRlbS5jbGFzc05hbWUgPSAnZGF0ZS13aGVlbC1pdGVtJztcblx0XHRcdFx0aXRlbS50ZXh0Q29udGVudCA9IGAke3ZhbHVlLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX0ke3N1ZmZpeH1gO1xuXHRcdFx0XHRpdGVtLmRhdGFzZXQudmFsdWUgPSB2YWx1ZS50b1N0cmluZygpO1xuXHRcdFx0XHRpdGVtLmRhdGFzZXQuaW5kZXggPSBpbmRleC50b1N0cmluZygpO1xuXHRcdFx0XHRcblx0XHRcdFx0aWYgKHZhbHVlID09PSBjdXJyZW50U2VsZWN0ZWRWYWx1ZSkge1xuXHRcdFx0XHRcdGl0ZW0uY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdFx0Y29udGFpbmVyLmFwcGVuZENoaWxkKGl0ZW0pO1xuXHRcdFx0fSk7XG5cdFx0XHRcblx0XHRcdC8vIFx1NkVEQVx1NTJBOFx1NEU4Qlx1NEVGNlx1NTkwNFx1NzQwNlx1RkYwOFx1NjY2RVx1OTAxQVx1NkVEQVx1NTJBOFx1RkYwOVxuXHRcdFx0Y29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsICgpID0+IHtcblx0XHRcdFx0Y29uc3Qgc2Nyb2xsVG9wID0gY29udGFpbmVyLnNjcm9sbFRvcDtcblx0XHRcdFx0Y29uc3QgbmV3SW5kZXggPSBNYXRoLnJvdW5kKHNjcm9sbFRvcCAvIGl0ZW1IZWlnaHQpO1xuXHRcdFx0XHRcblx0XHRcdFx0aWYgKG5ld0luZGV4ICE9PSBzZWxlY3RlZEluZGV4ICYmIG5ld0luZGV4ID49IDAgJiYgbmV3SW5kZXggPCB2YWx1ZXMubGVuZ3RoKSB7XG5cdFx0XHRcdFx0Ly8gXHU2NkY0XHU2NUIwXHU5MDA5XHU0RTJEXHU3MkI2XHU2MDAxXG5cdFx0XHRcdFx0Y29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5kYXRlLXdoZWVsLWl0ZW0nKS5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xuXHRcdFx0XHRcdFx0aXRlbS5jbGFzc0xpc3QudG9nZ2xlKCdzZWxlY3RlZCcsIGluZGV4ID09PSBuZXdJbmRleCk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0c2VsZWN0ZWRJbmRleCA9IG5ld0luZGV4O1xuXHRcdFx0XHRcdGN1cnJlbnRTZWxlY3RlZFZhbHVlID0gdmFsdWVzW25ld0luZGV4XTtcblx0XHRcdFx0XHRhcGkuc2VsZWN0ZWRWYWx1ZSA9IGN1cnJlbnRTZWxlY3RlZFZhbHVlO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdC8vIFx1ODlFNlx1NTNEMVx1NTNEOFx1NTMxNlx1NTZERVx1OEMwM1xuXHRcdFx0XHRcdGlmIChvbkNoYW5nZSkge1xuXHRcdFx0XHRcdFx0b25DaGFuZ2UoY3VycmVudFNlbGVjdGVkVmFsdWUpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHRcdC8vIFx1NTE0MVx1OEJCOFx1NzZGNFx1NjNBNVx1NzBCOVx1NTFGQlx1OTAwOVx1NjJFOVxuXHRcdFx0Y29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2KSA9PiB7XG5cdFx0XHRcdGNvbnN0IHRhcmdldCA9IGV2LnRhcmdldCBhcyBIVE1MRWxlbWVudDtcblx0XHRcdFx0Y29uc3QgaXRlbUVsID0gdGFyZ2V0ICYmIHRhcmdldC5jbG9zZXN0ID8gKHRhcmdldC5jbG9zZXN0KCcuZGF0ZS13aGVlbC1pdGVtJykgYXMgSFRNTEVsZW1lbnQgfCBudWxsKSA6IG51bGw7XG5cdFx0XHRcdGlmICghaXRlbUVsKSByZXR1cm47XG5cdFx0XHRcdGNvbnN0IGlkeCA9IE51bWJlcihpdGVtRWwuZGF0YXNldC5pbmRleCB8fCAnMCcpO1xuXHRcdFx0XHQvLyBcdTdBQ0JcdTUzNzNcdTY2RjRcdTY1QjBcdTkwMDlcdTRFMkRcdTY4MzdcdTVGMEZcblx0XHRcdFx0Y29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5kYXRlLXdoZWVsLWl0ZW0nKS5mb3JFYWNoKChlbCwgaSkgPT4ge1xuXHRcdFx0XHRcdGVsLmNsYXNzTGlzdC50b2dnbGUoJ3NlbGVjdGVkJywgaSA9PT0gaWR4KTtcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGNvbnRhaW5lci5zY3JvbGxUb3AgPSBpZHggKiBpdGVtSGVpZ2h0O1xuXHRcdFx0XHRzZWxlY3RlZEluZGV4ID0gaWR4O1xuXHRcdFx0XHRjdXJyZW50U2VsZWN0ZWRWYWx1ZSA9IHZhbHVlc1tpZHhdO1xuXHRcdFx0XHRhcGkuc2VsZWN0ZWRWYWx1ZSA9IGN1cnJlbnRTZWxlY3RlZFZhbHVlO1xuXHRcdFx0XHRpZiAob25DaGFuZ2UpIG9uQ2hhbmdlKGN1cnJlbnRTZWxlY3RlZFZhbHVlKTtcblx0XHRcdH0pO1xuXHRcdFx0XG5cdFx0XHQvLyBcdTUyMURcdTU5Q0JcdTZFREFcdTUyQThcdTUyMzBcdTkwMDlcdTRFMkRcdTRGNERcdTdGNkVcblx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRjb250YWluZXIuc2Nyb2xsVG9wID0gc2VsZWN0ZWRJbmRleCAqIGl0ZW1IZWlnaHQ7XG5cdFx0XHR9LCAwKTtcblx0XHR9XG5cdFx0XG5cdFx0Y29sdW1uLmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XG5cdFx0XG5cdFx0cmV0dXJuIGFwaTtcblx0fVxuXG5cdC8vIFx1NjZGNFx1NjVCMFx1NjVFNVx1NjcxRlx1NTIxN1xuXHRwcml2YXRlIHVwZGF0ZURheXNDb2x1bW4oZGF5Q29sdW1uOiB7IGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBzZWxlY3RlZFZhbHVlOiBudW1iZXIgfSwgeWVhcjogbnVtYmVyLCBtb250aDogbnVtYmVyKTogdm9pZCB7XG5cdFx0Y29uc3QgY29udGFpbmVyID0gZGF5Q29sdW1uLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmRhdGUtd2hlZWwtaXRlbXMnKSBhcyBIVE1MRWxlbWVudDtcblx0XHRjb25zdCBjdXJyZW50RGF5ID0gZGF5Q29sdW1uLnNlbGVjdGVkVmFsdWU7XG5cdFx0Y29uc3QgbmV3RGF5cyA9IHRoaXMuZ2VuZXJhdGVEYXlzKHllYXIsIG1vbnRoKTtcblx0XHRcblx0XHQvLyBcdTZFMDVcdTdBN0FcdTczQjBcdTY3MDlcdTUxODVcdTVCQjlcdUZGMDhcdTkwN0ZcdTUxNERcdTRGN0ZcdTc1MjggaW5uZXJIVE1MXHVGRjA5XG5cdFx0aWYgKChjb250YWluZXIgYXMgYW55KS5lbXB0eSkge1xuXHRcdFx0KGNvbnRhaW5lciBhcyBhbnkpLmVtcHR5KCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHdoaWxlIChjb250YWluZXIuZmlyc3RDaGlsZCkgY29udGFpbmVyLnJlbW92ZUNoaWxkKGNvbnRhaW5lci5maXJzdENoaWxkKTtcblx0XHR9XG5cdFx0XG5cdFx0Ly8gXHU5MUNEXHU2NUIwXHU1MjFCXHU1RUZBXHU2NUU1XHU2NzFGXHU5MDA5XHU5ODc5XHVGRjA4XHU1RkFBXHU3M0FGXHU2RURBXHU1MkE4XHVGRjA5XG5cdFx0Y29uc3QgbWF4RGF5ID0gTWF0aC5tYXgoLi4ubmV3RGF5cyk7XG5cdFx0Y29uc3Qgc2VsZWN0ZWREYXkgPSBNYXRoLm1pbihjdXJyZW50RGF5LCBtYXhEYXkpO1xuXHRcdGNvbnN0IHNlbGVjdGVkSW5kZXggPSBuZXdEYXlzLmluZGV4T2Yoc2VsZWN0ZWREYXkpO1xuXHRcdGNvbnN0IGl0ZW1IZWlnaHQgPSA0MDtcblx0XHRcblx0XHQvLyBcdTVGQUFcdTczQUZcdTZFREFcdTUyQThcdUZGMUFcdTUyMUJcdTVFRkFcdTU5MUFcdTRFMkFcdTkxQ0RcdTU5MERcdTc2ODRcdTkwMDlcdTk4NzlcdTk4Nzlcblx0XHRjb25zdCByZXBlYXRDb3VudCA9IDU7IC8vIFx1OTFDRFx1NTkwRDVcdTZCMjFcblx0XHRjb25zdCB0b3RhbEl0ZW1zID0gbmV3RGF5cy5sZW5ndGggKiByZXBlYXRDb3VudDtcblx0XHRcblx0XHQvLyBcdThCQTFcdTdCOTdcdTUyMURcdTU5Q0JcdTZFREFcdTUyQThcdTRGNERcdTdGNkVcdUZGMDhcdThCQTlcdTkwMDlcdTRFMkRcdTk4NzlcdTU3MjhcdTRFMkRcdTk1RjRcdUZGMENcdTRGN0ZcdTc1MjhcdTdCMkMzXHU3RUM0XHU0RjVDXHU0RTNBXHU4RDc3XHU1OUNCXHU0RjREXHU3RjZFXHVGRjA5XG5cdFx0Y29uc3QgbWlkZGxlR3JvdXBJbmRleCA9IDI7IC8vIFx1N0IyQzNcdTdFQzRcdUZGMDgwLDEsMiwzLDRcdTRFMkRcdTc2ODQyXHVGRjA5XG5cdFx0Y29uc3QgaW5pdGlhbFNjcm9sbFRvcCA9IG1pZGRsZUdyb3VwSW5kZXggKiBuZXdEYXlzLmxlbmd0aCAqIGl0ZW1IZWlnaHQgKyBzZWxlY3RlZEluZGV4ICogaXRlbUhlaWdodDtcblx0XHRcblx0XHQvLyBcdTUyMUJcdTVFRkFcdTkxQ0RcdTU5MERcdTc2ODRcdTY1RTVcdTY3MUZcdTkwMDlcdTk4NzlcdTk4Nzlcblx0XHRmb3IgKGxldCByZXBlYXQgPSAwOyByZXBlYXQgPCByZXBlYXRDb3VudDsgcmVwZWF0KyspIHtcblx0XHRcdG5ld0RheXMuZm9yRWFjaCgoZGF5LCBpbmRleCkgPT4ge1xuXHRcdFx0XHRjb25zdCBpdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0XHRcdGl0ZW0uY2xhc3NOYW1lID0gJ2RhdGUtd2hlZWwtaXRlbSc7XG5cdFx0XHRcdGl0ZW0udGV4dENvbnRlbnQgPSBgJHtkYXkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfVx1NjVFNWA7XG5cdFx0XHRcdGl0ZW0uZGF0YXNldC52YWx1ZSA9IGRheS50b1N0cmluZygpO1xuXHRcdFx0XHRpdGVtLmRhdGFzZXQuaW5kZXggPSAocmVwZWF0ICogbmV3RGF5cy5sZW5ndGggKyBpbmRleCkudG9TdHJpbmcoKTtcblx0XHRcdFx0aXRlbS5kYXRhc2V0LnJlYWxWYWx1ZSA9IGRheS50b1N0cmluZygpO1xuXHRcdFx0XHRcblx0XHRcdFx0Y29udGFpbmVyLmFwcGVuZENoaWxkKGl0ZW0pO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdFxuXHRcdC8vIFx1OEJCRVx1N0Y2RVx1NUJCOVx1NTY2OFx1OUFEOFx1NUVBNlx1NTQ4Q1x1NTIxRFx1NTlDQlx1NkVEQVx1NTJBOFx1NEY0RFx1N0Y2RVxuXHRcdGNvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSBgJHt0b3RhbEl0ZW1zICogaXRlbUhlaWdodH1weGA7XG5cdFx0Ly8gXHU1MTQ4XHU2ODA3XHU4QkIwXHU5MDA5XHU0RTJEXHU5ODc5XHVGRjA4XHU0RTJEXHU5NUY0XHU3RUM0XHU1QkY5XHU1RTk0XHU3RDIyXHU1RjE1XHVGRjA5XG5cdFx0Y29uc3QgaW5pdGlhbEl0ZW1JbmRleERheSA9IG1pZGRsZUdyb3VwSW5kZXggKiBuZXdEYXlzLmxlbmd0aCArIHNlbGVjdGVkSW5kZXg7XG5cdFx0Y29uc3QgZGF5SXRlbXMgPSBBcnJheS5mcm9tKGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuZGF0ZS13aGVlbC1pdGVtJykpIGFzIEhUTUxFbGVtZW50W107XG5cdFx0aWYgKGRheUl0ZW1zW2luaXRpYWxJdGVtSW5kZXhEYXldKSB7XG5cdFx0XHRkYXlJdGVtcy5mb3JFYWNoKChlbCwgaWR4KSA9PiBlbC5jbGFzc0xpc3QudG9nZ2xlKCdzZWxlY3RlZCcsIGlkeCA9PT0gaW5pdGlhbEl0ZW1JbmRleERheSkpO1xuXHRcdH1cblx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuXHRcdFx0Y29udGFpbmVyLnNjcm9sbFRvcCA9IGluaXRpYWxTY3JvbGxUb3A7XG5cdFx0fSk7XG5cdFx0XG5cdFx0Ly8gXHU2NkY0XHU2NUIwXHU5MDA5XHU0RTJEXHU1MDNDXG5cdFx0ZGF5Q29sdW1uLnNlbGVjdGVkVmFsdWUgPSBzZWxlY3RlZERheTtcblx0XHRcblx0XHQvLyBcdTkxQ0RcdTY1QjBcdTdFRDFcdTVCOUFcdTZFREFcdTUyQThcdTRFOEJcdTRFRjZcdUZGMDhcdTVGQUFcdTczQUZcdTZFREFcdTUyQThcdUZGMDlcblx0XHRsZXQgaXNTY3JvbGxpbmcgPSBmYWxzZTtcblx0XHRjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgKCkgPT4ge1xuXHRcdFx0aWYgKGlzU2Nyb2xsaW5nKSByZXR1cm47XG5cdFx0XHRcblx0XHRcdGNvbnN0IHNjcm9sbFRvcCA9IGNvbnRhaW5lci5zY3JvbGxUb3A7XG5cdFx0XHRjb25zdCBjdXJyZW50SW5kZXggPSBNYXRoLnJvdW5kKHNjcm9sbFRvcCAvIGl0ZW1IZWlnaHQpO1xuXHRcdFx0Y29uc3QgcmVhbEluZGV4ID0gY3VycmVudEluZGV4ICUgbmV3RGF5cy5sZW5ndGg7XG5cdFx0XHRjb25zdCByZWFsVmFsdWUgPSBuZXdEYXlzW3JlYWxJbmRleF07XG5cdFx0XHRcblx0XHRcdC8vIFx1NjZGNFx1NjVCMFx1OTAwOVx1NEUyRFx1NzJCNlx1NjAwMVxuXHRcdFx0Y29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5kYXRlLXdoZWVsLWl0ZW0nKS5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xuXHRcdFx0XHRjb25zdCBpdGVtUmVhbEluZGV4ID0gaW5kZXggJSBuZXdEYXlzLmxlbmd0aDtcblx0XHRcdFx0aXRlbS5jbGFzc0xpc3QudG9nZ2xlKCdzZWxlY3RlZCcsIGl0ZW1SZWFsSW5kZXggPT09IHJlYWxJbmRleCk7XG5cdFx0XHR9KTtcblx0XHRcdFxuXHRcdFx0ZGF5Q29sdW1uLnNlbGVjdGVkVmFsdWUgPSByZWFsVmFsdWU7XG5cdFx0XHRcblx0XHRcdC8vIFx1NUZBQVx1NzNBRlx1NkVEQVx1NTJBOFx1OTAzQlx1OEY5MVx1RkYxQVx1NUY1M1x1NkVEQVx1NTJBOFx1NTIzMFx1OEZCOVx1NzU0Q1x1NjVGNlx1RkYwQ1x1OTFDRFx1N0Y2RVx1NEY0RFx1N0Y2RVxuXHRcdFx0Y29uc3QgbWF4U2Nyb2xsVG9wID0gKHJlcGVhdENvdW50IC0gMSkgKiBuZXdEYXlzLmxlbmd0aCAqIGl0ZW1IZWlnaHQ7XG5cdFx0XHRjb25zdCBtaW5TY3JvbGxUb3AgPSBuZXdEYXlzLmxlbmd0aCAqIGl0ZW1IZWlnaHQ7XG5cdFx0XHRcblx0XHRcdGlmIChzY3JvbGxUb3AgPj0gbWF4U2Nyb2xsVG9wKSB7XG5cdFx0XHRcdGlzU2Nyb2xsaW5nID0gdHJ1ZTtcblx0XHRcdFx0Ly8gXHU0RUNFXHU3QjJDNVx1N0VDNFx1OERGM1x1OEY2Q1x1NTIzMFx1N0IyQzJcdTdFQzRcdUZGMDhcdTRGRERcdTYzMDFcdTc2RjhcdTVCRjlcdTRGNERcdTdGNkVcdUZGMDlcblx0XHRcdFx0Y29uc3Qgb2Zmc2V0ID0gc2Nyb2xsVG9wIC0gbWF4U2Nyb2xsVG9wO1xuXHRcdFx0XHRjb250YWluZXIuc2Nyb2xsVG9wID0gbmV3RGF5cy5sZW5ndGggKiBpdGVtSGVpZ2h0ICsgb2Zmc2V0O1xuXHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHsgaXNTY3JvbGxpbmcgPSBmYWxzZTsgfSwgNTApO1xuXHRcdFx0fSBlbHNlIGlmIChzY3JvbGxUb3AgPD0gMCkge1xuXHRcdFx0XHRpc1Njcm9sbGluZyA9IHRydWU7XG5cdFx0XHRcdC8vIFx1NEVDRVx1N0IyQzFcdTdFQzRcdThERjNcdThGNkNcdTUyMzBcdTdCMkM0XHU3RUM0XHVGRjA4XHU0RkREXHU2MzAxXHU3NkY4XHU1QkY5XHU0RjREXHU3RjZFXHVGRjA5XG5cdFx0XHRcdGNvbnN0IG9mZnNldCA9IHNjcm9sbFRvcDtcblx0XHRcdFx0Y29udGFpbmVyLnNjcm9sbFRvcCA9IChyZXBlYXRDb3VudCAtIDIpICogbmV3RGF5cy5sZW5ndGggKiBpdGVtSGVpZ2h0ICsgb2Zmc2V0O1xuXHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHsgaXNTY3JvbGxpbmcgPSBmYWxzZTsgfSwgNTApO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG59XG4iLCAiaW1wb3J0IHsgQXBwLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgTGFjQ29zdFNldFBsdWdpbiBmcm9tICcuLi8uLi9tYWluJztcclxuaW1wb3J0IHsgQXNzZXRSZXBvc2l0b3J5IH0gZnJvbSAnLi4vLi4vcmVwb3NpdG9yaWVzL0Fzc2V0UmVwb3NpdG9yeSc7XHJcbmltcG9ydCB7IHQgfSBmcm9tICcuLi8uLi9pMThuJztcclxuXHJcbi8vIFx1OEJCRVx1N0Y2RVx1NjgwN1x1N0I3RVxyXG5leHBvcnQgY2xhc3MgTGFjQ29zdFNldFNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcclxuXHRwbHVnaW46IExhY0Nvc3RTZXRQbHVnaW47XHJcblxyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IExhY0Nvc3RTZXRQbHVnaW4pIHtcclxuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcclxuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG5cdH1cclxuXHJcblx0ZGlzcGxheSgpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XHJcblxyXG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcclxuXHJcblx0XHRjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6IHQoJ3NldHRpbmdzLnRpdGxlJykgfSk7XHJcblx0XHRcclxuXHRcdC8vIFx1MjAxNFx1MjAxNCBcdTY4M0NcdTVGMEZcdTRFMEVcdTc1MjhcdTZDRDVcdThCRjRcdTY2MEUgXHUyMDE0XHUyMDE0XHJcblx0XHRjb250YWluZXJFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogdCgnc2V0dGluZ3MuZ3VpZGUuMScpLCBjbHM6ICdzZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb24nIH0pO1xyXG5cdFx0Y29uc3QgZW50cnlFeGFtcGxlID0gdCgnc2V0dGluZ3MuZW50cnkuZXhhbXBsZScpO1xyXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoJ3ByZScsIHsgdGV4dDogZW50cnlFeGFtcGxlLCBjbHM6ICdzZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb24nIH0pO1xyXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IHQoJ3NldHRpbmdzLmFzc2V0LmRlc2MnKSwgY2xzOiAnc2V0dGluZy1pdGVtLWRlc2NyaXB0aW9uJyB9KTtcclxuXHRcdGNvbnN0IGFzc2V0RXhhbXBsZSA9IHQoJ3NldHRpbmdzLmFzc2V0LmV4YW1wbGUnKTtcclxuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdwcmUnLCB7IHRleHQ6IGFzc2V0RXhhbXBsZSwgY2xzOiAnc2V0dGluZy1pdGVtLWRlc2NyaXB0aW9uJyB9KTtcclxuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiB0KCdzZXR0aW5ncy51c2FnZScpLCBjbHM6ICdzZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb24nIH0pO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSh0KCdzZXR0aW5ncy5lbnRyeUZpbGUubmFtZScpKVxyXG5cdFx0XHQuc2V0RGVzYyh0KCdzZXR0aW5ncy5lbnRyeUZpbGUuZGVzYycpKVxyXG5cdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuXHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoJ0xhQy9Db3N0U2V0L2Nvc3RzZXQubWQnKVxyXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbnRyeUZpbGUgfHwgJ0xhQy9Db3N0U2V0L2Nvc3RzZXQubWQnKVxyXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmVudHJ5RmlsZSA9IHZhbHVlPy50cmltKCkgfHwgJ0xhQy9Db3N0U2V0L2Nvc3RzZXQubWQnO1xyXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHQvLyBcdTdBQ0JcdTUzNzNcdTc1MjhcdTY1QjBcdTc2ODRcdTUxNjVcdTUzRTNcdTY1ODdcdTRFRjZcdTkxQ0RcdTVFRkFcdTRFRDNcdTVFOTNcclxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLmFzc2V0UmVwb3NpdG9yeSA9IG5ldyBBc3NldFJlcG9zaXRvcnkodGhpcy5hcHAsIHRoaXMucGx1Z2luLnNldHRpbmdzLmVudHJ5RmlsZSk7XHJcblx0XHRcdFx0fSkpO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSh0KCdzZXR0aW5ncy5jb250ZXh0TWVudS5uYW1lJykpXHJcblx0XHRcdC5zZXREZXNjKHQoJ3NldHRpbmdzLmNvbnRleHRNZW51LmRlc2MnKSlcclxuXHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUNvbnRleHRNZW51KVxyXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUNvbnRleHRNZW51ID0gISF2YWx1ZTtcclxuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdH0pKTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUodCgnc2V0dGluZ3MuZGVmYXVsdFNvcnQubmFtZScpKVxyXG5cdFx0XHQuc2V0RGVzYyh0KCdzZXR0aW5ncy5kZWZhdWx0U29ydC5kZXNjJykpXHJcblx0XHRcdC5hZGREcm9wZG93bihkcm9wID0+IHtcclxuXHRcdFx0XHRkcm9wLmFkZE9wdGlvbignbm9uZScsIHQoJ3NldHRpbmdzLmRlZmF1bHRTb3J0Lm9wdGlvbi5ub25lJykpO1xyXG5cdFx0XHRcdGRyb3AuYWRkT3B0aW9uKCdkYWlseURlc2MnLCB0KCdzZXR0aW5ncy5kZWZhdWx0U29ydC5vcHRpb24uZGFpbHlEZXNjJykpO1xyXG5cdFx0XHRcdGRyb3AuYWRkT3B0aW9uKCdwcmljZURlc2MnLCB0KCdzZXR0aW5ncy5kZWZhdWx0U29ydC5vcHRpb24ucHJpY2VEZXNjJykpO1xyXG5cdFx0XHRcdGRyb3AuYWRkT3B0aW9uKCdkYXRlRGVzYycsIHQoJ3NldHRpbmdzLmRlZmF1bHRTb3J0Lm9wdGlvbi5kYXRlRGVzYycpKTtcclxuXHRcdFx0XHRkcm9wLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRTb3J0IHx8ICdub25lJyk7XHJcblx0XHRcdFx0ZHJvcC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdGNvbnN0IHYgPSAodmFsdWUgYXMgYW55KSBhcyAnbm9uZScgfCAnZGFpbHlEZXNjJyB8ICdwcmljZURlc2MnIHwgJ2RhdGVEZXNjJztcclxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRTb3J0ID0gdjtcclxuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUodCgnc2V0dGluZ3MuZGVmYXVsdEljb24ubmFtZScpKVxyXG5cdFx0XHQuc2V0RGVzYyh0KCdzZXR0aW5ncy5kZWZhdWx0SWNvbi5kZXNjJykpXHJcblx0XHRcdC5hZGRUZXh0KHRleHQgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IHNhbml0aXplVG9GaXJzdEVtb2ppID0gKGlucHV0OiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xyXG5cdFx0XHRcdFx0Y29uc3QgbSA9IChpbnB1dCB8fCAnJykubWF0Y2goL1tcXHVEODAwLVxcdURCRkZdW1xcdURDMDAtXFx1REZGRl0vKTtcclxuXHRcdFx0XHRcdHJldHVybiBtID8gbVswXSA6ICcnO1xyXG5cdFx0XHRcdH07XHJcblx0XHRcdFx0dGV4dFxyXG5cdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKHQoJ3NldHRpbmdzLmRlZmF1bHRJY29uLnBsYWNlaG9sZGVyJykpXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdEljb24pXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IGZpcnN0ID0gc2FuaXRpemVUb0ZpcnN0RW1vamkodmFsdWUpO1xyXG5cdFx0XHRcdFx0XHRpZiAoKHRleHQgYXMgYW55KS5pbnB1dEVsICYmICh0ZXh0IGFzIGFueSkuaW5wdXRFbC52YWx1ZSAhPT0gZmlyc3QpIHtcclxuXHRcdFx0XHRcdFx0XHQodGV4dCBhcyBhbnkpLmlucHV0RWwudmFsdWUgPSBmaXJzdDtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0SWNvbiA9IGZpcnN0O1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdGNvbnN0IGlucHV0RWwgPSAodGV4dCBhcyBhbnkpLmlucHV0RWwgYXMgSFRNTElucHV0RWxlbWVudDtcclxuXHRcdFx0XHRpZiAoaW5wdXRFbCkge1xyXG5cdFx0XHRcdFx0aW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKCdwYXN0ZScsICgpID0+IHtcclxuXHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgZmlyc3QgPSBzYW5pdGl6ZVRvRmlyc3RFbW9qaShpbnB1dEVsLnZhbHVlIHx8ICcnKTtcclxuXHRcdFx0XHRcdFx0XHRpZiAoaW5wdXRFbC52YWx1ZSAhPT0gZmlyc3QpIGlucHV0RWwudmFsdWUgPSBmaXJzdDtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0SWNvbiA9IGZpcnN0O1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHR9LCAwKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0Ly8gXHU4QkVEXHU4QTAwXHU4QkJFXHU3RjZFXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUodCgnc2V0dGluZ3MubG9jYWxlLm5hbWUnKSlcclxuXHRcdFx0LnNldERlc2ModCgnc2V0dGluZ3MubG9jYWxlLmRlc2MnKSlcclxuXHRcdFx0LmFkZERyb3Bkb3duKGRyb3AgPT4ge1xyXG5cdFx0XHRcdC8vIFx1OEJFRFx1OEEwMFx1OTAwOVx1OTg3OVx1NEY3Rlx1NzUyOFx1ODFFQVx1NjIxMVx1NjNDRlx1OEZGMFx1RkYxQVx1NEUyRFx1NjU4Ny9FbmdsaXNoXHJcblx0XHRcdFx0ZHJvcC5hZGRPcHRpb24oJ2F1dG8nLCB0KCdzZXR0aW5ncy5sb2NhbGUub3B0aW9uLmF1dG8nKSk7XHJcblx0XHRcdFx0ZHJvcC5hZGRPcHRpb24oJ3poJywgJ1x1NEUyRFx1NjU4NycpO1xyXG5cdFx0XHRcdGRyb3AuYWRkT3B0aW9uKCdlbicsICdFbmdsaXNoJyk7XHJcblx0XHRcdFx0ZHJvcC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5sb2NhbGUgfHwgJ2F1dG8nKTtcclxuXHRcdFx0XHRkcm9wLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubG9jYWxlID0gKHZhbHVlIGFzIGFueSk7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdC8vIFx1N0FDQlx1NTM3M1x1NTIzN1x1NjVCMFx1NUY1M1x1NTI0RFx1OEJCRVx1N0Y2RVx1OTg3NVx1RkYwQ1x1NUU5NFx1NzUyOFx1OEJFRFx1OEEwMFxyXG5cdFx0XHRcdFx0dGhpcy5kaXNwbGF5KCk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0pO1xyXG5cdH1cclxufVxyXG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUlPLFNBQVMsY0FBYyxRQUFnRDtBQUM3RSxNQUFJLENBQUMsVUFBVSxXQUFXLFFBQVE7QUFDakMsUUFBSTtBQUNILFlBQU0sUUFBUSxVQUFVLFlBQVksSUFBSSxZQUFZO0FBQ3BELGFBQU8sS0FBSyxXQUFXLElBQUksSUFBSSxPQUFPO0FBQUEsSUFDdkMsU0FBUyxHQUFQO0FBQ0QsYUFBTztBQUFBLElBQ1I7QUFBQSxFQUNEO0FBQ0EsU0FBTztBQUNSO0FBRU8sU0FBUyxVQUFVLFFBQTJDO0FBQ3BFLGtCQUFnQixjQUFjLE1BQWE7QUFDNUM7QUFFTyxTQUFTLG1CQUFnQztBQUMvQyxTQUFPO0FBQ1I7QUFtSUEsU0FBUyxXQUFXLE9BQWUsTUFBZ0Q7QUFDbEYsTUFBSSxDQUFDO0FBQU0sV0FBTztBQUNsQixTQUFPLE1BQU0sUUFBUSxjQUFjLENBQUMsSUFBSSxNQUFHO0FBM0o1QztBQTJKK0MsbUJBQU8sVUFBSyxDQUFDLE1BQU4sWUFBVyxFQUFFO0FBQUEsR0FBQztBQUNwRTtBQUVPLFNBQVMsRUFBRSxLQUFhLE1BQXdDLFFBQThCO0FBOUpyRztBQStKQyxRQUFNLE9BQU8sVUFBVTtBQUN2QixRQUFNLFFBQVMsS0FBYSxHQUFHO0FBQy9CLE1BQUksQ0FBQztBQUFPLFdBQU87QUFDbkIsUUFBTSxPQUFPLGlCQUFjLElBQUksTUFBbEIsWUFBdUIsTUFBTSxPQUE3QixZQUFtQztBQUNoRCxTQUFPLFdBQVcsS0FBSyxJQUFJO0FBQzVCO0FBcEtBLElBRUksZUF3QkU7QUExQk47QUFBQTtBQUVBLElBQUksZ0JBQTZCO0FBd0JqQyxJQUFNLE9BQWE7QUFBQTtBQUFBLE1BRWYsbUJBQW1CLEVBQUUsSUFBSSxRQUFLLElBQUksSUFBSTtBQUFBO0FBQUEsTUFFekMsa0JBQWtCLEVBQUUsSUFBSSxnQkFBTSxJQUFJLFVBQVU7QUFBQSxNQUM1QyxpQkFBaUIsRUFBRSxJQUFJLGdCQUFNLElBQUksU0FBUztBQUFBLE1BQzFDLGlCQUFpQixFQUFFLElBQUksZ0JBQU0sSUFBSSxTQUFTO0FBQUEsTUFDMUMsZUFBZSxFQUFFLElBQUksZ0JBQU0sSUFBSSxPQUFPO0FBQUEsTUFDdEMsZUFBZSxFQUFFLElBQUksZ0JBQU0sSUFBSSxPQUFPO0FBQUEsTUFDdEMsY0FBYyxFQUFFLElBQUksZ0JBQU0sSUFBSSxNQUFNO0FBQUEsTUFDcEMsaUJBQWlCLEVBQUUsSUFBSSxnQkFBTSxJQUFJLFNBQVM7QUFBQTtBQUFBLE1BRzFDLGlCQUFpQixFQUFFLElBQUksbUNBQW9CLElBQUksd0JBQXdCO0FBQUEsTUFDdkUsZ0JBQWdCLEVBQUUsSUFBSSxnQkFBTSxJQUFJLE9BQU87QUFBQSxNQUN2Qyx1QkFBdUI7QUFBQSxRQUN0QixJQUFJO0FBQUEsUUFDSixJQUFJO0FBQUEsTUFDTDtBQUFBLE1BQ0EscUJBQXFCLEVBQUUsSUFBSSxtQ0FBZSxJQUFJLHFCQUFxQjtBQUFBO0FBQUEsTUFHbkUsa0JBQWtCLEVBQUUsSUFBSSw0QkFBa0IsSUFBSSx1QkFBdUI7QUFBQSxNQUNyRSxvQkFBb0I7QUFBQSxRQUNuQixJQUFJO0FBQUEsUUFDSixJQUFJO0FBQUEsTUFDTDtBQUFBLE1BQ0EsMEJBQTBCO0FBQUEsUUFDekIsSUFBSTtBQUFBLFFBQ0osSUFBSTtBQUFBLE1BQ0w7QUFBQSxNQUNBLHVCQUF1QjtBQUFBLFFBQ3RCLElBQUk7QUFBQSxRQUNKLElBQUk7QUFBQSxNQUNMO0FBQUEsTUFDQSwwQkFBMEI7QUFBQSxRQUN6QixJQUFJO0FBQUEsUUFDSixJQUFJO0FBQUEsTUFDTDtBQUFBLE1BQ0Esa0JBQWtCO0FBQUEsUUFDakIsSUFBSTtBQUFBLFFBQ0osSUFBSTtBQUFBLE1BQ0w7QUFBQSxNQUNBLDJCQUEyQixFQUFFLElBQUksNEJBQVEsSUFBSSxhQUFhO0FBQUEsTUFDMUQsMkJBQTJCLEVBQUUsSUFBSSx5SEFBbUQsSUFBSSxnRUFBZ0U7QUFBQSxNQUN4Siw2QkFBNkIsRUFBRSxJQUFJLG9GQUE2QixJQUFJLDhDQUE4QztBQUFBLE1BQ2xILDZCQUE2QixFQUFFLElBQUksNEZBQTJCLElBQUksMkNBQTJDO0FBQUEsTUFDN0csNkJBQTZCLEVBQUUsSUFBSSw0QkFBUSxJQUFJLGVBQWU7QUFBQSxNQUM5RCw2QkFBNkIsRUFBRSxJQUFJLDRFQUFnQixJQUFJLHFDQUFxQztBQUFBLE1BQzVGLG9DQUFvQyxFQUFFLElBQUksNEJBQVEsSUFBSSxhQUFhO0FBQUEsTUFDbkUseUNBQXlDLEVBQUUsSUFBSSw0QkFBUSxJQUFJLGFBQWE7QUFBQSxNQUN4RSx5Q0FBeUMsRUFBRSxJQUFJLGdCQUFNLElBQUksUUFBUTtBQUFBLE1BQ2pFLHdDQUF3QyxFQUFFLElBQUksNEJBQVEsSUFBSSxnQkFBZ0I7QUFBQSxNQUMxRSw2QkFBNkIsRUFBRSxJQUFJLDRCQUFRLElBQUksZUFBZTtBQUFBLE1BQzlELDZCQUE2QixFQUFFLElBQUksMkZBQTBCLElBQUksa0RBQWtEO0FBQUEsTUFDbkgsb0NBQW9DLEVBQUUsSUFBSSxhQUFNLElBQUksWUFBSztBQUFBLE1BQ3pELHdCQUF3QixFQUFFLElBQUksZ0JBQU0sSUFBSSxXQUFXO0FBQUEsTUFDbkQsd0JBQXdCLEVBQUUsSUFBSSw0QkFBUSxJQUFJLHFCQUFxQjtBQUFBLE1BQy9ELCtCQUErQixFQUFFLElBQUksNEJBQVEsSUFBSSxPQUFPO0FBQUEsTUFDeEQsNkJBQTZCLEVBQUUsSUFBSSxnQkFBTSxJQUFJLFVBQVU7QUFBQSxNQUN2RCw2QkFBNkIsRUFBRSxJQUFJLGdCQUFNLElBQUksVUFBVTtBQUFBO0FBQUEsTUFHdkQsMEJBQTBCLEVBQUUsSUFBSSx3SEFBbUMsSUFBSSxrREFBa0Q7QUFBQSxNQUN6SCx5QkFBeUIsRUFBRSxJQUFJLDhDQUFXLElBQUkseUJBQXlCO0FBQUEsTUFDdkUsd0JBQXdCLEVBQUUsSUFBSSxnSEFBc0IsSUFBSSw0REFBNEQ7QUFBQSxNQUNwSCxjQUFjLEVBQUUsSUFBSSw0QkFBUSxJQUFJLFlBQVk7QUFBQSxNQUM1QyxjQUFjLEVBQUUsSUFBSSxnQkFBTSxJQUFJLFVBQVU7QUFBQSxNQUN4QyxpQkFBaUIsRUFBRSxJQUFJLDRCQUFhLElBQUksbUJBQW1CO0FBQUEsTUFDM0QsY0FBYyxFQUFFLElBQUksZ0JBQU0sSUFBSSxRQUFRO0FBQUEsTUFDdEMsY0FBYyxFQUFFLElBQUksZ0JBQU0sSUFBSSxRQUFRO0FBQUEsTUFDdEMscUJBQXFCLEVBQUUsSUFBSSxzQkFBTyxJQUFJLFVBQVU7QUFBQSxNQUNoRCxhQUFhLEVBQUUsSUFBSSxnQkFBTSxJQUFJLE9BQU87QUFBQSxNQUNwQyxvQkFBb0IsRUFBRSxJQUFJLGdCQUFNLElBQUksU0FBUztBQUFBLE1BQzdDLDJCQUEyQixFQUFFLElBQUksOENBQVcsSUFBSSxzQkFBc0I7QUFBQSxNQUN0RSxtQkFBbUIsRUFBRSxJQUFJLGdCQUFNLElBQUksT0FBTztBQUFBLE1BQzFDLDZCQUE2QixFQUFFLElBQUksaURBQWMsSUFBSSx1QkFBdUI7QUFBQSxNQUM1RSw2QkFBNkIsRUFBRSxJQUFJLHFDQUFZLElBQUksa0JBQWtCO0FBQUEsTUFDckUsNEJBQTRCLEVBQUUsSUFBSSxpREFBYyxJQUFJLDBCQUEwQjtBQUFBLE1BQzlFLDRCQUE0QixFQUFFLElBQUksa0NBQVMsSUFBSSxnQkFBZ0I7QUFBQSxNQUMvRCw0QkFBNEIsRUFBRSxJQUFJLHNCQUFPLElBQUksV0FBVztBQUFBLE1BQ3hELDJCQUEyQixFQUFFLElBQUksa0NBQVMsSUFBSSxtQkFBbUI7QUFBQSxNQUNqRSxZQUFZLEVBQUUsSUFBSSxnQkFBTSxJQUFJLE1BQU07QUFBQSxNQUNsQywyQkFBMkIsRUFBRSxJQUFJLG9FQUF1QixJQUFJLHlCQUF5QjtBQUFBO0FBQUEsTUFHckYsYUFBYSxFQUFFLElBQUksdUJBQVEsSUFBSSxTQUFTO0FBQUEsTUFDeEMsZUFBZSxFQUFFLElBQUksdUJBQVEsSUFBSSxjQUFjO0FBQUEsTUFDL0MsYUFBYSxFQUFFLElBQUksNEJBQVEsSUFBSSxZQUFZO0FBQUEsTUFDM0MsYUFBYSxFQUFFLElBQUksVUFBSyxJQUFJLEdBQUc7QUFBQSxNQUMvQixjQUFjLEVBQUUsSUFBSSxVQUFLLElBQUksR0FBRztBQUFBLE1BQ2hDLFlBQVksRUFBRSxJQUFJLFVBQUssSUFBSSxHQUFHO0FBQUE7QUFBQSxNQUc5QixpQkFBaUIsRUFBRSxJQUFJLDRCQUFRLElBQUksVUFBVTtBQUFBO0FBQUEsTUFHN0MsYUFBYSxFQUFFLElBQUksZ0JBQU0sSUFBSSxPQUFPO0FBQUEsTUFDcEMsYUFBYSxFQUFFLElBQUksZ0JBQU0sSUFBSSxPQUFPO0FBQUEsTUFDcEMsY0FBYyxFQUFFLElBQUksZ0JBQU0sSUFBSSxRQUFRO0FBQUEsTUFDdEMsbUJBQW1CLEVBQUUsSUFBSSxzQkFBTyxJQUFJLGVBQWU7QUFBQSxNQUNuRCxxQkFBcUIsRUFBRSxJQUFJLDRCQUFRLElBQUksZ0JBQWdCO0FBQUEsTUFDdkQsZ0JBQWdCLEVBQUUsSUFBSSxnQkFBTSxJQUFJLFdBQVc7QUFBQSxNQUMzQywyQkFBMkIsRUFBRSxJQUFJLG9FQUFrQixJQUFJLGlDQUFpQztBQUFBLE1BQ3hGLHFCQUFxQixFQUFFLElBQUksc0JBQU8sSUFBSSxnQkFBZ0I7QUFBQSxNQUN0RCxhQUFhLEVBQUUsSUFBSSxnQkFBTSxJQUFJLE9BQU87QUFBQSxNQUNwQyw4QkFBOEIsRUFBRSxJQUFJLDRCQUFRLElBQUksYUFBYTtBQUFBLE1BQzdELHlCQUF5QixFQUFFLElBQUksaUVBQW9CLElBQUksaUNBQWlDO0FBQUEsTUFDeEYsMEJBQTBCLEVBQUUsSUFBSSw4Q0FBVyxJQUFJLGlCQUFpQjtBQUFBLE1BQ2hFLDRCQUE0QixFQUFFLElBQUksOENBQVcsSUFBSSxnQkFBZ0I7QUFBQSxNQUNqRSx5QkFBeUIsRUFBRSxJQUFJLDBEQUFhLElBQUksNEJBQTRCO0FBQUEsTUFDNUUsc0JBQXNCLEVBQUUsSUFBSSxnQkFBTSxJQUFJLFNBQVM7QUFBQSxNQUMvQyxzQkFBc0IsRUFBRSxJQUFJLGdCQUFNLElBQUksU0FBUztBQUFBLE1BQy9DLG9CQUFvQixFQUFFLElBQUksZ0JBQU0sSUFBSSxPQUFPO0FBQUEsTUFDM0MsMkJBQTJCLEVBQUUsSUFBSSxrQ0FBUyxJQUFJLHNCQUFzQjtBQUFBLE1BQ3BFLDJCQUEyQixFQUFFLElBQUksb0RBQVksSUFBSSw2QkFBNkI7QUFBQSxNQUM5RSwyQkFBMkIsRUFBRSxJQUFJLDhDQUFXLElBQUksZ0NBQWdDO0FBQUEsTUFDaEYsMkJBQTJCLEVBQUUsSUFBSSw0RUFBZ0IsSUFBSSxrREFBa0Q7QUFBQSxNQUN2Ryw2QkFBNkIsRUFBRSxJQUFJLDBEQUFhLElBQUksK0JBQStCO0FBQUEsTUFDbkYsNkJBQTZCLEVBQUUsSUFBSSwwREFBYSxJQUFJLHNDQUFzQztBQUFBO0FBQUEsTUFHMUYsMkJBQTJCLEVBQUUsSUFBSSw0QkFBUSxJQUFJLGNBQWM7QUFBQSxNQUMzRCxrQkFBa0IsRUFBRSxJQUFJLGdCQUFNLElBQUksYUFBYTtBQUFBLE1BQy9DLG9CQUFvQixFQUFFLElBQUksNEJBQVEsSUFBSSxlQUFlO0FBQUEsSUFDdEQ7QUFBQTtBQUFBOzs7QUN2SkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBQUFBLG1CQUEyQzs7O0FDVXBDLElBQU0sbUJBQXVDO0FBQUEsRUFDaEQsYUFBYTtBQUFBLEVBQ2IsV0FBVztBQUFBLEVBQ1gsbUJBQW1CO0FBQUEsRUFDbkIsYUFBYTtBQUFBLEVBQ2IsUUFBUTtBQUNaOzs7QURkQTs7O0FFRkEsc0JBQTJCOzs7QUNDcEIsSUFBTSxRQUFOLE1BQVk7QUFBQSxFQVdsQixZQUFZLGFBQTJCLFVBQWdCO0FBWnhEO0FBYUUsUUFBSSxPQUFPLGdCQUFnQixZQUFZLFVBQVU7QUFFaEQsV0FBSyxLQUFLO0FBQ1YsWUFBTSxNQUFNLFNBQVMsVUFBVSxTQUFTLFVBQVU7QUFDbEQsV0FBSyxPQUFPLElBQUksUUFBUTtBQUV4QixXQUFLLFFBQU8scUJBQUksVUFBSixtQkFBVyxTQUFYLGFBQW1CLGNBQVMsVUFBVCxtQkFBZ0IsU0FBbkMsWUFBMkM7QUFDdkQsWUFBTSxVQUFTLGVBQUksV0FBSixZQUFjLFNBQVMsV0FBdkIsWUFBaUMsQ0FBQztBQUNqRCxXQUFLLFFBQVEsT0FBTyxPQUFPLEtBQUssS0FBSztBQUNyQyxXQUFLLGFBQWEsS0FBSyxVQUFVLE9BQU8sV0FBVyxLQUFLLElBQUksS0FBSztBQUNqRSxXQUFLLFdBQVcsS0FBSyxVQUFVLE9BQU8sU0FBUyxLQUFLO0FBQ3BELFdBQUssZUFBZSxPQUFPLE9BQU8sYUFBYSxLQUFLO0FBQ3BELFdBQUssT0FBTyxNQUFNLFFBQVEsT0FBTyxJQUFJLElBQUksT0FBTyxRQUFRLE9BQU8sUUFBUSxJQUFJLE1BQU0sR0FBRyxFQUFFLElBQUksQ0FBQyxNQUFjLEVBQUUsS0FBSyxDQUFDLEVBQUUsT0FBTyxDQUFDLFFBQWdCLEdBQUc7QUFDOUksV0FBSyxTQUFTLENBQUMsR0FBRSxZQUFPLFdBQVAsWUFBaUIsSUFBSTtBQUFBLElBQ3ZDLFdBQVcsT0FBTyxnQkFBZ0IsVUFBVTtBQUUzQyxXQUFLLEtBQUssWUFBWSxNQUFNO0FBQzVCLFdBQUssT0FBTyxZQUFZLFFBQVE7QUFDaEMsV0FBSyxPQUFPLFlBQVksUUFBUTtBQUNoQyxXQUFLLFFBQVEsT0FBTyxZQUFZLEtBQUssS0FBSztBQUMxQyxXQUFLLGFBQWEsS0FBSyxVQUFVLFlBQVksZUFBZSxZQUFZLFVBQVUsS0FBSyxJQUFJLEtBQUs7QUFDaEcsV0FBSyxXQUFXLEtBQUssVUFBVSxZQUFZLGFBQWEsWUFBWSxRQUFRLEtBQUs7QUFDakYsV0FBSyxlQUFlLE9BQU8sWUFBWSxhQUFhLEtBQUs7QUFDekQsV0FBSyxPQUFPLE1BQU0sUUFBUSxZQUFZLElBQUksSUFBSSxZQUFZLFFBQVEsWUFBWSxRQUFRLElBQUksTUFBTSxHQUFHLEVBQUUsSUFBSSxDQUFDLE1BQWMsRUFBRSxLQUFLLENBQUMsRUFBRSxPQUFPLENBQUMsUUFBZ0IsR0FBRztBQUM3SixXQUFLLFNBQVMsQ0FBQyxDQUFDLFlBQVk7QUFBQSxJQUM3QixPQUFPO0FBQ04sWUFBTSxJQUFJLE1BQU0sb0JBQW9CO0FBQUEsSUFDckM7QUFBQSxFQUNEO0FBQUEsRUFFUSxVQUFVLFNBQW1DO0FBQ3BELFFBQUksQ0FBQztBQUFTLGFBQU87QUFDckIsVUFBTSxPQUFPLElBQUksS0FBSyxPQUFPO0FBQzdCLFdBQU8sTUFBTSxLQUFLLFFBQVEsQ0FBQyxJQUFJLFNBQVk7QUFBQSxFQUM1QztBQUFBLEVBRUEsVUFBVTtBQUFFLFdBQU8sS0FBSztBQUFBLEVBQU07QUFBQSxFQUM5QixXQUFXO0FBQUUsV0FBTyxLQUFLO0FBQUEsRUFBTztBQUFBLEVBRWhDLGFBQWEsTUFBWSxJQUFJLEtBQUssR0FBVztBQUM1QyxVQUFNLE9BQU8sS0FBSztBQUVsQixVQUFNLE1BQU0sS0FBSyxZQUFZLEtBQUssU0FBUyxRQUFRLElBQUksSUFBSSxRQUFRLElBQUksS0FBSyxXQUFXO0FBQ3ZGLFVBQU0sT0FBTyxLQUFLLElBQUksR0FBRyxLQUFLLE9BQU8sSUFBSSxRQUFRLElBQUksS0FBSyxRQUFRLEtBQUssS0FBUSxDQUFDO0FBQ2hGLFlBQVEsS0FBSyxRQUFRLEtBQUssZ0JBQWdCO0FBQUEsRUFDM0M7QUFBQSxFQUVBLGFBQWEsTUFBWSxJQUFJLEtBQUssR0FBVztBQUM1QyxVQUFNLE9BQU8sS0FBSztBQUNsQixVQUFNLE1BQU0sS0FBSyxZQUFZLEtBQUssU0FBUyxRQUFRLElBQUksSUFBSSxRQUFRLElBQUksS0FBSyxXQUFXO0FBQ3ZGLFdBQU8sS0FBSyxJQUFJLEdBQUcsS0FBSyxPQUFPLElBQUksUUFBUSxJQUFJLEtBQUssUUFBUSxLQUFLLEtBQVEsQ0FBQztBQUFBLEVBQzNFO0FBQUEsRUFFQSxTQUFTLE9BQWEsSUFBSSxLQUFLLEdBQVk7QUFDMUMsV0FBTyxLQUFLLGNBQWMsU0FBUyxDQUFDLEtBQUssWUFBWSxPQUFPLEtBQUs7QUFBQSxFQUNsRTtBQUFBLEVBRUEsZUFBdUI7QUFDdEIsVUFBTSxhQUFhLENBQUMsU0FBbUM7QUFDdEQsVUFBSSxDQUFDO0FBQU0sZUFBTztBQUNsQixhQUFPLEtBQUssWUFBWSxFQUFFLE1BQU0sR0FBRyxFQUFFLENBQUM7QUFBQSxJQUN2QztBQUVBLFdBQU8sV0FBVyxLQUFLO0FBQUE7QUFBQTtBQUFBLFVBR2YsS0FBSztBQUFBO0FBQUE7QUFBQSxVQUdMLEtBQUs7QUFBQSxpQkFDRSxXQUFXLEtBQUssVUFBVTtBQUFBLGVBQzVCLFdBQVcsS0FBSyxRQUFRO0FBQUEsa0JBQ3JCLEtBQUs7QUFBQSxVQUNiLEtBQUssS0FBSyxJQUFJLFNBQU8sSUFBSSxNQUFNLEVBQUUsS0FBSyxJQUFJO0FBQUE7QUFBQSxFQUVuRDtBQUFBO0FBQUEsRUFHQSx3QkFBZ0M7QUFDL0IsVUFBTSxhQUFhLENBQUMsU0FBbUM7QUFDdEQsVUFBSSxDQUFDO0FBQU0sZUFBTztBQUNsQixhQUFPLEtBQUssWUFBWSxFQUFFLE1BQU0sR0FBRyxFQUFFLENBQUM7QUFBQSxJQUN2QztBQUNBLFVBQU0sVUFBVSxLQUFLLEtBQUssSUFBSSxTQUFPLElBQUksTUFBTSxFQUFFLEtBQUssSUFBSTtBQUMxRCxXQUFPO0FBQUEsVUFDQyxLQUFLO0FBQUEsV0FDSixLQUFLLFNBQVMsU0FBUztBQUFBO0FBQUE7QUFBQSxVQUd4QixLQUFLO0FBQUE7QUFBQTtBQUFBLFVBR0wsS0FBSztBQUFBLGlCQUNFLFdBQVcsS0FBSyxVQUFVO0FBQUEsZUFDNUIsV0FBVyxLQUFLLFFBQVE7QUFBQSxrQkFDckIsS0FBSztBQUFBLFVBQ2I7QUFBQTtBQUFBLEVBRVQ7QUFDRDs7O0FENUdPLElBQU0sa0JBQU4sTUFBc0I7QUFBQSxFQUk1QixZQUFZLEtBQVUsY0FBc0I7QUFDM0MsU0FBSyxNQUFNO0FBQ1gsU0FBSyxlQUFlO0FBQUEsRUFDckI7QUFBQTtBQUFBLEVBR1Esa0JBQTBCO0FBQ2pDLFVBQU0sWUFBWSxLQUFLLGFBQWEsTUFBTSxHQUFHO0FBQzdDLFFBQUksVUFBVSxTQUFTLEdBQUc7QUFDekIsYUFBTyxVQUFVLE1BQU0sR0FBRyxFQUFFLEVBQUUsS0FBSyxHQUFHO0FBQUEsSUFDdkM7QUFDQSxXQUFPO0FBQUEsRUFDUjtBQUFBO0FBQUEsRUFHQSxNQUFNLFVBQTRCO0FBQ2pDLFVBQU0sV0FBVyxLQUFLLElBQUksTUFBTSxzQkFBc0IsS0FBSyxZQUFZO0FBQ3ZFLFFBQUksQ0FBQyxZQUFZLEVBQUUsb0JBQW9CLHdCQUFRO0FBQzlDLGFBQU8sQ0FBQztBQUFBLElBQ1Q7QUFFQSxRQUFJO0FBQ0gsWUFBTSxVQUFVLE1BQU0sS0FBSyxJQUFJLE1BQU0sS0FBSyxRQUFRO0FBQ2xELFlBQU0sVUFBVSxRQUFRLE1BQU0sbUJBQW1CLEtBQUssQ0FBQztBQUN2RCxZQUFNLGNBQWMsUUFDbEIsSUFBSSxPQUFLLEVBQUUsUUFBUSxnQkFBZ0IsRUFBRSxDQUFDLEVBQ3RDLElBQUksT0FBRTtBQWxDWDtBQWtDYyx1QkFBRSxNQUFNLEdBQUcsRUFBRSxDQUFDLE1BQWQsbUJBQWlCO0FBQUEsT0FBTSxFQUNoQyxPQUFPLE9BQU87QUFFaEIsWUFBTSxTQUFrQixDQUFDO0FBQ3pCLGlCQUFXLFVBQVUsYUFBYTtBQUNqQyxZQUFJLE9BQXFCO0FBQ3pCLFlBQUk7QUFDSCxpQkFBTyxLQUFLLElBQUksY0FBYyxxQkFBcUIsUUFBUSxLQUFLLFlBQVk7QUFBQSxRQUM3RSxTQUFTLEdBQVA7QUFDRCxpQkFBTztBQUFBLFFBQ1I7QUFDQSxZQUFJLENBQUM7QUFBTTtBQUVTLFlBQUk7QUFDWSxnQkFBTSxjQUFjLE1BQU0sS0FBSyxJQUFJLE1BQU0sS0FBSyxJQUFJO0FBQ2xELGdCQUFNLE9BQU8sS0FBSyxVQUFVLEtBQUssc0JBQXNCLFdBQVcsQ0FBQztBQUN0RyxnQkFBTSxVQUFVLEtBQUssWUFBWTtBQUNqQyxnQkFBTSxRQUFRLElBQUksTUFBTSxTQUFTLElBQUk7QUFFckMsZ0JBQU0sU0FBUztBQUNmLGlCQUFPLEtBQUssS0FBSztBQUFBLFFBQ2xCLFNBQVMsR0FBUDtBQUNELGtCQUFRLE1BQU0sd0JBQXdCLFdBQVcsQ0FBQztBQUFBLFFBQ25EO0FBQUEsTUFDRDtBQUNBLGFBQU87QUFBQSxJQUNSLFNBQVMsR0FBUDtBQUNELGNBQVEsTUFBTSwwQkFBMEIsQ0FBQztBQUN6QyxhQUFPLENBQUM7QUFBQSxJQUNUO0FBQUEsRUFDRDtBQUFBO0FBQUEsRUFHQSxNQUFNLFVBQVUsT0FBNkI7QUFDNUMsUUFBSSxhQUEyQjtBQUMvQixRQUFJO0FBQ0gsbUJBQWEsS0FBSyxJQUFJLGNBQWMscUJBQXFCLE1BQU0sSUFBSSxLQUFLLFlBQVk7QUFBQSxJQUNyRixTQUFTLEdBQVA7QUFDRCxtQkFBYTtBQUFBLElBQ2Q7QUFJQyxRQUFJLENBQUMsWUFBWTtBQUVqQixVQUFJLFdBQVcsR0FBRyxNQUFNO0FBQ3hCLFVBQUksV0FBVyxHQUFHLEtBQUssZ0JBQWdCLEtBQUs7QUFFNUMsWUFBTSxTQUFTLEtBQUssSUFBSSxNQUFNLHNCQUFzQixLQUFLLGdCQUFnQixDQUFDO0FBQzFFLFVBQUksQ0FBQyxRQUFRO0FBQ1osY0FBTSxLQUFLLElBQUksTUFBTSxhQUFhLEtBQUssZ0JBQWdCLENBQUM7QUFBQSxNQUN6RDtBQUNHLFlBQU0saUJBQWlCLEtBQUssaUJBQWlCLE1BQU0sYUFBYSxDQUFDO0FBQ3BFLFVBQUk7QUFDQSxjQUFNLEtBQUssSUFBSSxNQUFNLE9BQU8sVUFBVSxjQUFjO0FBQUEsTUFDeEQsU0FBUyxHQUFQO0FBRUQsbUJBQVcsR0FBRyxtQkFBbUIsTUFBTSxFQUFFO0FBQ3pDLG1CQUFXLEdBQUcsS0FBSyxnQkFBZ0IsS0FBSztBQUNyQyxjQUFNLEtBQUssSUFBSSxNQUFNLE9BQU8sVUFBVSxjQUFjO0FBQUEsTUFDeEQ7QUFBQSxJQUNELE9BQU87QUFFTixZQUFNLFdBQVcsTUFBTSxLQUFLLElBQUksTUFBTSxLQUFLLFVBQVU7QUFDbkQsWUFBTSxZQUFZLEtBQUssMkJBQTJCLFVBQVUsS0FBSztBQUNqRSxZQUFNLEtBQUssSUFBSSxNQUFNLE9BQU8sWUFBWSxLQUFLLGlCQUFpQixTQUFTLENBQUM7QUFBQSxJQUMzRTtBQUdBLFVBQU0sS0FBSyxlQUFlLE1BQU0sSUFBSSxJQUFJO0FBQUEsRUFDekM7QUFBQTtBQUFBLEVBR0EsTUFBTSxZQUFZLElBQTJCO0FBRTVDLFVBQU0sS0FBSyxlQUFlLElBQUksS0FBSztBQUFBLEVBQ3BDO0FBQUE7QUFBQTtBQUFBLEVBS0EsTUFBYyxlQUFlLFNBQWlCLE9BQStCO0FBQzVFLFVBQU0sV0FBVyxLQUFLO0FBQ3RCLFFBQUksY0FBYztBQUVsQixRQUFJO0FBQ0gsWUFBTSxXQUFXLEtBQUssSUFBSSxNQUFNLHNCQUFzQixRQUFRO0FBQzlELFVBQUksWUFBWSxvQkFBb0IsdUJBQU87QUFDMUMsc0JBQWMsTUFBTSxLQUFLLElBQUksTUFBTSxLQUFLLFFBQVE7QUFBQSxNQUNqRDtBQUFBLElBQ0QsU0FBUyxHQUFQO0FBQUEsSUFFRjtBQUVDLFFBQUksT0FBTztBQUVULFlBQU0sYUFBYSxJQUFJLE9BQU8sU0FBUyw0QkFBNEIsRUFBRSxLQUFLLFdBQVc7QUFDckYsVUFBSSxDQUFDLFlBQVk7QUFDZix1QkFBZTtBQUFBLElBQU87QUFBQSxNQUN4QjtBQUFBLElBQ0YsT0FBTztBQUVMLG9CQUFjLFlBQVksUUFBUSxJQUFJLE9BQU8sU0FBUyw4QkFBOEIsR0FBRyxHQUFHLEVBQUU7QUFDNUYsb0JBQWMsWUFBWSxRQUFRLFdBQVcsTUFBTSxFQUFFLFFBQVE7QUFBQSxJQUMvRDtBQUVELFVBQU0sZUFBZSxLQUFLLElBQUksTUFBTSxzQkFBc0IsUUFBUTtBQUNsRSxRQUFJLGdCQUFnQix3QkFBd0IsdUJBQU87QUFDbEQsWUFBTSxLQUFLLElBQUksTUFBTSxPQUFPLGNBQWMsV0FBVztBQUFBLElBQ3RELE9BQU87QUFDTixZQUFNLEtBQUssSUFBSSxNQUFNLE9BQU8sVUFBVSxXQUFXO0FBQUEsSUFDbEQ7QUFBQSxFQUNEO0FBQUE7QUFBQSxFQUdRLFVBQVUsU0FBc0I7QUFDdkMsVUFBTSxRQUFRLFFBQVEsTUFBTSxJQUFJO0FBQ2hDLFVBQU0sU0FBYyxDQUFDO0FBQ3JCLFFBQUksY0FBd0IsQ0FBQztBQUU3QixVQUFNLGFBQWEsQ0FBQyxNQUFXLFNBQXdCO0FBQ3RELFVBQUksT0FBTztBQUNYLGlCQUFXLFFBQVEsTUFBTTtBQUN4QixZQUFJLENBQUMsS0FBSyxJQUFJLEtBQUssT0FBTyxLQUFLLElBQUksTUFBTTtBQUFVLGVBQUssSUFBSSxJQUFJLENBQUM7QUFDakUsZUFBTyxLQUFLLElBQUk7QUFBQSxNQUNqQjtBQUNBLGFBQU87QUFBQSxJQUNSO0FBRUEsZUFBVyxPQUFPLE9BQU87QUFDeEIsWUFBTSxPQUFPLElBQUksS0FBSztBQUN0QixVQUFJLENBQUMsUUFBUSxLQUFLLFdBQVcsR0FBRztBQUFHO0FBQ25DLFVBQUksS0FBSyxXQUFXLEdBQUcsS0FBSyxLQUFLLFNBQVMsR0FBRyxHQUFHO0FBQy9DLGNBQU0sVUFBVSxLQUFLLE1BQU0sR0FBRyxFQUFFLEVBQUUsS0FBSztBQUN2QyxzQkFBYyxRQUFRLE1BQU0sR0FBRyxFQUFFLElBQUksT0FBSyxFQUFFLEtBQUssQ0FBQyxFQUFFLE9BQU8sT0FBTztBQUNsRSxtQkFBVyxRQUFRLFdBQVc7QUFDOUI7QUFBQSxNQUNEO0FBQ0EsWUFBTSxLQUFLLEtBQUssUUFBUSxHQUFHO0FBQzNCLFVBQUksT0FBTztBQUFJO0FBQ2YsWUFBTSxXQUFXLEtBQUssTUFBTSxHQUFHLEVBQUUsRUFBRSxLQUFLO0FBQ3hDLFVBQUksYUFBYSxLQUFLLE1BQU0sS0FBSyxDQUFDLEVBQUUsS0FBSztBQUV6QyxVQUFJLGNBQW1CO0FBQ3ZCLFVBQUksV0FBVyxXQUFXLEdBQUcsS0FBSyxXQUFXLFNBQVMsR0FBRyxHQUFHO0FBQzNELHNCQUFjLFdBQVcsTUFBTSxHQUFHLEVBQUU7QUFBQSxNQUNyQyxXQUFXLGVBQWUsVUFBVSxlQUFlLFNBQVM7QUFDM0Qsc0JBQWMsZUFBZTtBQUFBLE1BQzlCLFdBQVcsV0FBVyxXQUFXLEdBQUcsS0FBSyxXQUFXLFNBQVMsR0FBRyxHQUFHO0FBQ2xFLGNBQU0sZUFBZSxXQUFXLE1BQU0sR0FBRyxFQUFFLEVBQUUsS0FBSztBQUNsRCxzQkFBYyxlQUFlLGFBQWEsTUFBTSxHQUFHLEVBQUUsSUFBSSxVQUFRLEtBQUssS0FBSyxFQUFFLFFBQVEsVUFBVSxFQUFFLENBQUMsSUFBSSxDQUFDO0FBQUEsTUFDeEcsV0FBVyxDQUFDLE1BQU0sT0FBTyxVQUFVLENBQUMsR0FBRztBQUN0QyxzQkFBYyxPQUFPLFVBQVU7QUFBQSxNQUNoQztBQUVBLFVBQUksWUFBWSxTQUFTLEdBQUc7QUFDM0IsY0FBTSxPQUFPLFdBQVcsUUFBUSxXQUFXO0FBQzNDLGFBQUssUUFBUSxJQUFJO0FBQUEsTUFDbEIsT0FBTztBQUNOLGVBQU8sUUFBUSxJQUFJO0FBQUEsTUFDcEI7QUFBQSxJQUNEO0FBRUEsV0FBTztBQUFBLEVBQ1I7QUFBQTtBQUFBLEVBR1EsMkJBQTJCLFVBQWtCLE9BQXNCO0FBQzFFLFVBQU0sZUFBeUIsQ0FBQztBQUNoQyxVQUFNLGFBQXVCLENBQUM7QUFDOUIsZUFBVyxPQUFPLFNBQVMsTUFBTSxJQUFJLEdBQUc7QUFDdkMsWUFBTUMsS0FBSSxJQUFJLEtBQUs7QUFDbkIsVUFBSUEsR0FBRSxXQUFXLEdBQUc7QUFBRyxxQkFBYSxLQUFLLEdBQUc7QUFBQTtBQUN2QyxtQkFBVyxLQUFLLEdBQUc7QUFBQSxJQUN6QjtBQUVjLFVBQU0sU0FBUyxLQUFLLFVBQVUsS0FBSyxzQkFBc0IsV0FBVyxLQUFLLElBQUksQ0FBQyxDQUFDLEtBQUssQ0FBQztBQUduRyxJQUFDLE9BQWUsTUFBTSxJQUFJLE1BQU07QUFDaEMsUUFBSSxDQUFDLE9BQU8sT0FBTyxLQUFLLE9BQU8sT0FBTyxPQUFPLE1BQU07QUFBVSxhQUFPLE9BQU8sSUFBSSxDQUFDO0FBQ2hGLFdBQU8sT0FBTyxFQUFFLE1BQU0sSUFBSSxNQUFNO0FBQ2hDLFFBQUksQ0FBQyxPQUFPLFFBQVEsS0FBSyxPQUFPLE9BQU8sUUFBUSxNQUFNO0FBQVUsYUFBTyxRQUFRLElBQUksQ0FBQztBQUNuRixXQUFPLFFBQVEsRUFBRSxPQUFPLElBQUksT0FBTyxNQUFNLEtBQUssS0FBSztBQUNuRCxXQUFPLFFBQVEsRUFBRSxhQUFhLElBQUksTUFBTSxhQUFhLE1BQU0sV0FBVyxZQUFZLEVBQUUsTUFBTSxHQUFHLEVBQUUsQ0FBQyxJQUFJO0FBQ3BHLFdBQU8sUUFBUSxFQUFFLFdBQVcsSUFBSSxNQUFNLFdBQVcsTUFBTSxTQUFTLFlBQVksRUFBRSxNQUFNLEdBQUcsRUFBRSxDQUFDLElBQUk7QUFDOUYsV0FBTyxRQUFRLEVBQUUsZUFBZSxJQUFJLE9BQU8sTUFBTSxZQUFZLEtBQUs7QUFDbEUsV0FBTyxRQUFRLEVBQUUsTUFBTSxJQUFJLE1BQU0sUUFBUSxNQUFNLElBQUksSUFBSSxNQUFNLE9BQU8sQ0FBQztBQUVyRSxVQUFNLFdBQVcsS0FBSyxjQUFjLE1BQU07QUFDMUMsVUFBTSxlQUFlLGFBQWEsU0FBUyxJQUFJLGFBQWEsS0FBSyxJQUFJLElBQUksU0FBUztBQUNsRixXQUFPLGVBQWU7QUFBQSxFQUN2QjtBQUFBO0FBQUEsRUFHUSxjQUFjLEtBQWtCO0FBRXZDLFVBQU0sZ0JBQWdCLENBQUMsTUFBVyxLQUFLLE9BQU8sTUFBTSxZQUFZLENBQUMsTUFBTSxRQUFRLENBQUM7QUFDaEYsVUFBTSxPQUFPLE9BQU8sS0FBSyxPQUFPLENBQUMsQ0FBQztBQUNsQyxVQUFNLGFBQWEsS0FBSyxPQUFPLE9BQUssQ0FBQyxjQUFjLElBQUksQ0FBQyxDQUFDLENBQUM7QUFDMUQsVUFBTSxhQUFhLEtBQUssT0FBTyxPQUFLLGNBQWMsSUFBSSxDQUFDLENBQUMsQ0FBQztBQUV6RCxVQUFNLFFBQWtCLENBQUM7QUFFekIsUUFBSSxXQUFXLFNBQVMsTUFBTSxHQUFHO0FBQ2hDLFlBQU0sS0FBSyxLQUFLLG1CQUFtQixRQUFRLElBQUksTUFBTSxDQUFDLENBQUM7QUFBQSxJQUN4RDtBQUVBLGVBQ0UsT0FBTyxPQUFLLE1BQU0sTUFBTSxFQUN4QixLQUFLLENBQUMsR0FBRyxNQUFNLEVBQUUsY0FBYyxDQUFDLENBQUMsRUFDakMsUUFBUSxPQUFLLE1BQU0sS0FBSyxLQUFLLG1CQUFtQixHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUc3RCxVQUFNLGVBQWUsQ0FBQyxTQUFTLFFBQVE7QUFDdkMsVUFBTSxvQkFBb0I7QUFBQSxNQUN6QixHQUFHLGFBQWEsT0FBTyxPQUFLLFdBQVcsU0FBUyxDQUFDLENBQUM7QUFBQSxNQUNsRCxHQUFHLFdBQVcsT0FBTyxPQUFLLENBQUMsYUFBYSxTQUFTLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxHQUFHLE1BQU0sRUFBRSxjQUFjLENBQUMsQ0FBQztBQUFBLElBQ3ZGO0FBRUEsZUFBVyxLQUFLLG1CQUFtQjtBQUNsQyxZQUFNLEtBQUssRUFBRTtBQUNiLFdBQUssa0JBQWtCLE9BQU8sQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUM7QUFBQSxJQUMxQztBQUVBLFdBQU8sTUFBTSxLQUFLLElBQUksRUFBRSxRQUFRLFdBQVcsTUFBTSxFQUFFLEtBQUssSUFBSTtBQUFBLEVBQzdEO0FBQUEsRUFFUSxrQkFBa0IsS0FBZSxNQUFnQixPQUFrQjtBQUMxRSxRQUFJLEtBQUssSUFBSSxLQUFLLEtBQUssR0FBRyxJQUFJO0FBQzlCLFVBQU0sZ0JBQWdCLENBQUMsTUFBVyxLQUFLLE9BQU8sTUFBTSxZQUFZLENBQUMsTUFBTSxRQUFRLENBQUM7QUFDaEYsVUFBTSxPQUFPLE9BQU8sS0FBSyxTQUFTLENBQUMsQ0FBQztBQUNwQyxVQUFNLGFBQWEsS0FBSyxPQUFPLE9BQUssQ0FBQyxjQUFjLE1BQU0sQ0FBQyxDQUFDLENBQUM7QUFDNUQsVUFBTSxhQUFhLEtBQUssT0FBTyxPQUFLLGNBQWMsTUFBTSxDQUFDLENBQUMsQ0FBQztBQUUzRCxlQUFXLEtBQUssQ0FBQyxHQUFHLE1BQU0sRUFBRSxjQUFjLENBQUMsQ0FBQyxFQUFFLFFBQVEsT0FBSztBQUMxRCxVQUFJLEtBQUssS0FBSyxtQkFBbUIsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDO0FBQUEsSUFDOUMsQ0FBQztBQUVELFVBQU0sb0JBQW9CLFdBQVcsS0FBSyxDQUFDLEdBQUcsTUFBTSxFQUFFLGNBQWMsQ0FBQyxDQUFDO0FBQ3RFLGVBQVcsS0FBSyxtQkFBbUI7QUFDbEMsVUFBSSxLQUFLLEVBQUU7QUFDWCxXQUFLLGtCQUFrQixLQUFLLENBQUMsR0FBRyxNQUFNLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQztBQUFBLElBQ25EO0FBQUEsRUFDRDtBQUFBLEVBRVEsbUJBQW1CLEtBQWEsS0FBa0I7QUFDekQsV0FBTyxHQUFHLFNBQVMsS0FBSyxVQUFVLEdBQUc7QUFBQSxFQUN0QztBQUFBLEVBRVEsVUFBVSxLQUFrQjtBQUNuQyxRQUFJLFFBQVEsUUFBUSxRQUFRO0FBQVcsYUFBTztBQUM5QyxRQUFJLE1BQU0sUUFBUSxHQUFHLEdBQUc7QUFDdkIsYUFBTyxJQUFJLElBQUksSUFBSSxPQUFLLEtBQUssVUFBVSxDQUFDLENBQUMsRUFBRSxLQUFLLElBQUk7QUFBQSxJQUNyRDtBQUNBLFlBQVEsT0FBTyxLQUFLO0FBQUEsTUFDbkIsS0FBSztBQUNKLGVBQU8sT0FBTyxTQUFTLEdBQUcsSUFBSSxPQUFPLEdBQUcsSUFBSTtBQUFBLE1BQzdDLEtBQUs7QUFDSixlQUFPLE1BQU0sU0FBUztBQUFBLE1BQ3ZCLEtBQUs7QUFBQSxNQUNMO0FBQ0MsZUFBTyxJQUFJLE9BQU8sR0FBRyxFQUFFLFFBQVEsT0FBTyxNQUFNLEVBQUUsUUFBUSxPQUFPLEtBQUs7QUFBQSxJQUNwRTtBQUFBLEVBQ0Q7QUFBQTtBQUFBLEVBR2Usc0JBQXNCLFNBQXlCO0FBQy9DLFdBQU8sUUFBUSxRQUFRLG1CQUFtQixDQUFDLE9BQWUsUUFBZ0IsU0FBaUI7QUFDbkYsWUFBTSxTQUFTLFNBQVMsSUFBSSxLQUFLLFNBQVMsQ0FBQyxJQUFJO0FBQy9DLFlBQU0sUUFBUSxTQUFTLE1BQU0sU0FBUyxLQUFLLFNBQVMsS0FBSyxTQUFTLE1BQU0sTUFBTSxJQUFJO0FBQ2xGLFVBQUssV0FBVyxPQUFPLFVBQVUsT0FBUyxXQUFXLE9BQVEsVUFBVSxLQUFPO0FBQ3RFLGVBQU87QUFBQSxNQUNmO0FBQ0EsYUFBTyxJQUFJO0FBQUEsSUFDbkIsQ0FBQztBQUFBLEVBQ1Q7QUFBQTtBQUFBLEVBR1EsaUJBQWlCLFNBQXlCO0FBQzFDLFdBQU8sUUFBUSxRQUFRLDJCQUEyQixDQUFDLFVBQWtCLE1BQU0sTUFBTSxHQUFHLEVBQUUsQ0FBQztBQUFBLEVBQy9GO0FBQ1I7OztBRTVUQSxJQUFBQyxtQkFBNEI7OztBQ0FyQixJQUFNLGVBQU4sTUFBbUI7QUFBQSxFQVN0QixZQUFZLFNBQWlCLGNBQXNCLGdCQUFNLGFBQXFCLGdCQUFNLFNBQWtCLE9BQU87QUFDekcsU0FBSyxVQUFVO0FBQ2YsU0FBSyxjQUFjO0FBQ25CLFNBQUssYUFBYTtBQUNsQixTQUFLLFNBQVM7QUFBQSxFQUNsQjtBQUFBLEVBRUEsT0FBeUI7QUFDckIsV0FBTyxJQUFJLFFBQWlCLENBQUMsWUFBWTtBQUNyQyxXQUFLLGlCQUFpQjtBQUV0QixXQUFLLFNBQVMsU0FBUyxjQUFjLEtBQUs7QUFDMUMsV0FBSyxPQUFPLFlBQVk7QUFFeEIsV0FBSyxVQUFVLFNBQVMsY0FBYyxLQUFLO0FBQzNDLFdBQUssUUFBUSxZQUFZO0FBRXpCLFlBQU0sVUFBVSxTQUFTLGNBQWMsS0FBSztBQUM1QyxjQUFRLFlBQVk7QUFFcEIsWUFBTSxRQUFRLFNBQVMsY0FBYyxLQUFLO0FBQzFDLFlBQU0sWUFBWTtBQUVsQixVQUFJO0FBQ0EsY0FBTSxFQUFFLEdBQUFDLEdBQUUsSUFBSTtBQUNkLGNBQU0sY0FBY0EsR0FBRSxlQUFlO0FBQUEsTUFDekMsU0FBUyxHQUFQO0FBQ0UsY0FBTSxjQUFjO0FBQUEsTUFDeEI7QUFFQSxZQUFNLFFBQVEsU0FBUyxjQUFjLEtBQUs7QUFDMUMsWUFBTSxZQUFZO0FBQ2xCLFlBQU0sY0FBYyxLQUFLO0FBRXpCLFlBQU0sVUFBVSxTQUFTLGNBQWMsS0FBSztBQUM1QyxjQUFRLFlBQVk7QUFFcEIsWUFBTSxZQUFZLFNBQVMsY0FBYyxRQUFRO0FBQ2pELGdCQUFVLFlBQVk7QUFDdEIsZ0JBQVUsY0FBYyxLQUFLO0FBRTdCLFlBQU0sYUFBYSxTQUFTLGNBQWMsUUFBUTtBQUNsRCxpQkFBVyxZQUFZO0FBQ3ZCLGlCQUFXLGNBQWMsS0FBSztBQUM5QixVQUFJLEtBQUs7QUFBUSxtQkFBVyxVQUFVLElBQUksUUFBUTtBQUVsRCxjQUFRLFlBQVksU0FBUztBQUM3QixjQUFRLFlBQVksVUFBVTtBQUM5QixjQUFRLFlBQVksS0FBSztBQUN6QixjQUFRLFlBQVksS0FBSztBQUN6QixjQUFRLFlBQVksT0FBTztBQUMzQixXQUFLLFFBQVEsWUFBWSxPQUFPO0FBQ2hDLFdBQUssT0FBTyxZQUFZLEtBQUssT0FBTztBQUNwQyxlQUFTLEtBQUssWUFBWSxLQUFLLE1BQU07QUFFckMsWUFBTSxRQUFRLENBQUMsV0FBb0I7QUFDL0IsWUFBSSxLQUFLLFVBQVUsS0FBSyxPQUFPLGVBQWU7QUFDMUMsZUFBSyxPQUFPLGNBQWMsWUFBWSxLQUFLLE1BQU07QUFBQSxRQUNyRDtBQUNBLGFBQUssU0FBUztBQUNkLGFBQUssVUFBVTtBQUNmLGdCQUFRLE1BQU07QUFBQSxNQUNsQjtBQUVBLFdBQUssT0FBTyxpQkFBaUIsU0FBUyxDQUFDLE1BQU07QUFBRSxZQUFJLEVBQUUsV0FBVyxLQUFLO0FBQVEsZ0JBQU0sS0FBSztBQUFBLE1BQUcsQ0FBQztBQUM1RixnQkFBVSxpQkFBaUIsU0FBUyxNQUFNLE1BQU0sS0FBSyxDQUFDO0FBQ3RELGlCQUFXLGlCQUFpQixTQUFTLE1BQU0sTUFBTSxJQUFJLENBQUM7QUFBQSxJQUMxRCxDQUFDO0FBQUEsRUFDTDtBQUFBLEVBRVEsbUJBQW1CO0FBQ3ZCLFVBQU0sV0FBVztBQUNqQixRQUFJLFNBQVMsZUFBZSxRQUFRO0FBQUc7QUFDdkMsVUFBTSxRQUFRLFNBQVMsY0FBYyxPQUFPO0FBQzVDLFVBQU0sS0FBSztBQUNYLFVBQU0sY0FBYztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBS3BCLGFBQVMsS0FBSyxZQUFZLEtBQUs7QUFBQSxFQUNuQztBQUNKOzs7QUR2RkE7QUFHTyxJQUFNLGlCQUFOLE1BQXFCO0FBQUEsRUFRM0IsWUFBWSxLQUFVLGlCQUFrQyxPQUFlLFNBQXNCO0FBQzVGLFNBQUssTUFBTTtBQUNYLFNBQUssa0JBQWtCO0FBQ3ZCLFNBQUssUUFBUTtBQUNQLFNBQUssVUFBVTtBQUFBLEVBQ3RCO0FBQUEsRUFFQSxPQUFPO0FBdEJSO0FBd0JFLFNBQUssU0FBUyxTQUFTLGNBQWMsS0FBSztBQUMxQyxTQUFLLE9BQU8sWUFBWTtBQUd4QixTQUFLLFVBQVUsU0FBUyxjQUFjLEtBQUs7QUFDM0MsU0FBSyxRQUFRLFlBQVk7QUFFekIsU0FBSyxzQkFBc0I7QUFFM0IsVUFBTSxVQUFVLFNBQVMsY0FBYyxLQUFLO0FBQzVDLFlBQVEsWUFBWTtBQUNwQixJQUFDLFFBQVEsTUFBYyxNQUFNO0FBSzdCLFVBQU0sT0FBTyxTQUFTLGNBQWMsTUFBTTtBQUMxQyxTQUFLLFlBQVk7QUFDakIsU0FBSyxNQUFNLFVBQVU7QUFDckIsSUFBQyxLQUFLLE1BQWMsc0JBQXNCO0FBQzFDLFNBQUssTUFBTSxTQUFTO0FBQ3BCLElBQUMsS0FBSyxNQUFjLE1BQU07QUFHMUIsVUFBTSxnQkFBZ0IsQ0FBQyxVQUFvQztBQUMxRCxVQUFJLE1BQU0sTUFBTSxjQUFjLGNBQWM7QUFDNUMsVUFBSSxDQUFDLEtBQUs7QUFDVCxjQUFNLFFBQVEsTUFBTSxjQUFjLGFBQWE7QUFDL0MsY0FBTSxTQUFTLGNBQWMsS0FBSztBQUNsQyxZQUFJLFlBQVk7QUFDaEIsWUFBSTtBQUFPLGdCQUFNLFlBQVksR0FBRztBQUFBO0FBQzNCLGdCQUFNLFlBQVksR0FBRztBQUFBLE1BQzNCO0FBQ0EsYUFBTztBQUFBLElBQ1I7QUFDQSxVQUFNLFdBQVcsQ0FBQyxPQUFvQixZQUFvQjtBQUN6RCxZQUFNLFVBQVUsSUFBSSxXQUFXO0FBQy9CLFlBQU0sUUFBUSxNQUFNLGNBQWMseUJBQXlCO0FBQzNELFVBQUk7QUFBTyxRQUFDLE1BQWMsYUFBYSxnQkFBZ0IsTUFBTTtBQUM3RCxvQkFBYyxLQUFLLEVBQUUsY0FBYztBQUFBLElBQ3BDO0FBQ0EsVUFBTSxhQUFhLENBQUMsVUFBdUI7QUFDMUMsWUFBTSxVQUFVLE9BQU8sV0FBVztBQUNsQyxZQUFNLFFBQVEsTUFBTSxjQUFjLHlCQUF5QjtBQUMzRCxVQUFJO0FBQU8sUUFBQyxNQUFjLGFBQWEsZ0JBQWdCLE9BQU87QUFDOUQsWUFBTSxNQUFNLE1BQU0sY0FBYyxjQUFjO0FBQzlDLFVBQUk7QUFBSyxZQUFJLE9BQU87QUFBQSxJQUNyQjtBQUdBLFVBQU0sWUFBWSxTQUFTLGNBQWMsS0FBSztBQUM5QyxjQUFVLFlBQVk7QUFDdEI7QUFDQyxZQUFNLE1BQU0sS0FBSyxZQUFZLEVBQUUsV0FBVyxDQUFDO0FBQzNDLFVBQUksVUFBVSxJQUFJLGdCQUFnQjtBQUNsQyxnQkFBVSxZQUFZLEdBQUc7QUFBQSxJQUMxQjtBQUNBLFVBQU0sWUFBWSxTQUFTLGNBQWMsT0FBTztBQUNoRCxjQUFVLE9BQU87QUFDakIsY0FBVSxjQUFjLEVBQUUsNEJBQTRCO0FBQ3RELFFBQUksS0FBSztBQUFPLGdCQUFVLFFBQVEsS0FBSyxNQUFNO0FBQzdDO0FBQ0MsWUFBTSxRQUFRLFNBQVMsY0FBYyxLQUFLO0FBQzFDLFlBQU0sWUFBWTtBQUNsQixZQUFNLFlBQVksU0FBUztBQUMzQixnQkFBVSxZQUFZLEtBQUs7QUFBQSxJQUM1QjtBQUNBLFNBQUssZUFBZSxTQUFTO0FBQzdCLFNBQUssWUFBWSxTQUFTO0FBQzFCLFVBQU0sZUFBZSxNQUFNO0FBQzFCLFlBQU0sS0FBSyxVQUFVLFNBQVMsSUFBSSxLQUFLO0FBQ3ZDLFVBQUksQ0FBQyxHQUFHO0FBQUUsaUJBQVMsV0FBVyxFQUFFLHlCQUF5QixDQUFDO0FBQUcsZUFBTztBQUFBLE1BQU87QUFDM0UsaUJBQVcsU0FBUztBQUFHLGFBQU87QUFBQSxJQUMvQjtBQUNBLGNBQVUsaUJBQWlCLFNBQVMsWUFBWTtBQUNoRCxjQUFVLGlCQUFpQixRQUFRLFlBQVk7QUFHL0MsVUFBTSxZQUFZLFNBQVMsY0FBYyxLQUFLO0FBQzlDLGNBQVUsWUFBWTtBQUN0QixjQUFVLFlBQVksS0FBSyxZQUFZLEVBQUUsV0FBVyxDQUFDLENBQUM7QUFDdEQsVUFBTSxZQUFZLFNBQVMsY0FBYyxPQUFPO0FBQ2hELGNBQVUsT0FBTztBQUNqQixjQUFVLGNBQWMsY0FBTyxFQUFFLHVCQUF1QjtBQUN4RCxRQUFJLEtBQUs7QUFBTyxnQkFBVSxRQUFRLEtBQUssTUFBTTtBQUFBLFNBQVc7QUFDdkQsVUFBSTtBQUNILGNBQU0sVUFBVSxnQkFBSyxJQUFZLFlBQWpCLG1CQUEwQixZQUExQixtQkFBb0M7QUFDcEQsY0FBTSxXQUFXO0FBQ2pCLGtCQUFVLFFBQVMsVUFBVSxPQUFPLFlBQVksT0FBTyxTQUFTLGNBQWUsT0FBTyxTQUFTLGNBQWM7QUFBQSxNQUM5RyxTQUFTLEdBQVA7QUFDRCxrQkFBVSxRQUFRO0FBQUEsTUFDbkI7QUFBQSxJQUNEO0FBQ0EsVUFBTSxxQkFBcUIsTUFBTTtBQUNoQyxZQUFNLFFBQVEsS0FBSyxzQkFBc0IsVUFBVSxTQUFTLEVBQUU7QUFDOUQsZ0JBQVUsUUFBUSxTQUFTO0FBQUEsSUFDNUI7QUFDQSxjQUFVLGlCQUFpQixTQUFTLGtCQUFrQjtBQUN0RCxjQUFVLGlCQUFpQixTQUFTLENBQUMsTUFBTTtBQUFFLGlCQUFXLG9CQUFvQixDQUFDO0FBQUEsSUFBRyxDQUFDO0FBQ2pGO0FBQ0MsWUFBTSxRQUFRLFNBQVMsY0FBYyxLQUFLO0FBQzFDLFlBQU0sWUFBWTtBQUNsQixZQUFNLFlBQVksU0FBUztBQUMzQixnQkFBVSxZQUFZLEtBQUs7QUFBQSxJQUM1QjtBQUNBLFNBQUssZUFBZSxTQUFTO0FBQzdCLFNBQUssWUFBWSxTQUFTO0FBRzFCLFVBQU0sYUFBYSxTQUFTLGNBQWMsS0FBSztBQUMvQyxlQUFXLFlBQVk7QUFDdkI7QUFDQyxZQUFNLE1BQU0sS0FBSyxZQUFZLEVBQUUsWUFBWSxDQUFDO0FBQzVDLFVBQUksVUFBVSxJQUFJLGdCQUFnQjtBQUNsQyxpQkFBVyxZQUFZLEdBQUc7QUFBQSxJQUMzQjtBQUNBLFVBQU0sYUFBYSxTQUFTLGNBQWMsT0FBTztBQUNqRCxlQUFXLE9BQU87QUFDbEIsZUFBVyxjQUFjLEVBQUUsd0JBQXdCO0FBQ25ELGVBQVcsT0FBTztBQUNsQixRQUFJLEtBQUs7QUFBTyxpQkFBVyxRQUFRLEtBQUssTUFBTSxNQUFNLFNBQVM7QUFFN0QsVUFBTSxrQkFBa0IsQ0FBQyxPQUF5QjtBQUNqRCxTQUFHLFFBQVEsS0FBSyxzQkFBc0IsR0FBRyxTQUFTLEVBQUU7QUFBQSxJQUNyRDtBQUNBLFVBQU0sbUJBQW1CLENBQUMsT0FBeUI7QUFDbEQsU0FBRyxRQUFRLEtBQUssdUJBQXVCLEdBQUcsU0FBUyxFQUFFO0FBQUEsSUFDdEQ7QUFDQSxlQUFXLGlCQUFpQixTQUFTLE1BQU0sZ0JBQWdCLFVBQVUsQ0FBQztBQUN0RSxlQUFXLGlCQUFpQixRQUFRLE1BQU07QUFBRSxzQkFBZ0IsVUFBVTtBQUFHLHVCQUFpQixVQUFVO0FBQUEsSUFBRyxDQUFDO0FBQ3hHO0FBQ0MsWUFBTSxRQUFRLFNBQVMsY0FBYyxLQUFLO0FBQzFDLFlBQU0sWUFBWTtBQUNsQixZQUFNLFlBQVksVUFBVTtBQUM1QixpQkFBVyxZQUFZLEtBQUs7QUFBQSxJQUM3QjtBQUNBLFNBQUssZUFBZSxVQUFVO0FBQzlCLFNBQUssWUFBWSxVQUFVO0FBQzNCLFVBQU0sZ0JBQWdCLE1BQU07QUFDM0IsWUFBTSxPQUFPLFdBQVcsU0FBUyxJQUFJLEtBQUs7QUFDMUMsWUFBTSxNQUFNLEtBQUssV0FBVyxHQUFHO0FBQy9CLFVBQUksUUFBUSxNQUFNO0FBQUUsaUJBQVMsWUFBWSxFQUFFLHlCQUF5QixDQUFDO0FBQUcsZUFBTztBQUFBLE1BQU87QUFDdEYsaUJBQVcsVUFBVTtBQUFHLGFBQU87QUFBQSxJQUNoQztBQUNBLGVBQVcsaUJBQWlCLFNBQVMsYUFBYTtBQUNsRCxlQUFXLGlCQUFpQixRQUFRLGFBQWE7QUFHakQsVUFBTSxZQUFZLFNBQVMsY0FBYyxLQUFLO0FBQzlDLGNBQVUsWUFBWTtBQUN0QjtBQUNDLFlBQU0sTUFBTSxLQUFLLFlBQVksRUFBRSxpQkFBaUIsQ0FBQztBQUNqRCxVQUFJLFVBQVUsSUFBSSxnQkFBZ0I7QUFDbEMsZ0JBQVUsWUFBWSxHQUFHO0FBQUEsSUFDMUI7QUFDQSxVQUFNLFlBQVksU0FBUyxjQUFjLE9BQU87QUFDaEQsY0FBVSxPQUFPO0FBQ2pCLGNBQVUsV0FBVztBQUNyQixjQUFVLGNBQWMsRUFBRSxtQkFBbUI7QUFDN0MsY0FBVSxRQUFRLEtBQUssUUFBUSxLQUFLLGdCQUFnQixLQUFLLE1BQU0sVUFBVSxJQUFJO0FBQzdFLGNBQVUsaUJBQWlCLFNBQVMsTUFBTTtBQXhMNUMsVUFBQUM7QUF5TEcsV0FBSyxlQUFlLFVBQVUsUUFBUSxJQUFJLEtBQUssVUFBVSxLQUFLLE1BQUtBLE1BQUEsS0FBSyxVQUFMLGdCQUFBQSxJQUFZLGVBQWMsSUFBSSxLQUFLLEdBQUksQ0FBQyxXQUFXO0FBQ3JILGtCQUFVLFFBQVEsS0FBSyxnQkFBZ0IsTUFBTTtBQUM3QyxtQkFBVyxTQUFTO0FBQUEsTUFDckIsQ0FBQztBQUFBLElBQ0YsQ0FBQztBQUNEO0FBQ0MsWUFBTSxRQUFRLFNBQVMsY0FBYyxLQUFLO0FBQzFDLFlBQU0sWUFBWTtBQUNsQixZQUFNLFlBQVksU0FBUztBQUMzQixnQkFBVSxZQUFZLEtBQUs7QUFBQSxJQUM1QjtBQUNBLFNBQUssZUFBZSxTQUFTO0FBQzdCLFNBQUssWUFBWSxTQUFTO0FBQzFCLFVBQU0sZUFBZSxNQUFNO0FBQzFCLFVBQUksQ0FBQyxVQUFVLE9BQU87QUFBRSxpQkFBUyxXQUFXLEVBQUUseUJBQXlCLENBQUM7QUFBRyxlQUFPO0FBQUEsTUFBTztBQUN6RixpQkFBVyxTQUFTO0FBQUcsYUFBTztBQUFBLElBQy9CO0FBQ0EsY0FBVSxpQkFBaUIsUUFBUSxZQUFZO0FBRy9DLFVBQU0sVUFBVSxTQUFTLGNBQWMsS0FBSztBQUM1QyxZQUFRLFlBQVk7QUFDcEIsWUFBUSxZQUFZLEtBQUssWUFBWSxFQUFFLGNBQWMsQ0FBQyxDQUFDO0FBQ3ZELFVBQU0sVUFBVSxTQUFTLGNBQWMsT0FBTztBQUM5QyxZQUFRLE9BQU87QUFDZixZQUFRLFdBQVc7QUFDbkIsWUFBUSxjQUFjLEVBQUUseUJBQXlCO0FBQ2pELFlBQVEsUUFBUyxLQUFLLFNBQVMsS0FBSyxNQUFNLFdBQVksS0FBSyxnQkFBZ0IsS0FBSyxNQUFNLFFBQVEsSUFBSTtBQUNsRyxRQUFJO0FBQ0osVUFBTSxnQkFBZ0IsTUFBTTtBQUFFLFVBQUk7QUFBVSxpQkFBUyxNQUFNLFVBQVUsUUFBUSxRQUFRLGdCQUFnQjtBQUFBLElBQVE7QUFDN0csWUFBUSxpQkFBaUIsU0FBUyxNQUFNO0FBdk4xQyxVQUFBQTtBQXdORyxXQUFLLGVBQWUsUUFBUSxRQUFRLElBQUksS0FBSyxRQUFRLEtBQUssTUFBS0EsTUFBQSxLQUFLLFVBQUwsZ0JBQUFBLElBQVksYUFBWSxJQUFJLEtBQUssR0FBSSxDQUFDLFdBQVc7QUFDL0csZ0JBQVEsUUFBUSxLQUFLLGdCQUFnQixNQUFNO0FBQzNDLHNCQUFjO0FBRWQsWUFBSSxVQUFVLE9BQU87QUFDcEIsZ0JBQU0sS0FBSyxJQUFJLEtBQUssVUFBVSxLQUFLO0FBQ25DLGdCQUFNLEtBQUssSUFBSSxLQUFLLFFBQVEsS0FBSztBQUNqQyxjQUFJLEdBQUcsUUFBUSxJQUFJLEdBQUcsUUFBUTtBQUFHLHFCQUFTLFNBQVMsRUFBRSx5QkFBeUIsQ0FBQztBQUFBO0FBQVEsdUJBQVcsT0FBTztBQUFBLFFBQzFHO0FBQUEsTUFDRCxDQUFDO0FBQUEsSUFDRixDQUFDO0FBQ0Q7QUFDQyxZQUFNLFFBQVEsU0FBUyxjQUFjLEtBQUs7QUFDMUMsWUFBTSxZQUFZO0FBQ2xCLFlBQU0sT0FBTyxTQUFTLGNBQWMsS0FBSztBQUN6QyxXQUFLLFlBQVk7QUFDakIsV0FBSyxZQUFZLE9BQU87QUFDeEIsaUJBQVcsU0FBUyxjQUFjLFFBQVE7QUFDMUMsZUFBUyxPQUFPO0FBQ2hCLGVBQVMsWUFBWTtBQUNyQixlQUFTLGNBQWM7QUFDdkIsZUFBUyxpQkFBaUIsU0FBUyxDQUFDLE1BQU07QUFDekMsVUFBRSxlQUFlO0FBQUcsVUFBRSxnQkFBZ0I7QUFDdEMsZ0JBQVEsUUFBUTtBQUNoQixzQkFBYztBQUFBLE1BQ2YsQ0FBQztBQUNELFdBQUssWUFBWSxRQUFRO0FBQ3pCLFlBQU0sWUFBWSxJQUFJO0FBQ3RCLGNBQVEsWUFBWSxLQUFLO0FBQUEsSUFDMUI7QUFDQSxTQUFLLGVBQWUsT0FBTztBQUMzQixTQUFLLFlBQVksT0FBTztBQUV4QixrQkFBYztBQUdkLFVBQU0sZUFBZSxTQUFTLGNBQWMsS0FBSztBQUNqRCxpQkFBYSxZQUFZO0FBQ3pCLGlCQUFhLFlBQVksS0FBSyxZQUFZLEVBQUUsbUJBQW1CLENBQUMsQ0FBQztBQUNqRSxVQUFNLGVBQWUsU0FBUyxjQUFjLE9BQU87QUFDbkQsaUJBQWEsT0FBTztBQUNwQixpQkFBYSxjQUFjLEVBQUUsMEJBQTBCO0FBQ3ZELGlCQUFhLE9BQU87QUFDcEIsUUFBSSxLQUFLO0FBQU8sbUJBQWEsUUFBUSxLQUFLLE1BQU0sYUFBYSxTQUFTO0FBQ3RFLGlCQUFhLGlCQUFpQixTQUFTLE1BQU0sZ0JBQWdCLFlBQVksQ0FBQztBQUMxRSxpQkFBYSxpQkFBaUIsUUFBUSxNQUFNO0FBQUUsc0JBQWdCLFlBQVk7QUFBRyx1QkFBaUIsWUFBWTtBQUFBLElBQUcsQ0FBQztBQUM5RztBQUNDLFlBQU0sUUFBUSxTQUFTLGNBQWMsS0FBSztBQUMxQyxZQUFNLFlBQVk7QUFDbEIsWUFBTSxZQUFZLFlBQVk7QUFDOUIsbUJBQWEsWUFBWSxLQUFLO0FBQUEsSUFDL0I7QUFDQSxTQUFLLGVBQWUsWUFBWTtBQUNoQyxTQUFLLFlBQVksWUFBWTtBQUk3QixVQUFNLFlBQVksU0FBUyxjQUFjLEtBQUs7QUFDOUMsY0FBVSxZQUFZO0FBQ3RCLGNBQVUsWUFBWSxLQUFLLFlBQVksRUFBRSxXQUFXLENBQUMsQ0FBQztBQUN0RCxRQUFJLGNBQXdCLEtBQUssUUFBUSxDQUFDLEdBQUksS0FBSyxNQUFNLFFBQVEsQ0FBQyxDQUFFLElBQUksQ0FBQztBQUN6RSxVQUFNLGNBQWMsU0FBUyxjQUFjLEtBQUs7QUFDaEQsZ0JBQVksWUFBWTtBQUN4QixVQUFNLFlBQVksU0FBUyxjQUFjLE9BQU87QUFDaEQsY0FBVSxPQUFPO0FBQ2pCLGNBQVUsY0FBYyxFQUFFLHVCQUF1QjtBQUNqRCxnQkFBWSxZQUFZLFNBQVM7QUFDakM7QUFDQyxZQUFNLFFBQVEsU0FBUyxjQUFjLEtBQUs7QUFDMUMsWUFBTSxZQUFZO0FBQ2xCLFlBQU0sWUFBWSxXQUFXO0FBQzdCLGdCQUFVLFlBQVksS0FBSztBQUFBLElBQzVCO0FBQ0EsU0FBSyxlQUFlLFNBQVM7QUFDN0IsU0FBSyxZQUFZLFNBQVM7QUFFMUIsVUFBTSxZQUFZLENBQUMsU0FBaUIsS0FBSyxLQUFLO0FBQzlDLFVBQU0sU0FBUyxDQUFDLFFBQWdCO0FBQy9CLFlBQU0sU0FBUyxJQUFJLE1BQU0sU0FBUyxFQUFFLElBQUksU0FBUyxFQUFFLE9BQU8sT0FBTztBQUNqRSxhQUFPLFFBQVEsT0FBSztBQUFFLFlBQUksQ0FBQyxZQUFZLFNBQVMsQ0FBQztBQUFHLHNCQUFZLEtBQUssQ0FBQztBQUFBLE1BQUcsQ0FBQztBQUMxRSxnQkFBVTtBQUNWLGdCQUFVLFFBQVE7QUFBQSxJQUNuQjtBQUNBLFVBQU0sWUFBWSxDQUFDLFVBQWtCO0FBQ3BDLG9CQUFjLFlBQVksT0FBTyxRQUFNLE9BQU8sS0FBSztBQUNuRCxnQkFBVTtBQUFBLElBQ1g7QUFDQSxVQUFNLFlBQVksTUFBTTtBQUN2QixZQUFNLEtBQUssWUFBWSxpQkFBaUIsV0FBVyxDQUFDLEVBQUUsUUFBUSxRQUFNLEdBQUcsT0FBTyxDQUFDO0FBQy9FLGtCQUFZLFFBQVEsU0FBTztBQUMxQixjQUFNLE9BQU8sU0FBUyxjQUFjLE1BQU07QUFDMUMsYUFBSyxZQUFZO0FBQ2pCLGFBQUssY0FBYztBQUNuQixjQUFNLEtBQUssU0FBUyxjQUFjLFFBQVE7QUFDMUMsV0FBRyxPQUFPO0FBQ1YsV0FBRyxZQUFZO0FBQ2YsV0FBRyxjQUFjO0FBQ2pCLFdBQUcsaUJBQWlCLFNBQVMsTUFBTSxVQUFVLEdBQUcsQ0FBQztBQUNqRCxhQUFLLFlBQVksRUFBRTtBQUNuQixvQkFBWSxhQUFhLE1BQU0sU0FBUztBQUFBLE1BQ3pDLENBQUM7QUFBQSxJQUNGO0FBR0EsY0FBVTtBQUdWLGNBQVUsaUJBQWlCLFdBQVcsQ0FBQyxNQUFxQjtBQUMzRCxVQUFJLEVBQUUsUUFBUSxXQUFXLEVBQUUsUUFBUSxPQUFPLEVBQUUsUUFBUSxVQUFLO0FBQ3hELFVBQUUsZUFBZTtBQUNqQixZQUFJLFVBQVUsTUFBTSxLQUFLO0FBQUcsaUJBQU8sVUFBVSxLQUFLO0FBQUEsTUFDbkQ7QUFDQSxVQUFJLEVBQUUsUUFBUSxlQUFlLENBQUMsVUFBVSxTQUFTLFlBQVksU0FBUyxHQUFHO0FBQ3hFLFVBQUUsZUFBZTtBQUNqQixrQkFBVSxZQUFZLFlBQVksU0FBUyxDQUFDLENBQUM7QUFBQSxNQUM5QztBQUFBLElBQ0QsQ0FBQztBQUNELGNBQVUsaUJBQWlCLFFBQVEsTUFBTTtBQUN4QyxVQUFJLFVBQVUsTUFBTSxLQUFLO0FBQUcsZUFBTyxVQUFVLEtBQUs7QUFBQSxJQUNuRCxDQUFDO0FBR0QsVUFBTSxVQUFVLFNBQVMsY0FBYyxLQUFLO0FBQzVDLFlBQVEsWUFBWTtBQUNwQixVQUFNLFlBQVksU0FBUyxjQUFjLFFBQVE7QUFDakQsY0FBVSxPQUFPO0FBQ2pCLGNBQVUsY0FBYyxFQUFFLG9CQUFvQjtBQUM5QyxjQUFVLFlBQVk7QUFDdEIsVUFBTSxZQUFZLFNBQVMsY0FBYyxRQUFRO0FBQ2pELGNBQVUsT0FBTztBQUNqQixjQUFVLGNBQWMsRUFBRSxvQkFBb0I7QUFDOUMsY0FBVSxZQUFZO0FBQ3RCLFVBQU0sVUFBVSxTQUFTLGNBQWMsUUFBUTtBQUMvQyxZQUFRLE9BQU87QUFDZixZQUFRLGNBQWMsRUFBRSxrQkFBa0I7QUFDMUMsWUFBUSxZQUFZO0FBQ3BCLFlBQVEsWUFBWSxTQUFTO0FBQzdCLFFBQUksS0FBSztBQUFPLGNBQVEsWUFBWSxTQUFTO0FBQzdDLFlBQVEsWUFBWSxPQUFPO0FBQzNCLFNBQUssWUFBWSxPQUFPO0FBRXhCLFlBQVEsWUFBWSxJQUFJO0FBQ3hCLFNBQUssUUFBUSxZQUFZLE9BQU87QUFDaEMsU0FBSyxPQUFPLFlBQVksS0FBSyxPQUFPO0FBQ3BDLGFBQVMsS0FBSyxZQUFZLEtBQUssTUFBTTtBQUdyQyxVQUFNLFFBQVEsTUFBTSxLQUFLLE1BQU07QUFDL0IsU0FBSyxPQUFPLGlCQUFpQixTQUFTLENBQUMsTUFBTTtBQUFFLFVBQUksRUFBRSxXQUFXLEtBQUs7QUFBUSxjQUFNO0FBQUEsSUFBRyxDQUFDO0FBQ3ZGLGNBQVUsaUJBQWlCLFNBQVMsS0FBSztBQUN6QyxRQUFJLEtBQUssT0FBTztBQUNmLGdCQUFVLGlCQUFpQixTQUFTLFlBQVk7QUFDL0MsWUFBSSxDQUFDLEtBQUs7QUFBTztBQUNqQixjQUFNLEtBQUssTUFBTSxJQUFJLGFBQWEsRUFBRSwyQkFBMkIsRUFBRSxNQUFNLEtBQUssTUFBTSxLQUFLLENBQUMsR0FBRyxFQUFFLGVBQWUsR0FBRyxFQUFFLGVBQWUsR0FBRyxJQUFJLEVBQUUsS0FBSztBQUM5SSxZQUFJLENBQUM7QUFBSTtBQUNULGNBQU0sS0FBSyxnQkFBZ0IsWUFBWSxLQUFLLE1BQU0sRUFBRTtBQUNwRCxZQUFJLEtBQUs7QUFBUyxlQUFLLFFBQVE7QUFDL0IsY0FBTTtBQUFBLE1BQ1AsQ0FBQztBQUFBLElBQ0Y7QUFDQSxTQUFLLGlCQUFpQixVQUFVLE9BQU8sTUFBTTtBQXhYL0MsVUFBQUEsS0FBQUMsS0FBQTtBQXlYRyxRQUFFLGVBQWU7QUFFakIsaUJBQVcsU0FBUztBQUFHLGlCQUFXLFVBQVU7QUFBRyxpQkFBVyxTQUFTO0FBQUcsaUJBQVcsT0FBTztBQUFHLGlCQUFXLFlBQVk7QUFFbEgsWUFBTSxXQUFXLFVBQVUsU0FBUyxJQUFJLEtBQUs7QUFDN0MsWUFBTSxZQUFZLFdBQVcsU0FBUyxJQUFJLEtBQUs7QUFDL0MsWUFBTSxXQUFXLEtBQUssV0FBVyxRQUFRO0FBQ3pDLFVBQUksUUFBUTtBQUNaLFVBQUksQ0FBQyxTQUFTO0FBQUUsaUJBQVMsV0FBVyxFQUFFLHlCQUF5QixDQUFDO0FBQUcsZ0JBQVE7QUFBQSxNQUFPO0FBQ2xGLFVBQUksYUFBYSxNQUFNO0FBQUUsaUJBQVMsWUFBWSxFQUFFLHlCQUF5QixDQUFDO0FBQUcsZ0JBQVE7QUFBQSxNQUFPO0FBQzVGLFVBQUksQ0FBQyxVQUFVLE9BQU87QUFBRSxpQkFBUyxXQUFXLEVBQUUseUJBQXlCLENBQUM7QUFBRyxnQkFBUTtBQUFBLE1BQU87QUFDMUYsVUFBSSxDQUFDLE9BQU87QUFDWCxjQUFNLFdBQVcsQ0FBQyxXQUFXLFlBQVksU0FBUyxFQUFFLEtBQUssT0FBSyxFQUFFLFVBQVUsU0FBUyxXQUFXLENBQUM7QUFDL0YsWUFBSSxVQUFVO0FBQ2IsV0FBQ0QsTUFBQSxTQUFTLGNBQWMsT0FBTyxNQUE5QixnQkFBQUEsSUFBNkQ7QUFDOUQsbUJBQVMsZUFBZSxFQUFFLFVBQVUsVUFBVSxPQUFPLFNBQVMsQ0FBQztBQUFBLFFBQ2hFO0FBQ0E7QUFBQSxNQUNEO0FBQ0EsWUFBTSxXQUFXLElBQUksS0FBSyxVQUFVLEtBQUs7QUFDekMsWUFBTSxhQUFhO0FBQ25CLFVBQUksU0FBMkI7QUFDL0IsVUFBSSxRQUFRLE9BQU87QUFDbEIsY0FBTSxJQUFJLElBQUksS0FBSyxRQUFRLEtBQUs7QUFDaEMsWUFBSSxFQUFFLFFBQVEsSUFBSSxTQUFTLFFBQVEsR0FBRztBQUFFLG1CQUFTLFNBQVMsRUFBRSx5QkFBeUIsQ0FBQztBQUFHLFdBQUNDLE1BQUEsUUFBUSxjQUFjLE9BQU8sTUFBN0IsZ0JBQUFBLElBQTREO0FBQVM7QUFBQSxRQUFRO0FBQ3ZLLGlCQUFTO0FBQUEsTUFDVjtBQUNBLFlBQU0sY0FBYyxhQUFhLFNBQVMsSUFBSSxLQUFLO0FBQ25ELFlBQU0sYUFBYSxhQUFhLEtBQUssV0FBVyxVQUFVLElBQUk7QUFDOUQsVUFBSSxjQUFjLGVBQWUsTUFBTTtBQUFFLGlCQUFTLGNBQWMsRUFBRSwyQkFBMkIsQ0FBQztBQUFHO0FBQUEsTUFBUTtBQUN6RyxXQUFLLGNBQWMsS0FBSyxZQUFZO0FBQUUsaUJBQVMsY0FBYyxFQUFFLDJCQUEyQixDQUFDO0FBQUc7QUFBQSxNQUFRO0FBRXRHLFlBQU0sWUFBWTtBQUFBLFFBQ2pCLE1BQUksVUFBSyxVQUFMLG1CQUFZLE9BQU07QUFBQSxRQUN0QixNQUFNO0FBQUEsUUFDTixNQUFNLFVBQVUsU0FBUztBQUFBLFFBQ3pCLE9BQU87QUFBQSxRQUNQLFlBQVk7QUFBQSxRQUNaLFVBQVU7QUFBQSxRQUNWLGNBQWMsY0FBYztBQUFBLFFBQzVCLE1BQU07QUFBQSxNQUNQO0FBQ0EsVUFBSTtBQUNILGNBQU0sUUFBUSxJQUFJLE1BQU0sU0FBUztBQUNqQyxjQUFNLEtBQUssZ0JBQWdCLFVBQVUsS0FBSztBQUMxQyxZQUFJLEtBQUs7QUFBUyxlQUFLLFFBQVE7QUFDL0IsY0FBTTtBQUFBLE1BQ1AsU0FBUyxPQUFQO0FBQ0QsWUFBSSx3QkFBTyxFQUFFLHFCQUFxQixFQUFFLEtBQUssTUFBTSxRQUFRLENBQUMsQ0FBQztBQUFBLE1BQzFEO0FBQUEsSUFDRCxDQUFDO0FBQUEsRUFDRjtBQUFBLEVBRVEsd0JBQXdCO0FBQy9CLFVBQU0sV0FBVztBQUNqQixRQUFJLFNBQVMsZUFBZSxRQUFRO0FBQUc7QUFDdkMsVUFBTSxRQUFRLFNBQVMsY0FBYyxPQUFPO0FBQzVDLFVBQU0sS0FBSztBQUNYLFVBQU0sY0FBYztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQWtDcEIsYUFBUyxLQUFLLFlBQVksS0FBSztBQUFBLEVBQ2hDO0FBQUEsRUFFUSxlQUFlLE9BQW9CO0FBQzFDLFVBQU0sTUFBTSxVQUFVO0FBQ3RCLElBQUMsTUFBTSxNQUFjLHNCQUFzQjtBQUMzQyxVQUFNLE1BQU0sYUFBYTtBQUN6QixVQUFNLE1BQU0sWUFBWTtBQUN4QixVQUFNLE1BQU0sU0FBUztBQUNyQixVQUFNLE1BQU0sU0FBUztBQUNyQixVQUFNLFFBQVEsTUFBTSxjQUFjLE9BQU87QUFDekMsUUFBSSxPQUFPO0FBQ1YsWUFBTSxNQUFNLFdBQVc7QUFDdkIsWUFBTSxNQUFNLFVBQVU7QUFDdEIsWUFBTSxNQUFNLFNBQVM7QUFBQSxJQUN0QjtBQUNBLFVBQU0sUUFBUSxNQUFNLGNBQWMsYUFBYTtBQUMvQyxRQUFJLE9BQU87QUFDVixZQUFNLE1BQU0sUUFBUTtBQUFBLElBQ3JCO0FBQUEsRUFDRDtBQUFBLEVBRUEsUUFBUTtBQUNQLFFBQUksS0FBSyxVQUFVLEtBQUssT0FBTyxlQUFlO0FBQzdDLFdBQUssT0FBTyxjQUFjLFlBQVksS0FBSyxNQUFNO0FBQUEsSUFDbEQ7QUFDQSxTQUFLLFNBQVM7QUFDZCxTQUFLLFVBQVU7QUFBQSxFQUNoQjtBQUFBLEVBRVEsZ0JBQWdCLE1BQW9CO0FBQzNDLFVBQU0sSUFBSSxJQUFJLEtBQUssS0FBSyxRQUFRLElBQUksS0FBSyxrQkFBa0IsSUFBSSxHQUFLO0FBQ3BFLFdBQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxHQUFHLEVBQUUsQ0FBQztBQUFBLEVBQ3BDO0FBQUE7QUFBQSxFQUdRLHNCQUFzQixPQUF1QjtBQUNwRCxRQUFJLEtBQUssU0FBUyxJQUFJLFFBQVEsV0FBVyxFQUFFO0FBQzNDLFFBQUksRUFBRSxRQUFRLE9BQU8sRUFBRTtBQUN2QixRQUFJLEVBQUUsUUFBUSxlQUFlLEVBQUU7QUFDL0IsV0FBTztBQUFBLEVBQ1I7QUFBQSxFQUVRLHVCQUF1QixPQUF1QjtBQUNyRCxVQUFNLEtBQUssU0FBUyxJQUFJLE1BQU0scUJBQXFCO0FBQ25ELFFBQUksQ0FBQztBQUFHLGFBQU87QUFDZixVQUFNLFVBQVUsRUFBRSxDQUFDO0FBQ25CLFVBQU0sV0FBVyxFQUFFLENBQUMsS0FBSyxJQUFJLE1BQU0sR0FBRyxDQUFDO0FBQ3ZDLFdBQU8sVUFBVSxHQUFHLFdBQVcsWUFBWTtBQUFBLEVBQzVDO0FBQUEsRUFFUSxXQUFXLE9BQThCO0FBQ2hELFVBQU0sWUFBWSxLQUFLLHNCQUFzQixLQUFLO0FBQ2xELFVBQU0sVUFBVSxLQUFLLHVCQUF1QixTQUFTO0FBQ3JELFFBQUksWUFBWTtBQUFJLGFBQU87QUFDM0IsVUFBTSxNQUFNLE9BQU8sT0FBTztBQUMxQixXQUFPLE9BQU8sU0FBUyxHQUFHLEtBQUssT0FBTyxJQUFJLE1BQU07QUFBQSxFQUNqRDtBQUFBO0FBQUEsRUFHUSxzQkFBc0IsT0FBdUI7QUFDcEQsVUFBTSxhQUFhO0FBQ25CLFVBQU0sS0FBSyxTQUFTLElBQUksTUFBTSxVQUFVO0FBQ3hDLFdBQU8sSUFBSSxFQUFFLENBQUMsSUFBSTtBQUFBLEVBQ25CO0FBQUE7QUFBQSxFQUdRLGVBQWUsYUFBbUIsV0FBbUM7QUFFNUUsVUFBTSxPQUFPLFNBQVMsY0FBYyxLQUFLO0FBQ3pDLFNBQUssWUFBWTtBQUdqQixVQUFNLFNBQVMsU0FBUyxjQUFjLEtBQUs7QUFDM0MsV0FBTyxZQUFZO0FBR25CLFVBQU0sVUFBVSxTQUFTLGNBQWMsS0FBSztBQUM1QyxZQUFRLFlBQVk7QUFHcEIsVUFBTSxRQUFRLFNBQVMsY0FBYyxLQUFLO0FBQzFDLFVBQU0sWUFBWTtBQUNsQixVQUFNLGNBQWMsRUFBRSxXQUFXO0FBR2pDLFVBQU0saUJBQWlCLFNBQVMsY0FBYyxLQUFLO0FBQ25ELG1CQUFlLFlBQVk7QUFFM0IsVUFBTSxjQUFjLFlBQVksWUFBWTtBQUM1QyxVQUFNLGVBQWUsWUFBWSxTQUFTLElBQUk7QUFDOUMsVUFBTSxhQUFhLFlBQVksUUFBUTtBQUV2QyxVQUFNLGFBQWEsS0FBSyxrQkFBa0IsRUFBRSxXQUFXLEdBQUcsS0FBSyxjQUFjLFdBQVcsR0FBRyxhQUFhLENBQUMsU0FBUztBQUNqSCxXQUFLLGlCQUFpQixXQUFXLE1BQU0sWUFBWSxhQUFhO0FBQUEsSUFDakUsR0FBRyxLQUFLO0FBQ1IsVUFBTSxjQUFjLEtBQUssa0JBQWtCLEVBQUUsWUFBWSxHQUFHLEtBQUssZUFBZSxHQUFHLGNBQWMsQ0FBQyxVQUFVO0FBQzNHLFdBQUssaUJBQWlCLFdBQVcsV0FBVyxlQUFlLEtBQUs7QUFBQSxJQUNqRSxHQUFHLElBQUk7QUFDUCxVQUFNLFlBQVksS0FBSyxrQkFBa0IsRUFBRSxVQUFVLEdBQUcsS0FBSyxhQUFhLGFBQWEsWUFBWSxHQUFHLFlBQVksUUFBVyxJQUFJO0FBRWpJLG1CQUFlLFlBQVksV0FBVyxPQUFPO0FBQzdDLG1CQUFlLFlBQVksWUFBWSxPQUFPO0FBQzlDLG1CQUFlLFlBQVksVUFBVSxPQUFPO0FBRzVDLFVBQU0sVUFBVSxTQUFTLGNBQWMsS0FBSztBQUM1QyxZQUFRLFlBQVk7QUFDcEIsVUFBTSxZQUFZLFNBQVMsY0FBYyxRQUFRO0FBQ2pELGNBQVUsWUFBWTtBQUN0QixjQUFVLGNBQWMsRUFBRSxlQUFlO0FBQ3pDLFVBQU0sYUFBYSxTQUFTLGNBQWMsUUFBUTtBQUNsRCxlQUFXLFlBQVk7QUFDdkIsZUFBVyxjQUFjLEVBQUUsZ0JBQWdCO0FBRTNDLFlBQVEsWUFBWSxTQUFTO0FBQzdCLFlBQVEsWUFBWSxVQUFVO0FBQzlCLFlBQVEsWUFBWSxLQUFLO0FBQ3pCLFlBQVEsWUFBWSxjQUFjO0FBQ2xDLFlBQVEsWUFBWSxPQUFPO0FBQzNCLFdBQU8sWUFBWSxPQUFPO0FBQzFCLFNBQUssWUFBWSxNQUFNO0FBQ3ZCLGFBQVMsS0FBSyxZQUFZLElBQUk7QUFFOUIsVUFBTSxjQUFjLE1BQU07QUFBRSxlQUFTLEtBQUssWUFBWSxJQUFJO0FBQUEsSUFBRztBQUM3RCxTQUFLLGlCQUFpQixTQUFTLENBQUMsTUFBTTtBQUFFLFVBQUksRUFBRSxXQUFXO0FBQU0sb0JBQVk7QUFBQSxJQUFHLENBQUM7QUFDL0UsY0FBVSxpQkFBaUIsU0FBUyxXQUFXO0FBQy9DLGVBQVcsaUJBQWlCLFNBQVMsTUFBTTtBQUMxQyxZQUFNLE9BQU8sV0FBVztBQUN4QixZQUFNLFFBQVEsWUFBWTtBQUMxQixZQUFNLE1BQU0sVUFBVTtBQUN0QixZQUFNLFNBQVMsSUFBSSxLQUFLLEdBQUcsUUFBUSxNQUFNLFNBQVMsRUFBRSxTQUFTLEdBQUcsR0FBRyxLQUFLLElBQUksU0FBUyxFQUFFLFNBQVMsR0FBRyxHQUFHLEdBQUc7QUFDekcsZ0JBQVUsTUFBTTtBQUNoQixrQkFBWTtBQUFBLElBQ2IsQ0FBQztBQUFBLEVBQ0Y7QUFBQSxFQUVRLGNBQWMsYUFBK0I7QUFDcEQsVUFBTSxVQUFVO0FBQ2hCLFVBQU0sVUFBVSxJQUFJLEtBQUssRUFBRSxZQUFZO0FBQ3ZDLFVBQU0sVUFBVSxVQUFVO0FBQzFCLFVBQU0sUUFBa0IsQ0FBQztBQUN6QixhQUFTLElBQUksU0FBUyxLQUFLLFNBQVM7QUFBSyxZQUFNLEtBQUssQ0FBQztBQUNyRCxXQUFPO0FBQUEsRUFDUjtBQUFBLEVBRVEsaUJBQTJCO0FBQ2xDLFdBQU8sTUFBTSxLQUFLLEVBQUUsUUFBUSxHQUFHLEdBQUcsQ0FBQyxHQUFHLE1BQU0sSUFBSSxDQUFDO0FBQUEsRUFDbEQ7QUFBQSxFQUVRLGFBQWEsTUFBYyxPQUF5QjtBQUMzRCxVQUFNLGNBQWMsSUFBSSxLQUFLLE1BQU0sT0FBTyxDQUFDLEVBQUUsUUFBUTtBQUNyRCxXQUFPLE1BQU0sS0FBSyxFQUFFLFFBQVEsWUFBWSxHQUFHLENBQUMsR0FBRyxNQUFNLElBQUksQ0FBQztBQUFBLEVBQzNEO0FBQUEsRUFFUSxrQkFBa0IsUUFBZ0IsUUFBa0IsZUFBdUIsVUFBb0MsYUFBc0IsT0FBd0Q7QUFDcE0sVUFBTSxTQUFTLFNBQVMsY0FBYyxLQUFLO0FBQzNDLFdBQU8sWUFBWTtBQUNuQixVQUFNLFlBQVksU0FBUyxjQUFjLEtBQUs7QUFDOUMsY0FBVSxZQUFZO0FBRXRCLFFBQUksZ0JBQWdCLE9BQU8sUUFBUSxhQUFhO0FBQ2hELFFBQUksdUJBQXVCO0FBQzNCLFVBQU0sTUFBTSxFQUFFLFNBQVMsUUFBUSxlQUFlLHFCQUFxQjtBQUNuRSxVQUFNLGFBQWE7QUFFbkIsUUFBSSxZQUFZO0FBQ2YsWUFBTSxjQUFjO0FBQ3BCLFlBQU0sYUFBYSxPQUFPLFNBQVM7QUFDbkMsWUFBTSxtQkFBbUI7QUFDekIsWUFBTSxtQkFBbUIsbUJBQW1CLE9BQU8sU0FBUyxhQUFhLGdCQUFnQjtBQUN6RixlQUFTLFNBQVMsR0FBRyxTQUFTLGFBQWEsVUFBVTtBQUNwRCxlQUFPLFFBQVEsQ0FBQyxPQUFPLFVBQVU7QUFDaEMsZ0JBQU0sT0FBTyxTQUFTLGNBQWMsS0FBSztBQUN6QyxlQUFLLFlBQVk7QUFDakIsZUFBSyxjQUFjLEdBQUcsTUFBTSxTQUFTLEVBQUUsU0FBUyxHQUFHLEdBQUcsSUFBSTtBQUMxRCxlQUFLLFFBQVEsUUFBUSxNQUFNLFNBQVM7QUFDcEMsZUFBSyxRQUFRLFNBQVMsU0FBUyxPQUFPLFNBQVMsT0FBTyxTQUFTO0FBQy9ELGVBQUssUUFBUSxZQUFZLE1BQU0sU0FBUztBQUN4QyxvQkFBVSxZQUFZLElBQUk7QUFBQSxRQUMzQixDQUFDO0FBQUEsTUFDRjtBQUNBLGdCQUFVLE1BQU0sU0FBUyxHQUFHLGFBQWE7QUFDekMsWUFBTSxtQkFBbUIsbUJBQW1CLE9BQU8sU0FBUztBQUM1RCxZQUFNLFFBQVEsTUFBTSxLQUFLLFVBQVUsaUJBQWlCLGtCQUFrQixDQUFDO0FBQ3ZFLFVBQUksTUFBTSxnQkFBZ0IsR0FBRztBQUM1QixjQUFNLFFBQVEsQ0FBQyxJQUFJLFFBQVEsR0FBRyxVQUFVLE9BQU8sWUFBWSxRQUFRLGdCQUFnQixDQUFDO0FBQUEsTUFDckY7QUFDQSw0QkFBc0IsTUFBTTtBQUMzQixrQkFBVSxZQUFZO0FBQUEsTUFDdkIsQ0FBQztBQUNELFVBQUksY0FBYztBQUNsQixnQkFBVSxpQkFBaUIsVUFBVSxNQUFNO0FBQzFDLFlBQUk7QUFBYTtBQUNqQixjQUFNLFlBQVksVUFBVTtBQUM1QixjQUFNLGVBQWUsS0FBSyxNQUFNLFlBQVksVUFBVTtBQUN0RCxjQUFNLGFBQWMsZUFBZSxPQUFPLFNBQVUsT0FBTyxVQUFVLE9BQU87QUFDNUUsY0FBTSxZQUFZLE9BQU8sU0FBUztBQUNsQyxrQkFBVSxpQkFBaUIsa0JBQWtCLEVBQUUsUUFBUSxDQUFDLE1BQU0sVUFBVTtBQUN2RSxnQkFBTSxnQkFBZ0IsUUFBUSxPQUFPO0FBQ3JDLGVBQUssVUFBVSxPQUFPLFlBQVksa0JBQWtCLFNBQVM7QUFBQSxRQUM5RCxDQUFDO0FBQ0Qsd0JBQWdCO0FBQ2hCLCtCQUF1QjtBQUN2QixRQUFDLElBQVksZ0JBQWdCO0FBQzdCLFlBQUk7QUFBVSxtQkFBUyxvQkFBb0I7QUFDM0MsY0FBTSxnQkFBZ0IsY0FBYyxLQUFLLE9BQU8sU0FBUztBQUN6RCxZQUFJLGFBQWEsY0FBYztBQUM5Qix3QkFBYztBQUNkLGdCQUFNLFNBQVMsWUFBWTtBQUMzQixvQkFBVSxZQUFZLE9BQU8sU0FBUyxhQUFhO0FBQ25ELHFCQUFXLE1BQU07QUFBRSwwQkFBYztBQUFBLFVBQU8sR0FBRyxFQUFFO0FBQUEsUUFDOUMsV0FBVyxhQUFhLEdBQUc7QUFDMUIsd0JBQWM7QUFDZCxnQkFBTSxTQUFTO0FBQ2Ysb0JBQVUsYUFBYSxjQUFjLEtBQUssT0FBTyxTQUFTLGFBQWE7QUFDdkUscUJBQVcsTUFBTTtBQUFFLDBCQUFjO0FBQUEsVUFBTyxHQUFHLEVBQUU7QUFBQSxRQUM5QztBQUFBLE1BQ0QsQ0FBQztBQUdELGdCQUFVLGlCQUFpQixTQUFTLENBQUMsT0FBTztBQUMzQyxjQUFNLFNBQVMsR0FBRztBQUNsQixjQUFNLFNBQVMsVUFBVSxPQUFPLFVBQVcsT0FBTyxRQUFRLGtCQUFrQixJQUEyQjtBQUN2RyxZQUFJLENBQUM7QUFBUTtBQUNiLGNBQU0sZUFBZSxPQUFPLE9BQU8sUUFBUSxTQUFTLEdBQUc7QUFDdkQsY0FBTSxhQUFjLGVBQWUsT0FBTyxTQUFVLE9BQU8sVUFBVSxPQUFPO0FBQzVFLGNBQU0sY0FBYyxtQkFBbUIsT0FBTyxTQUFTO0FBQ3ZELGtCQUFVLFlBQVksY0FBYztBQUNwQyx3QkFBZ0I7QUFDaEIsK0JBQXVCLE9BQU8sU0FBUztBQUN2QyxRQUFDLElBQVksZ0JBQWdCO0FBQzdCLFlBQUk7QUFBVSxtQkFBUyxvQkFBb0I7QUFBQSxNQUM1QyxDQUFDO0FBQUEsSUFDRixPQUFPO0FBQ04sYUFBTyxRQUFRLENBQUMsT0FBTyxVQUFVO0FBQ2hDLGNBQU0sT0FBTyxTQUFTLGNBQWMsS0FBSztBQUN6QyxhQUFLLFlBQVk7QUFDakIsYUFBSyxjQUFjLEdBQUcsTUFBTSxTQUFTLEVBQUUsU0FBUyxHQUFHLEdBQUcsSUFBSTtBQUMxRCxhQUFLLFFBQVEsUUFBUSxNQUFNLFNBQVM7QUFDcEMsYUFBSyxRQUFRLFFBQVEsTUFBTSxTQUFTO0FBQ3BDLFlBQUksVUFBVTtBQUFzQixlQUFLLFVBQVUsSUFBSSxVQUFVO0FBQ2pFLGtCQUFVLFlBQVksSUFBSTtBQUFBLE1BQzNCLENBQUM7QUFDRCxnQkFBVSxpQkFBaUIsVUFBVSxNQUFNO0FBQzFDLGNBQU0sWUFBWSxVQUFVO0FBQzVCLGNBQU0sV0FBVyxLQUFLLE1BQU0sWUFBWSxVQUFVO0FBQ2xELFlBQUksYUFBYSxpQkFBaUIsWUFBWSxLQUFLLFdBQVcsT0FBTyxRQUFRO0FBQzVFLG9CQUFVLGlCQUFpQixrQkFBa0IsRUFBRSxRQUFRLENBQUMsTUFBTSxVQUFVO0FBQ3ZFLGlCQUFLLFVBQVUsT0FBTyxZQUFZLFVBQVUsUUFBUTtBQUFBLFVBQ3JELENBQUM7QUFDRCwwQkFBZ0I7QUFDaEIsaUNBQXVCLE9BQU8sUUFBUTtBQUN0QyxVQUFDLElBQVksZ0JBQWdCO0FBQzdCLGNBQUk7QUFBVSxxQkFBUyxvQkFBb0I7QUFBQSxRQUM1QztBQUFBLE1BQ0QsQ0FBQztBQUVELGdCQUFVLGlCQUFpQixTQUFTLENBQUMsT0FBTztBQUMzQyxjQUFNLFNBQVMsR0FBRztBQUNsQixjQUFNLFNBQVMsVUFBVSxPQUFPLFVBQVcsT0FBTyxRQUFRLGtCQUFrQixJQUEyQjtBQUN2RyxZQUFJLENBQUM7QUFBUTtBQUNiLGNBQU0sTUFBTSxPQUFPLE9BQU8sUUFBUSxTQUFTLEdBQUc7QUFFOUMsa0JBQVUsaUJBQWlCLGtCQUFrQixFQUFFLFFBQVEsQ0FBQyxJQUFJLE1BQU07QUFDakUsYUFBRyxVQUFVLE9BQU8sWUFBWSxNQUFNLEdBQUc7QUFBQSxRQUMxQyxDQUFDO0FBQ0Qsa0JBQVUsWUFBWSxNQUFNO0FBQzVCLHdCQUFnQjtBQUNoQiwrQkFBdUIsT0FBTyxHQUFHO0FBQ2pDLFFBQUMsSUFBWSxnQkFBZ0I7QUFDN0IsWUFBSTtBQUFVLG1CQUFTLG9CQUFvQjtBQUFBLE1BQzVDLENBQUM7QUFDRCxpQkFBVyxNQUFNO0FBQUUsa0JBQVUsWUFBWSxnQkFBZ0I7QUFBQSxNQUFZLEdBQUcsQ0FBQztBQUFBLElBQzFFO0FBRUEsV0FBTyxZQUFZLFNBQVM7QUFDNUIsV0FBTztBQUFBLEVBQ1I7QUFBQSxFQUVRLGlCQUFpQixXQUE0RCxNQUFjLE9BQXFCO0FBQ3ZILFVBQU0sWUFBWSxVQUFVLFFBQVEsY0FBYyxtQkFBbUI7QUFDckUsVUFBTSxhQUFhLFVBQVU7QUFDN0IsVUFBTSxVQUFVLEtBQUssYUFBYSxNQUFNLEtBQUs7QUFFN0MsV0FBTyxVQUFVO0FBQVksZ0JBQVUsWUFBWSxVQUFVLFVBQVU7QUFDdkUsVUFBTSxjQUFjO0FBQ3BCLFVBQU0sYUFBYTtBQUNuQixVQUFNLG1CQUFtQjtBQUN6QixVQUFNLFNBQVMsS0FBSyxJQUFJLEdBQUcsT0FBTztBQUNsQyxVQUFNLGNBQWMsS0FBSyxJQUFJLFlBQVksTUFBTTtBQUMvQyxVQUFNLGdCQUFnQixRQUFRLFFBQVEsV0FBVztBQUNqRCxhQUFTLFNBQVMsR0FBRyxTQUFTLGFBQWEsVUFBVTtBQUNwRCxjQUFRLFFBQVEsQ0FBQyxLQUFLLFVBQVU7QUFDL0IsY0FBTSxPQUFPLFNBQVMsY0FBYyxLQUFLO0FBQ3pDLGFBQUssWUFBWTtBQUNqQixhQUFLLGNBQWMsR0FBRyxJQUFJLFNBQVMsRUFBRSxTQUFTLEdBQUcsR0FBRyxJQUFJLEVBQUUsVUFBVTtBQUNwRSxhQUFLLFFBQVEsUUFBUSxJQUFJLFNBQVM7QUFDbEMsYUFBSyxRQUFRLFNBQVMsU0FBUyxRQUFRLFNBQVMsT0FBTyxTQUFTO0FBQ2hFLGFBQUssUUFBUSxZQUFZLElBQUksU0FBUztBQUN0QyxrQkFBVSxZQUFZLElBQUk7QUFBQSxNQUMzQixDQUFDO0FBQUEsSUFDRjtBQUNBLGNBQVUsTUFBTSxTQUFTLEdBQUcsUUFBUSxTQUFTLGNBQWM7QUFDM0QsVUFBTSxzQkFBc0IsbUJBQW1CLFFBQVEsU0FBUztBQUNoRSxVQUFNLFdBQVcsTUFBTSxLQUFLLFVBQVUsaUJBQWlCLGtCQUFrQixDQUFDO0FBQzFFLFFBQUksU0FBUyxtQkFBbUIsR0FBRztBQUNsQyxlQUFTLFFBQVEsQ0FBQyxJQUFJLFFBQVEsR0FBRyxVQUFVLE9BQU8sWUFBWSxRQUFRLG1CQUFtQixDQUFDO0FBQUEsSUFDM0Y7QUFDQSwwQkFBc0IsTUFBTTtBQUFFLGdCQUFVLFlBQVksbUJBQW1CLFFBQVEsU0FBUyxhQUFhLGdCQUFnQjtBQUFBLElBQVksQ0FBQztBQUNsSSxRQUFJLGNBQWM7QUFDbEIsY0FBVSxpQkFBaUIsVUFBVSxNQUFNO0FBQzFDLFVBQUk7QUFBYTtBQUNqQixZQUFNLFlBQVksVUFBVTtBQUM1QixZQUFNLGVBQWUsS0FBSyxNQUFNLFlBQVksVUFBVTtBQUN0RCxZQUFNLFlBQVksZUFBZSxRQUFRO0FBQ3pDLFlBQU0sWUFBWSxRQUFRLFNBQVM7QUFDbkMsZ0JBQVUsaUJBQWlCLGtCQUFrQixFQUFFLFFBQVEsQ0FBQyxNQUFNLFVBQVU7QUFDdkUsY0FBTSxnQkFBZ0IsUUFBUSxRQUFRO0FBQ3RDLGFBQUssVUFBVSxPQUFPLFlBQVksa0JBQWtCLFNBQVM7QUFBQSxNQUM5RCxDQUFDO0FBQ0QsTUFBQyxVQUFrQixnQkFBZ0I7QUFDbkMsWUFBTSxnQkFBZ0IsY0FBYyxLQUFLLFFBQVEsU0FBUztBQUMxRCxVQUFJLGFBQWEsY0FBYztBQUM5QixzQkFBYztBQUNkLGNBQU0sU0FBUyxZQUFZO0FBQzNCLGtCQUFVLFlBQVksUUFBUSxTQUFTLGFBQWE7QUFDcEQsbUJBQVcsTUFBTTtBQUFFLHdCQUFjO0FBQUEsUUFBTyxHQUFHLEVBQUU7QUFBQSxNQUM5QyxXQUFXLGFBQWEsR0FBRztBQUMxQixzQkFBYztBQUNkLGNBQU0sU0FBUztBQUNmLGtCQUFVLGFBQWEsY0FBYyxLQUFLLFFBQVEsU0FBUyxhQUFhO0FBQ3hFLG1CQUFXLE1BQU07QUFBRSx3QkFBYztBQUFBLFFBQU8sR0FBRyxFQUFFO0FBQUEsTUFDOUM7QUFBQSxJQUNELENBQUM7QUFHRCxjQUFVLGlCQUFpQixTQUFTLENBQUMsT0FBTztBQUMzQyxZQUFNLFNBQVMsR0FBRztBQUNsQixZQUFNLFNBQVMsVUFBVSxPQUFPLFVBQVcsT0FBTyxRQUFRLGtCQUFrQixJQUEyQjtBQUN2RyxVQUFJLENBQUM7QUFBUTtBQUNiLFlBQU0sZUFBZSxPQUFPLE9BQU8sUUFBUSxTQUFTLEdBQUc7QUFDdkQsWUFBTSxZQUFZLGVBQWUsUUFBUTtBQUN6QyxZQUFNLGNBQWMsbUJBQW1CLFFBQVEsU0FBUztBQUN4RCxnQkFBVSxZQUFZLGNBQWM7QUFDcEMsTUFBQyxVQUFrQixnQkFBZ0IsUUFBUSxTQUFTO0FBQUEsSUFDckQsQ0FBQztBQUFBLEVBQ0Y7QUFBQSxFQUNRLFlBQVksTUFBMkI7QUFDOUMsVUFBTSxLQUFLLFNBQVMsY0FBYyxPQUFPO0FBQ3pDLE9BQUcsY0FBYztBQUNqQixXQUFPO0FBQUEsRUFDUjtBQUNEOzs7QUVyekJBLElBQUFDLG1CQUFnRDs7O0FDTXpDLElBQU0sV0FBTixNQUFlO0FBQUE7QUFBQSxFQVlyQixZQUFZLGFBQTBCLE9BQXNCO0FBVDVELFNBQVEsZUFBd0I7QUFDaEMsU0FBUSxnQkFBMEIsQ0FBQztBQUNuQyxTQUFRLGdCQUF3QjtBQVEvQixTQUFLLGNBQWM7QUFDbkIsU0FBSyxRQUFRO0FBQ2IsU0FBSyxnQkFBZ0IsQ0FBQyxHQUFHLE1BQU0sWUFBWTtBQUFBLEVBQzVDO0FBQUEsRUFFQSxTQUFlO0FBQ2QsU0FBSyxZQUFZLE1BQU07QUFDdkIsU0FBSyxZQUFZLFNBQVMsb0JBQW9CO0FBRzlDLFFBQUksS0FBSyxNQUFNLFdBQVc7QUFDekIsV0FBSyxZQUFZLE1BQU0sWUFBWSxLQUFLLE1BQU07QUFDOUMsV0FBSyxZQUFZLE1BQU0sWUFBWSxLQUFLLE1BQU0sY0FBYyxTQUFTLFNBQVM7QUFBQSxJQUMvRTtBQUdBLFNBQUssY0FBYztBQUduQixRQUFJLEtBQUssY0FBYztBQUN0QixXQUFLLHFCQUFxQjtBQUFBLElBQzNCO0FBQUEsRUFDRDtBQUFBLEVBRVEsZ0JBQXNCO0FBQzdCLFNBQUssTUFBTSxLQUFLLFFBQVEsU0FBTztBQUM5QixZQUFNLFVBQVUsS0FBSyxZQUFZLFdBQVcsbUJBQW1CO0FBQy9ELGNBQVEsY0FBYztBQUV0QixVQUFJLEtBQUssTUFBTSxhQUFhLFNBQVMsR0FBRyxHQUFHO0FBQzFDLGdCQUFRLFNBQVMsVUFBVTtBQUFBLE1BQzVCO0FBRUEsY0FBUSxpQkFBaUIsU0FBUyxDQUFDLE1BQU07QUFDeEMsVUFBRSxnQkFBZ0I7QUFDbEIsYUFBSyxNQUFNLFdBQVcsR0FBRztBQUFBLE1BQzFCLENBQUM7QUFBQSxJQUNGLENBQUM7QUFHRCxTQUFLLFlBQVksaUJBQWlCLFNBQVMsTUFBTTtBQUNoRCxXQUFLLG1CQUFtQjtBQUFBLElBQ3pCLENBQUM7QUFBQSxFQUNGO0FBQUEsRUFFUSxxQkFBMkI7QUFDbEMsU0FBSyxlQUFlO0FBQ3BCLFNBQUssZ0JBQWdCLENBQUMsR0FBRyxLQUFLLE1BQU0sWUFBWTtBQUNoRCxTQUFLLE9BQU87QUFBQSxFQUNiO0FBQUEsRUFFUSxxQkFBMkI7QUFDbEMsU0FBSyxlQUFlO0FBQ3BCLFFBQUksS0FBSyxVQUFVLEtBQUssT0FBTyxlQUFlO0FBQzdDLFdBQUssT0FBTyxjQUFjLFlBQVksS0FBSyxNQUFNO0FBQUEsSUFDbEQ7QUFDQSxTQUFLLFNBQVM7QUFDZCxTQUFLLFVBQVU7QUFDZixTQUFLLFdBQVc7QUFDaEIsU0FBSyxXQUFXO0FBQ2hCLFNBQUssT0FBTztBQUFBLEVBQ2I7QUFBQSxFQUVRLHVCQUE2QjtBQW5GdEM7QUFxRkUsUUFBSSxDQUFDLEtBQUssUUFBUTtBQUNqQixXQUFLLFNBQVMsS0FBSyxZQUFZLFVBQVUsd0JBQXdCO0FBQ2pFLFdBQUssT0FBTyxNQUFNLFNBQVM7QUFDM0IsV0FBSyxPQUFPLGlCQUFpQixTQUFTLE1BQU07QUFDM0MsYUFBSyxpQkFBaUI7QUFBQSxNQUN2QixDQUFDO0FBQUEsSUFDRjtBQUVBLFFBQUksQ0FBQyxLQUFLLFNBQVM7QUFDbEIsV0FBSyxVQUFVLEtBQUssT0FBTyxVQUFVLG1CQUFtQjtBQUN4RCxXQUFLLFFBQVEsTUFBTSxTQUFTO0FBQzVCLFdBQUssUUFBUSxpQkFBaUIsU0FBUyxDQUFDLE1BQU07QUFDN0MsVUFBRSxnQkFBZ0I7QUFBQSxNQUNuQixDQUFDO0FBQUEsSUFDRjtBQUdBLFFBQUksQ0FBQyxLQUFLLFVBQVU7QUFDbkIsV0FBSyxXQUFXLEtBQUssUUFBUSxTQUFTLFNBQVM7QUFBQSxRQUM5QyxLQUFLO0FBQUEsUUFDTCxlQUFjLDRFQUE0QixNQUE1Qiw0QkFBZ0MsK0JBQThCO0FBQUEsUUFDNUUsTUFBTTtBQUFBLE1BQ1AsQ0FBQztBQUNELFdBQUssU0FBUyxpQkFBaUIsU0FBUyxNQUFNO0FBNUdqRCxZQUFBQztBQTZHSSxhQUFLLG1CQUFpQkEsTUFBQSxLQUFLLGFBQUwsZ0JBQUFBLElBQWUsVUFBUyxJQUFJLEtBQUs7QUFDdkQsYUFBSyxxQkFBcUI7QUFBQSxNQUMzQixDQUFDO0FBQUEsSUFDRjtBQUNBLFFBQUksS0FBSyxVQUFVO0FBQ2xCLFdBQUssU0FBUyxRQUFRLEtBQUs7QUFBQSxJQUM1QjtBQUdBLFVBQU0sZ0JBQWdCLEtBQUssV0FBVyxLQUFLLFNBQVMsWUFBWTtBQUNoRSxRQUFJLENBQUMsS0FBSyxVQUFVO0FBQ25CLFdBQUssV0FBVyxLQUFLLFFBQVEsVUFBVSwwQkFBMEI7QUFBQSxJQUNsRSxPQUFPO0FBQ04sV0FBSyxTQUFTLE1BQU07QUFBQSxJQUNyQjtBQUVBLFVBQU0sUUFBUSxLQUFLLGNBQWMsWUFBWTtBQUM3QyxVQUFNLGNBQWMsUUFBUSxLQUFLLE1BQU0sS0FBSyxPQUFPLENBQUFDLE9BQUtBLEdBQUUsWUFBWSxFQUFFLFNBQVMsS0FBSyxDQUFDLElBQUksS0FBSyxNQUFNO0FBQ3RHLGdCQUFZLFFBQVEsU0FBTztBQUMxQixZQUFNLFVBQVUsS0FBSyxTQUFVLFdBQVcseUJBQXlCO0FBQ25FLGNBQVEsY0FBYztBQUN0QixVQUFJLEtBQUssY0FBYyxTQUFTLEdBQUcsR0FBRztBQUNyQyxnQkFBUSxTQUFTLFVBQVU7QUFBQSxNQUM1QjtBQUNBLGNBQVEsaUJBQWlCLFNBQVMsTUFBTTtBQUV2QyxhQUFLLG1CQUFtQixHQUFHO0FBQUEsTUFDNUIsQ0FBQztBQUFBLElBQ0YsQ0FBQztBQUVELFFBQUksS0FBSyxVQUFVO0FBQ2xCLFdBQUssU0FBUyxZQUFZO0FBQUEsSUFDM0I7QUFHQSxRQUFJLFlBQVksS0FBSyxRQUFRLGNBQWMsNEJBQTRCO0FBQ3ZFLFFBQUksQ0FBQyxXQUFXO0FBQ2Ysa0JBQVksS0FBSyxRQUFRLFVBQVUsMkJBQTJCO0FBQzlELGdCQUFVLE1BQU0sVUFBVTtBQUMxQixZQUFNLGVBQWUsVUFBVSxXQUFXLFdBQVc7QUFDckQsbUJBQWEsZ0JBQWUsNEVBQTRCLE1BQTVCLDRCQUFnQyxzQkFBcUI7QUFDakYsbUJBQWEsaUJBQWlCLFNBQVMsTUFBTTtBQUM1QyxhQUFLLGdCQUFnQixDQUFDLEdBQUcsS0FBSyxNQUFNLElBQUk7QUFDeEMsYUFBSyxxQkFBcUI7QUFBQSxNQUMzQixDQUFDO0FBQ0QsWUFBTSxpQkFBaUIsVUFBVSxXQUFXLFdBQVc7QUFDdkQscUJBQWUsZ0JBQWUsNEVBQTRCLE1BQTVCLDRCQUFnQyx3QkFBdUI7QUFDckYscUJBQWUsaUJBQWlCLFNBQVMsTUFBTTtBQUM5QyxhQUFLLGdCQUFnQixDQUFDO0FBQ3RCLGFBQUsscUJBQXFCO0FBQUEsTUFDM0IsQ0FBQztBQUFBLElBQ0Y7QUFBQSxFQUNEO0FBQUEsRUFFUSxtQkFBbUIsS0FBbUI7QUFDN0MsUUFBSSxLQUFLLGNBQWMsU0FBUyxHQUFHLEdBQUc7QUFDckMsV0FBSyxnQkFBZ0IsS0FBSyxjQUFjLE9BQU8sQ0FBQUEsT0FBS0EsT0FBTSxHQUFHO0FBQUEsSUFDOUQsT0FBTztBQUNOLFdBQUssY0FBYyxLQUFLLEdBQUc7QUFBQSxJQUM1QjtBQUNBLFNBQUsscUJBQXFCO0FBQUEsRUFDM0I7QUFBQSxFQUVRLG1CQUF5QjtBQUNoQyxTQUFLLE1BQU0sV0FBVyxLQUFLLGFBQWE7QUFDeEMsU0FBSyxtQkFBbUI7QUFBQSxFQUN6QjtBQUFBO0FBQUEsRUFHQSxXQUFXLE1BQWdCLGNBQThCO0FBQ3hELFNBQUssTUFBTSxPQUFPO0FBQ2xCLFNBQUssTUFBTSxlQUFlO0FBQzFCLFNBQUssT0FBTztBQUFBLEVBQ2I7QUFDRDs7O0FDckxBO0FBcUJPLElBQU0sYUFBTixNQUFpQjtBQUFBLEVBTXZCLFlBQVksYUFBMEIsT0FBd0I7QUFDN0QsU0FBSyxjQUFjO0FBQ25CLFNBQUssUUFBUTtBQUFBLEVBQ2Q7QUFBQSxFQUVRLGdCQUFnQixNQUFvQjtBQUMzQyxVQUFNLElBQUksSUFBSSxLQUFLLEtBQUssUUFBUSxJQUFJLEtBQUssa0JBQWtCLElBQUksR0FBSztBQUNwRSxXQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sR0FBRyxFQUFFLENBQUM7QUFBQSxFQUNwQztBQUFBLEVBRUEsU0FBZTtBQUNkLFNBQUssWUFBWSxNQUFNO0FBQ3ZCLFNBQUssWUFBWSxTQUFTLGFBQWE7QUFHdkMsU0FBSyxjQUFjO0FBR25CLFNBQUssYUFBYTtBQUdsQixTQUFLLFlBQVk7QUFBQSxFQUNsQjtBQUFBLEVBRVEsZ0JBQXNCO0FBQzdCLFVBQU0sWUFBWSxLQUFLLFlBQVksVUFBVSxxQkFBcUI7QUFHbEUsVUFBTSxVQUFVLFVBQVUsVUFBVSxtQkFBbUI7QUFDdkQsVUFBTSxTQUFTLFFBQVEsVUFBVSxrQkFBa0I7QUFDbkQsV0FBTyxjQUFjLEtBQUssZ0JBQWdCLEtBQUssTUFBTSxnQkFBZ0IsSUFBSSxLQUFLLENBQUM7QUFDL0UsV0FBTyxTQUFTLFdBQVc7QUFDM0IsV0FBTyxpQkFBaUIsU0FBUyxNQUFNO0FBQ3RDLFdBQUssZUFBZTtBQUFBLElBQ3JCLENBQUM7QUFDRCxVQUFNLGNBQWMsUUFBUSxVQUFVLHVCQUF1QjtBQUM3RCxnQkFBWSxjQUFjLEdBQUcsS0FBSyxrQkFBa0IsSUFBSSxLQUFLLE1BQU0sZUFBZSxRQUFRLENBQUM7QUFHM0YsVUFBTSxZQUFZLFVBQVUsVUFBVSxxQkFBcUI7QUFFM0QsVUFBTSxVQUFVLFVBQVUsVUFBVSxtQkFBbUI7QUFDdkQsVUFBTSxjQUFjLFFBQVEsV0FBVyxrQkFBa0I7QUFDekQsZ0JBQVksY0FBYyxFQUFFLFdBQVc7QUFDdkMsVUFBTSxjQUFjLFFBQVEsV0FBVyx1QkFBdUI7QUFDOUQsZ0JBQVksY0FBYyxHQUFHLEtBQUssa0JBQWtCLElBQUksS0FBSyxNQUFNLFVBQVUsZUFBZTtBQUU1RixVQUFNLFlBQVksVUFBVSxVQUFVLG1CQUFtQjtBQUN6RCxVQUFNLGdCQUFnQixVQUFVLFdBQVcsa0JBQWtCO0FBQzdELGtCQUFjLGNBQWMsRUFBRSxhQUFhO0FBQzNDLFVBQU0sZ0JBQWdCLFVBQVUsV0FBVyx1QkFBdUI7QUFDbEUsa0JBQWMsY0FBYyxHQUFHLEtBQUssa0JBQWtCLElBQUksS0FBSyxNQUFNLGFBQWEsZUFBZTtBQUFBLEVBQ2xHO0FBQUEsRUFFUSxlQUFxQjtBQUM1QixVQUFNLFdBQVcsS0FBSyxZQUFZLFVBQVUsb0JBQW9CO0FBQ2hFLFVBQU0sYUFBNEI7QUFBQSxNQUNqQyxNQUFNLEtBQUssTUFBTTtBQUFBLE1BQ2pCLGNBQWMsS0FBSyxNQUFNO0FBQUEsTUFDekIsWUFBWSxLQUFLLE1BQU07QUFBQSxNQUN2QixXQUFXO0FBQUEsSUFDWjtBQUNBLFNBQUssb0JBQW9CLElBQUksU0FBUyxVQUFVLFVBQVU7QUFDMUQsU0FBSyxrQkFBa0IsT0FBTztBQUFBLEVBQy9CO0FBQUEsRUFFUSxvQkFBNEI7QUFDbkMsV0FBTyxFQUFFLGlCQUFpQjtBQUFBLEVBQzNCO0FBQUEsRUFFUSxjQUFvQjtBQUMzQixVQUFNLFVBQVUsS0FBSyxZQUFZLFVBQVUsbUJBQW1CO0FBQzlELFVBQU0sU0FBUyxRQUFRLFNBQVMsUUFBUTtBQUN4QyxXQUFPLEtBQUs7QUFDWixXQUFPLFFBQVE7QUFDZixXQUFPLFNBQVM7QUFHaEIsU0FBSyxrQkFBa0IsTUFBTTtBQUFBLEVBQzlCO0FBQUEsRUFFUSxrQkFBa0IsUUFBaUM7QUFDMUQsUUFBSSxLQUFLLE1BQU0sWUFBWSxTQUFTO0FBQUc7QUFFdkMsVUFBTSxNQUFNLE9BQU8sV0FBVyxJQUFJO0FBQ2xDLFFBQUksQ0FBQztBQUFLO0FBR1YsVUFBTSxPQUFPLE9BQU8sc0JBQXNCO0FBQzFDLFdBQU8sUUFBUSxLQUFLO0FBQ3BCLFdBQU8sU0FBUyxLQUFLO0FBRXJCLFVBQU0sUUFBUSxPQUFPO0FBQ3JCLFVBQU0sU0FBUyxPQUFPO0FBQ3RCLFVBQU0sTUFBTTtBQUdaLFVBQU0sU0FBUyxLQUFLLE1BQU0sWUFBWSxJQUFJLE9BQUssRUFBRSxLQUFLO0FBQ3RELFVBQU0sV0FBVyxLQUFLLElBQUksR0FBRyxNQUFNO0FBQ25DLFVBQU0sV0FBVyxLQUFLLElBQUksR0FBRyxNQUFNO0FBQ25DLFVBQU0sUUFBUSxXQUFXO0FBR3pCLFVBQU0sY0FBYyxRQUFRO0FBRTVCLFVBQU0sT0FBTyxDQUFDLE1BQWMsT0FBTyxRQUFRLElBQUksT0FBTyxLQUFLLEtBQUssTUFBTSxZQUFZLFNBQVM7QUFDM0YsVUFBTSxPQUFPLENBQUMsTUFBYztBQUMzQixVQUFJLGFBQWE7QUFDaEIsY0FBTSxXQUFXLEtBQUssSUFBSSxJQUFJLENBQUM7QUFDL0IsY0FBTSxTQUFTLEtBQUssSUFBSSxXQUFXLENBQUM7QUFDcEMsY0FBTSxTQUFTLEtBQUssSUFBSSxXQUFXLENBQUM7QUFDcEMsZUFBTyxTQUFTLE9BQVEsV0FBVyxVQUFVLEtBQUssSUFBSSxTQUFTLFFBQVEsR0FBRyxLQUFNLFNBQVMsSUFBSTtBQUFBLE1BQzlGLE9BQU87QUFDTixlQUFPLFNBQVMsT0FBUSxJQUFJLFlBQVksS0FBSyxJQUFJLE9BQU8sR0FBRyxLQUFNLFNBQVMsSUFBSTtBQUFBLE1BQy9FO0FBQUEsSUFDRDtBQUNBLFVBQU0sa0JBQWtCLENBQUMsTUFBYztBQUV0QyxZQUFNLFdBQVcsS0FBSyxJQUFJLElBQUksQ0FBQztBQUMvQixZQUFNLFNBQVMsS0FBSyxJQUFJLFdBQVcsQ0FBQztBQUNwQyxZQUFNLFNBQVMsS0FBSyxJQUFJLFdBQVcsQ0FBQztBQUVwQyxVQUFJLFdBQVc7QUFBUSxlQUFPO0FBRTlCLFlBQU1DLE1BQUssV0FBVyxXQUFXLFNBQVM7QUFHMUMsVUFBSUEsTUFBSyxLQUFLO0FBQ2IsY0FBTSxJQUFJLEtBQUssTUFBTSxJQUFJQSxLQUFJLEdBQUc7QUFDaEMsZUFBTyxPQUFPO0FBQUEsTUFDZixPQUFPO0FBQ04sY0FBTSxJQUFJLEtBQUssT0FBTyxJQUFJLEtBQUtBLEtBQUksUUFBUSxHQUFHO0FBQzlDLGVBQU8sV0FBVztBQUFBLE1BQ25CO0FBQUEsSUFDRDtBQUdBLFFBQUksVUFBVSxHQUFHLEdBQUcsT0FBTyxNQUFNO0FBQ2pDLFFBQUksWUFBWTtBQUdoQixhQUFTLElBQUksR0FBRyxJQUFJLEtBQUssTUFBTSxZQUFZLFNBQVMsR0FBRyxLQUFLO0FBQzNELFlBQU0sS0FBSyxLQUFLLE1BQU0sWUFBWSxDQUFDO0FBQ25DLFlBQU0sS0FBSyxLQUFLLE1BQU0sWUFBWSxJQUFJLENBQUM7QUFDdkMsWUFBTSxLQUFLLEtBQUssQ0FBQztBQUNqQixZQUFNLEtBQUssS0FBSyxHQUFHLEtBQUs7QUFDeEIsWUFBTSxLQUFLLEtBQUssSUFBSSxDQUFDO0FBQ3JCLFlBQU0sS0FBSyxLQUFLLEdBQUcsS0FBSztBQUV4QixVQUFJLFVBQVU7QUFDZCxVQUFJLGNBQWMsZ0JBQWdCLEdBQUcsS0FBSztBQUMxQyxVQUFJLE9BQU8sSUFBSSxFQUFFO0FBQ2pCLFVBQUksT0FBTyxJQUFJLEVBQUU7QUFDakIsVUFBSSxPQUFPO0FBQUEsSUFDWjtBQU1BLFFBQUksa0JBQWlDO0FBQ3JDLFFBQUksS0FBSyxNQUFNLGNBQWMsUUFBUSxLQUFLLE1BQU0sY0FBYyxRQUFXO0FBQ3hFLHdCQUFrQixLQUFLLE1BQU07QUFBQSxJQUM5QixXQUFXLEtBQUssTUFBTSxjQUFjO0FBQ25DLFVBQUk7QUFDSCxjQUFNLFFBQVEsS0FBSyxNQUFNLFlBQVksSUFBSSxPQUFLLEVBQUUsS0FBSyxRQUFRLENBQUM7QUFDOUQsY0FBTSxVQUFVLEtBQUssSUFBSSxHQUFHLEtBQUs7QUFDakMsY0FBTSxVQUFVLEtBQUssSUFBSSxHQUFHLEtBQUs7QUFDakMsY0FBTSxNQUFNLEtBQUssTUFBTSxhQUFhLFFBQVE7QUFDNUMsY0FBTSxRQUFRLEtBQUssSUFBSSxVQUFVLFNBQVMsQ0FBQztBQUMzQyxjQUFNLFNBQVMsTUFBTSxXQUFXO0FBQ2hDLDBCQUFrQixPQUFPLFFBQVEsSUFBSSxPQUFPLEtBQUssSUFBSSxLQUFLLElBQUksT0FBTyxDQUFDLEdBQUcsQ0FBQztBQUFBLE1BQzNFLFNBQVMsR0FBUDtBQUNELDBCQUFrQjtBQUFBLE1BQ25CO0FBQUEsSUFDRDtBQUVBLFFBQUksb0JBQW9CLFFBQVEsb0JBQW9CLFFBQVc7QUFDOUQsVUFBSSxVQUFVO0FBQ2QsVUFBSSxjQUFjO0FBQ2xCLFVBQUksWUFBWTtBQUNoQixVQUFJLE9BQU8saUJBQWlCLENBQUM7QUFDN0IsVUFBSSxPQUFPLGlCQUFpQixNQUFNO0FBQ2xDLFVBQUksT0FBTztBQUFBLElBQ1o7QUFHQSxRQUFJLENBQUUsT0FBZSxrQkFBa0I7QUFDdEMsTUFBQyxPQUFlLG1CQUFtQjtBQUNuQyxhQUFPLGlCQUFpQixTQUFTLENBQUMsT0FBbUI7QUExTnhEO0FBMk5JLGNBQU0sS0FBSyxRQUFXLFlBQVgsWUFBdUIsR0FBRyxVQUFVLE9BQU8sc0JBQXNCLEVBQUU7QUFDOUUsY0FBTSxjQUFjLEtBQUssSUFBSSxRQUFRLElBQUksS0FBSyxDQUFDO0FBQy9DLGNBQU0sUUFBUSxLQUFLLElBQUksS0FBSyxLQUFLLElBQUksT0FBTyxhQUFhLENBQUMsR0FBRyxDQUFDO0FBQzlELGNBQU0sTUFBTSxLQUFLLE1BQU0sU0FBUyxLQUFLLE1BQU0sWUFBWSxTQUFTLEVBQUU7QUFDbEUsY0FBTSxhQUFhLEtBQUssSUFBSSxLQUFLLElBQUksS0FBSyxDQUFDLEdBQUcsS0FBSyxNQUFNLFlBQVksU0FBUyxDQUFDO0FBQy9FLGNBQU0sYUFBYSxLQUFLLE1BQU0sWUFBWSxVQUFVLEVBQUU7QUFFdEQsYUFBSyxnQkFBZ0IsR0FBRyxVQUFVO0FBRWxDLFlBQUksS0FBSyxNQUFNLFlBQVk7QUFDMUIsZUFBSyxNQUFNLFdBQVcsS0FBSyxnQkFBZ0IsVUFBVSxDQUFDO0FBQUEsUUFDdkQ7QUFFQSxZQUFJLEtBQUssTUFBTSxlQUFlO0FBQzdCLGVBQUssTUFBTSxjQUFjLENBQUM7QUFBQSxRQUMzQjtBQUFBLE1BQ0QsQ0FBQztBQUFBLElBQ0Y7QUFBQSxFQUNEO0FBQUE7QUFBQSxFQUdBLFlBQVksYUFBb0Q7QUFDL0QsU0FBSyxNQUFNLGNBQWM7QUFDekIsVUFBTSxTQUFTLEtBQUssWUFBWSxjQUFjLGVBQWU7QUFDN0QsUUFBSSxRQUFRO0FBQ1gsV0FBSyxrQkFBa0IsTUFBTTtBQUFBLElBQzlCO0FBQUEsRUFDRDtBQUFBO0FBQUEsRUFHQSxnQkFBZ0IsV0FBMEIsY0FBMkI7QUFDcEUsU0FBSyxNQUFNLFlBQVk7QUFDdkIsUUFBSSxjQUFjO0FBQ2pCLFdBQUssTUFBTSxlQUFlO0FBQzFCLFlBQU0sWUFBWSxLQUFLLFlBQVksY0FBYyxtQkFBbUI7QUFDcEUsVUFBSSxXQUFXO0FBQ2Qsa0JBQVUsY0FBYyxLQUFLLGdCQUFnQixZQUFZO0FBQUEsTUFDMUQ7QUFBQSxJQUNEO0FBQ0EsVUFBTSxTQUFTLEtBQUssWUFBWSxjQUFjLGVBQWU7QUFDN0QsUUFBSSxRQUFRO0FBQ1gsV0FBSyxrQkFBa0IsTUFBTTtBQUFBLElBQzlCO0FBQUEsRUFDRDtBQUFBO0FBQUEsRUFHQSxjQUFjLGdCQUF3QixXQUFtQixjQUE0QjtBQUNwRixTQUFLLE1BQU0saUJBQWlCO0FBQzVCLFNBQUssTUFBTSxZQUFZO0FBQ3ZCLFNBQUssTUFBTSxlQUFlO0FBRTFCLFVBQU0sUUFBUSxLQUFLLFlBQVksY0FBYyx3QkFBd0I7QUFDckUsUUFBSTtBQUFPLFlBQU0sY0FBYyxHQUFHLEtBQUssa0JBQWtCLElBQUksZUFBZSxRQUFRLENBQUM7QUFFckYsVUFBTSxTQUFTLEtBQUssWUFBWSxpQkFBaUIsd0JBQXdCO0FBQ3pFLFFBQUksVUFBVSxPQUFPLFNBQVMsR0FBRztBQUNoQyxZQUFNLFVBQVUsT0FBTyxDQUFDO0FBQ3hCLFVBQUk7QUFBUyxnQkFBUSxjQUFjLEdBQUcsS0FBSyxrQkFBa0IsSUFBSSxVQUFVLGVBQWU7QUFDMUYsWUFBTSxZQUFZLE9BQU8sQ0FBQztBQUMxQixVQUFJO0FBQVcsUUFBQyxVQUEwQixjQUFjLEdBQUcsS0FBSyxrQkFBa0IsSUFBSSxhQUFhLGVBQWU7QUFBQSxJQUNuSDtBQUFBLEVBQ0Q7QUFBQTtBQUFBLEVBR1EsaUJBQXVCO0FBRTlCLFVBQU0sT0FBTyxTQUFTLGNBQWMsS0FBSztBQUN6QyxTQUFLLFlBQVk7QUFHakIsVUFBTSxTQUFTLFNBQVMsY0FBYyxLQUFLO0FBQzNDLFdBQU8sWUFBWTtBQUduQixVQUFNLFVBQVUsU0FBUyxjQUFjLEtBQUs7QUFDNUMsWUFBUSxZQUFZO0FBR3BCLFVBQU0sUUFBUSxTQUFTLGNBQWMsS0FBSztBQUMxQyxVQUFNLFlBQVk7QUFDbEIsVUFBTSxjQUFjLEVBQUUsV0FBVztBQUdqQyxVQUFNLGlCQUFpQixTQUFTLGNBQWMsS0FBSztBQUNuRCxtQkFBZSxZQUFZO0FBRzNCLFVBQU0sY0FBYyxLQUFLLE1BQU0sZ0JBQWdCLElBQUksS0FBSztBQUN4RCxVQUFNLGNBQWMsWUFBWSxZQUFZO0FBQzVDLFVBQU0sZUFBZSxZQUFZLFNBQVMsSUFBSTtBQUM5QyxVQUFNLGFBQWEsWUFBWSxRQUFRO0FBR3ZDLFVBQU0sYUFBYSxLQUFLLGtCQUFrQixFQUFFLFdBQVcsR0FBRyxLQUFLLGNBQWMsV0FBVyxHQUFHLGFBQWEsQ0FBQyxTQUFTO0FBQ2pILFdBQUssaUJBQWlCLFdBQVcsTUFBTSxZQUFZLGFBQWE7QUFBQSxJQUNqRSxHQUFHLEtBQUs7QUFHUixVQUFNLGNBQWMsS0FBSyxrQkFBa0IsRUFBRSxZQUFZLEdBQUcsS0FBSyxlQUFlLEdBQUcsY0FBYyxDQUFDLFVBQVU7QUFDM0csV0FBSyxpQkFBaUIsV0FBVyxXQUFXLGVBQWUsS0FBSztBQUFBLElBQ2pFLEdBQUcsSUFBSTtBQUdQLFVBQU0sWUFBWSxLQUFLLGtCQUFrQixFQUFFLFVBQVUsR0FBRyxLQUFLLGFBQWEsYUFBYSxZQUFZLEdBQUcsWUFBWSxRQUFXLElBQUk7QUFFakksbUJBQWUsWUFBWSxXQUFXLE9BQU87QUFDN0MsbUJBQWUsWUFBWSxZQUFZLE9BQU87QUFDOUMsbUJBQWUsWUFBWSxVQUFVLE9BQU87QUFHNUMsVUFBTSxVQUFVLFNBQVMsY0FBYyxLQUFLO0FBQzVDLFlBQVEsWUFBWTtBQUVwQixVQUFNLFlBQVksU0FBUyxjQUFjLFFBQVE7QUFDakQsY0FBVSxZQUFZO0FBQ3RCLGNBQVUsY0FBYyxFQUFFLGVBQWU7QUFFekMsVUFBTSxhQUFhLFNBQVMsY0FBYyxRQUFRO0FBQ2xELGVBQVcsWUFBWTtBQUN2QixlQUFXLGNBQWMsRUFBRSxnQkFBZ0I7QUFHM0MsWUFBUSxZQUFZLFNBQVM7QUFDN0IsWUFBUSxZQUFZLFVBQVU7QUFDOUIsWUFBUSxZQUFZLEtBQUs7QUFDekIsWUFBUSxZQUFZLGNBQWM7QUFDbEMsWUFBUSxZQUFZLE9BQU87QUFDM0IsV0FBTyxZQUFZLE9BQU87QUFDMUIsU0FBSyxZQUFZLE1BQU07QUFHdkIsYUFBUyxLQUFLLFlBQVksSUFBSTtBQUc5QixVQUFNLGNBQWMsTUFBTTtBQUN6QixlQUFTLEtBQUssWUFBWSxJQUFJO0FBQUEsSUFDL0I7QUFFQSxTQUFLLGlCQUFpQixTQUFTLENBQUMsTUFBTTtBQUNyQyxVQUFJLEVBQUUsV0FBVyxNQUFNO0FBQ3RCLG9CQUFZO0FBQUEsTUFDYjtBQUFBLElBQ0QsQ0FBQztBQUVELGNBQVUsaUJBQWlCLFNBQVMsV0FBVztBQUUvQyxlQUFXLGlCQUFpQixTQUFTLE1BQU07QUFDMUMsWUFBTSxPQUFPLFdBQVc7QUFDeEIsWUFBTSxRQUFRLFlBQVk7QUFDMUIsWUFBTSxNQUFNLFVBQVU7QUFDdEIsWUFBTSxrQkFBa0IsR0FBRyxRQUFRLE1BQU0sU0FBUyxFQUFFLFNBQVMsR0FBRyxHQUFHLEtBQUssSUFBSSxTQUFTLEVBQUUsU0FBUyxHQUFHLEdBQUc7QUFFdEcsVUFBSSxLQUFLLE1BQU0sWUFBWTtBQUMxQixhQUFLLE1BQU0sV0FBVyxlQUFlO0FBQUEsTUFDdEM7QUFDQSxrQkFBWTtBQUFBLElBQ2IsQ0FBQztBQUFBLEVBQ0Y7QUFBQTtBQUFBLEVBR1EsY0FBYyxhQUErQjtBQUNwRCxVQUFNLFVBQVUsS0FBSyxNQUFNLFdBQVksY0FBYztBQUNyRCxVQUFNLFVBQVUsS0FBSyxNQUFNLFdBQVksY0FBYztBQUVyRCxVQUFNLFFBQVEsQ0FBQztBQUNmLGFBQVMsSUFBSSxTQUFTLEtBQUssU0FBUyxLQUFLO0FBQ3hDLFlBQU0sS0FBSyxDQUFDO0FBQUEsSUFDYjtBQUNBLFdBQU87QUFBQSxFQUNSO0FBQUE7QUFBQSxFQUdRLGlCQUEyQjtBQUNsQyxXQUFPLE1BQU0sS0FBSyxFQUFFLFFBQVEsR0FBRyxHQUFHLENBQUMsR0FBRyxNQUFNLElBQUksQ0FBQztBQUFBLEVBQ2xEO0FBQUE7QUFBQSxFQUdRLGFBQWEsTUFBYyxPQUF5QjtBQUMzRCxVQUFNLGNBQWMsSUFBSSxLQUFLLE1BQU0sT0FBTyxDQUFDLEVBQUUsUUFBUTtBQUNyRCxXQUFPLE1BQU0sS0FBSyxFQUFFLFFBQVEsWUFBWSxHQUFHLENBQUMsR0FBRyxNQUFNLElBQUksQ0FBQztBQUFBLEVBQzNEO0FBQUE7QUFBQSxFQUdRLGtCQUFrQixRQUFnQixRQUFrQixlQUF1QixVQUFvQyxhQUFzQixPQUF3RDtBQUNwTSxVQUFNLFNBQVMsU0FBUyxjQUFjLEtBQUs7QUFDM0MsV0FBTyxZQUFZO0FBRW5CLFVBQU0sWUFBWSxTQUFTLGNBQWMsS0FBSztBQUM5QyxjQUFVLFlBQVk7QUFFdEIsUUFBSSxnQkFBZ0IsT0FBTyxRQUFRLGFBQWE7QUFDaEQsUUFBSSx1QkFBdUI7QUFDM0IsVUFBTSxNQUFNLEVBQUUsU0FBUyxRQUFRLGVBQWUscUJBQXFCO0FBQ25FLFVBQU0sYUFBYTtBQUVuQixRQUFJLFlBQVk7QUFFZixZQUFNLGNBQWM7QUFDcEIsWUFBTSxhQUFhLE9BQU8sU0FBUztBQUluQyxZQUFNLG1CQUFtQjtBQUN6QixZQUFNLG1CQUFtQixtQkFBbUIsT0FBTyxTQUFTLGFBQWEsZ0JBQWdCO0FBR3pGLGVBQVMsU0FBUyxHQUFHLFNBQVMsYUFBYSxVQUFVO0FBQ3BELGVBQU8sUUFBUSxDQUFDLE9BQU8sVUFBVTtBQUNoQyxnQkFBTSxPQUFPLFNBQVMsY0FBYyxLQUFLO0FBQ3pDLGVBQUssWUFBWTtBQUNqQixlQUFLLGNBQWMsR0FBRyxNQUFNLFNBQVMsRUFBRSxTQUFTLEdBQUcsR0FBRyxJQUFJO0FBQzFELGVBQUssUUFBUSxRQUFRLE1BQU0sU0FBUztBQUNwQyxlQUFLLFFBQVEsU0FBUyxTQUFTLE9BQU8sU0FBUyxPQUFPLFNBQVM7QUFDL0QsZUFBSyxRQUFRLFlBQVksTUFBTSxTQUFTO0FBRXhDLG9CQUFVLFlBQVksSUFBSTtBQUFBLFFBQzNCLENBQUM7QUFBQSxNQUNGO0FBR0EsZ0JBQVUsTUFBTSxTQUFTLEdBQUcsYUFBYTtBQUV6QyxZQUFNLG1CQUFtQixtQkFBbUIsT0FBTyxTQUFTO0FBQzVELFlBQU0sUUFBUSxNQUFNLEtBQUssVUFBVSxpQkFBaUIsa0JBQWtCLENBQUM7QUFDdkUsVUFBSSxNQUFNLGdCQUFnQixHQUFHO0FBQzVCLGNBQU0sUUFBUSxDQUFDLElBQUksUUFBUSxHQUFHLFVBQVUsT0FBTyxZQUFZLFFBQVEsZ0JBQWdCLENBQUM7QUFBQSxNQUNyRjtBQUVBLDRCQUFzQixNQUFNO0FBQzNCLGtCQUFVLFlBQVk7QUFBQSxNQUN2QixDQUFDO0FBR0QsVUFBSSxjQUFjO0FBQ2xCLGdCQUFVLGlCQUFpQixVQUFVLE1BQU07QUFDMUMsWUFBSTtBQUFhO0FBRWpCLGNBQU0sWUFBWSxVQUFVO0FBQzVCLGNBQU0sZUFBZSxLQUFLLE1BQU0sWUFBWSxVQUFVO0FBQ3RELGNBQU0sYUFBYyxlQUFlLE9BQU8sU0FBVSxPQUFPLFVBQVUsT0FBTztBQUM1RSxjQUFNLFlBQVksT0FBTyxTQUFTO0FBR2xDLGtCQUFVLGlCQUFpQixrQkFBa0IsRUFBRSxRQUFRLENBQUMsTUFBTSxVQUFVO0FBQ3ZFLGdCQUFNLGdCQUFnQixRQUFRLE9BQU87QUFDckMsZUFBSyxVQUFVLE9BQU8sWUFBWSxrQkFBa0IsU0FBUztBQUFBLFFBQzlELENBQUM7QUFFRCx3QkFBZ0I7QUFDaEIsK0JBQXVCO0FBQ3ZCLFlBQUksZ0JBQWdCO0FBR3BCLFlBQUksVUFBVTtBQUNiLG1CQUFTLG9CQUFvQjtBQUFBLFFBQzlCO0FBR0EsY0FBTSxnQkFBZ0IsY0FBYyxLQUFLLE9BQU8sU0FBUztBQUN6RCxjQUFNLGVBQWUsT0FBTyxTQUFTO0FBRXJDLFlBQUksYUFBYSxjQUFjO0FBQzlCLHdCQUFjO0FBRWQsZ0JBQU0sU0FBUyxZQUFZO0FBQzNCLG9CQUFVLFlBQVksT0FBTyxTQUFTLGFBQWE7QUFDbkQscUJBQVcsTUFBTTtBQUFFLDBCQUFjO0FBQUEsVUFBTyxHQUFHLEVBQUU7QUFBQSxRQUM5QyxXQUFXLGFBQWEsR0FBRztBQUMxQix3QkFBYztBQUVkLGdCQUFNLFNBQVM7QUFDZixvQkFBVSxhQUFhLGNBQWMsS0FBSyxPQUFPLFNBQVMsYUFBYTtBQUN2RSxxQkFBVyxNQUFNO0FBQUUsMEJBQWM7QUFBQSxVQUFPLEdBQUcsRUFBRTtBQUFBLFFBQzlDO0FBQUEsTUFDRCxDQUFDO0FBR0QsZ0JBQVUsaUJBQWlCLFNBQVMsQ0FBQyxPQUFPO0FBQzNDLGNBQU0sU0FBUyxHQUFHO0FBQ2xCLGNBQU0sU0FBUyxVQUFVLE9BQU8sVUFBVyxPQUFPLFFBQVEsa0JBQWtCLElBQTJCO0FBQ3ZHLFlBQUksQ0FBQztBQUFRO0FBQ2IsY0FBTSxlQUFlLE9BQU8sT0FBTyxRQUFRLFNBQVMsR0FBRztBQUN2RCxjQUFNLGFBQWMsZUFBZSxPQUFPLFNBQVUsT0FBTyxVQUFVLE9BQU87QUFDNUUsY0FBTSxjQUFjLG1CQUFtQixPQUFPLFNBQVM7QUFDdkQsa0JBQVUsWUFBWSxjQUFjO0FBQ3BDLHdCQUFnQjtBQUNoQiwrQkFBdUIsT0FBTyxTQUFTO0FBQ3ZDLFlBQUksZ0JBQWdCO0FBQ3BCLFlBQUk7QUFBVSxtQkFBUyxvQkFBb0I7QUFBQSxNQUM1QyxDQUFDO0FBQUEsSUFFRixPQUFPO0FBRU4sYUFBTyxRQUFRLENBQUMsT0FBTyxVQUFVO0FBQ2hDLGNBQU0sT0FBTyxTQUFTLGNBQWMsS0FBSztBQUN6QyxhQUFLLFlBQVk7QUFDakIsYUFBSyxjQUFjLEdBQUcsTUFBTSxTQUFTLEVBQUUsU0FBUyxHQUFHLEdBQUcsSUFBSTtBQUMxRCxhQUFLLFFBQVEsUUFBUSxNQUFNLFNBQVM7QUFDcEMsYUFBSyxRQUFRLFFBQVEsTUFBTSxTQUFTO0FBRXBDLFlBQUksVUFBVSxzQkFBc0I7QUFDbkMsZUFBSyxVQUFVLElBQUksVUFBVTtBQUFBLFFBQzlCO0FBRUEsa0JBQVUsWUFBWSxJQUFJO0FBQUEsTUFDM0IsQ0FBQztBQUdELGdCQUFVLGlCQUFpQixVQUFVLE1BQU07QUFDMUMsY0FBTSxZQUFZLFVBQVU7QUFDNUIsY0FBTSxXQUFXLEtBQUssTUFBTSxZQUFZLFVBQVU7QUFFbEQsWUFBSSxhQUFhLGlCQUFpQixZQUFZLEtBQUssV0FBVyxPQUFPLFFBQVE7QUFFNUUsb0JBQVUsaUJBQWlCLGtCQUFrQixFQUFFLFFBQVEsQ0FBQyxNQUFNLFVBQVU7QUFDdkUsaUJBQUssVUFBVSxPQUFPLFlBQVksVUFBVSxRQUFRO0FBQUEsVUFDckQsQ0FBQztBQUVELDBCQUFnQjtBQUNoQixpQ0FBdUIsT0FBTyxRQUFRO0FBQ3RDLGNBQUksZ0JBQWdCO0FBR3BCLGNBQUksVUFBVTtBQUNiLHFCQUFTLG9CQUFvQjtBQUFBLFVBQzlCO0FBQUEsUUFDRDtBQUFBLE1BQ0QsQ0FBQztBQUdELGdCQUFVLGlCQUFpQixTQUFTLENBQUMsT0FBTztBQUMzQyxjQUFNLFNBQVMsR0FBRztBQUNsQixjQUFNLFNBQVMsVUFBVSxPQUFPLFVBQVcsT0FBTyxRQUFRLGtCQUFrQixJQUEyQjtBQUN2RyxZQUFJLENBQUM7QUFBUTtBQUNiLGNBQU0sTUFBTSxPQUFPLE9BQU8sUUFBUSxTQUFTLEdBQUc7QUFFOUMsa0JBQVUsaUJBQWlCLGtCQUFrQixFQUFFLFFBQVEsQ0FBQyxJQUFJLE1BQU07QUFDakUsYUFBRyxVQUFVLE9BQU8sWUFBWSxNQUFNLEdBQUc7QUFBQSxRQUMxQyxDQUFDO0FBQ0Qsa0JBQVUsWUFBWSxNQUFNO0FBQzVCLHdCQUFnQjtBQUNoQiwrQkFBdUIsT0FBTyxHQUFHO0FBQ2pDLFlBQUksZ0JBQWdCO0FBQ3BCLFlBQUk7QUFBVSxtQkFBUyxvQkFBb0I7QUFBQSxNQUM1QyxDQUFDO0FBR0QsaUJBQVcsTUFBTTtBQUNoQixrQkFBVSxZQUFZLGdCQUFnQjtBQUFBLE1BQ3ZDLEdBQUcsQ0FBQztBQUFBLElBQ0w7QUFFQSxXQUFPLFlBQVksU0FBUztBQUU1QixXQUFPO0FBQUEsRUFDUjtBQUFBO0FBQUEsRUFHUSxpQkFBaUIsV0FBNEQsTUFBYyxPQUFxQjtBQUN2SCxVQUFNLFlBQVksVUFBVSxRQUFRLGNBQWMsbUJBQW1CO0FBQ3JFLFVBQU0sYUFBYSxVQUFVO0FBQzdCLFVBQU0sVUFBVSxLQUFLLGFBQWEsTUFBTSxLQUFLO0FBRzdDLFFBQUssVUFBa0IsT0FBTztBQUM3QixNQUFDLFVBQWtCLE1BQU07QUFBQSxJQUMxQixPQUFPO0FBQ04sYUFBTyxVQUFVO0FBQVksa0JBQVUsWUFBWSxVQUFVLFVBQVU7QUFBQSxJQUN4RTtBQUdBLFVBQU0sU0FBUyxLQUFLLElBQUksR0FBRyxPQUFPO0FBQ2xDLFVBQU0sY0FBYyxLQUFLLElBQUksWUFBWSxNQUFNO0FBQy9DLFVBQU0sZ0JBQWdCLFFBQVEsUUFBUSxXQUFXO0FBQ2pELFVBQU0sYUFBYTtBQUduQixVQUFNLGNBQWM7QUFDcEIsVUFBTSxhQUFhLFFBQVEsU0FBUztBQUdwQyxVQUFNLG1CQUFtQjtBQUN6QixVQUFNLG1CQUFtQixtQkFBbUIsUUFBUSxTQUFTLGFBQWEsZ0JBQWdCO0FBRzFGLGFBQVMsU0FBUyxHQUFHLFNBQVMsYUFBYSxVQUFVO0FBQ3BELGNBQVEsUUFBUSxDQUFDLEtBQUssVUFBVTtBQUMvQixjQUFNLE9BQU8sU0FBUyxjQUFjLEtBQUs7QUFDekMsYUFBSyxZQUFZO0FBQ2pCLGFBQUssY0FBYyxHQUFHLElBQUksU0FBUyxFQUFFLFNBQVMsR0FBRyxHQUFHO0FBQ3BELGFBQUssUUFBUSxRQUFRLElBQUksU0FBUztBQUNsQyxhQUFLLFFBQVEsU0FBUyxTQUFTLFFBQVEsU0FBUyxPQUFPLFNBQVM7QUFDaEUsYUFBSyxRQUFRLFlBQVksSUFBSSxTQUFTO0FBRXRDLGtCQUFVLFlBQVksSUFBSTtBQUFBLE1BQzNCLENBQUM7QUFBQSxJQUNGO0FBR0EsY0FBVSxNQUFNLFNBQVMsR0FBRyxhQUFhO0FBRXpDLFVBQU0sc0JBQXNCLG1CQUFtQixRQUFRLFNBQVM7QUFDaEUsVUFBTSxXQUFXLE1BQU0sS0FBSyxVQUFVLGlCQUFpQixrQkFBa0IsQ0FBQztBQUMxRSxRQUFJLFNBQVMsbUJBQW1CLEdBQUc7QUFDbEMsZUFBUyxRQUFRLENBQUMsSUFBSSxRQUFRLEdBQUcsVUFBVSxPQUFPLFlBQVksUUFBUSxtQkFBbUIsQ0FBQztBQUFBLElBQzNGO0FBQ0EsMEJBQXNCLE1BQU07QUFDM0IsZ0JBQVUsWUFBWTtBQUFBLElBQ3ZCLENBQUM7QUFHRCxjQUFVLGdCQUFnQjtBQUcxQixRQUFJLGNBQWM7QUFDbEIsY0FBVSxpQkFBaUIsVUFBVSxNQUFNO0FBQzFDLFVBQUk7QUFBYTtBQUVqQixZQUFNLFlBQVksVUFBVTtBQUM1QixZQUFNLGVBQWUsS0FBSyxNQUFNLFlBQVksVUFBVTtBQUN0RCxZQUFNLFlBQVksZUFBZSxRQUFRO0FBQ3pDLFlBQU0sWUFBWSxRQUFRLFNBQVM7QUFHbkMsZ0JBQVUsaUJBQWlCLGtCQUFrQixFQUFFLFFBQVEsQ0FBQyxNQUFNLFVBQVU7QUFDdkUsY0FBTSxnQkFBZ0IsUUFBUSxRQUFRO0FBQ3RDLGFBQUssVUFBVSxPQUFPLFlBQVksa0JBQWtCLFNBQVM7QUFBQSxNQUM5RCxDQUFDO0FBRUQsZ0JBQVUsZ0JBQWdCO0FBRzFCLFlBQU0sZ0JBQWdCLGNBQWMsS0FBSyxRQUFRLFNBQVM7QUFDMUQsWUFBTSxlQUFlLFFBQVEsU0FBUztBQUV0QyxVQUFJLGFBQWEsY0FBYztBQUM5QixzQkFBYztBQUVkLGNBQU0sU0FBUyxZQUFZO0FBQzNCLGtCQUFVLFlBQVksUUFBUSxTQUFTLGFBQWE7QUFDcEQsbUJBQVcsTUFBTTtBQUFFLHdCQUFjO0FBQUEsUUFBTyxHQUFHLEVBQUU7QUFBQSxNQUM5QyxXQUFXLGFBQWEsR0FBRztBQUMxQixzQkFBYztBQUVkLGNBQU0sU0FBUztBQUNmLGtCQUFVLGFBQWEsY0FBYyxLQUFLLFFBQVEsU0FBUyxhQUFhO0FBQ3hFLG1CQUFXLE1BQU07QUFBRSx3QkFBYztBQUFBLFFBQU8sR0FBRyxFQUFFO0FBQUEsTUFDOUM7QUFBQSxJQUNELENBQUM7QUFBQSxFQUNGO0FBQ0Q7OztBRnJwQkE7QUFHTyxJQUFNLG1CQUFOLGNBQStCLDBCQUFTO0FBQUEsRUFZOUMsWUFBWSxNQUFxQixpQkFBa0MsVUFBbUI7QUFDckYsVUFBTSxJQUFJO0FBWFgsU0FBUSxTQUFrQixDQUFDO0FBSzNCO0FBQUEsU0FBUSxlQUF5QixDQUFDO0FBRWxDO0FBQUEsU0FBUSxjQUFzQjtBQUMzQixTQUFRLFdBQTREO0FBSXRFLFNBQUssa0JBQWtCO0FBQ3ZCLFNBQUssV0FBVztBQUNoQixTQUFLLGVBQWUsSUFBSSxLQUFLO0FBQUEsRUFDOUI7QUFBQSxFQUVBLGNBQXNCO0FBQ3JCLFdBQU87QUFBQSxFQUNSO0FBQUEsRUFFQSxpQkFBeUI7QUFDeEIsV0FBTztBQUFBLEVBQ1I7QUFBQSxFQUVBLFVBQWtCO0FBQ2pCLFdBQU87QUFBQSxFQUNSO0FBQUEsRUFFQSxNQUFNLFNBQVM7QUExQ2hCO0FBMkNFLFVBQU0sRUFBRSxZQUFZLElBQUk7QUFDeEIsZ0JBQVksTUFBTTtBQUNsQixnQkFBWSxTQUFTLFdBQVc7QUFHaEMsU0FBSyxzQkFBc0I7QUFHM0IsUUFBSTtBQUNILFlBQU0sVUFBVSxnQkFBSyxJQUFZLFlBQWpCLG1CQUEwQixZQUExQixtQkFBb0M7QUFDcEQsVUFBSSxVQUFVLE9BQU8sWUFBWSxPQUFPLFNBQVMsYUFBYTtBQUM3RCxhQUFLLFdBQVcsT0FBTyxTQUFTO0FBQUEsTUFDakM7QUFBQSxJQUNELFNBQVMsR0FBUDtBQUFBLElBQVc7QUFHUCxRQUFJLEtBQUssVUFBVTtBQUN4QixXQUFLLFFBQVEsS0FBSyxRQUFRO0FBQzFCO0FBQUEsSUFDRDtBQUdBLFVBQU0sT0FBTyxZQUFZLFVBQVU7QUFDbkMsU0FBSyxNQUFNLFVBQVU7QUFDckIsU0FBSyxNQUFNLFVBQVU7QUFDckIsU0FBSyxjQUFjLEVBQUUsd0JBQXdCO0FBQzdDO0FBQUEsRUFDRDtBQUFBLEVBRUEsTUFBTSxVQUFVO0FBQ2YsVUFBTSxFQUFFLFlBQVksSUFBSTtBQUN4QixnQkFBWSxNQUFNO0FBRWxCLFFBQUk7QUFBRSxXQUFLLHNCQUFzQjtBQUFBLElBQUcsU0FBUyxHQUFQO0FBQUEsSUFBVztBQUNqRCxLQUFDLGdDQUFnQywyQkFBMkIsRUFBRSxRQUFRLENBQUMsT0FBTztBQUM3RSxZQUFNLEtBQUssU0FBUyxlQUFlLEVBQUU7QUFDckMsVUFBSSxNQUFNLEdBQUc7QUFBZSxXQUFHLGNBQWMsWUFBWSxFQUFFO0FBQUEsSUFDNUQsQ0FBQztBQUFBLEVBQ0Y7QUFBQSxFQUVBLE1BQWMsUUFBUSxVQUFrQjtBQUV2QyxVQUFNLFNBQVUsS0FBSyxJQUFZLFFBQVEsUUFBUSxhQUFhO0FBQzlELFFBQUksUUFBUTtBQUNYLGFBQU8sa0JBQWtCLElBQUksZ0JBQWdCLEtBQUssS0FBSyxRQUFRO0FBQy9ELFdBQUssa0JBQWtCLE9BQU87QUFFOUIsV0FBSyxXQUFXO0FBQUEsSUFDakI7QUFBQSxFQUNEO0FBQUEsRUFFQSxNQUFjLGFBQWE7QUFDMUIsU0FBSyxTQUFTLE1BQU0sS0FBSyxnQkFBZ0IsUUFBUTtBQUNqRCxTQUFLLGFBQWE7QUFBQSxFQUNuQjtBQUFBLEVBRVEsbUJBQW1CO0FBQzFCLFVBQU0sRUFBRSxZQUFZLElBQUk7QUFDeEIsZ0JBQVksTUFBTTtBQUNsQixnQkFBWSxTQUFTLE1BQU0sRUFBRSxNQUFNLEVBQUUsdUJBQXVCLEVBQUUsQ0FBQztBQUMvRCxnQkFBWSxTQUFTLEtBQUssRUFBRSxNQUFNLEVBQUUsc0JBQXNCLEVBQUUsQ0FBQztBQUU3RCxVQUFNLFFBQVEsS0FBSyxJQUFJLE1BQU0saUJBQWlCO0FBQzlDLFVBQU0sV0FBVyxZQUFZLFVBQVUsV0FBVztBQUVsRCxVQUFNLFFBQVEsVUFBUTtBQUNyQixZQUFNLFdBQVcsU0FBUyxVQUFVLFdBQVc7QUFDL0MsZUFBUyxTQUFTLE9BQU8sRUFBRSxNQUFNLEtBQUssS0FBSyxDQUFDO0FBQzVDLGVBQVMsaUJBQWlCLFNBQVMsWUFBWTtBQUU5QyxjQUFNLFNBQVUsS0FBSyxJQUFZLFFBQVEsUUFBUSxhQUFhO0FBQzlELFlBQUksUUFBUTtBQUNYLGlCQUFPLGtCQUFrQixJQUFJLGdCQUFnQixLQUFLLEtBQUssS0FBSyxJQUFJO0FBQ2hFLGVBQUssa0JBQWtCLE9BQU87QUFFOUIsZUFBSyxXQUFXO0FBQUEsUUFDakI7QUFBQSxNQUNELENBQUM7QUFBQSxJQUNGLENBQUM7QUFBQSxFQUNGO0FBQUEsRUFFUSxlQUFlO0FBQ3RCLFVBQU0sRUFBRSxZQUFZLElBQUk7QUFHeEIsZ0JBQVksTUFBTTtBQUNsQixnQkFBWSxTQUFTLFdBQVc7QUFHaEMsU0FBSyxpQkFBaUIsV0FBVztBQUVqQyxTQUFLLGdCQUFnQixXQUFXO0FBRWhDLFVBQU0sa0JBQWtCLFlBQVksVUFBVSxrQkFBa0I7QUFDaEUsU0FBSyxpQkFBaUIsZUFBZTtBQUFBLEVBQ3RDO0FBQUEsRUFFUSxpQkFBaUIsaUJBQThCO0FBQ3RELG9CQUFnQixNQUFNO0FBQ3RCLFFBQUksS0FBSyxPQUFPLFdBQVcsR0FBRztBQUM3QixzQkFBZ0IsU0FBUyxLQUFLLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFBRSxDQUFDO0FBQ3ZEO0FBQUEsSUFDRDtBQUNBLFVBQU0sV0FBVyxLQUFLLGdCQUFnQixJQUFJLEtBQUs7QUFDL0MsUUFBSSxnQkFBZ0IsS0FBSyxPQUFPLE9BQU8sT0FBSyxFQUFFLGNBQWMsUUFBUTtBQUNwRSxRQUFJLEtBQUssYUFBYSxTQUFTLEdBQUc7QUFDakMsc0JBQWdCLGNBQWMsT0FBTyxPQUFFO0FBckoxQztBQXFKNkMsdUJBQUUsU0FBRixtQkFBUSxLQUFLLENBQUFDLE9BQUssS0FBSyxhQUFhLFNBQVNBLEVBQUM7QUFBQSxPQUFFO0FBQUEsSUFDM0Y7QUFFQSxRQUFJLEtBQUssZUFBZSxLQUFLLFlBQVksS0FBSyxHQUFHO0FBQ2hELFlBQU0sSUFBSSxLQUFLLFlBQVksS0FBSyxFQUFFLFlBQVk7QUFDOUMsc0JBQWdCLGNBQWMsT0FBTyxPQUFLO0FBQ3pDLGNBQU0sV0FBVyxFQUFFLFFBQVEsSUFBSSxZQUFZLEVBQUUsU0FBUyxDQUFDO0FBQ3ZELGNBQU0sVUFBVSxFQUFFLFFBQVEsQ0FBQyxHQUFHLEtBQUssQ0FBQUEsUUFBTUEsTUFBSyxJQUFJLFlBQVksRUFBRSxTQUFTLENBQUMsQ0FBQztBQUMzRSxlQUFPLFdBQVc7QUFBQSxNQUNuQixDQUFDO0FBQUEsSUFDRjtBQUVNLFFBQUksS0FBSyxhQUFhLFFBQVE7QUFDMUIsc0JBQWdCLENBQUMsR0FBRyxhQUFhLEVBQUUsS0FBSyxDQUFDLEdBQUcsTUFBTTtBQWxLOUQ7QUFtS2dCLFlBQUksS0FBSyxhQUFhLGFBQWE7QUFDL0IsZ0JBQU0sUUFBUSxFQUFFLGFBQWEsUUFBUTtBQUNyQyxnQkFBTSxRQUFRLEVBQUUsYUFBYSxRQUFRO0FBQ3JDLGlCQUFPLFFBQVE7QUFBQSxRQUNuQjtBQUNBLFlBQUksS0FBSyxhQUFhLGFBQWE7QUFDL0IsaUJBQU8sT0FBTyxFQUFFLFNBQVMsQ0FBQyxJQUFJLE9BQU8sRUFBRSxTQUFTLENBQUM7QUFBQSxRQUNyRDtBQUNBLFlBQUksS0FBSyxhQUFhLFlBQVk7QUFDOUIsZ0JBQU0sT0FBSyxhQUFFLGVBQUYsbUJBQWMsWUFBZCxnQ0FBNkI7QUFDeEMsZ0JBQU0sT0FBSyxhQUFFLGVBQUYsbUJBQWMsWUFBZCxnQ0FBNkI7QUFDeEMsaUJBQU8sS0FBSztBQUFBLFFBQ2hCO0FBQ0EsZUFBTztBQUFBLE1BQ1gsQ0FBQztBQUFBLElBQ0w7QUFDTixrQkFBYyxRQUFRLFdBQVM7QUFDOUIsWUFBTSxZQUFZLENBQUMsRUFBRSxNQUFNLFlBQVksTUFBTSxZQUFZO0FBQ3pELFlBQU0sVUFBVSxZQUFZLE1BQU0sU0FBVSxZQUFZLEVBQUUsTUFBTSxHQUFHLEVBQUUsQ0FBQyxJQUFJLEVBQUUsWUFBWTtBQUN4RixZQUFNLFVBQVUsZ0JBQWdCLFVBQVUsWUFBWTtBQUN0RCxVQUFJO0FBQVcsZ0JBQVEsU0FBUyxxQkFBcUI7QUFDckQsVUFBSSxNQUFNO0FBQVEsZ0JBQVEsU0FBUyxRQUFRO0FBRTNDLFlBQU0sU0FBUyxRQUFRLFVBQVUsWUFBWTtBQUM3QyxZQUFNLFVBQVUsT0FBTyxVQUFVLGFBQWE7QUFDOUMsY0FBUSxjQUFjLEdBQUcsTUFBTSxRQUFRLE1BQU07QUFDN0MsWUFBTSxTQUFTLE9BQU8sVUFBVSxZQUFZO0FBQzVDLGFBQU8sY0FBYyxHQUFHLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxNQUFNLGFBQWEsUUFBUSxFQUFFLENBQUMsTUFBTSxNQUFNLFdBQVcsWUFBWSxFQUFFLE1BQU0sR0FBRyxFQUFFLENBQUMsT0FBTyxNQUFNLFdBQVcsVUFBVSxFQUFFLFlBQVk7QUFDbEwsWUFBTSxpQkFBaUIsT0FBTyxVQUFVLHFCQUFxQjtBQUM3RCxPQUFDLE1BQU0sUUFBUSxDQUFDLEdBQUcsUUFBUSxTQUFPO0FBQ2pDLGNBQU0sUUFBUSxlQUFlLFdBQVcsS0FBSztBQUM3QyxjQUFNLGNBQWM7QUFBQSxNQUNyQixDQUFDO0FBQ0QsWUFBTSxVQUFVLFFBQVEsVUFBVSxhQUFhO0FBQy9DLFlBQU0sWUFBWSxRQUFRLFVBQVUsa0JBQWtCO0FBQ3RELFlBQU0sWUFBWSxVQUFVLFVBQVUsYUFBYTtBQUNuRCxnQkFBVSxjQUFjLEdBQUcsRUFBRSxZQUFZO0FBQ3pDLFlBQU0sWUFBWSxVQUFVLFVBQVUsaUJBQWlCO0FBQ3ZELGdCQUFVLGNBQWMsS0FBSyxrQkFBa0IsSUFBSSxHQUFHLE1BQU0sYUFBYSxRQUFRLEVBQUUsUUFBUSxDQUFDO0FBQzVGLFlBQU0sWUFBWSxRQUFRLFVBQVUsYUFBYTtBQUNqRCxnQkFBVSxjQUFjLEdBQUcsRUFBRSxZQUFZLEtBQUssS0FBSyxrQkFBa0IsSUFBSSxNQUFNO0FBQy9FLFlBQU0sY0FBYyxRQUFRLFVBQVUsYUFBYTtBQUNuRCxrQkFBWSxjQUFjLEdBQUcsRUFBRSxtQkFBbUIsS0FBSyxLQUFLLGtCQUFrQixJQUFJLE1BQU07QUFDeEYsVUFBSSxlQUFlO0FBQ25CLFVBQUksZ0JBQWdCO0FBQ3BCLFVBQUksZ0JBQWdCO0FBQ3BCLFVBQUksa0JBQTBCO0FBQzlCLGNBQVEsaUJBQWlCLFNBQVMsQ0FBQyxNQUFNO0FBQ3hDLFlBQUksY0FBYztBQUNqQix5QkFBZTtBQUNmLFlBQUUsZUFBZTtBQUNqQixZQUFFLGdCQUFnQjtBQUNsQjtBQUFBLFFBQ0Q7QUFDQSxZQUFJLGVBQWUsS0FBSyxLQUFLLEtBQUssaUJBQWlCLE9BQU8sTUFBTSxLQUFLLFdBQVcsQ0FBQyxFQUFFLEtBQUs7QUFBQSxNQUN6RixDQUFDO0FBR0QsVUFBSSxhQUE0QjtBQUNoQyxZQUFNLGFBQWEsQ0FBQyxPQUFpQztBQUVwRCxZQUFJLE1BQU0sWUFBWSxNQUFNLE9BQU8sR0FBRyxXQUFXLFlBQVksR0FBRyxXQUFXO0FBQUc7QUFDOUUsWUFBSTtBQUFZLGlCQUFPLGFBQWEsVUFBVTtBQUM5QyxxQkFBYSxPQUFPLFdBQVcsTUFBTTtBQUNwQyx5QkFBZTtBQUNmLGdCQUFNLFNBQVMsQ0FBQyxNQUFNO0FBQ3RCLGtCQUFRLFVBQVUsT0FBTyxVQUFVLE1BQU0sTUFBTTtBQUMvQyxlQUFLLHNCQUFzQjtBQUFBLFFBQzVCLEdBQUcsR0FBRztBQUFBLE1BQ1A7QUFDQSxZQUFNLGNBQWMsTUFBTTtBQUFFLFlBQUksWUFBWTtBQUFFLGlCQUFPLGFBQWEsVUFBVTtBQUFHLHVCQUFhO0FBQUEsUUFBTTtBQUFBLE1BQUU7QUFDcEcsY0FBUSxpQkFBaUIsYUFBYSxVQUFVO0FBQ2hELGNBQVEsaUJBQWlCLGVBQWUsQ0FBQyxRQUFzQjtBQUFFLDBCQUFtQixJQUFZLGVBQWU7QUFBQSxNQUFJLENBQUM7QUFDcEgsWUFBTSxlQUFlLENBQUMsT0FBbUI7QUFBRSx3QkFBZ0I7QUFBTSx3QkFBZ0IsS0FBSyxJQUFJO0FBQUcsbUJBQVcsRUFBRTtBQUFBLE1BQUc7QUFDN0csY0FBUSxpQkFBaUIsY0FBYyxjQUFjLEVBQUUsU0FBUyxLQUFLLENBQVE7QUFDN0UsY0FBUSxpQkFBaUIsV0FBVyxXQUFXO0FBQy9DLGNBQVEsaUJBQWlCLGNBQWMsV0FBVztBQUNsRCxZQUFNLGFBQWEsTUFBTTtBQUFFLHdCQUFnQjtBQUFPLG9CQUFZO0FBQUEsTUFBRztBQUNqRSxjQUFRLGlCQUFpQixZQUFZLFVBQVU7QUFDL0MsY0FBUSxpQkFBaUIsZUFBZSxVQUFVO0FBQUEsSUFFbkQsQ0FBQztBQUFBLEVBQ0Y7QUFBQTtBQUFBLEVBR1Esd0JBQXdCO0FBQy9CLFFBQUksQ0FBQyxLQUFLO0FBQXFCO0FBQy9CLFVBQU0sV0FBVyxLQUFLLGdCQUFnQixJQUFJLEtBQUs7QUFDL0MsVUFBTSxlQUFlLEtBQUssT0FBTyxPQUFPLE9BQUssRUFBRSxTQUFTLFFBQVEsS0FBSyxDQUFDLEVBQUUsTUFBTTtBQUM5RSxVQUFNLHVCQUF1QixLQUFLLGVBQWUsWUFBWTtBQUM3RCxVQUFNLFlBQVkscUJBQXFCLE9BQU8sQ0FBQyxLQUFLLE1BQU0sTUFBTSxFQUFFLE9BQU8sQ0FBQztBQUMxRSxVQUFNLGVBQWUscUJBQXFCLE9BQU8sQ0FBQyxLQUFLLE1BQU0sTUFBTSxFQUFFLGNBQWMsQ0FBQztBQUNwRixVQUFNLGlCQUFpQixxQkFBcUIsT0FBTyxDQUFDLEtBQUssTUFBTSxNQUFNLEVBQUUsYUFBYSxRQUFRLEdBQUcsQ0FBQztBQUNoRyxTQUFLLG9CQUFvQixjQUFjLGdCQUFnQixXQUFXLFlBQVk7QUFBQSxFQUMvRTtBQUFBO0FBQUEsRUFHUSxnQkFBZ0IsYUFBMEI7QUFDakQsU0FBSyxzQkFBc0I7QUFDM0IsVUFBTSxNQUFNLFlBQVksVUFBVSxvQkFBb0I7QUFDdEQsU0FBSyxjQUFjO0FBR25CLFVBQU0sVUFBVSxJQUFJLFVBQVUsRUFBRSxLQUFLLHFCQUFxQixNQUFNLEVBQUUsT0FBTyxFQUFFLFdBQVcsRUFBRSxFQUFFLENBQUM7QUFDM0YsWUFBUSxZQUFZLEtBQUssUUFBUSxDQUFDO0FBQ2xDLFlBQVEsaUJBQWlCLFNBQVMsQ0FBQyxNQUFNO0FBQ3hDLFFBQUUsZUFBZTtBQUVqQixVQUFJO0FBQUUsYUFBSyxLQUFLLE9BQU87QUFBQSxNQUFHLFNBQVMsR0FBUDtBQUFBLE1BQVc7QUFBQSxJQUN4QyxDQUFDO0FBR0QsVUFBTSxhQUFhLElBQUksVUFBVSxzQkFBc0I7QUFDdkQsVUFBTSxnQkFBZ0IsV0FBVyxTQUFTLFVBQVUsRUFBRSxLQUFLLDRCQUE0QixNQUFNLEVBQUUsTUFBTSxVQUFVLGNBQWMsRUFBRSxrQkFBa0IsRUFBRSxFQUFFLENBQUM7QUFDdEosa0JBQWMsWUFBWSxLQUFLLFVBQVUsQ0FBQztBQUMxQyxVQUFNLGNBQWMsV0FBVyxTQUFTLFNBQVMsRUFBRSxNQUFNLEVBQUUsTUFBTSxRQUFRLGFBQWEsRUFBRSx5QkFBeUIsRUFBRSxFQUFFLENBQUM7QUFDdEgsUUFBSSxLQUFLO0FBQWEsa0JBQVksUUFBUSxLQUFLO0FBQy9DLGtCQUFjLGlCQUFpQixTQUFTLE1BQU0sWUFBWSxNQUFNLENBQUM7QUFDakUsZ0JBQVksaUJBQWlCLFNBQVMsTUFBTTtBQUMzQyxXQUFLLGNBQWMsWUFBWSxTQUFTO0FBQ3hDLFdBQUsscUJBQXFCO0FBQUEsSUFDM0IsQ0FBQztBQUdELFVBQU0sVUFBVSxJQUFJLFVBQVUsdUJBQXVCO0FBQ3JELFVBQU0sVUFBVSxRQUFRLFVBQVUsRUFBRSxLQUFLLHFCQUFxQixNQUFNLEVBQUUsT0FBTyxFQUFFLGlCQUFpQixFQUFFLEVBQUUsQ0FBQztBQUNyRyxZQUFRLFlBQVksS0FBSyxRQUFRLENBQUM7QUFDbEMsVUFBTSxvQkFBb0IsTUFBTTtBQUMvQixjQUFRLFVBQVUsT0FBTyxVQUFVLEtBQUssYUFBYSxNQUFNO0FBQzNELGNBQVEsUUFBUSxhQUFhLEtBQUssUUFBUTtBQUMxQyxjQUFRLFFBQVEsZ0JBQWdCLE9BQU8sS0FBSyxhQUFhLE1BQU0sQ0FBQztBQUNoRSxZQUFNLFFBQVEsS0FBSyxhQUFhLGNBQWMsRUFBRSwyQkFBMkIsSUFDeEUsS0FBSyxhQUFhLGNBQWMsRUFBRSwyQkFBMkIsSUFDN0QsS0FBSyxhQUFhLGFBQWEsRUFBRSwwQkFBMEIsSUFDM0QsRUFBRSxpQkFBaUI7QUFDYixjQUFRLFFBQVEsU0FBUyxLQUFLO0FBQUEsSUFDeEM7QUFDQSxzQkFBa0I7QUFDWixZQUFRLGlCQUFpQixTQUFTLENBQUMsTUFBTTtBQUNyQyxRQUFFLGVBQWU7QUFDakIsV0FBSyxhQUFhLFNBQVMsQ0FBQyxTQUFTO0FBQ2pDLGFBQUssV0FBVztBQUNoQiwwQkFBa0I7QUFDbEIsYUFBSyxxQkFBcUI7QUFBQSxNQUM5QixDQUFDO0FBQUEsSUFDTCxDQUFDO0FBRVAsVUFBTSxTQUFTLFFBQVEsVUFBVSxFQUFFLEtBQUssb0JBQW9CLE1BQU0sRUFBRSxPQUFPLEVBQUUsVUFBVSxFQUFFLEVBQUUsQ0FBQztBQUM1RixXQUFPLFlBQVksS0FBSyxRQUFRLENBQUM7QUFDakMsV0FBTyxpQkFBaUIsU0FBUyxNQUFNO0FBQ3RDLFVBQUksZUFBZSxLQUFLLEtBQUssS0FBSyxpQkFBaUIsUUFBVyxNQUFNLEtBQUssV0FBVyxDQUFDLEVBQUUsS0FBSztBQUFBLElBQzdGLENBQUM7QUFBQSxFQUNGO0FBQUEsRUFFUSx1QkFBdUI7QUFDOUIsVUFBTSxFQUFFLFlBQVksSUFBSTtBQUN4QixVQUFNLFNBQVMsWUFBWSxjQUFjLG1CQUFtQjtBQUM1RCxRQUFJLFFBQVE7QUFDWCxNQUFDLE9BQXVCLE9BQU87QUFDL0IsWUFBTSxVQUFVLFlBQVksVUFBVSxrQkFBa0I7QUFDeEQsV0FBSyxpQkFBaUIsT0FBTztBQUFBLElBQzlCO0FBQUEsRUFDRDtBQUFBLEVBRVEsd0JBQXdCO0FBQy9CLFVBQU0sV0FBVztBQUNqQixRQUFJLFNBQVMsZUFBZSxRQUFRO0FBQUc7QUFDdkMsVUFBTSxRQUFRLFNBQVMsY0FBYyxPQUFPO0FBQzVDLFVBQU0sS0FBSztBQUNYLFVBQU0sY0FBYztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUE4QnBCLGFBQVMsS0FBSyxZQUFZLEtBQUs7QUFBQSxFQUNoQztBQUFBLEVBRVEsd0JBQXdCO0FBQy9CLFVBQU0sV0FBVztBQUNqQixRQUFJLFNBQVMsZUFBZSxRQUFRO0FBQUc7QUFDdkMsVUFBTSxRQUFRLFNBQVMsY0FBYyxPQUFPO0FBQzVDLFVBQU0sS0FBSztBQUNYLFVBQU0sY0FBYztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBb0JwQixhQUFTLEtBQUssWUFBWSxLQUFLO0FBQUEsRUFDaEM7QUFBQSxFQUVXLGFBQWEsVUFBdUIsVUFBMkU7QUFFbkgsU0FBSyxzQkFBc0I7QUFFM0IsVUFBTSxPQUFPLFNBQVMsc0JBQXNCO0FBQzVDLFVBQU0sT0FBTyxTQUFTLGNBQWMsS0FBSztBQUN6QyxTQUFLLFlBQVk7QUFFakIsVUFBTSxZQUFZLENBQUMsT0FBZSxVQUEyRDtBQUN6RixZQUFNLE9BQU8sU0FBUyxjQUFjLEtBQUs7QUFDekMsV0FBSyxZQUFZLGVBQWUsS0FBSyxhQUFhLFFBQVEsWUFBWTtBQUN0RSxXQUFLLGNBQWM7QUFDbkIsV0FBSyxpQkFBaUIsU0FBUyxDQUFDLE9BQU87QUFDbkMsV0FBRyxnQkFBZ0I7QUFDbkIsY0FBTSxPQUFPLEtBQUssYUFBYSxRQUFRLFNBQVM7QUFDaEQsaUJBQVMsSUFBVztBQUNwQixhQUFLLHNCQUFzQjtBQUFBLE1BQy9CLENBQUM7QUFDRCxhQUFPO0FBQUEsSUFDWDtBQUVOLFNBQUssWUFBWSxVQUFVLEVBQUUsMEJBQTBCLEdBQUcsV0FBVyxDQUFDO0FBQ3RFLFNBQUssWUFBWSxVQUFVLEVBQUUsMEJBQTBCLEdBQUcsV0FBVyxDQUFDO0FBQ3RFLFNBQUssWUFBWSxVQUFVLEVBQUUseUJBQXlCLEdBQUcsVUFBVSxDQUFDO0FBRTlELGFBQVMsS0FBSyxZQUFZLElBQUk7QUFFOUIsVUFBTSxNQUFNLEtBQUssU0FBUztBQUMxQixVQUFNLE9BQU8sS0FBSyxJQUFJLEtBQUssSUFBSSxHQUFHLEtBQUssSUFBSSxHQUFHLE9BQU8sYUFBYSxHQUFHO0FBQ3JFLFNBQUssTUFBTSxNQUFNLEdBQUc7QUFDcEIsU0FBSyxNQUFNLE9BQU8sR0FBRztBQUUzQixVQUFNLGFBQWEsQ0FBQyxPQUFtQjtBQUN0QyxVQUFJLENBQUMsS0FBSyxTQUFTLEdBQUcsTUFBYztBQUFHLGFBQUssc0JBQXNCO0FBQUEsSUFDbkU7QUFDQSxVQUFNLFFBQVEsQ0FBQyxPQUFzQjtBQUNwQyxVQUFJLEdBQUcsUUFBUTtBQUFVLGFBQUssc0JBQXNCO0FBQUEsSUFDckQ7QUFFQSxTQUFLLGlCQUFpQixVQUFVLGFBQWEsWUFBbUIsRUFBRSxNQUFNLEtBQUssQ0FBUTtBQUNyRixTQUFLLGlCQUFpQixVQUFVLFdBQVcsT0FBYyxFQUFFLE1BQU0sS0FBSyxDQUFRO0FBQzlFLElBQUMsS0FBYSxXQUFXO0FBQUEsRUFDdkI7QUFBQTtBQUFBLEVBR0EsV0FBZ0I7QUFDWixXQUFPLEVBQUUsVUFBVSxLQUFLLFNBQVM7QUFBQSxFQUNyQztBQUFBLEVBRUEsTUFBTSxTQUFTLE9BQVksUUFBNEI7QUFDbkQsVUFBTSxXQUFXLCtCQUFPO0FBQ3hCLFFBQUksWUFBWSxhQUFhLEtBQUssVUFBVTtBQUN4QyxXQUFLLFdBQVc7QUFDaEIsWUFBTSxLQUFLLFFBQVEsUUFBUTtBQUMzQjtBQUFBLElBQ0o7QUFFQSxVQUFNLEVBQUUsWUFBWSxJQUFJO0FBQ3hCLGdCQUFZLE1BQU07QUFDbEIsZ0JBQVksU0FBUyxXQUFXO0FBQ2hDLFVBQU0sT0FBTyxZQUFZLFVBQVU7QUFDbkMsU0FBSyxNQUFNLFVBQVU7QUFDckIsU0FBSyxNQUFNLFVBQVU7QUFDckIsU0FBSyxjQUFjO0FBQUEsRUFDdkI7QUFBQSxFQUVRLHdCQUF3QjtBQUM1QixVQUFNLFdBQVcsU0FBUyxjQUFjLGdCQUFnQjtBQUN4RCxRQUFJLFVBQVU7QUFDVixZQUFNLFVBQVcsU0FBaUI7QUFDbEMsVUFBSTtBQUFTLGdCQUFRO0FBQ3JCLGVBQVMsT0FBTztBQUFBLElBQ3BCO0FBQUEsRUFDSjtBQUFBLEVBRUssWUFBMkI7QUFDbEMsVUFBTSxNQUFNLFNBQVMsZ0JBQWdCLDhCQUE4QixLQUFLO0FBQ3hFLFFBQUksYUFBYSxXQUFXLFdBQVc7QUFDdkMsUUFBSSxhQUFhLFFBQVEsTUFBTTtBQUMvQixVQUFNLFNBQVMsU0FBUyxnQkFBZ0IsOEJBQThCLFFBQVE7QUFDOUUsV0FBTyxhQUFhLE1BQU0sSUFBSTtBQUM5QixXQUFPLGFBQWEsTUFBTSxJQUFJO0FBQzlCLFdBQU8sYUFBYSxLQUFLLEdBQUc7QUFDNUIsV0FBTyxhQUFhLFVBQVUsY0FBYztBQUM1QyxXQUFPLGFBQWEsZ0JBQWdCLEdBQUc7QUFDdkMsUUFBSSxZQUFZLE1BQU07QUFDdEIsVUFBTSxPQUFPLFNBQVMsZ0JBQWdCLDhCQUE4QixNQUFNO0FBQzFFLFNBQUssYUFBYSxNQUFNLElBQUk7QUFDNUIsU0FBSyxhQUFhLE1BQU0sSUFBSTtBQUM1QixTQUFLLGFBQWEsTUFBTSxPQUFPO0FBQy9CLFNBQUssYUFBYSxNQUFNLE9BQU87QUFDL0IsU0FBSyxhQUFhLFVBQVUsY0FBYztBQUMxQyxTQUFLLGFBQWEsZ0JBQWdCLEdBQUc7QUFDckMsU0FBSyxhQUFhLGtCQUFrQixPQUFPO0FBQzNDLFFBQUksWUFBWSxJQUFJO0FBQ3BCLFdBQU87QUFBQSxFQUNSO0FBQUEsRUFFUSxVQUF5QjtBQUNoQyxVQUFNLE1BQU0sU0FBUyxnQkFBZ0IsOEJBQThCLEtBQUs7QUFDeEUsUUFBSSxhQUFhLFdBQVcsV0FBVztBQUN2QyxRQUFJLGFBQWEsUUFBUSxNQUFNO0FBQy9CLFVBQU0sT0FBTyxTQUFTLGdCQUFnQiw4QkFBOEIsTUFBTTtBQUMxRSxTQUFLLGFBQWEsS0FBSyxrQkFBa0I7QUFDekMsU0FBSyxhQUFhLFVBQVUsY0FBYztBQUMxQyxTQUFLLGFBQWEsZ0JBQWdCLEdBQUc7QUFDckMsU0FBSyxhQUFhLGtCQUFrQixPQUFPO0FBQzNDLFFBQUksWUFBWSxJQUFJO0FBQ3BCLFdBQU87QUFBQSxFQUNSO0FBQUEsRUFFUSxVQUF5QjtBQUNoQyxVQUFNLE1BQU0sU0FBUyxnQkFBZ0IsOEJBQThCLEtBQUs7QUFDeEUsUUFBSSxhQUFhLFdBQVcsV0FBVztBQUN2QyxRQUFJLGFBQWEsUUFBUSxNQUFNO0FBQy9CLFVBQU0sS0FBSyxTQUFTLGdCQUFnQiw4QkFBOEIsTUFBTTtBQUN4RSxPQUFHLGFBQWEsS0FBSyxjQUFjO0FBQ25DLE9BQUcsYUFBYSxVQUFVLGNBQWM7QUFDeEMsT0FBRyxhQUFhLGdCQUFnQixHQUFHO0FBQ25DLE9BQUcsYUFBYSxrQkFBa0IsT0FBTztBQUN6QyxPQUFHLGFBQWEsbUJBQW1CLE9BQU87QUFDMUMsUUFBSSxZQUFZLEVBQUU7QUFDbEIsVUFBTSxLQUFLLFNBQVMsZ0JBQWdCLDhCQUE4QixNQUFNO0FBQ3hFLE9BQUcsYUFBYSxLQUFLLGlCQUFpQjtBQUN0QyxPQUFHLGFBQWEsVUFBVSxjQUFjO0FBQ3hDLE9BQUcsYUFBYSxnQkFBZ0IsR0FBRztBQUNuQyxPQUFHLGFBQWEsa0JBQWtCLE9BQU87QUFDekMsT0FBRyxhQUFhLG1CQUFtQixPQUFPO0FBQzFDLFFBQUksWUFBWSxFQUFFO0FBQ2xCLFdBQU87QUFBQSxFQUNSO0FBQUEsRUFFUSxVQUF5QjtBQUNoQyxVQUFNLE1BQU0sU0FBUyxnQkFBZ0IsOEJBQThCLEtBQUs7QUFDeEUsUUFBSSxhQUFhLFdBQVcsV0FBVztBQUN2QyxRQUFJLGFBQWEsUUFBUSxNQUFNO0FBQy9CLFVBQU0sT0FBTyxTQUFTLGdCQUFnQiw4QkFBOEIsTUFBTTtBQUMxRSxTQUFLLGFBQWEsS0FBSyxpQkFBaUI7QUFDeEMsU0FBSyxhQUFhLFVBQVUsY0FBYztBQUMxQyxTQUFLLGFBQWEsZ0JBQWdCLEdBQUc7QUFDckMsU0FBSyxhQUFhLGtCQUFrQixPQUFPO0FBQzNDLFNBQUssYUFBYSxtQkFBbUIsT0FBTztBQUM1QyxRQUFJLFlBQVksSUFBSTtBQUNwQixXQUFPO0FBQUEsRUFDUjtBQUFBLEVBRVEsaUJBQWlCLGFBQTBCO0FBRWxELFVBQU0sV0FBVyxLQUFLLGdCQUFnQixJQUFJLEtBQUs7QUFDL0MsVUFBTSxlQUFlLEtBQUssT0FBTyxPQUFPLFdBQVMsTUFBTSxTQUFTLFFBQVEsS0FBSyxDQUFDLE1BQU0sTUFBTTtBQUMxRixVQUFNLHVCQUF1QixLQUFLLGVBQWUsWUFBWTtBQUM3RCxVQUFNLFlBQVkscUJBQXFCLE9BQU8sQ0FBQyxLQUFLLFVBQVUsTUFBTSxNQUFNLE9BQU8sQ0FBQztBQUNsRixVQUFNLGVBQWUscUJBQXFCLE9BQU8sQ0FBQyxLQUFLLFVBQVUsTUFBTSxNQUFNLGNBQWMsQ0FBQztBQUM1RixVQUFNLGlCQUFpQixxQkFBcUIsT0FBTyxDQUFDLEtBQUssVUFBVSxNQUFNLE1BQU0sYUFBYSxRQUFRLEdBQUcsQ0FBQztBQUd4RyxVQUFNLFVBQVUsb0JBQUksSUFBWTtBQUNoQyxTQUFLLE9BQU8sUUFBUSxXQUFTO0FBQzVCLE9BQUMsTUFBTSxRQUFRLENBQUMsR0FBRyxRQUFRLFNBQU8sUUFBUSxJQUFJLEdBQUcsQ0FBQztBQUFBLElBQ25ELENBQUM7QUFDRCxVQUFNLFdBQVcsSUFBSSxLQUFLLFNBQVMsTUFBTSxFQUFFLGFBQWEsUUFBUSxTQUFTLEtBQUssQ0FBQztBQUMvRSxVQUFNLFlBQVksTUFBTSxLQUFLLE9BQU8sRUFBRSxLQUFLLENBQUMsR0FBRyxNQUFNLFNBQVMsUUFBUSxHQUFHLENBQUMsQ0FBQztBQUczRSxVQUFNLGNBQWMsSUFBSSxLQUFLLEVBQUUsWUFBWTtBQUMzQyxVQUFNLFVBQVUsY0FBYztBQUU5QixRQUFJLFVBQVU7QUFDZCxRQUFJLEtBQUssT0FBTyxTQUFTLEdBQUc7QUFFM0IsWUFBTSxlQUFlLEtBQUssSUFBSSxHQUFHLEtBQUssT0FBTyxJQUFJLFdBQVMsTUFBTSxXQUFXLFlBQVksQ0FBQyxDQUFDO0FBQ3pGLGdCQUFVO0FBQUEsSUFDWDtBQUdBLFVBQU0sY0FBYyxLQUFLLGdCQUFnQixzQkFBc0IsRUFBRTtBQUVqRSxZQUFRLElBQUkscURBQWE7QUFBQSxNQUN4QixjQUFjLGFBQWE7QUFBQSxNQUMzQjtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0EsV0FBVyxFQUFFLFNBQVMsUUFBUTtBQUFBLElBQy9CLENBQUM7QUFHRCxVQUFNLGVBQWUsWUFBWSxVQUFVO0FBQzNDLFVBQU0sa0JBQW1DO0FBQUEsTUFDeEM7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0EsTUFBTTtBQUFBLE1BQ04sY0FBYyxLQUFLO0FBQUEsTUFDbkIsWUFBWSxDQUFDLFFBQTJCO0FBRXZDLFlBQUksTUFBTSxRQUFRLEdBQUcsR0FBRztBQUN2QixlQUFLLGVBQWUsQ0FBQyxHQUFHLElBQUksSUFBSSxHQUFHLENBQUM7QUFBQSxRQUNyQyxPQUFPO0FBQ04sY0FBSSxLQUFLLGFBQWEsU0FBUyxHQUFHLEdBQUc7QUFDcEMsaUJBQUssZUFBZSxLQUFLLGFBQWEsT0FBTyxDQUFBQSxPQUFLQSxPQUFNLEdBQUc7QUFBQSxVQUM1RCxPQUFPO0FBQ04saUJBQUssZUFBZSxDQUFDLEdBQUcsS0FBSyxjQUFjLEdBQUc7QUFBQSxVQUMvQztBQUFBLFFBQ0Q7QUFFQSxhQUFLLGFBQWE7QUFBQSxNQUNuQjtBQUFBLE1BQ0E7QUFBQSxNQUNBLGNBQWMsS0FBSztBQUFBLE1BQ25CLGVBQWUsQ0FBQyxNQUFjO0FBQzdCLGdCQUFRLElBQUksNkJBQVMsQ0FBQztBQUFBLE1BRXZCO0FBQUEsTUFDQSxjQUFjLENBQUMsTUFBYztBQUM1QixnQkFBUSxJQUFJLDZCQUFTLENBQUM7QUFBQSxNQUN2QjtBQUFBLE1BQ0EsWUFBWSxDQUFDLFlBQW9CO0FBQ2hDLGdCQUFRLElBQUksNkJBQVMsT0FBTztBQUU1QixjQUFNLGVBQWUsSUFBSSxLQUFLLE9BQU87QUFDckMsYUFBSyxlQUFlO0FBQ3BCLFlBQUksS0FBSyxxQkFBcUI7QUFDN0IsZUFBSyxvQkFBb0IsZ0JBQWdCLE1BQU0sWUFBWTtBQUUzRCxnQkFBTUMsWUFBVztBQUNqQixnQkFBTUMsZ0JBQWUsS0FBSyxPQUFPLE9BQU8sV0FBUyxNQUFNLFNBQVNELFNBQVEsS0FBSyxDQUFDLE1BQU0sTUFBTTtBQUMxRixnQkFBTUUsd0JBQXVCLEtBQUssZUFBZUQsYUFBWTtBQUM3RCxnQkFBTUUsYUFBWUQsc0JBQXFCLE9BQU8sQ0FBQyxLQUFLLFVBQVUsTUFBTSxNQUFNLE9BQU8sQ0FBQztBQUNsRixnQkFBTUUsZ0JBQWVGLHNCQUFxQixPQUFPLENBQUMsS0FBSyxVQUFVLE1BQU0sTUFBTSxjQUFjLENBQUM7QUFDNUYsZ0JBQU1HLGtCQUFpQkgsc0JBQXFCLE9BQU8sQ0FBQyxLQUFLLFVBQVUsTUFBTSxNQUFNLGFBQWFGLFNBQVEsR0FBRyxDQUFDO0FBQ3hHLGVBQUssb0JBQW9CLGNBQWNLLGlCQUFnQkYsWUFBV0MsYUFBWTtBQUFBLFFBQy9FO0FBRUEsY0FBTSxFQUFFLGFBQUFFLGFBQVksSUFBSTtBQUN4QixjQUFNLFNBQVNBLGFBQVksY0FBYyxtQkFBbUI7QUFDNUQsWUFBSSxRQUFRO0FBRVgsVUFBQyxPQUF1QixPQUFPO0FBQy9CLGdCQUFNLFVBQVVBLGFBQVksVUFBVSxrQkFBa0I7QUFDeEQsZUFBSyxpQkFBaUIsT0FBTztBQUFBLFFBQzlCLE9BQU87QUFFTixlQUFLLGFBQWE7QUFBQSxRQUNuQjtBQUFBLE1BQ0Q7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLElBQ0Q7QUFFQSxTQUFLLHNCQUFzQixJQUFJLFdBQVcsY0FBYyxlQUFlO0FBQ3ZFLFNBQUssb0JBQW9CLE9BQU87QUFHaEMsU0FBSyxxQ0FBcUMsb0JBQW9CO0FBRTlELFlBQVEsSUFBSSwyREFBYyxZQUFZO0FBQUEsRUFDdkM7QUFBQSxFQUVRLG9CQUE0QjtBQUNuQyxXQUFPLEVBQUUsaUJBQWlCO0FBQUEsRUFDM0I7QUFBQTtBQUFBLEVBR1EscUNBQXFDLFFBQWlCO0FBQzdELFFBQUksT0FBTyxXQUFXO0FBQUc7QUFHekIsUUFBSSxjQUFjO0FBQ2xCLFdBQU8sUUFBUSxPQUFLO0FBQ25CLFlBQU0sS0FBSyxFQUFFO0FBQ2IsVUFBSSxJQUFJO0FBQ1AsY0FBTVAsS0FBSSxHQUFHLFFBQVE7QUFDckIsWUFBSUEsTUFBS0EsS0FBSTtBQUFhLHdCQUFjQTtBQUFBLE1BQ3pDO0FBQUEsSUFDRCxDQUFDO0FBQ0QsVUFBTSxNQUFNLElBQUksS0FBSztBQUNyQixVQUFNLFVBQVUsZUFBZSxjQUFjLElBQUksUUFBUSxJQUFJLElBQUksS0FBSyxXQUFXLElBQUk7QUFHckYsVUFBTSxnQkFBZ0IsS0FBSyxnQkFBZ0IsUUFBUSxJQUFJLFFBQVcsT0FBTztBQUN6RSxRQUFJLEtBQUsscUJBQXFCO0FBQzdCLFdBQUssb0JBQW9CLFlBQVksYUFBYTtBQUFBLElBQ25EO0FBR0EsZUFBVyxZQUFZO0FBQ3RCLFlBQU0sY0FBMkQsQ0FBQztBQUNsRSxlQUFTLElBQUksR0FBRyxJQUFJLGNBQWMsU0FBUyxHQUFHLEtBQUs7QUFDbEQsb0JBQVk7QUFBQSxVQUNYLFFBQVEsUUFBUSxLQUFLLGdCQUFnQixRQUFRLElBQUksY0FBYyxDQUFDLEVBQUUsTUFBTSxjQUFjLElBQUksQ0FBQyxFQUFFLElBQUksQ0FBQyxFQUFFLEtBQUssZUFBYTtBQUNySCxnQkFBSSxJQUFJO0FBQUcscUJBQU8sVUFBVSxNQUFNLENBQUM7QUFDbkMsbUJBQU87QUFBQSxVQUNSLENBQUM7QUFBQSxRQUNGO0FBQUEsTUFDRDtBQUNBLFlBQU0sYUFBYSxNQUFNLFFBQVEsSUFBSSxXQUFXO0FBQ2hELFlBQU0sYUFBYSxXQUFXLEtBQUs7QUFDbkMsVUFBSSxLQUFLLHFCQUFxQjtBQUM3QixhQUFLLG9CQUFvQixZQUFZLFVBQVU7QUFBQSxNQUNoRDtBQUFBLElBQ0QsR0FBRyxHQUFHO0FBQUEsRUFDUDtBQUFBO0FBQUEsRUFHUSxlQUFlLE9BQXlCO0FBQy9DLFFBQUksQ0FBQyxLQUFLLGdCQUFnQixLQUFLLGFBQWEsV0FBVztBQUFHLGFBQU87QUFDakUsV0FBTyxNQUFNLE9BQU8sT0FBRTtBQTVyQnhCO0FBNHJCMkIscUJBQUUsU0FBRixtQkFBUSxLQUFLLENBQUFBLE9BQUssS0FBSyxhQUFhLFNBQVNBLEVBQUM7QUFBQSxLQUFFO0FBQUEsRUFDMUU7QUFBQSxFQUVRLGdCQUFnQixRQUFpQixPQUFlLFVBQWlCLFFBQWdEO0FBQ3hILFFBQUksT0FBTyxXQUFXO0FBQUcsYUFBTyxDQUFDO0FBRWpDLFVBQU0sTUFBTSxJQUFJLEtBQUs7QUFDckIsVUFBTSxVQUFVLFlBQVksSUFBSSxLQUFLLEtBQUssSUFBSSxHQUFHLE9BQU8sSUFBSSxPQUFLLEVBQUUsV0FBVyxRQUFRLENBQUMsQ0FBQyxDQUFDO0FBQ3pGLFVBQU0sY0FBYyxLQUFLLElBQUksR0FBRyxPQUFPLElBQUksT0FBSztBQUMvQyxZQUFNLEtBQUssRUFBRTtBQUNiLFVBQUksSUFBSTtBQUNQLGNBQU1BLEtBQUksR0FBRyxRQUFRO0FBQ3JCLFlBQUksQ0FBQyxNQUFNQSxFQUFDO0FBQUcsaUJBQU9BO0FBQUEsTUFDdkI7QUFDQSxhQUFPLElBQUksUUFBUTtBQUFBLElBQ3BCLENBQUMsQ0FBQztBQUNGLFVBQU0sVUFBVSxVQUFVLElBQUksS0FBSyxXQUFXO0FBRTlDLFVBQU0sU0FBMEMsQ0FBQztBQUNqRCxhQUFTLElBQUksR0FBRyxJQUFJLE9BQU8sS0FBSztBQUMvQixZQUFNQSxLQUFJLFFBQVEsUUFBUSxLQUFLLFFBQVEsUUFBUSxJQUFJLFFBQVEsUUFBUSxLQUFLLEtBQUssUUFBUTtBQUNyRixZQUFNLE9BQU8sSUFBSSxLQUFLQSxFQUFDO0FBQ3ZCLFVBQUksWUFBWTtBQUdoQixhQUFPLFFBQVEsT0FBSztBQUNuQixjQUFNLE9BQU8sS0FBSyxjQUFjLEVBQUUsT0FBTyxFQUFFLGNBQWMsRUFBRSxZQUFZLEVBQUUsVUFBVSxJQUFJO0FBQ3ZGLFlBQUksU0FBUyxJQUFJO0FBQUcsdUJBQWE7QUFBQSxNQUNsQyxDQUFDO0FBRUQsYUFBTyxLQUFLLEVBQUUsTUFBTSxPQUFPLFVBQVUsQ0FBQztBQUFBLElBQ3ZDO0FBQ0EsV0FBTztBQUFBLEVBQ1I7QUFBQTtBQUFBLEVBR1EsY0FBYyxPQUFlLFNBQWlCLE1BQVksSUFBNkIsS0FBbUI7QUFDakgsUUFBSSxDQUFDO0FBQU0sYUFBTztBQUNsQixVQUFNLE9BQU8sS0FBSyxPQUFPLElBQUksUUFBUSxJQUFJLEtBQUssUUFBUSxLQUFLLEtBQVEsSUFBSTtBQUN2RSxRQUFJLENBQUMsTUFBTSxLQUFLLEtBQUs7QUFDcEIsZ0JBQVU7QUFBQSxJQUNYO0FBQ0EsUUFBSSxDQUFDLFNBQVMsSUFBSSxLQUFLLFFBQVE7QUFBRyxhQUFPO0FBQ3pDLFVBQU0sVUFBVSxPQUFPLEtBQUssSUFBSSxPQUFPLFdBQVcsQ0FBQyxLQUFLO0FBQ3hELFdBQU8sU0FBUyxNQUFNLElBQUksU0FBUztBQUFBLEVBQ3BDO0FBRUQ7OztBRzN1QkEsSUFBQVEsbUJBQStDO0FBRy9DO0FBR08sSUFBTSx1QkFBTixjQUFtQyxrQ0FBaUI7QUFBQSxFQUcxRCxZQUFZLEtBQVUsUUFBMEI7QUFDL0MsVUFBTSxLQUFLLE1BQU07QUFDakIsU0FBSyxTQUFTO0FBQUEsRUFDZjtBQUFBLEVBRUEsVUFBZ0I7QUFDZixVQUFNLEVBQUUsWUFBWSxJQUFJO0FBRXhCLGdCQUFZLE1BQU07QUFFbEIsZ0JBQVksU0FBUyxNQUFNLEVBQUUsTUFBTSxFQUFFLGdCQUFnQixFQUFFLENBQUM7QUFHeEQsZ0JBQVksU0FBUyxLQUFLLEVBQUUsTUFBTSxFQUFFLGtCQUFrQixHQUFHLEtBQUssMkJBQTJCLENBQUM7QUFDMUYsVUFBTSxlQUFlLEVBQUUsd0JBQXdCO0FBQy9DLGdCQUFZLFNBQVMsT0FBTyxFQUFFLE1BQU0sY0FBYyxLQUFLLDJCQUEyQixDQUFDO0FBQ25GLGdCQUFZLFNBQVMsS0FBSyxFQUFFLE1BQU0sRUFBRSxxQkFBcUIsR0FBRyxLQUFLLDJCQUEyQixDQUFDO0FBQzdGLFVBQU0sZUFBZSxFQUFFLHdCQUF3QjtBQUMvQyxnQkFBWSxTQUFTLE9BQU8sRUFBRSxNQUFNLGNBQWMsS0FBSywyQkFBMkIsQ0FBQztBQUNuRixnQkFBWSxTQUFTLEtBQUssRUFBRSxNQUFNLEVBQUUsZ0JBQWdCLEdBQUcsS0FBSywyQkFBMkIsQ0FBQztBQUV4RixRQUFJLHlCQUFRLFdBQVcsRUFDckIsUUFBUSxFQUFFLHlCQUF5QixDQUFDLEVBQ3BDLFFBQVEsRUFBRSx5QkFBeUIsQ0FBQyxFQUNwQyxRQUFRLFVBQVEsS0FDZixlQUFlLHdCQUF3QixFQUN2QyxTQUFTLEtBQUssT0FBTyxTQUFTLGFBQWEsd0JBQXdCLEVBQ25FLFNBQVMsT0FBTyxVQUFVO0FBQzFCLFdBQUssT0FBTyxTQUFTLGFBQVksK0JBQU8sV0FBVTtBQUNsRCxZQUFNLEtBQUssT0FBTyxhQUFhO0FBRS9CLFdBQUssT0FBTyxrQkFBa0IsSUFBSSxnQkFBZ0IsS0FBSyxLQUFLLEtBQUssT0FBTyxTQUFTLFNBQVM7QUFBQSxJQUMzRixDQUFDLENBQUM7QUFFSixRQUFJLHlCQUFRLFdBQVcsRUFDckIsUUFBUSxFQUFFLDJCQUEyQixDQUFDLEVBQ3RDLFFBQVEsRUFBRSwyQkFBMkIsQ0FBQyxFQUN0QyxVQUFVLFlBQVUsT0FDbkIsU0FBUyxLQUFLLE9BQU8sU0FBUyxpQkFBaUIsRUFDL0MsU0FBUyxPQUFPLFVBQVU7QUFDMUIsV0FBSyxPQUFPLFNBQVMsb0JBQW9CLENBQUMsQ0FBQztBQUMzQyxZQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsSUFDaEMsQ0FBQyxDQUFDO0FBRUosUUFBSSx5QkFBUSxXQUFXLEVBQ3JCLFFBQVEsRUFBRSwyQkFBMkIsQ0FBQyxFQUN0QyxRQUFRLEVBQUUsMkJBQTJCLENBQUMsRUFDdEMsWUFBWSxVQUFRO0FBQ3BCLFdBQUssVUFBVSxRQUFRLEVBQUUsa0NBQWtDLENBQUM7QUFDNUQsV0FBSyxVQUFVLGFBQWEsRUFBRSx1Q0FBdUMsQ0FBQztBQUN0RSxXQUFLLFVBQVUsYUFBYSxFQUFFLHVDQUF1QyxDQUFDO0FBQ3RFLFdBQUssVUFBVSxZQUFZLEVBQUUsc0NBQXNDLENBQUM7QUFDcEUsV0FBSyxTQUFTLEtBQUssT0FBTyxTQUFTLGVBQWUsTUFBTTtBQUN4RCxXQUFLLFNBQVMsT0FBTyxVQUFVO0FBQzlCLGNBQU0sSUFBSztBQUNYLGFBQUssT0FBTyxTQUFTLGNBQWM7QUFDbkMsY0FBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLE1BQ2hDLENBQUM7QUFBQSxJQUNGLENBQUM7QUFFRixRQUFJLHlCQUFRLFdBQVcsRUFDckIsUUFBUSxFQUFFLDJCQUEyQixDQUFDLEVBQ3RDLFFBQVEsRUFBRSwyQkFBMkIsQ0FBQyxFQUN0QyxRQUFRLFVBQVE7QUFDaEIsWUFBTSx1QkFBdUIsQ0FBQyxVQUEwQjtBQUN2RCxjQUFNLEtBQUssU0FBUyxJQUFJLE1BQU0sZ0NBQWdDO0FBQzlELGVBQU8sSUFBSSxFQUFFLENBQUMsSUFBSTtBQUFBLE1BQ25CO0FBQ0EsV0FDRSxlQUFlLEVBQUUsa0NBQWtDLENBQUMsRUFDcEQsU0FBUyxLQUFLLE9BQU8sU0FBUyxXQUFXLEVBQ3pDLFNBQVMsT0FBTyxVQUFVO0FBQzFCLGNBQU0sUUFBUSxxQkFBcUIsS0FBSztBQUN4QyxZQUFLLEtBQWEsV0FBWSxLQUFhLFFBQVEsVUFBVSxPQUFPO0FBQ25FLFVBQUMsS0FBYSxRQUFRLFFBQVE7QUFBQSxRQUMvQjtBQUNBLGFBQUssT0FBTyxTQUFTLGNBQWM7QUFDbkMsY0FBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLE1BQ2hDLENBQUM7QUFDRixZQUFNLFVBQVcsS0FBYTtBQUM5QixVQUFJLFNBQVM7QUFDWixnQkFBUSxpQkFBaUIsU0FBUyxNQUFNO0FBQ3ZDLHFCQUFXLE1BQU07QUFDaEIsa0JBQU0sUUFBUSxxQkFBcUIsUUFBUSxTQUFTLEVBQUU7QUFDdEQsZ0JBQUksUUFBUSxVQUFVO0FBQU8sc0JBQVEsUUFBUTtBQUM3QyxpQkFBSyxPQUFPLFNBQVMsY0FBYztBQUNuQyxpQkFBSyxPQUFPLGFBQWE7QUFBQSxVQUMxQixHQUFHLENBQUM7QUFBQSxRQUNMLENBQUM7QUFBQSxNQUNGO0FBQUEsSUFDRCxDQUFDO0FBR0YsUUFBSSx5QkFBUSxXQUFXLEVBQ3JCLFFBQVEsRUFBRSxzQkFBc0IsQ0FBQyxFQUNqQyxRQUFRLEVBQUUsc0JBQXNCLENBQUMsRUFDakMsWUFBWSxVQUFRO0FBRXBCLFdBQUssVUFBVSxRQUFRLEVBQUUsNkJBQTZCLENBQUM7QUFDdkQsV0FBSyxVQUFVLE1BQU0sY0FBSTtBQUN6QixXQUFLLFVBQVUsTUFBTSxTQUFTO0FBQzlCLFdBQUssU0FBUyxLQUFLLE9BQU8sU0FBUyxVQUFVLE1BQU07QUFDbkQsV0FBSyxTQUFTLE9BQU8sVUFBVTtBQUM5QixhQUFLLE9BQU8sU0FBUyxTQUFVO0FBQy9CLGNBQU0sS0FBSyxPQUFPLGFBQWE7QUFFL0IsYUFBSyxRQUFRO0FBQUEsTUFDZCxDQUFDO0FBQUEsSUFDRixDQUFDO0FBQUEsRUFDSDtBQUNEOzs7QVQ3R0EsSUFBcUIsbUJBQXJCLGNBQThDLHdCQUFPO0FBQUEsRUFJcEQsTUFBTSxTQUFTO0FBQ2QsVUFBTSxLQUFLLGFBQWE7QUFHeEIsY0FBVSxLQUFLLFNBQVMsVUFBVSxNQUFNO0FBR3hDLFNBQUssa0JBQWtCLElBQUksZ0JBQWdCLEtBQUssS0FBSyxLQUFLLFNBQVMsYUFBYSx3QkFBd0I7QUFHeEcsU0FBSyxhQUFhLG9CQUFvQixDQUFDLFNBQVMsSUFBSSxpQkFBaUIsTUFBTSxLQUFLLGVBQWUsQ0FBQztBQUdoRyxTQUFLO0FBQUEsTUFDSixLQUFLLElBQUksVUFBVSxHQUFHLGFBQWEsQ0FBQyxNQUFNLFNBQVM7QUFDbEQsWUFBSSxDQUFDLEtBQUssU0FBUztBQUFtQjtBQUN0QyxZQUFJLGdCQUFnQiwwQkFBUyxLQUFLLGNBQWMsTUFBTTtBQUNyRCxlQUFLLFFBQVEsQ0FBQyxTQUFTO0FBQ3RCLGlCQUNFLFNBQVMsRUFBRSxlQUFlLENBQUMsRUFDM0IsUUFBUSxTQUFTLEVBQ2pCLFFBQVEsTUFBTTtBQUVkLG9CQUFNLE9BQU8sS0FBSyxJQUFJLFVBQVUsUUFBUSxLQUFLO0FBQzdDLG1CQUFLLGFBQWE7QUFBQSxnQkFDakIsTUFBTTtBQUFBLGdCQUNOLE9BQU8sRUFBRSxVQUFVLEtBQUssS0FBSztBQUFBLGdCQUM3QixRQUFRO0FBQUEsY0FDVCxDQUFDO0FBQ0QsbUJBQUssSUFBSSxVQUFVLFdBQVcsSUFBSTtBQUFBLFlBQ25DLENBQUM7QUFBQSxVQUNILENBQUM7QUFBQSxRQUNGO0FBQUEsTUFDRCxDQUFDO0FBQUEsSUFDRjtBQUdBLFNBQUssV0FBVztBQUFBLE1BQ2YsSUFBSTtBQUFBLE1BQ0osTUFBTSxFQUFFLGNBQWM7QUFBQSxNQUN0QixVQUFVLFlBQVk7QUFDckIsY0FBTSxZQUFZLEtBQUssU0FBUyxhQUFhO0FBQzdDLGNBQU0scUJBQXFCLE9BQU8sZUFBdUI7QUFDeEQsZ0JBQU0sU0FBUyxLQUFLLElBQUksTUFBTSxzQkFBc0IsVUFBVTtBQUM5RCxjQUFJLENBQUMsUUFBUTtBQUNaLGtCQUFNLEtBQUssSUFBSSxNQUFNLGFBQWEsVUFBVTtBQUFBLFVBQzdDO0FBQUEsUUFDRDtBQUdBLGNBQU0sWUFBWSxLQUFLLElBQUksTUFBTSxzQkFBc0IsU0FBUztBQUNoRSxZQUFJLENBQUMsV0FBVztBQUNmLGdCQUFNLFFBQVEsVUFBVSxNQUFNLEdBQUc7QUFDakMsZ0JBQU0sYUFBYSxNQUFNLE1BQU0sR0FBRyxFQUFFLEVBQUUsS0FBSyxHQUFHLEtBQUs7QUFDbkQsY0FBSTtBQUFZLGtCQUFNLG1CQUFtQixVQUFVO0FBR25ELGdCQUFNLGNBQWM7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNwQixnQkFBTSxLQUFLLElBQUksTUFBTSxPQUFPLFdBQVcsV0FBVztBQUdsRCxnQkFBTSxnQkFBZ0IsQ0FBQyxNQUFjLE1BQWMsT0FBZSxNQUFjLElBQWEsU0FBa0IsU0FBb0I7QUFDbEksa0JBQU0sUUFBa0IsQ0FBQztBQUN6QixrQkFBTSxLQUFLLFdBQVcsT0FBTztBQUM3QixrQkFBTSxLQUFLLEVBQUU7QUFDYixrQkFBTSxLQUFLLFNBQVM7QUFDcEIsa0JBQU0sS0FBSyxXQUFXLE9BQU87QUFDN0Isa0JBQU0sS0FBSyxFQUFFO0FBQ2Isa0JBQU0sS0FBSyxVQUFVO0FBQ3JCLGtCQUFNLEtBQUssV0FBVyxPQUFPO0FBQzdCLGtCQUFNLEtBQUssa0JBQWtCLE9BQU87QUFDcEMsa0JBQU0sS0FBSyxnQkFBZ0IsTUFBTSxLQUFLO0FBQ3RDLGtCQUFNLEtBQUssbUJBQW1CLDRCQUFXLEdBQUc7QUFDNUMsa0JBQU0sS0FBSyxZQUFZLFFBQVEsQ0FBQyxHQUFHLElBQUksQ0FBQUMsT0FBSyxJQUFJQSxLQUFJLEVBQUUsS0FBSyxJQUFJLElBQUk7QUFDbkUsa0JBQU0sS0FBSyxFQUFFO0FBQ2IsbUJBQU8sTUFBTSxLQUFLLElBQUk7QUFBQSxVQUN2QjtBQUVBLGdCQUFNLGVBQWUsY0FBYztBQUNuQyxnQkFBTSxtQkFBbUIsWUFBWTtBQUNyQyxnQkFBTSxZQUFZO0FBQUEsWUFDakIsRUFBRSxJQUFJLDZCQUFTLE1BQU0sZ0JBQU0sT0FBTyxLQUFLLE1BQU0sY0FBYyxJQUFJLElBQUksU0FBUyxHQUFHLE1BQU0sQ0FBQyxnQkFBTSxjQUFJLEVBQUU7QUFBQSxZQUNsRyxFQUFFLElBQUksNkJBQVMsTUFBTSxhQUFNLE9BQU8sS0FBSyxNQUFNLGNBQWMsSUFBSSxJQUFJLFNBQVMsR0FBRyxNQUFNLENBQUMsZ0JBQU0sY0FBSSxFQUFFO0FBQUEsWUFDbEcsRUFBRSxJQUFJLG1DQUFVLE1BQU0sYUFBTSxPQUFPLEtBQUssTUFBTSxjQUFjLElBQUksSUFBSSxTQUFTLElBQUksTUFBTSxDQUFDLGNBQUksRUFBRTtBQUFBLFVBQy9GO0FBQ0EscUJBQVcsS0FBSyxXQUFXO0FBQzFCLGtCQUFNLFdBQVcsR0FBRyxnQkFBZ0IsRUFBRTtBQUN0QyxrQkFBTSxTQUFTLEtBQUssSUFBSSxNQUFNLHNCQUFzQixRQUFRO0FBQzNELGdCQUFJLENBQUMsUUFBUTtBQUNaLG9CQUFNLEtBQUssSUFBSSxNQUFNLE9BQU8sVUFBVSxjQUFjLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxPQUFPLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUsSUFBSSxDQUFDO0FBQUEsWUFDNUc7QUFBQSxVQUNGO0FBQUEsUUFDRDtBQUdBLFlBQUksVUFBVTtBQUNkLFlBQUk7QUFDSCxnQkFBTSxJQUFJLEtBQUssSUFBSSxNQUFNLHNCQUFzQixTQUFTO0FBQ3hELGNBQUksS0FBSyxhQUFhLHdCQUFPO0FBQzVCLGtCQUFNLE1BQU0sTUFBTSxLQUFLLElBQUksTUFBTSxLQUFLLENBQUM7QUFFdkMsa0JBQU0sZ0JBQWdCLElBQUksUUFBUSxxQkFBcUIsQ0FBQyxJQUFJLE9BQU8sSUFBSSxPQUFPLEVBQUUsRUFBRSxLQUFLLElBQUk7QUFFM0Ysa0JBQU0sWUFBWSx3Q0FBd0MsS0FBSyxhQUFhO0FBRTVFLGtCQUFNLFlBQVksY0FBYyxNQUFNLGdDQUFnQztBQUN0RSxrQkFBTSxXQUFVLHVDQUFZLE9BQU07QUFFbEMsa0JBQU0sZUFBZSxjQUFjLE1BQU0sd0NBQXdDO0FBQ2pGLGdCQUFJLG9CQUFvQjtBQUN4QixnQkFBSSxnQkFBZ0IsYUFBYSxDQUFDLEdBQUc7QUFDcEMsb0JBQU0sVUFBVSxhQUFhLENBQUM7QUFDOUIsa0NBQW9CLGVBQWUsS0FBSyxPQUFPLEtBQUssMkJBQTJCLEtBQUssT0FBTztBQUFBLFlBQzVGO0FBQ0Esc0JBQVUsQ0FBQyxhQUFhLFlBQVksVUFBVSxDQUFDO0FBQUEsVUFDaEQsT0FBTztBQUNOLHNCQUFVO0FBQUEsVUFDWDtBQUFBLFFBQ0QsU0FBUyxHQUFQO0FBQ0Qsb0JBQVU7QUFBQSxRQUNYO0FBQ0EsWUFBSTtBQUFTLGNBQUksd0JBQU8sRUFBRSxxQkFBcUIsQ0FBQztBQUdoRCxhQUFLLGtCQUFrQixJQUFJLGdCQUFnQixLQUFLLEtBQUssU0FBUztBQUM5RCxjQUFNLE9BQU8sS0FBSyxJQUFJLFVBQVUsUUFBUSxLQUFLO0FBQzdDLGNBQU0sS0FBSyxhQUFhO0FBQUEsVUFDdkIsTUFBTTtBQUFBLFVBQ04sT0FBTyxFQUFFLFVBQVUsVUFBVTtBQUFBLFVBQzdCLFFBQVE7QUFBQSxRQUNULENBQUM7QUFDRCxhQUFLLElBQUksVUFBVSxXQUFXLElBQUk7QUFBQSxNQUNuQztBQUFBLElBQ0QsQ0FBQztBQUlELFNBQUssY0FBYyxJQUFJLHFCQUFxQixLQUFLLEtBQUssSUFBSSxDQUFDO0FBRzNELFNBQUssaUJBQWlCLEVBQUUsUUFBUSxhQUFhO0FBQUEsRUFDOUM7QUFBQSxFQUVBLFdBQVc7QUFBQSxFQUVYO0FBQUEsRUFFQSxNQUFNLGVBQWU7QUFDcEIsU0FBSyxXQUFXLE9BQU8sT0FBTyxDQUFDLEdBQUcsa0JBQWtCLE1BQU0sS0FBSyxTQUFTLENBQUM7QUFBQSxFQUMxRTtBQUFBLEVBRUEsTUFBTSxlQUFlO0FBQ3BCLFVBQU0sS0FBSyxTQUFTLEtBQUssUUFBUTtBQUVqQyxjQUFVLEtBQUssU0FBUyxVQUFVLE1BQU07QUFBQSxFQUN6QztBQUNEOyIsCiAgIm5hbWVzIjogWyJpbXBvcnRfb2JzaWRpYW4iLCAidCIsICJpbXBvcnRfb2JzaWRpYW4iLCAidCIsICJfYSIsICJfYiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiX2EiLCAidCIsICJ0IiwgInQiLCAiY2FsY0RhdGUiLCAiYWN0aXZlQXNzZXRzIiwgImZpbHRlcmVkQWN0aXZlQXNzZXRzIiwgInRvdGFsQ29zdCIsICJ0b3RhbFJlY3ljbGUiLCAidG90YWxEYWlseUNvc3QiLCAiY29udGFpbmVyRWwiLCAiaW1wb3J0X29ic2lkaWFuIiwgInQiXQp9Cg==
