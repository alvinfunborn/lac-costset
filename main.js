/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => LacCostSetPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian5 = require("obsidian");

// types.ts
var DEFAULT_SETTINGS = {
  defaultIcon: "\u{1F4E6}",
  entryFile: "costset/costset.md",
  enableContextMenu: true,
  defaultSort: "none"
};

// repositories/AssetRepository.ts
var import_obsidian = require("obsidian");

// models/Asset.ts
var Asset = class {
  constructor(idOrRawData, tomlData) {
    var _a, _b, _c, _d, _e, _f, _g;
    if (typeof idOrRawData === "string" && tomlData) {
      this.id = idOrRawData;
      const src = tomlData.costset ? tomlData.costset : tomlData;
      this.name = src.name || "";
      this.icon = (_d = (_c = (_a = src.style) == null ? void 0 : _a.icon) != null ? _c : (_b = tomlData.style) == null ? void 0 : _b.icon) != null ? _d : "\u{1F4E6}";
      const detail = (_f = (_e = src.detail) != null ? _e : tomlData.detail) != null ? _f : {};
      this.price = Number(detail.price) || 0;
      this.activeFrom = this.parseDate(detail.active_from) || new Date();
      this.activeTo = this.parseDate(detail.active_to) || void 0;
      this.recyclePrice = Number(detail.recycle_price) || 0;
      this.tags = Array.isArray(detail.tags) ? detail.tags : (detail.tags || "").split(",").map((l) => l.trim()).filter((tag) => tag);
      this.hidden = !!((_g = detail.hidden) != null ? _g : src.hidden);
    } else if (typeof idOrRawData === "object") {
      this.id = idOrRawData.id || "";
      this.name = idOrRawData.name || "";
      this.icon = idOrRawData.icon || "\u{1F4E6}";
      this.price = Number(idOrRawData.price) || 0;
      this.activeFrom = this.parseDate(idOrRawData.active_from || idOrRawData.activeFrom) || new Date();
      this.activeTo = this.parseDate(idOrRawData.active_to || idOrRawData.activeTo) || void 0;
      this.recyclePrice = Number(idOrRawData.recycle_price) || 0;
      this.tags = Array.isArray(idOrRawData.tags) ? idOrRawData.tags : (idOrRawData.tags || "").split(",").map((l) => l.trim()).filter((tag) => tag);
      this.hidden = !!idOrRawData.hidden;
    } else {
      throw new Error("Invalid asset data");
    }
  }
  parseDate(dateStr) {
    if (!dateStr)
      return void 0;
    const date = new Date(dateStr);
    return isNaN(date.getTime()) ? void 0 : date;
  }
  getName() {
    return this.name;
  }
  getPrice() {
    return this.price;
  }
  getDailyCost(now = new Date()) {
    const from = this.activeFrom;
    const end = this.activeTo && this.activeTo.getTime() < now.getTime() ? this.activeTo : now;
    const days = Math.max(1, Math.floor((end.getTime() - from.getTime()) / 864e5));
    return (this.price - this.recyclePrice) / days;
  }
  getUsageDays(now = new Date()) {
    const from = this.activeFrom;
    const end = this.activeTo && this.activeTo.getTime() < now.getTime() ? this.activeTo : now;
    return Math.max(1, Math.floor((end.getTime() - from.getTime()) / 864e5));
  }
  isActive(date = new Date()) {
    return this.activeFrom <= date && (!this.activeTo || date < this.activeTo);
  }
  toTomlString() {
    const formatDate = (date) => {
      if (!date)
        return "";
      return date.toISOString().split("T")[0];
    };
    return `name = "${this.name}"

[style]
icon = "${this.icon}"

[detail]
price = ${this.price}
active_from = "${formatDate(this.activeFrom)}"
active_to = "${formatDate(this.activeTo)}"
recycle_price = ${this.recyclePrice}
tags = [${this.tags.map((tag) => `"${tag}"`).join(", ")}]
`;
  }
  // 仅输出 costset 命名空间的 TOML 片段（用于安全合并）
  toCostsetTomlSections() {
    const formatDate = (date) => {
      if (!date)
        return "";
      return date.toISOString().split("T")[0];
    };
    const tagsStr = this.tags.map((tag) => `"${tag}"`).join(", ");
    return `[costset]
name = "${this.name}"
hidden = ${this.hidden ? "true" : "false"}

[costset.style]
icon = "${this.icon}"

[costset.detail]
price = ${this.price}
active_from = "${formatDate(this.activeFrom)}"
active_to = "${formatDate(this.activeTo)}"
recycle_price = ${this.recyclePrice}
tags = [${tagsStr}]
`;
  }
};

// repositories/AssetRepository.ts
var AssetRepository = class {
  constructor(app, rootFilePath) {
    this.app = app;
    this.rootFilePath = rootFilePath;
  }
  // 获取资产文件夹路径（从根文件路径推导）
  getAssetsFolder() {
    const pathParts = this.rootFilePath.split("/");
    if (pathParts.length > 1) {
      return pathParts.slice(0, -1).join("/");
    }
    return "assets";
  }
  // 加载所有资产
  async loadAll() {
    const rootFile = this.app.vault.getAbstractFileByPath(this.rootFilePath);
    if (!rootFile || !(rootFile instanceof import_obsidian.TFile)) {
      return [];
    }
    try {
      const content = await this.app.vault.read(rootFile);
      const matches = content.match(/\[\[([^\]]+)\]\]/g) || [];
      const linkTargets = matches.map((m) => m.replace(/^\[\[|\]\]$/g, "")).map((s) => {
        var _a;
        return (_a = s.split("|")[0]) == null ? void 0 : _a.trim();
      }).filter(Boolean);
      const assets = [];
      for (const target of linkTargets) {
        let file = null;
        try {
          file = this.app.metadataCache.getFirstLinkpathDest(target, this.rootFilePath);
        } catch (_) {
          file = null;
        }
        if (!file)
          continue;
        try {
          const fileContent = await this.app.vault.read(file);
          const data = this.parseToml(this.quoteWikilinksForToml(fileContent));
          const assetId = file.basename || target;
          const asset = new Asset(assetId, data);
          asset.hidden = false;
          assets.push(asset);
        } catch (e) {
          console.error(`Failed to load asset ${target}:`, e);
        }
      }
      return assets;
    } catch (e) {
      console.error("Failed to load assets:", e);
      return [];
    }
  }
  // 保存资产（仅修改与 costset 相关的键：name、style.icon、detail.*、hidden）
  async saveAsset(asset) {
    let targetFile = null;
    try {
      targetFile = this.app.metadataCache.getFirstLinkpathDest(asset.id, this.rootFilePath);
    } catch (_) {
      targetFile = null;
    }
    if (!targetFile) {
      let fileName = `${asset.id}.md`;
      let filePath = `${this.getAssetsFolder()}/${fileName}`;
      const folder = this.app.vault.getAbstractFileByPath(this.getAssetsFolder());
      if (!folder) {
        await this.app.vault.createFolder(this.getAssetsFolder());
      }
      const initialContent = this.dequoteWikilinks(asset.toTomlString());
      try {
        await this.app.vault.adapter.write(filePath, initialContent);
      } catch (e) {
        fileName = `${encodeURIComponent(asset.id)}.md`;
        filePath = `${this.getAssetsFolder()}/${fileName}`;
        await this.app.vault.adapter.write(filePath, initialContent);
      }
    } else {
      const existing = await this.app.vault.read(targetFile);
      const rewritten = this.rewriteTomlWithCommentsTop(existing, asset);
      await this.app.vault.modify(targetFile, this.dequoteWikilinks(rewritten));
    }
    await this.updateRootFile(asset.id, true);
  }
  // 删除资产
  async deleteAsset(id) {
    await this.updateRootFile(id, false);
  }
  // 注意：hidden 字段不持久化（仅内存使用），此处不提供 setHidden
  // 更新根文件
  async updateRootFile(assetId, isAdd) {
    const rootPath = this.rootFilePath;
    let rootContent = "";
    try {
      const rootFile = this.app.vault.getAbstractFileByPath(rootPath);
      if (rootFile && rootFile instanceof import_obsidian.TFile) {
        rootContent = await this.app.vault.read(rootFile);
      }
    } catch (e) {
    }
    if (isAdd) {
      const hasAnyLink = new RegExp(`\\[\\[${assetId}(\\|[^\\]]+)?\\]\\]`).test(rootContent);
      if (!hasAnyLink) {
        rootContent += `
[[${assetId}]]`;
      }
    } else {
      rootContent = rootContent.replace(new RegExp(`\\[\\[${assetId}(\\|[^\\]]+)?\\]\\]`, "g"), "");
      rootContent = rootContent.replace(/\n{3,}/g, "\n\n").trimEnd();
    }
    await this.app.vault.adapter.write(rootPath, rootContent);
  }
  // 解析TOML内容（支持嵌套节名，如 [costset.detail]）
  parseToml(content) {
    const lines = content.split("\n");
    const result = {};
    let currentPath = [];
    const ensurePath = (root, path) => {
      let node = root;
      for (const part of path) {
        if (!node[part] || typeof node[part] !== "object")
          node[part] = {};
        node = node[part];
      }
      return node;
    };
    for (const raw of lines) {
      const line = raw.trim();
      if (!line || line.startsWith("#"))
        continue;
      if (line.startsWith("[") && line.endsWith("]")) {
        const section = line.slice(1, -1).trim();
        currentPath = section.split(".").map((s) => s.trim()).filter(Boolean);
        ensurePath(result, currentPath);
        continue;
      }
      const eq = line.indexOf("=");
      if (eq === -1)
        continue;
      const cleanKey = line.slice(0, eq).trim();
      let cleanValue = line.slice(eq + 1).trim();
      let parsedValue = cleanValue;
      if (cleanValue.startsWith('"') && cleanValue.endsWith('"')) {
        parsedValue = cleanValue.slice(1, -1);
      } else if (cleanValue === "true" || cleanValue === "false") {
        parsedValue = cleanValue === "true";
      } else if (cleanValue.startsWith("[") && cleanValue.endsWith("]")) {
        const arrayContent = cleanValue.slice(1, -1).trim();
        parsedValue = arrayContent ? arrayContent.split(",").map((item) => item.trim().replace(/^"|"$/g, "")) : [];
      } else if (!isNaN(Number(cleanValue))) {
        parsedValue = Number(cleanValue);
      }
      if (currentPath.length > 0) {
        const node = ensurePath(result, currentPath);
        node[cleanKey] = parsedValue;
      } else {
        result[cleanKey] = parsedValue;
      }
    }
    return result;
  }
  // 纯 TOML 重写模式：解析→修改→stringify；将原有注释置顶保留
  rewriteTomlWithCommentsTop(existing, asset) {
    const commentLines = [];
    const otherLines = [];
    for (const raw of existing.split("\n")) {
      const t = raw.trim();
      if (t.startsWith("#"))
        commentLines.push(raw);
      else
        otherLines.push(raw);
    }
    const parsed = this.parseToml(this.quoteWikilinksForToml(otherLines.join("\n"))) || {};
    parsed["name"] = asset.name;
    if (!parsed["style"] || typeof parsed["style"] !== "object")
      parsed["style"] = {};
    parsed["style"]["icon"] = asset.icon;
    if (!parsed["detail"] || typeof parsed["detail"] !== "object")
      parsed["detail"] = {};
    parsed["detail"]["price"] = Number(asset.price) || 0;
    parsed["detail"]["active_from"] = asset.activeFrom ? asset.activeFrom.toISOString().split("T")[0] : "";
    parsed["detail"]["active_to"] = asset.activeTo ? asset.activeTo.toISOString().split("T")[0] : "";
    parsed["detail"]["recycle_price"] = Number(asset.recyclePrice) || 0;
    parsed["detail"]["tags"] = Array.isArray(asset.tags) ? asset.tags : [];
    const tomlBody = this.stringifyToml(parsed);
    const commentBlock = commentLines.length > 0 ? commentLines.join("\n") + "\n\n" : "";
    return commentBlock + tomlBody;
  }
  // 将 JS 对象稳定地序列化为 TOML 文本（支持多层节名）
  stringifyToml(obj) {
    const isPlainObject = (v) => v && typeof v === "object" && !Array.isArray(v);
    const keys = Object.keys(obj || {});
    const scalarKeys = keys.filter((k) => !isPlainObject(obj[k]));
    const objectKeys = keys.filter((k) => isPlainObject(obj[k]));
    const lines = [];
    if (scalarKeys.includes("name")) {
      lines.push(this.renderTomlKeyValue("name", obj["name"]));
    }
    scalarKeys.filter((k) => k !== "name").sort((a, b) => a.localeCompare(b)).forEach((k) => lines.push(this.renderTomlKeyValue(k, obj[k])));
    const sectionOrder = ["style", "detail"];
    const orderedObjectKeys = [
      ...sectionOrder.filter((k) => objectKeys.includes(k)),
      ...objectKeys.filter((k) => !sectionOrder.includes(k)).sort((a, b) => a.localeCompare(b))
    ];
    for (const k of orderedObjectKeys) {
      lines.push("");
      this.renderTomlSection(lines, [k], obj[k]);
    }
    return lines.join("\n").replace(/\n{3,}/g, "\n\n").trim() + "\n";
  }
  renderTomlSection(out, path, value) {
    out.push(`[${path.join(".")}]`);
    const isPlainObject = (v) => v && typeof v === "object" && !Array.isArray(v);
    const keys = Object.keys(value || {});
    const scalarKeys = keys.filter((k) => !isPlainObject(value[k]));
    const objectKeys = keys.filter((k) => isPlainObject(value[k]));
    scalarKeys.sort((a, b) => a.localeCompare(b)).forEach((k) => {
      out.push(this.renderTomlKeyValue(k, value[k]));
    });
    const orderedObjectKeys = objectKeys.sort((a, b) => a.localeCompare(b));
    for (const k of orderedObjectKeys) {
      out.push("");
      this.renderTomlSection(out, [...path, k], value[k]);
    }
  }
  renderTomlKeyValue(key, val) {
    return `${key} = ${this.tomlValue(val)}`;
  }
  tomlValue(val) {
    if (val === null || val === void 0)
      return '""';
    if (Array.isArray(val)) {
      return `[${val.map((v) => this.tomlValue(v)).join(", ")}]`;
    }
    switch (typeof val) {
      case "number":
        return Number.isFinite(val) ? String(val) : "0";
      case "boolean":
        return val ? "true" : "false";
      case "string":
      default:
        return `"${String(val).replace(/\\/g, "\\\\").replace(/\"/g, '\\"')}"`;
    }
  }
  // 将裸的 [[...]] 或 [[...|alias]] 包裹为可被 TOML 解析的字符串
  quoteWikilinksForToml(content) {
    return content.replace(/\[\[[^\]]+\]\]/g, (match, offset, full) => {
      const before = offset > 0 ? full[offset - 1] : "";
      const after = offset + match.length < full.length ? full[offset + match.length] : "";
      if (before === '"' && after === '"' || before === "'" && after === "'") {
        return match;
      }
      return `"${match}"`;
    });
  }
  // 将 "[[...]]" 或 '[[...]]' 形式还原为裸的双链
  dequoteWikilinks(content) {
    return content.replace(/(["'])\[\[[^\]]+\]\]\1/g, (match) => match.slice(1, -1));
  }
};

// components/modals/AssetFormModal.ts
var import_obsidian2 = require("obsidian");

// components/modals/ConfirmModal.ts
var ConfirmModal = class {
  constructor(message, confirmText = "\u786E\u5B9A", cancelText = "\u53D6\u6D88", danger = false) {
    this.message = message;
    this.confirmText = confirmText;
    this.cancelText = cancelText;
    this.danger = danger;
  }
  open() {
    return new Promise((resolve) => {
      this.injectStylesOnce();
      this.maskEl = document.createElement("div");
      this.maskEl.className = "date-picker-mask";
      this.modalEl = document.createElement("div");
      this.modalEl.className = "date-picker-modal";
      const content = document.createElement("div");
      content.className = "date-picker-content";
      const title = document.createElement("div");
      title.className = "date-picker-title";
      title.textContent = "\u786E\u8BA4\u64CD\u4F5C";
      const msgEl = document.createElement("div");
      msgEl.className = "confirm-message";
      msgEl.textContent = this.message;
      const actions = document.createElement("div");
      actions.className = "date-picker-actions";
      const cancelBtn = document.createElement("button");
      cancelBtn.className = "date-picker-btn date-picker-btn-cancel";
      cancelBtn.textContent = this.cancelText;
      const confirmBtn = document.createElement("button");
      confirmBtn.className = "date-picker-btn date-picker-btn-confirm";
      confirmBtn.textContent = this.confirmText;
      if (this.danger)
        confirmBtn.classList.add("danger");
      actions.appendChild(cancelBtn);
      actions.appendChild(confirmBtn);
      content.appendChild(title);
      content.appendChild(msgEl);
      content.appendChild(actions);
      this.modalEl.appendChild(content);
      this.maskEl.appendChild(this.modalEl);
      document.body.appendChild(this.maskEl);
      const close = (result) => {
        if (this.maskEl && this.maskEl.parentElement) {
          this.maskEl.parentElement.removeChild(this.maskEl);
        }
        this.maskEl = void 0;
        this.modalEl = void 0;
        resolve(result);
      };
      this.maskEl.addEventListener("click", (e) => {
        if (e.target === this.maskEl)
          close(false);
      });
      cancelBtn.addEventListener("click", () => close(false));
      confirmBtn.addEventListener("click", () => close(true));
    });
  }
  injectStylesOnce() {
    const STYLE_ID = "lac-confirm-modal-styles";
    if (document.getElementById(STYLE_ID))
      return;
    const style = document.createElement("style");
    style.id = STYLE_ID;
    style.textContent = `
            .date-picker-modal .confirm-message { color: #F5F6FA; line-height: 1.6; padding: 8px 0 16px; }
            .date-picker-modal .date-picker-btn.danger { background: #7a1e1e; color: #fff; }
            .date-picker-modal .date-picker-btn.danger:hover { background: #992525; }
        `;
    document.head.appendChild(style);
  }
};

// components/modals/AssetFormModal.ts
var AssetFormModal = class {
  constructor(app, assetRepository, asset, onSaved) {
    this.app = app;
    this.assetRepository = assetRepository;
    this.asset = asset;
    this.onSaved = onSaved;
  }
  open() {
    var _a, _b;
    this.maskEl = document.createElement("div");
    this.maskEl.className = "date-picker-mask";
    this.modalEl = document.createElement("div");
    this.modalEl.className = "date-picker-modal asset-form-modal";
    this.injectAssetFormStyles();
    const content = document.createElement("div");
    content.className = "date-picker-content";
    content.style.gap = "0px";
    const form = document.createElement("form");
    form.className = "asset-form asset-form--horizontal";
    form.style.display = "grid";
    form.style.gridTemplateColumns = "1fr";
    form.style.rowGap = "0px";
    form.style.gap = "0px";
    const ensureErrorEl = (group) => {
      let err = group.querySelector(".field-error");
      if (!err) {
        const field = group.querySelector(".form-field");
        err = document.createElement("div");
        err.className = "field-error";
        if (field)
          field.appendChild(err);
        else
          group.appendChild(err);
      }
      return err;
    };
    const setError = (group, message) => {
      group.classList.add("has-error");
      const input = group.querySelector("input, textarea, select");
      if (input)
        input.setAttribute("aria-invalid", "true");
      ensureErrorEl(group).textContent = message;
    };
    const clearError = (group) => {
      group.classList.remove("has-error");
      const input = group.querySelector("input, textarea, select");
      if (input)
        input.setAttribute("aria-invalid", "false");
      const err = group.querySelector(".field-error");
      if (err)
        err.remove();
    };
    const nameGroup = document.createElement("div");
    nameGroup.className = "form-group";
    {
      const lbl = this.createLabel("\u540D\u79F0");
      lbl.classList.add("label-required");
      nameGroup.appendChild(lbl);
    }
    const nameInput = document.createElement("input");
    nameInput.type = "text";
    nameInput.placeholder = "\u8D44\u4EA7\u540D\u79F0";
    if (this.asset)
      nameInput.value = this.asset.name;
    {
      const field = document.createElement("div");
      field.className = "form-field";
      field.appendChild(nameInput);
      nameGroup.appendChild(field);
    }
    this.applyRowLayout(nameGroup);
    form.appendChild(nameGroup);
    const validateName = () => {
      const v = (nameInput.value || "").trim();
      if (!v) {
        setError(nameGroup, "\u8BF7\u586B\u5199\u540D\u79F0");
        return false;
      }
      clearError(nameGroup);
      return true;
    };
    nameInput.addEventListener("input", validateName);
    nameInput.addEventListener("blur", validateName);
    const iconGroup = document.createElement("div");
    iconGroup.className = "form-group";
    iconGroup.appendChild(this.createLabel("\u56FE\u6807"));
    const iconInput = document.createElement("input");
    iconInput.type = "text";
    iconInput.placeholder = "\u{1F60A}\u8BF7\u8F93\u5165\u4E00\u4E2A Emoji \u4F5C\u4E3A\u56FE\u6807";
    if (this.asset)
      iconInput.value = this.asset.icon;
    else {
      try {
        const plugin = (_b = (_a = this.app.plugins) == null ? void 0 : _a.plugins) == null ? void 0 : _b["lac-costset"];
        const fallback = "\u{1F4E6}";
        iconInput.value = plugin && plugin.settings && plugin.settings.defaultIcon ? plugin.settings.defaultIcon : fallback;
      } catch (_) {
        iconInput.value = "\u{1F4E6}";
      }
    }
    const enforceSingleEmoji = () => {
      const first = this.getFirstEmojiGrapheme(iconInput.value || "");
      iconInput.value = first || "";
    };
    iconInput.addEventListener("input", enforceSingleEmoji);
    iconInput.addEventListener("paste", (e) => {
      setTimeout(enforceSingleEmoji, 0);
    });
    {
      const field = document.createElement("div");
      field.className = "form-field";
      field.appendChild(iconInput);
      iconGroup.appendChild(field);
    }
    this.applyRowLayout(iconGroup);
    form.appendChild(iconGroup);
    const priceGroup = document.createElement("div");
    priceGroup.className = "form-group";
    {
      const lbl = this.createLabel("\u4EF7\u683C");
      lbl.classList.add("label-required");
      priceGroup.appendChild(lbl);
    }
    const priceInput = document.createElement("input");
    priceInput.type = "number";
    priceInput.placeholder = "\u8D2D\u5165\u4EF7\u683C\uFF08\u5143\uFF09";
    priceInput.step = "0.01";
    if (this.asset)
      priceInput.value = this.asset.price.toString();
    const sanitizeNumeric = (el) => {
      el.value = this.sanitizeNumericString(el.value || "");
    };
    const limitTwoDecimals = (el) => {
      el.value = this.clampTwoDecimalsString(el.value || "");
    };
    priceInput.addEventListener("input", () => sanitizeNumeric(priceInput));
    priceInput.addEventListener("blur", () => {
      sanitizeNumeric(priceInput);
      limitTwoDecimals(priceInput);
    });
    {
      const field = document.createElement("div");
      field.className = "form-field";
      field.appendChild(priceInput);
      priceGroup.appendChild(field);
    }
    this.applyRowLayout(priceGroup);
    form.appendChild(priceGroup);
    const validatePrice = () => {
      const str = (priceInput.value || "").trim();
      const num = this.parseMoney(str);
      if (num === null) {
        setError(priceGroup, "\u8BF7\u586B\u5199\u6709\u6548\u7684\u4EF7\u683C");
        return false;
      }
      clearError(priceGroup);
      return true;
    };
    priceInput.addEventListener("input", validatePrice);
    priceInput.addEventListener("blur", validatePrice);
    const fromGroup = document.createElement("div");
    fromGroup.className = "form-group";
    {
      const lbl = this.createLabel("\u8D2D\u5165\u4E8E");
      lbl.classList.add("label-required");
      fromGroup.appendChild(lbl);
    }
    const fromInput = document.createElement("input");
    fromInput.type = "text";
    fromInput.readOnly = true;
    fromInput.placeholder = "\u8D2D\u5165\u65E5\u671F";
    fromInput.value = this.asset ? this.formatDateLocal(this.asset.activeFrom) : "";
    fromInput.addEventListener("click", () => {
      var _a2;
      this.openDatePicker(fromInput.value ? new Date(fromInput.value) : ((_a2 = this.asset) == null ? void 0 : _a2.activeFrom) || new Date(), (picked) => {
        fromInput.value = this.formatDateLocal(picked);
        clearError(fromGroup);
      });
    });
    {
      const field = document.createElement("div");
      field.className = "form-field";
      field.appendChild(fromInput);
      fromGroup.appendChild(field);
    }
    this.applyRowLayout(fromGroup);
    form.appendChild(fromGroup);
    const validateFrom = () => {
      if (!fromInput.value) {
        setError(fromGroup, "\u8BF7\u9009\u62E9\u8D2D\u5165\u65E5\u671F");
        return false;
      }
      clearError(fromGroup);
      return true;
    };
    fromInput.addEventListener("blur", validateFrom);
    const toGroup = document.createElement("div");
    toGroup.className = "form-group";
    toGroup.appendChild(this.createLabel("\u5230\u671F"));
    const toInput = document.createElement("input");
    toInput.type = "text";
    toInput.readOnly = true;
    toInput.placeholder = "(\u8BA1\u5212)\u62A5\u5E9F/\u56DE\u6536/\u5230\u671F\u65F6\u95F4";
    toInput.value = this.asset && this.asset.activeTo ? this.formatDateLocal(this.asset.activeTo) : "";
    let clearBtn;
    const updateToClear = () => {
      if (clearBtn)
        clearBtn.style.display = toInput.value ? "inline-flex" : "none";
    };
    toInput.addEventListener("click", () => {
      var _a2;
      this.openDatePicker(toInput.value ? new Date(toInput.value) : ((_a2 = this.asset) == null ? void 0 : _a2.activeTo) || new Date(), (picked) => {
        toInput.value = this.formatDateLocal(picked);
        updateToClear();
        if (fromInput.value) {
          const fd = new Date(fromInput.value);
          const td = new Date(toInput.value);
          if (td.getTime() < fd.getTime())
            setError(toGroup, "\u5230\u671F\u65E5\u671F\u9700\u4E0D\u65E9\u4E8E\u8D2D\u5165\u65E5\u671F");
          else
            clearError(toGroup);
        }
      });
    });
    {
      const field = document.createElement("div");
      field.className = "form-field";
      const wrap = document.createElement("div");
      wrap.className = "input-with-clear";
      wrap.appendChild(toInput);
      clearBtn = document.createElement("button");
      clearBtn.type = "button";
      clearBtn.className = "input-clear";
      clearBtn.textContent = "\xD7";
      clearBtn.addEventListener("click", (e) => {
        e.preventDefault();
        e.stopPropagation();
        toInput.value = "";
        updateToClear();
      });
      wrap.appendChild(clearBtn);
      field.appendChild(wrap);
      toGroup.appendChild(field);
    }
    this.applyRowLayout(toGroup);
    form.appendChild(toGroup);
    updateToClear();
    const recycleGroup = document.createElement("div");
    recycleGroup.className = "form-group";
    recycleGroup.appendChild(this.createLabel("\u56DE\u6536\u4EF7"));
    const recycleInput = document.createElement("input");
    recycleInput.type = "number";
    recycleInput.placeholder = "\u56DE\u6536\u4EF7\u683C\uFF08\u5143\uFF09";
    recycleInput.step = "0.01";
    if (this.asset)
      recycleInput.value = this.asset.recyclePrice.toString();
    recycleInput.addEventListener("input", () => sanitizeNumeric(recycleInput));
    recycleInput.addEventListener("blur", () => {
      sanitizeNumeric(recycleInput);
      limitTwoDecimals(recycleInput);
    });
    {
      const field = document.createElement("div");
      field.className = "form-field";
      field.appendChild(recycleInput);
      recycleGroup.appendChild(field);
    }
    this.applyRowLayout(recycleGroup);
    form.appendChild(recycleGroup);
    const tagsGroup = document.createElement("div");
    tagsGroup.className = "form-group";
    tagsGroup.appendChild(this.createLabel("\u6807\u7B7E"));
    let currentTags = this.asset ? [...this.asset.tags || []] : [];
    const tagsWrapper = document.createElement("div");
    tagsWrapper.className = "tags-input";
    const tagsInput = document.createElement("input");
    tagsInput.type = "text";
    tagsInput.placeholder = "\u8F93\u5165\u6807\u7B7E\uFF0C\u56DE\u8F66\u786E\u8BA4";
    tagsWrapper.appendChild(tagsInput);
    {
      const field = document.createElement("div");
      field.className = "form-field";
      field.appendChild(tagsWrapper);
      tagsGroup.appendChild(field);
    }
    this.applyRowLayout(tagsGroup);
    form.appendChild(tagsGroup);
    const normalize = (t) => t.trim();
    const addTag = (raw) => {
      const pieces = raw.split(/[，,\s]+/).map(normalize).filter(Boolean);
      pieces.forEach((p) => {
        if (!currentTags.includes(p))
          currentTags.push(p);
      });
      syncChips();
      tagsInput.value = "";
    };
    const removeTag = (value) => {
      currentTags = currentTags.filter((t) => t !== value);
      syncChips();
    };
    const syncChips = () => {
      Array.from(tagsWrapper.querySelectorAll(".tag-chip")).forEach((el) => el.remove());
      currentTags.forEach((tag) => {
        const chip = document.createElement("span");
        chip.className = "tag-chip";
        chip.textContent = tag;
        const rm = document.createElement("button");
        rm.type = "button";
        rm.className = "remove";
        rm.textContent = "\xD7";
        rm.addEventListener("click", () => removeTag(tag));
        chip.appendChild(rm);
        tagsWrapper.insertBefore(chip, tagsInput);
      });
    };
    syncChips();
    tagsInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter" || e.key === "," || e.key === "\uFF0C") {
        e.preventDefault();
        if (tagsInput.value.trim())
          addTag(tagsInput.value);
      }
      if (e.key === "Backspace" && !tagsInput.value && currentTags.length > 0) {
        e.preventDefault();
        removeTag(currentTags[currentTags.length - 1]);
      }
    });
    tagsInput.addEventListener("blur", () => {
      if (tagsInput.value.trim())
        addTag(tagsInput.value);
    });
    const actions = document.createElement("div");
    actions.className = "form-actions";
    const cancelBtn = document.createElement("button");
    cancelBtn.type = "button";
    cancelBtn.textContent = "\u53D6\u6D88";
    cancelBtn.className = "form-btn form-btn-secondary";
    const deleteBtn = document.createElement("button");
    deleteBtn.type = "button";
    deleteBtn.textContent = "\u5220\u9664";
    deleteBtn.className = "form-btn form-btn-danger";
    const saveBtn = document.createElement("button");
    saveBtn.type = "submit";
    saveBtn.textContent = "\u4FDD\u5B58";
    saveBtn.className = "form-btn form-btn-primary";
    actions.appendChild(cancelBtn);
    if (this.asset)
      actions.appendChild(deleteBtn);
    actions.appendChild(saveBtn);
    form.appendChild(actions);
    content.appendChild(form);
    this.modalEl.appendChild(content);
    this.maskEl.appendChild(this.modalEl);
    document.body.appendChild(this.maskEl);
    const close = () => this.close();
    this.maskEl.addEventListener("click", (e) => {
      if (e.target === this.maskEl)
        close();
    });
    cancelBtn.addEventListener("click", close);
    if (this.asset) {
      deleteBtn.addEventListener("click", async () => {
        if (!this.asset)
          return;
        const ok = await new ConfirmModal(`\u786E\u5B9A\u8981\u5220\u9664\u8D44\u4EA7 "${this.asset.name}" \u5417\uFF1F`, "\u5220\u9664", "\u53D6\u6D88", true).open();
        if (!ok)
          return;
        await this.assetRepository.deleteAsset(this.asset.id);
        if (this.onSaved)
          this.onSaved();
        close();
      });
    }
    form.addEventListener("submit", async (e) => {
      var _a2, _b2, _c;
      e.preventDefault();
      clearError(nameGroup);
      clearError(priceGroup);
      clearError(fromGroup);
      clearError(toGroup);
      clearError(recycleGroup);
      const nameVal = (nameInput.value || "").trim();
      const priceStr = (priceInput.value || "").trim();
      const priceNum = this.parseMoney(priceStr);
      let valid = true;
      if (!nameVal) {
        setError(nameGroup, "\u8BF7\u586B\u5199\u540D\u79F0");
        valid = false;
      }
      if (priceNum === null) {
        setError(priceGroup, "\u8BF7\u586B\u5199\u6709\u6548\u7684\u4EF7\u683C");
        valid = false;
      }
      if (!fromInput.value) {
        setError(fromGroup, "\u8BF7\u9009\u62E9\u8D2D\u5165\u65E5\u671F");
        valid = false;
      }
      if (!valid) {
        const firstErr = [nameGroup, priceGroup, fromGroup].find((g) => g.classList.contains("has-error"));
        if (firstErr) {
          (_a2 = firstErr.querySelector("input")) == null ? void 0 : _a2.focus();
          firstErr.scrollIntoView({ behavior: "smooth", block: "center" });
        }
        return;
      }
      const fromDate = new Date(fromInput.value);
      const priceValue = priceNum;
      let toDate = void 0;
      if (toInput.value) {
        const d = new Date(toInput.value);
        if (d.getTime() < fromDate.getTime()) {
          setError(toGroup, "\u5230\u671F\u65E5\u671F\u9700\u4E0D\u65E9\u4E8E\u8D2D\u5165\u65E5\u671F");
          (_b2 = toGroup.querySelector("input")) == null ? void 0 : _b2.focus();
          return;
        }
        toDate = d;
      }
      const recycleStr = (recycleInput.value || "").trim();
      const recycleNum = recycleStr ? this.parseMoney(recycleStr) : 0;
      if (recycleStr && recycleNum === null) {
        setError(recycleGroup, "\u56DE\u6536\u4EF7\u683C\u683C\u5F0F\u4E0D\u6B63\u786E");
        return;
      }
      if ((recycleNum || 0) > priceValue) {
        setError(recycleGroup, "\u56DE\u6536\u4EF7\u4E0D\u80FD\u5927\u4E8E\u4EF7\u683C");
        return;
      }
      const assetData = {
        id: ((_c = this.asset) == null ? void 0 : _c.id) || nameVal,
        name: nameVal,
        icon: iconInput.value || "\u{1F4E6}",
        price: priceValue,
        activeFrom: fromDate,
        activeTo: toDate,
        recyclePrice: recycleNum || 0,
        tags: currentTags
      };
      try {
        const asset = new Asset(assetData);
        await this.assetRepository.saveAsset(asset);
        if (this.onSaved)
          this.onSaved();
        close();
      } catch (error) {
        new import_obsidian2.Notice("\u4FDD\u5B58\u5931\u8D25: " + error.message);
      }
    });
  }
  injectAssetFormStyles() {
    const STYLE_ID = "asset-form-inline-styles";
    if (document.getElementById(STYLE_ID))
      return;
    const style = document.createElement("style");
    style.id = STYLE_ID;
    style.textContent = `
			/* \u5230\u671F\u8F93\u5165\u6E05\u9664\u6309\u94AE */
			.date-picker-modal.asset-form-modal .input-with-clear { position: relative; }
			.date-picker-modal.asset-form-modal .input-with-clear .input-clear { position: absolute; right: 6px; top: 50%; transform: translateY(-50%); width: 18px; height: 18px; border-radius: 50%; display: none; align-items: center; justify-content: center; font-size: 14px; line-height: 18px; }
			/* \u5F39\u7A97\u5BB9\u5668\u66F4\u7D27\u51D1 */
			.date-picker-modal.asset-form-modal { max-height: 80vh; overflow: auto; }
			.date-picker-modal.asset-form-modal .date-picker-content { padding: 16px 20px; display: flex; flex-direction: column; gap: 0 !important; }
			.date-picker-modal.asset-form-modal .date-picker-title { font-size: 14px; margin-bottom: 6px; }

			/* \u6A2A\u5411\u8868\u5355\u5E03\u5C40\uFF0C\u538B\u7F29\u5782\u76F4\u7A7A\u767D */
			.date-picker-modal.asset-form-modal .asset-form.asset-form--horizontal { font-size: 15.5px; display: grid !important; grid-template-columns: 1fr; row-gap: 8px !important; column-gap: 0 !important; gap: 8px !important; }
			.date-picker-modal.asset-form-modal .asset-form.asset-form--horizontal .form-group { display: grid !important; grid-template-columns: 64px 1fr; align-items: center; column-gap: 8px; row-gap: 0; margin: 0 !important; padding: 0 !important; }
			.date-picker-modal.asset-form-modal .asset-form.asset-form--horizontal label { min-width: 64px; margin: 0; text-align: right; justify-self: end; }
			.date-picker-modal.asset-form-modal .asset-form.asset-form--horizontal .form-field { width: 100%; margin: 0 !important; padding: 0 !important; }
			/* \u538B\u7F29\u8F93\u5165\u63A7\u4EF6\u9AD8\u5EA6\u4E0E\u5185\u8FB9\u8DDD */
			.date-picker-modal.asset-form-modal .asset-form.asset-form--horizontal input[type="text"],
			.date-picker-modal.asset-form-modal .asset-form.asset-form--horizontal input[type="number"] { height: 32px; padding: 4px 10px; font-size: 15.5px; line-height: 1.45; }
			/* \u6807\u7B7E\u8F93\u5165\u4E0E chip \u66F4\u7D27\u51D1 */
			.date-picker-modal.asset-form-modal .asset-form.asset-form--horizontal .tags-input { display: flex; flex-wrap: wrap; gap: 4px; }
			.date-picker-modal.asset-form-modal .asset-form.asset-form--horizontal .tag-chip { font-size: 12px; height: 18px; line-height: 18px; padding: 0 6px; border-radius: 4px; }
			.date-picker-modal.asset-form-modal .asset-form.asset-form--horizontal .tag-chip .remove { width: 16px; height: 16px; line-height: 16px; font-size: 12px; margin-left: 4px; }
			.date-picker-modal.asset-form-modal .asset-form.asset-form--horizontal .tags-input input { flex: 1; min-width: 120px; height: 28px; padding: 4px 10px; font-size: 14.5px; }

			/* \u5FC5\u586B\u4E0E\u9519\u8BEF\u6837\u5F0F */
			.date-picker-modal.asset-form-modal .label-required::after { content: ' *'; color: #ff4d4f; margin-left: 2px; }
			.date-picker-modal.asset-form-modal .form-group.has-error input[type="text"],
			.date-picker-modal.asset-form-modal .form-group.has-error input[type="number"] { border-color: #ff4d4f !important; box-shadow: 0 0 0 1px #ff4d4f inset; }
			.date-picker-modal.asset-form-modal .field-error { margin-top: 4px; color: #ff8587; font-size: 12px; line-height: 1.3; }
			.date-picker-modal.asset-form-modal .field-error:empty { display: none; margin-top: 0; }

			/* \u64CD\u4F5C\u6309\u94AE\u533A\u66F4\u7D27\u51D1 */
			.date-picker-modal.asset-form-modal .form-actions { margin-top: 12px; gap: 16px; display: flex; justify-content: center; }
			.date-picker-modal.asset-form-modal .form-btn { height: 34px; padding: 0 14px; font-size: 14px; }
		`;
    document.head.appendChild(style);
  }
  applyRowLayout(group) {
    group.style.display = "grid";
    group.style.gridTemplateColumns = "72px 1fr";
    group.style.alignItems = "center";
    group.style.columnGap = "8px";
    group.style.rowGap = "0px";
    group.style.margin = "0";
    const label = group.querySelector("label");
    if (label) {
      label.style.minWidth = "72px";
      label.style.display = "inline-block";
      label.style.margin = "0";
    }
    const field = group.querySelector(".form-field");
    if (field) {
      field.style.width = "100%";
    }
  }
  close() {
    if (this.maskEl && this.maskEl.parentElement) {
      this.maskEl.parentElement.removeChild(this.maskEl);
    }
    this.maskEl = void 0;
    this.modalEl = void 0;
  }
  formatDateLocal(date) {
    const d = new Date(date.getTime() - date.getTimezoneOffset() * 6e4);
    return d.toISOString().split("T")[0];
  }
  // —— 金额字符串处理（成熟逻辑）——
  sanitizeNumericString(value) {
    let v = (value || "").replace(/[^\d.]/g, "");
    v = v.replace(/^\./, "");
    v = v.replace(/\.(?=.*\.)/g, "");
    return v;
  }
  clampTwoDecimalsString(value) {
    const m = (value || "").match(/^(\d+)(?:\.(\d*))?$/);
    if (!m)
      return "";
    const intPart = m[1];
    const decPart = (m[2] || "").slice(0, 2);
    return decPart ? `${intPart}.${decPart}` : intPart;
  }
  parseMoney(value) {
    const sanitized = this.sanitizeNumericString(value);
    const clamped = this.clampTwoDecimalsString(sanitized);
    if (clamped === "")
      return null;
    const num = Number(clamped);
    return Number.isFinite(num) && num >= 0 ? num : null;
  }
  // 与 costsetapp 对齐：用 surrogate pair 匹配获取第一个 emoji
  getFirstEmojiGrapheme(input) {
    const emojiRegex = /[\uD800-\uDBFF][\uDC00-\uDFFF]/;
    const m = (input || "").match(emojiRegex);
    return m ? m[0] : "";
  }
  // 弹出日期选择器（复用日期/标签弹窗风格）
  openDatePicker(currentDate, onConfirm) {
    const mask = document.createElement("div");
    mask.className = "date-picker-mask";
    const picker = document.createElement("div");
    picker.className = "date-picker-modal";
    const content = document.createElement("div");
    content.className = "date-picker-content";
    const title = document.createElement("div");
    title.className = "date-picker-title";
    title.textContent = "\u9009\u62E9\u65E5\u671F";
    const wheelContainer = document.createElement("div");
    wheelContainer.className = "date-wheel-container";
    const currentYear = currentDate.getFullYear();
    const currentMonth = currentDate.getMonth() + 1;
    const currentDay = currentDate.getDate();
    const yearColumn = this.createWheelColumn("\u5E74", this.generateYears(currentYear), currentYear, (year) => {
      this.updateDaysColumn(dayColumn, year, monthColumn.selectedValue);
    }, false);
    const monthColumn = this.createWheelColumn("\u6708", this.generateMonths(), currentMonth, (month) => {
      this.updateDaysColumn(dayColumn, yearColumn.selectedValue, month);
    }, true);
    const dayColumn = this.createWheelColumn("\u65E5", this.generateDays(currentYear, currentMonth), currentDay, void 0, true);
    wheelContainer.appendChild(yearColumn.element);
    wheelContainer.appendChild(monthColumn.element);
    wheelContainer.appendChild(dayColumn.element);
    const actions = document.createElement("div");
    actions.className = "date-picker-actions";
    const cancelBtn = document.createElement("button");
    cancelBtn.className = "date-picker-btn date-picker-btn-cancel";
    cancelBtn.textContent = "\u53D6\u6D88";
    const confirmBtn = document.createElement("button");
    confirmBtn.className = "date-picker-btn date-picker-btn-confirm";
    confirmBtn.textContent = "\u786E\u5B9A";
    actions.appendChild(cancelBtn);
    actions.appendChild(confirmBtn);
    content.appendChild(title);
    content.appendChild(wheelContainer);
    content.appendChild(actions);
    picker.appendChild(content);
    mask.appendChild(picker);
    document.body.appendChild(mask);
    const closePicker = () => {
      document.body.removeChild(mask);
    };
    mask.addEventListener("click", (e) => {
      if (e.target === mask)
        closePicker();
    });
    cancelBtn.addEventListener("click", closePicker);
    confirmBtn.addEventListener("click", () => {
      const year = yearColumn.selectedValue;
      const month = monthColumn.selectedValue;
      const day = dayColumn.selectedValue;
      const picked = new Date(`${year}-${month.toString().padStart(2, "0")}-${day.toString().padStart(2, "0")}`);
      onConfirm(picked);
      closePicker();
    });
  }
  generateYears(currentYear) {
    const minYear = 1900;
    const nowYear = new Date().getFullYear();
    const maxYear = nowYear + 7;
    const years = [];
    for (let i = minYear; i <= maxYear; i++)
      years.push(i);
    return years;
  }
  generateMonths() {
    return Array.from({ length: 12 }, (_, i) => i + 1);
  }
  generateDays(year, month) {
    const daysInMonth = new Date(year, month, 0).getDate();
    return Array.from({ length: daysInMonth }, (_, i) => i + 1);
  }
  createWheelColumn(suffix, values, selectedValue, onChange, isInfinite = false) {
    const column = document.createElement("div");
    column.className = "date-wheel-column";
    const container = document.createElement("div");
    container.className = "date-wheel-items";
    let selectedIndex = values.indexOf(selectedValue);
    let currentSelectedValue = selectedValue;
    const api = { element: column, selectedValue: currentSelectedValue };
    const itemHeight = 40;
    if (isInfinite) {
      const repeatCount = 5;
      const totalItems = values.length * repeatCount;
      const middleGroupIndex = 2;
      const initialScrollTop = middleGroupIndex * values.length * itemHeight + selectedIndex * itemHeight;
      for (let repeat = 0; repeat < repeatCount; repeat++) {
        values.forEach((value, index) => {
          const item = document.createElement("div");
          item.className = "date-wheel-item";
          item.textContent = `${value.toString().padStart(2, "0")}${suffix}`;
          item.dataset.value = value.toString();
          item.dataset.index = (repeat * values.length + index).toString();
          item.dataset.realValue = value.toString();
          container.appendChild(item);
        });
      }
      container.style.height = `${totalItems * itemHeight}px`;
      const initialItemIndex = middleGroupIndex * values.length + selectedIndex;
      const items = Array.from(container.querySelectorAll(".date-wheel-item"));
      if (items[initialItemIndex]) {
        items.forEach((el, idx) => el.classList.toggle("selected", idx === initialItemIndex));
      }
      requestAnimationFrame(() => {
        container.scrollTop = initialScrollTop;
      });
      let isScrolling = false;
      container.addEventListener("scroll", () => {
        if (isScrolling)
          return;
        const scrollTop = container.scrollTop;
        const currentIndex = Math.round(scrollTop / itemHeight);
        const realIndex = (currentIndex % values.length + values.length) % values.length;
        const realValue = values[realIndex];
        container.querySelectorAll(".date-wheel-item").forEach((item, index) => {
          const itemRealIndex = index % values.length;
          item.classList.toggle("selected", itemRealIndex === realIndex);
        });
        selectedIndex = realIndex;
        currentSelectedValue = realValue;
        api.selectedValue = realValue;
        if (onChange)
          onChange(currentSelectedValue);
        const maxScrollTop = (repeatCount - 1) * values.length * itemHeight;
        if (scrollTop >= maxScrollTop) {
          isScrolling = true;
          const offset = scrollTop - maxScrollTop;
          container.scrollTop = values.length * itemHeight + offset;
          setTimeout(() => {
            isScrolling = false;
          }, 50);
        } else if (scrollTop <= 0) {
          isScrolling = true;
          const offset = scrollTop;
          container.scrollTop = (repeatCount - 2) * values.length * itemHeight + offset;
          setTimeout(() => {
            isScrolling = false;
          }, 50);
        }
      });
      container.addEventListener("click", (ev) => {
        const target = ev.target;
        const itemEl = target && target.closest ? target.closest(".date-wheel-item") : null;
        if (!itemEl)
          return;
        const clickedIndex = Number(itemEl.dataset.index || "0");
        const realIndex = (clickedIndex % values.length + values.length) % values.length;
        const middleIndex = middleGroupIndex * values.length + realIndex;
        container.scrollTop = middleIndex * itemHeight;
        selectedIndex = realIndex;
        currentSelectedValue = values[realIndex];
        api.selectedValue = currentSelectedValue;
        if (onChange)
          onChange(currentSelectedValue);
      });
    } else {
      values.forEach((value, index) => {
        const item = document.createElement("div");
        item.className = "date-wheel-item";
        item.textContent = `${value.toString().padStart(2, "0")}${suffix}`;
        item.dataset.value = value.toString();
        item.dataset.index = index.toString();
        if (value === currentSelectedValue)
          item.classList.add("selected");
        container.appendChild(item);
      });
      container.addEventListener("scroll", () => {
        const scrollTop = container.scrollTop;
        const newIndex = Math.round(scrollTop / itemHeight);
        if (newIndex !== selectedIndex && newIndex >= 0 && newIndex < values.length) {
          container.querySelectorAll(".date-wheel-item").forEach((item, index) => {
            item.classList.toggle("selected", index === newIndex);
          });
          selectedIndex = newIndex;
          currentSelectedValue = values[newIndex];
          api.selectedValue = currentSelectedValue;
          if (onChange)
            onChange(currentSelectedValue);
        }
      });
      container.addEventListener("click", (ev) => {
        const target = ev.target;
        const itemEl = target && target.closest ? target.closest(".date-wheel-item") : null;
        if (!itemEl)
          return;
        const idx = Number(itemEl.dataset.index || "0");
        container.querySelectorAll(".date-wheel-item").forEach((el, i) => {
          el.classList.toggle("selected", i === idx);
        });
        container.scrollTop = idx * itemHeight;
        selectedIndex = idx;
        currentSelectedValue = values[idx];
        api.selectedValue = currentSelectedValue;
        if (onChange)
          onChange(currentSelectedValue);
      });
      setTimeout(() => {
        container.scrollTop = selectedIndex * itemHeight;
      }, 0);
    }
    column.appendChild(container);
    return api;
  }
  updateDaysColumn(dayColumn, year, month) {
    const container = dayColumn.element.querySelector(".date-wheel-items");
    const currentDay = dayColumn.selectedValue;
    const newDays = this.generateDays(year, month);
    container.innerHTML = "";
    const repeatCount = 5;
    const itemHeight = 40;
    const middleGroupIndex = 2;
    const maxDay = Math.max(...newDays);
    const selectedDay = Math.min(currentDay, maxDay);
    const selectedIndex = newDays.indexOf(selectedDay);
    for (let repeat = 0; repeat < repeatCount; repeat++) {
      newDays.forEach((day, index) => {
        const item = document.createElement("div");
        item.className = "date-wheel-item";
        item.textContent = `${day.toString().padStart(2, "0")}\u65E5`;
        item.dataset.value = day.toString();
        item.dataset.index = (repeat * newDays.length + index).toString();
        item.dataset.realValue = day.toString();
        container.appendChild(item);
      });
    }
    container.style.height = `${newDays.length * repeatCount * itemHeight}px`;
    const initialItemIndexDay = middleGroupIndex * newDays.length + selectedIndex;
    const dayItems = Array.from(container.querySelectorAll(".date-wheel-item"));
    if (dayItems[initialItemIndexDay]) {
      dayItems.forEach((el, idx) => el.classList.toggle("selected", idx === initialItemIndexDay));
    }
    requestAnimationFrame(() => {
      container.scrollTop = middleGroupIndex * newDays.length * itemHeight + selectedIndex * itemHeight;
    });
    let isScrolling = false;
    container.addEventListener("scroll", () => {
      if (isScrolling)
        return;
      const scrollTop = container.scrollTop;
      const currentIndex = Math.round(scrollTop / itemHeight);
      const realIndex = currentIndex % newDays.length;
      const realValue = newDays[realIndex];
      container.querySelectorAll(".date-wheel-item").forEach((item, index) => {
        const itemRealIndex = index % newDays.length;
        item.classList.toggle("selected", itemRealIndex === realIndex);
      });
      dayColumn.selectedValue = realValue;
      const maxScrollTop = (repeatCount - 1) * newDays.length * itemHeight;
      if (scrollTop >= maxScrollTop) {
        isScrolling = true;
        const offset = scrollTop - maxScrollTop;
        container.scrollTop = newDays.length * itemHeight + offset;
        setTimeout(() => {
          isScrolling = false;
        }, 50);
      } else if (scrollTop <= 0) {
        isScrolling = true;
        const offset = scrollTop;
        container.scrollTop = (repeatCount - 2) * newDays.length * itemHeight + offset;
        setTimeout(() => {
          isScrolling = false;
        }, 50);
      }
    });
    container.addEventListener("click", (ev) => {
      const target = ev.target;
      const itemEl = target && target.closest ? target.closest(".date-wheel-item") : null;
      if (!itemEl)
        return;
      const clickedIndex = Number(itemEl.dataset.index || "0");
      const realIndex = clickedIndex % newDays.length;
      const middleIndex = middleGroupIndex * newDays.length + realIndex;
      container.scrollTop = middleIndex * itemHeight;
      dayColumn.selectedValue = newDays[realIndex];
    });
  }
  createLabel(text) {
    const el = document.createElement("label");
    el.textContent = text;
    return el;
  }
};

// components/AssetManagerView.ts
var import_obsidian3 = require("obsidian");

// components/TagPanel.ts
var TagPanel = class {
  constructor(containerEl, props) {
    this.panelVisible = false;
    this.panelSelected = [];
    this.searchKeyword = "";
    this.containerEl = containerEl;
    this.props = props;
    this.panelSelected = [...props.selectedTags];
  }
  render() {
    this.containerEl.empty();
    this.containerEl.addClass("top-summary-labels");
    if (this.props.maxHeight) {
      this.containerEl.style.maxHeight = this.props.maxHeight;
      this.containerEl.style.overflowY = this.props.maxHeight !== "auto" ? "auto" : "visible";
    }
    this.renderTagList();
    if (this.panelVisible) {
      this.renderSelectionPanel();
    }
  }
  renderTagList() {
    this.props.tags.forEach((tag) => {
      const labelEl = this.containerEl.createSpan("top-summary-label");
      labelEl.textContent = tag;
      if (this.props.selectedTags.includes(tag)) {
        labelEl.addClass("selected");
      }
      labelEl.addEventListener("click", (e) => {
        e.stopPropagation();
        this.props.onTagClick(tag);
      });
    });
    this.containerEl.addEventListener("click", () => {
      this.showSelectionPanel();
    });
  }
  showSelectionPanel() {
    this.panelVisible = true;
    this.panelSelected = [...this.props.selectedTags];
    this.render();
  }
  hideSelectionPanel() {
    this.panelVisible = false;
    if (this.maskEl && this.maskEl.parentElement) {
      this.maskEl.parentElement.removeChild(this.maskEl);
    }
    this.maskEl = void 0;
    this.panelEl = void 0;
    this.labelsEl = void 0;
    this.searchEl = void 0;
    this.render();
  }
  renderSelectionPanel() {
    if (!this.maskEl) {
      this.maskEl = this.containerEl.createDiv("top-summary-panel-mask");
      this.maskEl.style.zIndex = "9999";
      this.maskEl.addEventListener("click", () => {
        this.confirmSelection();
      });
    }
    if (!this.panelEl) {
      this.panelEl = this.maskEl.createDiv("top-summary-panel");
      this.panelEl.style.zIndex = "10000";
      this.panelEl.addEventListener("click", (e) => {
        e.stopPropagation();
      });
    }
    if (!this.searchEl) {
      this.searchEl = this.panelEl.createEl("input", {
        cls: "top-summary-panel-search",
        placeholder: "\u641C\u7D22\u6807\u7B7E",
        type: "text"
      });
      this.searchEl.addEventListener("input", () => {
        var _a;
        this.searchKeyword = (((_a = this.searchEl) == null ? void 0 : _a.value) || "").trim();
        this.renderSelectionPanel();
      });
    }
    if (this.searchEl) {
      this.searchEl.value = this.searchKeyword;
    }
    const prevScrollTop = this.labelsEl ? this.labelsEl.scrollTop : 0;
    if (!this.labelsEl) {
      this.labelsEl = this.panelEl.createDiv("top-summary-panel-labels");
    } else {
      this.labelsEl.empty();
    }
    const lower = this.searchKeyword.toLowerCase();
    const visibleTags = lower ? this.props.tags.filter((t) => t.toLowerCase().includes(lower)) : this.props.tags;
    visibleTags.forEach((tag) => {
      const labelEl = this.labelsEl.createSpan("top-summary-panel-label");
      labelEl.textContent = tag;
      if (this.panelSelected.includes(tag)) {
        labelEl.addClass("selected");
      }
      labelEl.addEventListener("click", () => {
        this.toggleTagSelection(tag);
      });
    });
    if (this.labelsEl) {
      this.labelsEl.scrollTop = prevScrollTop;
    }
    let actionsEl = this.panelEl.querySelector(".top-summary-panel-actions");
    if (!actionsEl) {
      actionsEl = this.panelEl.createDiv("top-summary-panel-actions");
      actionsEl.style.padding = "8px 16px 12px 16px";
      const selectAllBtn = actionsEl.createSpan("panel-btn");
      selectAllBtn.textContent = "\u5168\u9009";
      selectAllBtn.addEventListener("click", () => {
        this.panelSelected = [...this.props.tags];
        this.renderSelectionPanel();
      });
      const deselectAllBtn = actionsEl.createSpan("panel-btn");
      deselectAllBtn.textContent = "\u53D6\u6D88\u5168\u9009";
      deselectAllBtn.addEventListener("click", () => {
        this.panelSelected = [];
        this.renderSelectionPanel();
      });
    }
  }
  toggleTagSelection(tag) {
    if (this.panelSelected.includes(tag)) {
      this.panelSelected = this.panelSelected.filter((t) => t !== tag);
    } else {
      this.panelSelected.push(tag);
    }
    this.renderSelectionPanel();
  }
  confirmSelection() {
    this.props.onTagClick(this.panelSelected);
    this.hideSelectionPanel();
  }
  // 更新标签
  updateTags(tags, selectedTags) {
    this.props.tags = tags;
    this.props.selectedTags = selectedTags;
    this.render();
  }
};

// components/TopSummary.ts
var TopSummary = class {
  constructor(containerEl, props) {
    this.containerEl = containerEl;
    this.props = props;
  }
  formatDateLocal(date) {
    const d = new Date(date.getTime() - date.getTimezoneOffset() * 6e4);
    return d.toISOString().split("T")[0];
  }
  render() {
    this.containerEl.empty();
    this.containerEl.addClass("top-summary");
    this.renderNumbers();
    this.renderLabels();
    this.renderChart();
  }
  renderNumbers() {
    const numbersEl = this.containerEl.createDiv("top-summary-numbers");
    const dailyEl = numbersEl.createDiv("top-summary-daily");
    const dateEl = dailyEl.createDiv("top-summary-date");
    dateEl.textContent = this.formatDateLocal(this.props.selectedDate || new Date());
    dateEl.addClass("clickable");
    dateEl.addEventListener("click", () => {
      this.showDatePicker();
    });
    const dailyCostEl = dailyEl.createDiv("top-summary-dailycost");
    dailyCostEl.textContent = `\xA5${this.props.totalDailyCost.toFixed(2)}`;
    const summaryEl = numbersEl.createDiv("top-summary-summary");
    const totalEl = summaryEl.createDiv("top-summary-total");
    const totalMetaEl = totalEl.createSpan("top-summary-meta");
    totalMetaEl.textContent = "\u603B\u6210\u672C ";
    const totalCostEl = totalEl.createSpan("top-summary-totalcost");
    totalCostEl.textContent = `\xA5${this.props.totalCost.toLocaleString()}`;
    const recycleEl = summaryEl.createDiv("top-summary-total");
    const recycleMetaEl = recycleEl.createSpan("top-summary-meta");
    recycleMetaEl.textContent = "\u53EF\u56DE\u6536 ";
    const recycleCostEl = recycleEl.createSpan("top-summary-totalcost");
    recycleCostEl.textContent = `\xA5${this.props.totalRecycle.toLocaleString()}`;
  }
  renderLabels() {
    const labelsEl = this.containerEl.createDiv("top-summary-labels");
    const panelProps = {
      tags: this.props.tags,
      selectedTags: this.props.selectedTags,
      onTagClick: this.props.onTagClick,
      maxHeight: "48px"
    };
    this.tagPanelComponent = new TagPanel(labelsEl, panelProps);
    this.tagPanelComponent.render();
  }
  renderChart() {
    const chartEl = this.containerEl.createDiv("top-summary-chart");
    const canvas = chartEl.createEl("canvas");
    canvas.id = "trend-canvas";
    canvas.width = 100;
    canvas.height = 20;
    this.renderChartCanvas(canvas);
  }
  renderChartCanvas(canvas) {
    if (this.props.trendPoints.length < 2)
      return;
    const ctx = canvas.getContext("2d");
    if (!ctx)
      return;
    const rect = canvas.getBoundingClientRect();
    canvas.width = rect.width;
    canvas.height = rect.height;
    const width = canvas.width;
    const height = canvas.height;
    const pad = 0;
    const values = this.props.trendPoints.map((p) => p.value);
    const minValue = Math.min(...values);
    const maxValue = Math.max(...values);
    const range = maxValue - minValue;
    const useLogScale = range > 100;
    const getX = (i) => pad + (width - 2 * pad) * i / (this.props.trendPoints.length - 1);
    const getY = (v) => {
      if (useLogScale) {
        const logValue = Math.log(v + 1);
        const logMin = Math.log(minValue + 1);
        const logMax = Math.log(maxValue + 1);
        return height - pad - (logValue - logMin) / Math.max(logMax - logMin, 0.5) * (height - 2 * pad);
      } else {
        return height - pad - (v - minValue) / Math.max(range, 0.5) * (height - 2 * pad);
      }
    };
    const getColorByValue = (v) => {
      const logValue = Math.log(v + 1);
      const logMin = Math.log(minValue + 1);
      const logMax = Math.log(maxValue + 1);
      if (logMax === logMin)
        return "rgb(255,255,0)";
      const t = (logValue - logMin) / (logMax - logMin);
      if (t <= 0.5) {
        const r = Math.round(2 * t * 255);
        return `rgb(${r},255,0)`;
      } else {
        const g = Math.round((1 - 2 * (t - 0.5)) * 255);
        return `rgb(255,${g},0)`;
      }
    };
    ctx.clearRect(0, 0, width, height);
    ctx.lineWidth = 1;
    for (let i = 0; i < this.props.trendPoints.length - 1; i++) {
      const p1 = this.props.trendPoints[i];
      const p2 = this.props.trendPoints[i + 1];
      const x1 = getX(i);
      const y1 = getY(p1.value);
      const x2 = getX(i + 1);
      const y2 = getY(p2.value);
      ctx.beginPath();
      ctx.strokeStyle = getColorByValue(p1.value);
      ctx.moveTo(x1, y1);
      ctx.lineTo(x2, y2);
      ctx.stroke();
    }
    let selectedXToDraw = null;
    if (this.props.selectedX !== null && this.props.selectedX !== void 0) {
      selectedXToDraw = this.props.selectedX;
    } else if (this.props.selectedDate) {
      try {
        const times = this.props.trendPoints.map((p) => p.date.getTime());
        const minTime = Math.min(...times);
        const maxTime = Math.max(...times);
        const cur = this.props.selectedDate.getTime();
        const denom = Math.max(maxTime - minTime, 1);
        const ratio = (cur - minTime) / denom;
        selectedXToDraw = pad + (width - 2 * pad) * Math.min(Math.max(ratio, 0), 1);
      } catch (_) {
        selectedXToDraw = null;
      }
    }
    if (selectedXToDraw !== null && selectedXToDraw !== void 0) {
      ctx.beginPath();
      ctx.strokeStyle = "#FFD600";
      ctx.lineWidth = 1;
      ctx.moveTo(selectedXToDraw, 0);
      ctx.lineTo(selectedXToDraw, height);
      ctx.stroke();
    }
    if (!canvas._lac_click_bound) {
      canvas._lac_click_bound = true;
      canvas.addEventListener("click", (ev) => {
        var _a;
        const x = (_a = ev.offsetX) != null ? _a : ev.clientX - canvas.getBoundingClientRect().left;
        const usableWidth = Math.max(width - 2 * pad, 1);
        const ratio = Math.min(Math.max((x - pad) / usableWidth, 0), 1);
        const idx = Math.round(ratio * (this.props.trendPoints.length - 1));
        const clampedIdx = Math.min(Math.max(idx, 0), this.props.trendPoints.length - 1);
        const pickedDate = this.props.trendPoints[clampedIdx].date;
        this.updateSelection(x, pickedDate);
        if (this.props.onDatePick) {
          this.props.onDatePick(this.formatDateLocal(pickedDate));
        }
        if (this.props.onChartSelect) {
          this.props.onChartSelect(x);
        }
      });
    }
  }
  // 更新图表数据
  updateChart(trendPoints) {
    this.props.trendPoints = trendPoints;
    const canvas = this.containerEl.querySelector("#trend-canvas");
    if (canvas) {
      this.renderChartCanvas(canvas);
    }
  }
  // 更新选中状态
  updateSelection(selectedX, selectedDate) {
    this.props.selectedX = selectedX;
    if (selectedDate) {
      this.props.selectedDate = selectedDate;
      const dateLabel = this.containerEl.querySelector(".top-summary-date");
      if (dateLabel) {
        dateLabel.textContent = this.formatDateLocal(selectedDate);
      }
    }
    const canvas = this.containerEl.querySelector("#trend-canvas");
    if (canvas) {
      this.renderChartCanvas(canvas);
    }
  }
  // 只更新数字（不重绘图表数据）
  updateNumbers(totalDailyCost, totalCost, totalRecycle) {
    this.props.totalDailyCost = totalDailyCost;
    this.props.totalCost = totalCost;
    this.props.totalRecycle = totalRecycle;
    const daily = this.containerEl.querySelector(".top-summary-dailycost");
    if (daily)
      daily.textContent = `\xA5${totalDailyCost.toFixed(2)}`;
    const totals = this.containerEl.querySelectorAll(".top-summary-totalcost");
    if (totals && totals.length > 0) {
      const totalEl = totals[0];
      if (totalEl)
        totalEl.textContent = `\xA5${totalCost.toLocaleString()}`;
      const recycleEl = totals[1];
      if (recycleEl)
        recycleEl.textContent = `\xA5${totalRecycle.toLocaleString()}`;
    }
  }
  // 显示日期选择器
  showDatePicker() {
    const mask = document.createElement("div");
    mask.className = "date-picker-mask";
    const picker = document.createElement("div");
    picker.className = "date-picker-modal";
    const content = document.createElement("div");
    content.className = "date-picker-content";
    const title = document.createElement("div");
    title.className = "date-picker-title";
    title.textContent = "\u9009\u62E9\u65E5\u671F";
    const wheelContainer = document.createElement("div");
    wheelContainer.className = "date-wheel-container";
    const currentDate = this.props.selectedDate || new Date();
    const currentYear = currentDate.getFullYear();
    const currentMonth = currentDate.getMonth() + 1;
    const currentDay = currentDate.getDate();
    const yearColumn = this.createWheelColumn("\u5E74", this.generateYears(currentYear), currentYear, (year) => {
      this.updateDaysColumn(dayColumn, year, monthColumn.selectedValue);
    }, false);
    const monthColumn = this.createWheelColumn("\u6708", this.generateMonths(), currentMonth, (month) => {
      this.updateDaysColumn(dayColumn, yearColumn.selectedValue, month);
    }, true);
    const dayColumn = this.createWheelColumn("\u65E5", this.generateDays(currentYear, currentMonth), currentDay, void 0, true);
    wheelContainer.appendChild(yearColumn.element);
    wheelContainer.appendChild(monthColumn.element);
    wheelContainer.appendChild(dayColumn.element);
    const actions = document.createElement("div");
    actions.className = "date-picker-actions";
    const cancelBtn = document.createElement("button");
    cancelBtn.className = "date-picker-btn date-picker-btn-cancel";
    cancelBtn.textContent = "\u53D6\u6D88";
    const confirmBtn = document.createElement("button");
    confirmBtn.className = "date-picker-btn date-picker-btn-confirm";
    confirmBtn.textContent = "\u786E\u5B9A";
    actions.appendChild(cancelBtn);
    actions.appendChild(confirmBtn);
    content.appendChild(title);
    content.appendChild(wheelContainer);
    content.appendChild(actions);
    picker.appendChild(content);
    mask.appendChild(picker);
    document.body.appendChild(mask);
    const closePicker = () => {
      document.body.removeChild(mask);
    };
    mask.addEventListener("click", (e) => {
      if (e.target === mask) {
        closePicker();
      }
    });
    cancelBtn.addEventListener("click", closePicker);
    confirmBtn.addEventListener("click", () => {
      const year = yearColumn.selectedValue;
      const month = monthColumn.selectedValue;
      const day = dayColumn.selectedValue;
      const selectedDateStr = `${year}-${month.toString().padStart(2, "0")}-${day.toString().padStart(2, "0")}`;
      if (this.props.onDatePick) {
        this.props.onDatePick(selectedDateStr);
      }
      closePicker();
    });
  }
  // 生成年份数组
  generateYears(currentYear) {
    const minYear = this.props.minYear || currentYear - 5;
    const maxYear = this.props.maxYear || currentYear + 5;
    const years = [];
    for (let i = minYear; i <= maxYear; i++) {
      years.push(i);
    }
    return years;
  }
  // 生成月份数组
  generateMonths() {
    return Array.from({ length: 12 }, (_, i) => i + 1);
  }
  // 生成日期数组
  generateDays(year, month) {
    const daysInMonth = new Date(year, month, 0).getDate();
    return Array.from({ length: daysInMonth }, (_, i) => i + 1);
  }
  // 创建滚轮列
  createWheelColumn(suffix, values, selectedValue, onChange, isInfinite = false) {
    const column = document.createElement("div");
    column.className = "date-wheel-column";
    const container = document.createElement("div");
    container.className = "date-wheel-items";
    let selectedIndex = values.indexOf(selectedValue);
    let currentSelectedValue = selectedValue;
    const api = { element: column, selectedValue: currentSelectedValue };
    const itemHeight = 40;
    if (isInfinite) {
      const repeatCount = 5;
      const totalItems = values.length * repeatCount;
      const middleGroupIndex = 2;
      const initialScrollTop = middleGroupIndex * values.length * itemHeight + selectedIndex * itemHeight;
      for (let repeat = 0; repeat < repeatCount; repeat++) {
        values.forEach((value, index) => {
          const item = document.createElement("div");
          item.className = "date-wheel-item";
          item.textContent = `${value.toString().padStart(2, "0")}${suffix}`;
          item.dataset.value = value.toString();
          item.dataset.index = (repeat * values.length + index).toString();
          item.dataset.realValue = value.toString();
          container.appendChild(item);
        });
      }
      container.style.height = `${totalItems * itemHeight}px`;
      const initialItemIndex = middleGroupIndex * values.length + selectedIndex;
      const items = Array.from(container.querySelectorAll(".date-wheel-item"));
      if (items[initialItemIndex]) {
        items.forEach((el, idx) => el.classList.toggle("selected", idx === initialItemIndex));
      }
      requestAnimationFrame(() => {
        container.scrollTop = initialScrollTop;
      });
      let isScrolling = false;
      container.addEventListener("scroll", () => {
        if (isScrolling)
          return;
        const scrollTop = container.scrollTop;
        const currentIndex = Math.round(scrollTop / itemHeight);
        const realIndex = (currentIndex % values.length + values.length) % values.length;
        const realValue = values[realIndex];
        container.querySelectorAll(".date-wheel-item").forEach((item, index) => {
          const itemRealIndex = index % values.length;
          item.classList.toggle("selected", itemRealIndex === realIndex);
        });
        selectedIndex = realIndex;
        currentSelectedValue = realValue;
        api.selectedValue = realValue;
        if (onChange) {
          onChange(currentSelectedValue);
        }
        const maxScrollTop = (repeatCount - 1) * values.length * itemHeight;
        const minScrollTop = values.length * itemHeight;
        if (scrollTop >= maxScrollTop) {
          isScrolling = true;
          const offset = scrollTop - maxScrollTop;
          container.scrollTop = values.length * itemHeight + offset;
          setTimeout(() => {
            isScrolling = false;
          }, 50);
        } else if (scrollTop <= 0) {
          isScrolling = true;
          const offset = scrollTop;
          container.scrollTop = (repeatCount - 2) * values.length * itemHeight + offset;
          setTimeout(() => {
            isScrolling = false;
          }, 50);
        }
      });
      container.addEventListener("click", (ev) => {
        const target = ev.target;
        const itemEl = target && target.closest ? target.closest(".date-wheel-item") : null;
        if (!itemEl)
          return;
        const clickedIndex = Number(itemEl.dataset.index || "0");
        const realIndex = (clickedIndex % values.length + values.length) % values.length;
        const middleIndex = middleGroupIndex * values.length + realIndex;
        container.scrollTop = middleIndex * itemHeight;
        selectedIndex = realIndex;
        currentSelectedValue = values[realIndex];
        api.selectedValue = currentSelectedValue;
        if (onChange)
          onChange(currentSelectedValue);
      });
    } else {
      values.forEach((value, index) => {
        const item = document.createElement("div");
        item.className = "date-wheel-item";
        item.textContent = `${value.toString().padStart(2, "0")}${suffix}`;
        item.dataset.value = value.toString();
        item.dataset.index = index.toString();
        if (value === currentSelectedValue) {
          item.classList.add("selected");
        }
        container.appendChild(item);
      });
      container.addEventListener("scroll", () => {
        const scrollTop = container.scrollTop;
        const newIndex = Math.round(scrollTop / itemHeight);
        if (newIndex !== selectedIndex && newIndex >= 0 && newIndex < values.length) {
          container.querySelectorAll(".date-wheel-item").forEach((item, index) => {
            item.classList.toggle("selected", index === newIndex);
          });
          selectedIndex = newIndex;
          currentSelectedValue = values[newIndex];
          api.selectedValue = currentSelectedValue;
          if (onChange) {
            onChange(currentSelectedValue);
          }
        }
      });
      container.addEventListener("click", (ev) => {
        const target = ev.target;
        const itemEl = target && target.closest ? target.closest(".date-wheel-item") : null;
        if (!itemEl)
          return;
        const idx = Number(itemEl.dataset.index || "0");
        container.querySelectorAll(".date-wheel-item").forEach((el, i) => {
          el.classList.toggle("selected", i === idx);
        });
        container.scrollTop = idx * itemHeight;
        selectedIndex = idx;
        currentSelectedValue = values[idx];
        api.selectedValue = currentSelectedValue;
        if (onChange)
          onChange(currentSelectedValue);
      });
      setTimeout(() => {
        container.scrollTop = selectedIndex * itemHeight;
      }, 0);
    }
    column.appendChild(container);
    return api;
  }
  // 更新日期列
  updateDaysColumn(dayColumn, year, month) {
    const container = dayColumn.element.querySelector(".date-wheel-items");
    const currentDay = dayColumn.selectedValue;
    const newDays = this.generateDays(year, month);
    container.innerHTML = "";
    const maxDay = Math.max(...newDays);
    const selectedDay = Math.min(currentDay, maxDay);
    const selectedIndex = newDays.indexOf(selectedDay);
    const itemHeight = 40;
    const repeatCount = 5;
    const totalItems = newDays.length * repeatCount;
    const middleGroupIndex = 2;
    const initialScrollTop = middleGroupIndex * newDays.length * itemHeight + selectedIndex * itemHeight;
    for (let repeat = 0; repeat < repeatCount; repeat++) {
      newDays.forEach((day, index) => {
        const item = document.createElement("div");
        item.className = "date-wheel-item";
        item.textContent = `${day.toString().padStart(2, "0")}\u65E5`;
        item.dataset.value = day.toString();
        item.dataset.index = (repeat * newDays.length + index).toString();
        item.dataset.realValue = day.toString();
        container.appendChild(item);
      });
    }
    container.style.height = `${totalItems * itemHeight}px`;
    const initialItemIndexDay = middleGroupIndex * newDays.length + selectedIndex;
    const dayItems = Array.from(container.querySelectorAll(".date-wheel-item"));
    if (dayItems[initialItemIndexDay]) {
      dayItems.forEach((el, idx) => el.classList.toggle("selected", idx === initialItemIndexDay));
    }
    requestAnimationFrame(() => {
      container.scrollTop = initialScrollTop;
    });
    dayColumn.selectedValue = selectedDay;
    let isScrolling = false;
    container.addEventListener("scroll", () => {
      if (isScrolling)
        return;
      const scrollTop = container.scrollTop;
      const currentIndex = Math.round(scrollTop / itemHeight);
      const realIndex = currentIndex % newDays.length;
      const realValue = newDays[realIndex];
      container.querySelectorAll(".date-wheel-item").forEach((item, index) => {
        const itemRealIndex = index % newDays.length;
        item.classList.toggle("selected", itemRealIndex === realIndex);
      });
      dayColumn.selectedValue = realValue;
      const maxScrollTop = (repeatCount - 1) * newDays.length * itemHeight;
      const minScrollTop = newDays.length * itemHeight;
      if (scrollTop >= maxScrollTop) {
        isScrolling = true;
        const offset = scrollTop - maxScrollTop;
        container.scrollTop = newDays.length * itemHeight + offset;
        setTimeout(() => {
          isScrolling = false;
        }, 50);
      } else if (scrollTop <= 0) {
        isScrolling = true;
        const offset = scrollTop;
        container.scrollTop = (repeatCount - 2) * newDays.length * itemHeight + offset;
        setTimeout(() => {
          isScrolling = false;
        }, 50);
      }
    });
  }
};

// components/AssetManagerView.ts
var AssetManagerView = class extends import_obsidian3.ItemView {
  constructor(leaf, assetRepository, filePath) {
    super(leaf);
    this.assets = [];
    // 当前选择的日期
    this.selectedTags = [];
    // 顶部统计下方的按钮卡片
    this.searchQuery = "";
    this.sortMode = "none";
    this.assetRepository = assetRepository;
    this.filePath = filePath;
    this.selectedDate = new Date();
  }
  getViewType() {
    return "lac-costset-view";
  }
  getDisplayText() {
    return "LaC.CostSet";
  }
  getIcon() {
    return "package";
  }
  async onOpen() {
    var _a, _b;
    const { containerEl } = this;
    containerEl.empty();
    containerEl.addClass("page-root");
    this.injectHeaderFixStyles();
    try {
      const plugin = (_b = (_a = this.app.plugins) == null ? void 0 : _a.plugins) == null ? void 0 : _b["lac-costset"];
      if (plugin && plugin.settings && plugin.settings.defaultSort) {
        this.sortMode = plugin.settings.defaultSort;
      }
    } catch (_) {
    }
    if (this.filePath) {
      this.useFile(this.filePath);
      return;
    }
    const hint = containerEl.createDiv();
    hint.style.padding = "16px";
    hint.style.opacity = "0.8";
    hint.textContent = "\u4ECE\u6587\u4EF6\u7684\u53F3\u952E\u83DC\u5355\u4E2D\u9009\u62E9 \u201C\u7528 LaC.CostSet \u6253\u5F00\u201D\u3002";
    return;
    this.loadAssets();
  }
  async onClose() {
    const { containerEl } = this;
    containerEl.empty();
  }
  async useFile(filePath) {
    const plugin = this.app.plugins.plugins["lac-costset"];
    if (plugin) {
      plugin.assetRepository = new AssetRepository(this.app, filePath);
      this.assetRepository = plugin.assetRepository;
      this.loadAssets();
    }
  }
  async loadAssets() {
    this.assets = await this.assetRepository.loadAll();
    this.renderAssets();
  }
  showFileSelector() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "\u9009\u62E9\u8D44\u4EA7\u6839\u6587\u4EF6" });
    containerEl.createEl("p", { text: "\u8BF7\u9009\u62E9\u4E00\u4E2A\u5305\u542B\u8D44\u4EA7\u5F15\u7528\u7684\u6587\u4EF6\u4F5C\u4E3A\u5165\u53E3" });
    const files = this.app.vault.getMarkdownFiles();
    const fileList = containerEl.createDiv("file-list");
    files.forEach((file) => {
      const fileItem = fileList.createDiv("file-item");
      fileItem.createEl("div", { text: file.path });
      fileItem.addEventListener("click", async () => {
        const plugin = this.app.plugins.plugins["lac-costset"];
        if (plugin) {
          plugin.assetRepository = new AssetRepository(this.app, file.path);
          this.assetRepository = plugin.assetRepository;
          this.loadAssets();
        }
      });
    });
  }
  renderAssets() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.addClass("page-root");
    this.renderTopSummary(containerEl);
    this.renderActionBar(containerEl);
    const assetsContainer = containerEl.createDiv("assets-container");
    this.renderAssetCards(assetsContainer);
  }
  renderAssetCards(assetsContainer) {
    assetsContainer.empty();
    if (this.assets.length === 0) {
      assetsContainer.createEl("p", { text: "\u6682\u65E0\u8D44\u4EA7" });
      return;
    }
    const calcDate = this.selectedDate || new Date();
    let visibleAssets = this.assets.filter((a) => a.activeFrom <= calcDate);
    if (this.selectedTags.length > 0) {
      visibleAssets = visibleAssets.filter((a) => {
        var _a;
        return (_a = a.tags) == null ? void 0 : _a.some((t) => this.selectedTags.includes(t));
      });
    }
    if (this.searchQuery && this.searchQuery.trim()) {
      const q = this.searchQuery.trim().toLowerCase();
      visibleAssets = visibleAssets.filter((a) => {
        const nameHit = (a.name || "").toLowerCase().includes(q);
        const tagHit = (a.tags || []).some((t) => (t || "").toLowerCase().includes(q));
        return nameHit || tagHit;
      });
    }
    if (this.sortMode !== "none") {
      visibleAssets = [...visibleAssets].sort((a, b) => {
        var _a, _b, _c, _d;
        if (this.sortMode === "dailyDesc") {
          const aCost = a.getDailyCost(calcDate);
          const bCost = b.getDailyCost(calcDate);
          return bCost - aCost;
        }
        if (this.sortMode === "priceDesc") {
          return Number(b.price || 0) - Number(a.price || 0);
        }
        if (this.sortMode === "dateDesc") {
          const at = ((_b = (_a = a.activeFrom) == null ? void 0 : _a.getTime) == null ? void 0 : _b.call(_a)) || 0;
          const bt = ((_d = (_c = b.activeFrom) == null ? void 0 : _c.getTime) == null ? void 0 : _d.call(_c)) || 0;
          return bt - at;
        }
        return 0;
      });
    }
    visibleAssets.forEach((asset) => {
      const isExpired = !!(asset.activeTo && asset.activeTo <= calcDate);
      const endText = isExpired ? asset.activeTo.toISOString().split("T")[0] : "\u81F3\u4ECA";
      const assetEl = assetsContainer.createDiv("asset-card");
      if (isExpired)
        assetEl.addClass("asset-card--expired");
      if (asset.hidden)
        assetEl.addClass("hidden");
      assetEl.innerHTML = `
				<div class="asset-info">
					<div class="asset-title">${asset.icon} ${asset.name}</div>
					<div class="asset-date">\u5DF2\u7528${asset.getUsageDays(calcDate)}\u5929 (${asset.activeFrom.toISOString().split("T")[0]} ~ ${asset.activeTo ? endText : "\u81F3\u4ECA"})</div>
					<div class="asset-labels-scroll">
						${asset.tags.map((tag) => `<span class="tag">${tag}</span>`).join("")}
					</div>
				</div>
				<div class="asset-costs">
					<div class="asset-costs-line">
						<div class="asset-price">\u65E5\u5747&nbsp;</div>
						<div class="asset-dailycost">\xA5${asset.getDailyCost(calcDate).toFixed(2)}</div>
					</div>
					<div class="asset-price">\u4EF7\u683C \xA5${asset.price}</div>
					<div class="asset-price">\u56DE\u6536\u4EF7 \xA5${asset.recyclePrice}</div>
				</div>
			`;
      let didLongPress = false;
      assetEl.addEventListener("click", (e) => {
        if (didLongPress) {
          didLongPress = false;
          e.preventDefault();
          e.stopPropagation();
          return;
        }
        new AssetFormModal(this.app, this.assetRepository, asset, () => this.loadAssets()).open();
      });
      let pressTimer = null;
      const startPress = (ev) => {
        if (ev && "button" in ev && typeof ev.button === "number" && ev.button !== 0)
          return;
        if (pressTimer)
          window.clearTimeout(pressTimer);
        pressTimer = window.setTimeout(() => {
          didLongPress = true;
          asset.hidden = !asset.hidden;
          assetEl.classList.toggle("hidden", asset.hidden);
          this.refreshTopNumbersOnly();
        }, 500);
      };
      const cancelPress = () => {
        if (pressTimer) {
          window.clearTimeout(pressTimer);
          pressTimer = null;
        }
      };
      assetEl.addEventListener("mousedown", startPress);
      assetEl.addEventListener("touchstart", startPress, { passive: true });
      assetEl.addEventListener("mouseup", cancelPress);
      assetEl.addEventListener("mouseleave", cancelPress);
      assetEl.addEventListener("touchend", cancelPress);
      assetEl.addEventListener("contextmenu", async (e) => {
        e.preventDefault();
        const ok = await new ConfirmModal(`\u786E\u5B9A\u8981\u5220\u9664\u8D44\u4EA7 "${asset.name}" \u5417\uFF1F`, "\u5220\u9664", "\u53D6\u6D88", true).open();
        if (!ok)
          return;
        await this.assetRepository.deleteAsset(asset.id);
        this.loadAssets();
      });
    });
  }
  // 仅刷新顶部数字 (排除 hidden 资产)，不刷新图表、不重建列表
  refreshTopNumbersOnly() {
    if (!this.topSummaryComponent)
      return;
    const calcDate = this.selectedDate || new Date();
    const activeAssets = this.assets.filter((a) => a.isActive(calcDate) && !a.hidden);
    const filteredActiveAssets = this.applyTagFilter(activeAssets);
    const totalCost = filteredActiveAssets.reduce((sum, a) => sum + a.price, 0);
    const totalRecycle = filteredActiveAssets.reduce((sum, a) => sum + a.recyclePrice, 0);
    const totalDailyCost = filteredActiveAssets.reduce((sum, a) => sum + a.getDailyCost(calcDate), 0);
    this.topSummaryComponent.updateNumbers(totalDailyCost, totalCost, totalRecycle);
  }
  // 顶部统计下方的操作条（搜索 / 排序 / 添加）
  renderActionBar(containerEl) {
    this.injectActionBarStyles();
    const bar = containerEl.createDiv("lac-actionbar-card");
    this.actionBarEl = bar;
    const backBtn = bar.createDiv({ cls: "lac-icon-btn back", attr: { title: "\u8FD4\u56DE" } });
    backBtn.innerHTML = this.svgBack();
    backBtn.addEventListener("click", (e) => {
      e.preventDefault();
      try {
        this.leaf.detach();
      } catch (_) {
      }
    });
    const searchWrap = bar.createDiv("lac-actionbar-search");
    const searchIconBtn = searchWrap.createEl("button", { cls: "lac-icon-btn search-icon", attr: { type: "button", "aria-label": "\u641C\u7D22" } });
    searchIconBtn.innerHTML = this.svgSearch();
    const searchInput = searchWrap.createEl("input", { attr: { type: "text", placeholder: "\u641C\u7D22\u540D\u79F0\u6216\u6807\u7B7E" } });
    if (this.searchQuery)
      searchInput.value = this.searchQuery;
    searchIconBtn.addEventListener("click", () => searchInput.focus());
    searchInput.addEventListener("input", () => {
      this.searchQuery = searchInput.value || "";
      this.refreshAssetListOnly();
    });
    const actions = bar.createDiv("lac-actionbar-actions");
    const sortBtn = actions.createDiv({ cls: "lac-icon-btn sort", attr: { title: "\u6392\u5E8F" } });
    sortBtn.innerHTML = this.svgSort();
    const applySortBtnState = () => {
      sortBtn.classList.toggle("active", this.sortMode !== "none");
      sortBtn.setAttr("data-mode", this.sortMode);
      sortBtn.setAttr("aria-pressed", String(this.sortMode !== "none"));
      const title = this.sortMode === "dailyDesc" ? "\u6309\u65E5\u5747\u6210\u672C (\u964D\u5E8F)" : this.sortMode === "priceDesc" ? "\u6309\u4EF7\u683C (\u964D\u5E8F)" : this.sortMode === "dateDesc" ? "\u6309\u8D2D\u5165\u65E5\u671F (\u964D\u5E8F)" : "\u6392\u5E8F";
      sortBtn.setAttr("title", title);
    };
    applySortBtnState();
    sortBtn.addEventListener("click", (e) => {
      e.preventDefault();
      this.openSortMenu(sortBtn, (mode) => {
        this.sortMode = mode;
        applySortBtnState();
        this.refreshAssetListOnly();
      });
    });
    const addBtn = actions.createDiv({ cls: "lac-icon-btn add", attr: { title: "\u6DFB\u52A0" } });
    addBtn.innerHTML = this.svgPlus();
    addBtn.addEventListener("click", () => {
      new AssetFormModal(this.app, this.assetRepository, void 0, () => this.loadAssets()).open();
    });
  }
  refreshAssetListOnly() {
    const { containerEl } = this;
    const listEl = containerEl.querySelector(".assets-container");
    if (listEl) {
      listEl.remove();
      const newList = containerEl.createDiv("assets-container");
      this.renderAssetCards(newList);
    }
  }
  injectActionBarStyles() {
    const STYLE_ID = "lac-costset-actionbar-styles";
    if (document.getElementById(STYLE_ID))
      return;
    const style = document.createElement("style");
    style.id = STYLE_ID;
    style.textContent = `
			/* \u6309\u94AE\u5361\u7247\uFF1A\u4E0E top-summary / asset-card \u540C\u98CE\u683C\uFF0C\u4EC5\u9AD8\u5EA6\u66F4\u5C0F */
			.lac-actionbar-card { display: flex; align-items: center; justify-content: space-between; gap: 10px; padding: 6px 10px; margin: 0px 14px 8px; border-radius: 8px; background: #23262F; box-shadow: 0 2px 8px rgba(0,0,0,0.18); }
			.lac-actionbar-search { position: relative; flex: 1; min-width: 0; }
			.lac-actionbar-search input { width: 100%; height: 30px; padding: 4px 8px 4px 30px; border-radius: 8px; border: 1px solid #3A3D46; background: #2A2D36; color: #F5F6FA; font-size: 13px; line-height: 20px; }
			.lac-actionbar-search input::placeholder { color: #A0A3B1; }
			.lac-actionbar-search .search-icon { position: absolute; left: 8px; top: 50%; transform: translateY(-50%); width: 16px; height: 16px; padding: 0; border: none; background: transparent; color: #C9CBD3; }
			.lac-actionbar-actions { display: flex; align-items: center; gap: 8px; }
			.lac-icon-btn { width: 32px; height: 32px; display: inline-flex; align-items: center; justify-content: center; border-radius: 8px; border: none !important; outline: none !important; background: transparent !important; box-shadow: none !important; color: #C9CBD3; cursor: pointer; }
			.lac-icon-btn.add { color: #f3e700; }
			.lac-icon-btn.back { display: inline-flex; color: #C9CBD3; }
			.lac-icon-btn:hover { filter: brightness(1.05); }
			.lac-icon-btn svg { width: 20px; height: 20px; display:block; }
			.lac-icon-btn svg * { stroke: currentColor !important; fill: none !important; stroke-width: 2 !important; }
			.lac-icon-btn.active { background: #2F3139; }
			/* \u9690\u85CF\u6001\u6837\u5F0F\uFF08\u5BF9\u9F50 costsetapp\uFF09 */
			.asset-card.hidden { opacity: 0.3; filter: grayscale(0.5); }
            /* \u6392\u5E8F\u83DC\u5355 */
            .lac-sort-menu { position: fixed; min-width: 160px; background: #23262F; color: #F5F6FA; border-radius: 10px; overflow: hidden; box-shadow: 0 8px 18px rgba(0,0,0,0.35); border: 1px solid #3A3D46; z-index: 9999; }
            .lac-sort-menu .menu-item { padding: 10px 14px; cursor: pointer; border-top: 1px solid #2E313A; transition: background 120ms ease, color 120ms ease; }
            .lac-sort-menu .menu-item:first-child { border-top: none; }
            .lac-sort-menu .menu-item:hover { background: rgba(255, 214, 0, 0.12); color: inherit; }
            .lac-sort-menu .menu-item.active { color: #FFD700; }

			/* \u5C0F\u4E8E 720px \u65F6\u7D27\u51D1\u5E03\u5C40 */
			@media (max-width: 720px) {
				.lac-actionbar-card { gap: 8px; }
				.lac-actionbar-search input { padding-left: 30px; }
			}
		`;
    document.head.appendChild(style);
  }
  injectHeaderFixStyles() {
    const STYLE_ID = "lac-costset-header-styles";
    if (document.getElementById(STYLE_ID))
      return;
    const style = document.createElement("style");
    style.id = STYLE_ID;
    style.textContent = `
			/* \u4EC5\u4F5C\u7528\u4E8E\u672C\u89C6\u56FE\uFF1A\u4FDD\u8BC1\u7A84\u5BBD\u65F6\u4E5F\u663E\u793A\u6807\u9898\u680F\u83DC\u5355/\u8FD4\u56DE\u533A\u57DF */
			.workspace-leaf[data-type="lac-costset-view"] .view-header { display: flex !important; }
			.workspace-leaf[data-type="lac-costset-view"] .view-header .view-actions { display: inline-flex !important; gap: 6px; }
			.workspace-leaf[data-type="lac-costset-view"] .view-header-title-container { min-width: 0; }
			.workspace-leaf[data-type="lac-costset-view"] .view-header-title { max-width: 60%; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
			@media (max-width: 720px) {
				.workspace-leaf[data-type="lac-costset-view"] .view-header-title { max-width: 45%; }
			}
			@media (max-width: 560px) {
				.workspace-leaf[data-type="lac-costset-view"] .view-header-title { max-width: 35%; }
			}
		`;
    document.head.appendChild(style);
  }
  openSortMenu(anchorEl, onSelect) {
    this.closeExistingSortMenu();
    const rect = anchorEl.getBoundingClientRect();
    const menu = document.createElement("div");
    menu.className = "lac-sort-menu";
    const buildItem = (label, value) => {
      const item = document.createElement("div");
      item.className = "menu-item" + (this.sortMode === value ? " active" : "");
      item.textContent = label;
      item.addEventListener("click", (ev) => {
        ev.stopPropagation();
        const next = this.sortMode === value ? "none" : value;
        onSelect(next);
        this.closeExistingSortMenu();
      });
      return item;
    };
    menu.appendChild(buildItem("\u6309\u65E5\u5747\u6210\u672C", "dailyDesc"));
    menu.appendChild(buildItem("\u6309\u4EF7\u683C", "priceDesc"));
    menu.appendChild(buildItem("\u6309\u8D2D\u5165\u65E5\u671F", "dateDesc"));
    document.body.appendChild(menu);
    const top = rect.bottom + 6;
    const left = Math.min(Math.max(8, rect.left), window.innerWidth - 180);
    menu.style.top = `${top}px`;
    menu.style.left = `${left}px`;
    const onDocClick = (ev) => {
      if (!menu.contains(ev.target))
        this.closeExistingSortMenu();
    };
    const onEsc = (ev) => {
      if (ev.key === "Escape")
        this.closeExistingSortMenu();
    };
    document.addEventListener("mousedown", onDocClick, { once: true });
    document.addEventListener("keydown", onEsc, { once: true });
    menu._cleanup = () => {
      document.removeEventListener("mousedown", onDocClick);
      document.removeEventListener("keydown", onEsc);
    };
  }
  // 让视图可被 setViewState 恢复与导航：保存/应用状态
  getState() {
    return { filePath: this.filePath };
  }
  async setState(state, result) {
    const nextPath = state == null ? void 0 : state.filePath;
    if (nextPath && nextPath !== this.filePath) {
      this.filePath = nextPath;
      await this.useFile(nextPath);
      return;
    }
    const { containerEl } = this;
    containerEl.empty();
    containerEl.addClass("page-root");
    const hint = containerEl.createDiv();
    hint.style.padding = "16px";
    hint.style.opacity = "0.8";
    hint.textContent = "\u4ECE\u6587\u4EF6\u7684\u53F3\u952E\u83DC\u5355\u4E2D\u9009\u62E9 \u201C\u7528 LaC.CostSet \u6253\u5F00\u201D\u3002";
  }
  closeExistingSortMenu() {
    const existing = document.querySelector(".lac-sort-menu");
    if (existing) {
      const cleanup = existing._cleanup;
      if (cleanup)
        cleanup();
      existing.remove();
    }
  }
  svgSearch() {
    return `
			<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
				<circle cx="11" cy="11" r="7" stroke="currentColor" stroke-width="2"/>
				<line x1="20" y1="20" x2="16.65" y2="16.65" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
			</svg>
		`;
  }
  svgPlus() {
    return `
			<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
				<path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
			</svg>
		`;
  }
  svgSort() {
    return `
			<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
				<path d="M8 9l4-4 4 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
				<path d="M16 15l-4 4-4-4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
			</svg>
		`;
  }
  svgBack() {
    return `
			<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
				<path d="M15 18l-6-6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
			</svg>
		`;
  }
  renderTopSummary(containerEl) {
    const calcDate = this.selectedDate || new Date();
    const activeAssets = this.assets.filter((asset) => asset.isActive(calcDate) && !asset.hidden);
    const filteredActiveAssets = this.applyTagFilter(activeAssets);
    const totalCost = filteredActiveAssets.reduce((sum, asset) => sum + asset.price, 0);
    const totalRecycle = filteredActiveAssets.reduce((sum, asset) => sum + asset.recyclePrice, 0);
    const totalDailyCost = filteredActiveAssets.reduce((sum, asset) => sum + asset.getDailyCost(calcDate), 0);
    const allTags = /* @__PURE__ */ new Set();
    this.assets.forEach((asset) => {
      (asset.tags || []).forEach((tag) => allTags.add(tag));
    });
    const collator = new Intl.Collator("zh", { sensitivity: "base", numeric: true });
    const tagsArray = Array.from(allTags).sort((a, b) => collator.compare(a, b));
    const currentYear = new Date().getFullYear();
    const maxYear = currentYear + 7;
    let minYear = currentYear;
    if (this.assets.length > 0) {
      const earliestYear = Math.min(...this.assets.map((asset) => asset.activeFrom.getFullYear()));
      minYear = earliestYear;
    }
    const trendPoints = this.calcTrendPoints(filteredActiveAssets, 30);
    console.log("\u6E32\u67D3\u9876\u90E8\u7EDF\u8BA1\u533A\u57DF:", {
      activeAssets: activeAssets.length,
      totalCost,
      totalRecycle,
      totalDailyCost,
      tagsArray,
      yearRange: { minYear, maxYear }
    });
    const topSummaryEl = containerEl.createDiv();
    const topSummaryProps = {
      totalDailyCost,
      totalCost,
      totalRecycle,
      tags: tagsArray,
      selectedTags: this.selectedTags,
      onTagClick: (tag) => {
        if (Array.isArray(tag)) {
          this.selectedTags = [...new Set(tag)];
        } else {
          if (this.selectedTags.includes(tag)) {
            this.selectedTags = this.selectedTags.filter((t) => t !== tag);
          } else {
            this.selectedTags = [...this.selectedTags, tag];
          }
        }
        this.renderAssets();
      },
      trendPoints,
      selectedDate: this.selectedDate,
      onChartSelect: (x) => {
        console.log("\u56FE\u8868\u9009\u62E9:", x);
      },
      onChartWidth: (w) => {
        console.log("\u56FE\u8868\u5BBD\u5EA6:", w);
      },
      onDatePick: (dateStr) => {
        console.log("\u65E5\u671F\u9009\u62E9:", dateStr);
        const selectedDate = new Date(dateStr);
        this.selectedDate = selectedDate;
        if (this.topSummaryComponent) {
          this.topSummaryComponent.updateSelection(null, selectedDate);
          const calcDate2 = selectedDate;
          const activeAssets2 = this.assets.filter((asset) => asset.isActive(calcDate2) && !asset.hidden);
          const filteredActiveAssets2 = this.applyTagFilter(activeAssets2);
          const totalCost2 = filteredActiveAssets2.reduce((sum, asset) => sum + asset.price, 0);
          const totalRecycle2 = filteredActiveAssets2.reduce((sum, asset) => sum + asset.recyclePrice, 0);
          const totalDailyCost2 = filteredActiveAssets2.reduce((sum, asset) => sum + asset.getDailyCost(calcDate2), 0);
          this.topSummaryComponent.updateNumbers(totalDailyCost2, totalCost2, totalRecycle2);
        }
        const { containerEl: containerEl2 } = this;
        const listEl = containerEl2.querySelector(".assets-container");
        if (listEl) {
          listEl.remove();
          const newList = containerEl2.createDiv("assets-container");
          this.renderAssetCards(newList);
        } else {
          this.renderAssets();
        }
      },
      minYear,
      maxYear
    };
    this.topSummaryComponent = new TopSummary(topSummaryEl, topSummaryProps);
    this.topSummaryComponent.render();
    this.renderChartWithProgressiveRefinement(filteredActiveAssets);
    console.log("\u9876\u90E8\u7EDF\u8BA1\u533A\u57DF\u5DF2\u521B\u5EFA:", topSummaryEl);
  }
  // 渐进式细化渲染（参考costsetapp实现）
  renderChartWithProgressiveRefinement(assets) {
    if (assets.length === 0)
      return;
    let maxActiveTo = 0;
    assets.forEach((a) => {
      const to = a.activeTo;
      if (to) {
        const t = to.getTime();
        if (t && t > maxActiveTo)
          maxActiveTo = t;
      }
    });
    const now = new Date();
    const maxDate = maxActiveTo && maxActiveTo > now.getTime() ? new Date(maxActiveTo) : now;
    const initialPoints = this.calcTrendPoints(assets, 30, void 0, maxDate);
    if (this.topSummaryComponent) {
      this.topSummaryComponent.updateChart(initialPoints);
    }
    setTimeout(async () => {
      const segPromises = [];
      for (let i = 0; i < initialPoints.length - 1; i++) {
        segPromises.push(
          Promise.resolve(this.calcTrendPoints(assets, 30, initialPoints[i].date, initialPoints[i + 1].date)).then((segPoints) => {
            if (i > 0)
              return segPoints.slice(1);
            return segPoints;
          })
        );
      }
      const segResults = await Promise.all(segPromises);
      const finePoints = segResults.flat();
      if (this.topSummaryComponent) {
        this.topSummaryComponent.updateChart(finePoints);
      }
    }, 500);
  }
  // 将标签筛选应用到给定资产集
  applyTagFilter(input) {
    if (!this.selectedTags || this.selectedTags.length === 0)
      return input;
    return input.filter((a) => {
      var _a;
      return (_a = a.tags) == null ? void 0 : _a.some((t) => this.selectedTags.includes(t));
    });
  }
  calcTrendPoints(assets, count, fromDate, toDate) {
    if (assets.length === 0)
      return [];
    const now = new Date();
    const minDate = fromDate || new Date(Math.min(...assets.map((a) => a.activeFrom.getTime())));
    const maxActiveTo = Math.max(...assets.map((a) => {
      const to = a.activeTo;
      if (to) {
        const t = to.getTime();
        if (!isNaN(t))
          return t;
      }
      return now.getTime();
    }));
    const maxDate = toDate || new Date(maxActiveTo);
    const points = [];
    for (let i = 0; i < count; i++) {
      const t = minDate.getTime() + (maxDate.getTime() - minDate.getTime()) * i / (count - 1);
      const date = new Date(t);
      let totalCost = 0;
      assets.forEach((a) => {
        const cost = this.calcDailyCost(a.price, a.recyclePrice, a.activeFrom, a.activeTo, date);
        if (isFinite(cost))
          totalCost += cost;
      });
      points.push({ date, value: totalCost });
    }
    return points;
  }
  // 计算日均成本（参考costsetapp算法）
  calcDailyCost(price, recycle, from, to, now) {
    if (!from)
      return 0;
    const days = Math.floor((now.getTime() - from.getTime()) / 864e5) + 1;
    if (!to || to > now) {
      recycle = 0;
    }
    if (!isFinite(days) || days <= 0)
      return 0;
    const result = (Number(price) - Number(recycle || 0)) / days;
    return isFinite(result) ? result : 0;
  }
};

// components/settings/LacCostSetSettingTab.ts
var import_obsidian4 = require("obsidian");
var LacCostSetSettingTab = class extends import_obsidian4.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Lac.CostSet \u8BBE\u7F6E" });
    containerEl.createEl("p", {
      text: "\u91CD\u8981\uFF1A\u5165\u53E3\u6587\u4EF6\u4E0E\u8D44\u4EA7\u6587\u4EF6\u7684\u201C\u5185\u5BB9\u683C\u5F0F\u4E3A TOML\u201D\uFF0C\u6587\u4EF6\u6269\u5C55\u540D\u53EF\u4E3A .md\u3002\u5141\u8BB8 # \u5F00\u5934\u7684\u6CE8\u91CA\u3002\u552F\u4E00\u7684\u975E TOML \u4F8B\u5916\u662F\uFF1A\u6587\u4EF6\u6B63\u6587\u4E2D\u7684 [[\u8D44\u4EA7\u6587\u4EF6\u540D]] \u53CC\u94FE\u53EF\u7701\u7565\u5F15\u53F7\uFF0C\u63D2\u4EF6\u5728\u89E3\u6790\u65F6\u4F1A\u4E34\u65F6\u4E3A\u5176\u52A0\u4E0A\u5F15\u53F7\u540E\u6309 TOML \u5904\u7406\u3002\u9664\u8FD9\u70B9\u5916\uFF0C\u4E0D\u5E94\u6DF7\u5165\u666E\u901A Markdown \u6587\u672C\u3002",
      cls: "setting-item-description"
    });
    const entryExample = `# \u5165\u53E3\u6587\u4EF6\u6700\u5C0F\u793A\u4F8B

# \u9876\u90E8 TOML\uFF1A\u5FC5\u987B\u6EE1\u8DB3
# type = "root"
# renders = ["costset"]

type = "root"
renders = ["costset"]

# \u6B63\u6587\uFF1A\u7528\u53CC\u94FE\u5217\u51FA\u8D44\u4EA7\u6587\u4EF6\u540D\uFF08\u4E0D\u9700\u8981\u6269\u5C55\u540D\uFF09

[[\u952E\u76D8]]
[[\u8033\u673A]]
`;
    containerEl.createEl("pre", { text: entryExample, cls: "setting-item-description" });
    containerEl.createEl("p", {
      text: "\u8D44\u4EA7\u6587\u4EF6\u540C\u6837\u662F Markdown\uFF0C\u4F46\u5185\u5BB9\u4EE5 TOML \u5B57\u6BB5\u4E3A\u4E3B\uFF08\u63D2\u4EF6\u4F1A\u4FDD\u7559\u4F60\u5199\u7684\u6CE8\u91CA\uFF09\u3002\u4EE5\u4E0B\u4E3A\u6700\u5C0F\u793A\u4F8B\uFF1A",
      cls: "setting-item-description"
    });
    const assetExample = `name = "\u952E\u76D8"

[style]
icon = "\u2328\uFE0F"

[detail]
price = 399
active_from = "2024-01-01"
active_to = ""
recycle_price = 0
tags = ["\u6570\u7801", "\u952E\u76D8"]
`;
    containerEl.createEl("pre", { text: assetExample, cls: "setting-item-description" });
    containerEl.createEl("p", {
      text: "\u7528\u6CD5\uFF1A\u5728\u201C\u5165\u53E3\u6587\u4EF6\u201D\u4E0A\u53F3\u952E \u2192 \u9009\u62E9\u201C\u7528 LaC.CostSet \u6253\u5F00\u201D\u3002\u4E5F\u53EF\u5728\u547D\u4EE4\u9762\u677F\u6267\u884C\u201C\u6253\u5F00LaC.CostSet\u201D\uFF08\u5C06\u4F7F\u7528\u4E0B\u65B9\u914D\u7F6E\u7684\u5165\u53E3\u6587\u4EF6\uFF09\u3002",
      cls: "setting-item-description"
    });
    new import_obsidian4.Setting(containerEl).setName("\u5165\u53E3\u6587\u4EF6").setDesc("\u4F5C\u4E3A\u8D44\u4EA7\u5165\u53E3\u7684 Markdown \u6587\u4EF6\u8DEF\u5F84\uFF0C\u4F8B\u5982 costset/costset.md").addText((text) => text.setPlaceholder("costset/costset.md").setValue(this.plugin.settings.entryFile || "costset/costset.md").onChange(async (value) => {
      this.plugin.settings.entryFile = (value == null ? void 0 : value.trim()) || "costset/costset.md";
      await this.plugin.saveSettings();
      this.plugin.assetRepository = new AssetRepository(this.app, this.plugin.settings.entryFile);
    }));
    new import_obsidian4.Setting(containerEl).setName("\u542F\u7528\u53F3\u952E\u83DC\u5355 \u201C\u7528 LaC.CostSet \u6253\u5F00\u201D").setDesc("\u5728 Markdown \u6587\u4EF6\u7684\u53F3\u952E\u83DC\u5355\u4E2D\u663E\u793A\u5165\u53E3").addToggle((toggle) => toggle.setValue(this.plugin.settings.enableContextMenu).onChange(async (value) => {
      this.plugin.settings.enableContextMenu = !!value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian4.Setting(containerEl).setName("\u9ED8\u8BA4\u6392\u5E8F").setDesc("\u6253\u5F00\u89C6\u56FE\u65F6\u7684\u521D\u59CB\u6392\u5E8F\u65B9\u5F0F").addDropdown((drop) => {
      drop.addOption("none", "\u6587\u672C\u987A\u5E8F");
      drop.addOption("dailyDesc", "\u65E5\u5747\u4EF7\u683C");
      drop.addOption("priceDesc", "\u4EF7\u683C");
      drop.addOption("dateDesc", "\u8D2D\u5165\u65E5\u671F");
      drop.setValue(this.plugin.settings.defaultSort || "none");
      drop.onChange(async (value) => {
        const v = value;
        this.plugin.settings.defaultSort = v;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian4.Setting(containerEl).setName("\u9ED8\u8BA4\u56FE\u6807").setDesc("\u65B0\u8D44\u4EA7\u7684\u9ED8\u8BA4\u56FE\u6807\uFF0C\u4EC5\u652F\u6301 1 \u4E2A Emoji").addText((text) => {
      const sanitizeToFirstEmoji = (input) => {
        const m = (input || "").match(/[\uD800-\uDBFF][\uDC00-\uDFFF]/);
        return m ? m[0] : "";
      };
      text.setPlaceholder("\u{1F4E6}").setValue(this.plugin.settings.defaultIcon).onChange(async (value) => {
        const first = sanitizeToFirstEmoji(value);
        if (text.inputEl && text.inputEl.value !== first) {
          text.inputEl.value = first;
        }
        this.plugin.settings.defaultIcon = first;
        await this.plugin.saveSettings();
      });
      const inputEl = text.inputEl;
      if (inputEl) {
        inputEl.addEventListener("paste", () => {
          setTimeout(() => {
            const first = sanitizeToFirstEmoji(inputEl.value || "");
            if (inputEl.value !== first)
              inputEl.value = first;
            this.plugin.settings.defaultIcon = first;
            this.plugin.saveSettings();
          }, 0);
        });
      }
    });
  }
};

// main.ts
var LacCostSetPlugin = class extends import_obsidian5.Plugin {
  async onload() {
    await this.loadSettings();
    this.assetRepository = new AssetRepository(this.app, this.settings.entryFile || "costset/costset.md");
    this.registerView("lac-costset-view", (leaf) => new AssetManagerView(leaf, this.assetRepository));
    this.app.workspace.onLayoutReady(() => {
      this.app.workspace.detachLeavesOfType("lac-costset-view");
    });
    this.registerEvent(
      this.app.workspace.on("file-menu", (menu, file) => {
        if (!this.settings.enableContextMenu)
          return;
        if (file instanceof import_obsidian5.TFile && file.extension === "md") {
          menu.addItem((item) => {
            item.setTitle("\u7528 LaC.CostSet \u6253\u5F00").setIcon("package").onClick(() => {
              const leaf = this.app.workspace.getLeaf("tab");
              leaf.setViewState({
                type: "lac-costset-view",
                state: { filePath: file.path },
                active: true
              });
              this.app.workspace.revealLeaf(leaf);
            });
          });
        }
      })
    );
    this.addCommand({
      id: "open-lac-costset",
      name: "\u6253\u5F00LaC.CostSet",
      callback: async () => {
        const entryPath = this.settings.entryFile || "costset/costset.md";
        const ensureFolderExists = async (folderPath) => {
          const folder = this.app.vault.getAbstractFileByPath(folderPath);
          if (!folder) {
            await this.app.vault.createFolder(folderPath);
          }
        };
        const entryFile = this.app.vault.getAbstractFileByPath(entryPath);
        if (!entryFile) {
          const parts = entryPath.split("/");
          const folderPath = parts.slice(0, -1).join("/") || "";
          if (folderPath)
            await ensureFolderExists(folderPath);
          const sampleEntry = `# LaC.CostSet \u5165\u53E3

# \u4EE5\u4E0B\u4E3A\u5165\u53E3\u5143\u6570\u636E\uFF08TOML\uFF09
# \u8981\u6C42\uFF1Atype = "root" \u4E14 renders \u5305\u542B "costset"

type = "root"
renders = ["costset"]

# \u4EE5\u4E0B\u4E3A\u793A\u4F8B\u8D44\u4EA7\uFF0C\u60A8\u53EF\u4EE5\u5220\u9664\u5E76\u66FF\u6362\u4E3A\u81EA\u5DF1\u7684\u8D44\u4EA7\uFF1A

[[\u6F14\u793A-\u952E\u76D8]]
[[\u6F14\u793A-\u8033\u673A]]
[[\u6F14\u793A-\u8DEF\u7531\u5668]]
`;
          await this.app.vault.adapter.write(entryPath, sampleEntry);
          const makeAssetToml = (name, icon, price, from, to, recycle, tags) => {
            const lines = [];
            lines.push(`name = "${name}"`);
            lines.push("");
            lines.push("[style]");
            lines.push(`icon = "${icon}"`);
            lines.push("");
            lines.push("[detail]");
            lines.push(`price = ${price}`);
            lines.push(`active_from = "${from}"`);
            lines.push(`active_to = "${to || ""}"`);
            lines.push(`recycle_price = ${recycle != null ? recycle : 0}`);
            lines.push(`tags = [${(tags || []).map((t) => `"${t}"`).join(", ")}]`);
            lines.push("");
            return lines.join("\n");
          };
          const assetsFolder = folderPath || "costset";
          await ensureFolderExists(assetsFolder);
          const assetDefs = [
            { id: "\u6F14\u793A-\u952E\u76D8", icon: "\u2328\uFE0F", price: 399, from: "2024-01-01", to: "", recycle: 0, tags: ["\u6570\u7801", "\u952E\u76D8"] },
            { id: "\u6F14\u793A-\u8033\u673A", icon: "\u{1F3A7}", price: 599, from: "2024-03-15", to: "", recycle: 0, tags: ["\u6570\u7801", "\u8033\u673A"] },
            { id: "\u6F14\u793A-\u8DEF\u7531\u5668", icon: "\u{1F4F6}", price: 329, from: "2023-11-20", to: "", recycle: 50, tags: ["\u7F51\u7EDC"] }
          ];
          for (const a of assetDefs) {
            const filePath = `${assetsFolder}/${a.id}.md`;
            const exists = this.app.vault.getAbstractFileByPath(filePath);
            if (!exists) {
              await this.app.vault.adapter.write(filePath, makeAssetToml(a.id, a.icon, a.price, a.from, a.to, a.recycle, a.tags));
            }
          }
        }
        let invalid = false;
        try {
          const f = this.app.vault.getAbstractFileByPath(entryPath);
          if (f && f instanceof import_obsidian5.TFile) {
            const raw = await this.app.vault.read(f);
            const tomlCandidate = raw.replace(/\[\[([^\]]+)\]\]/g, (_m, p1) => `"${String(p1).trim()}"`);
            const hasTomlKv = /(^|\n)\s*[A-Za-z0-9_.]+\s*=\s*[^\n]+/m.test(tomlCandidate);
            const typeMatch = tomlCandidate.match(/(^|\n)\s*type\s*=\s*"([^"]*)"/m);
            const typeVal = (typeMatch == null ? void 0 : typeMatch[2]) || "";
            const rendersMatch = tomlCandidate.match(/(^|\n)\s*renders\s*=\s*\[([\s\S]*?)\]/m);
            let rendersHasCostset = false;
            if (rendersMatch && rendersMatch[2]) {
              const arrText = rendersMatch[2];
              rendersHasCostset = /\"costset\"/i.test(arrText) || /(^|,|\s)costset(,|\s|$)/i.test(arrText);
            }
            invalid = !hasTomlKv || typeVal !== "root" || !rendersHasCostset;
          } else {
            invalid = true;
          }
        } catch (_) {
          invalid = true;
        }
        if (invalid)
          new import_obsidian5.Notice('\u5165\u53E3\u6587\u4EF6\u5185\u5BB9\u683C\u5F0F\u4E0D\u6B63\u786E\uFF1A\u9700\u4E3A TOML\uFF0C\u4E14 type = "root"\uFF0Crenders \u5FC5\u987B\u5305\u542B "costset"');
        this.assetRepository = new AssetRepository(this.app, entryPath);
        const leaf = this.app.workspace.getLeaf("tab");
        await leaf.setViewState({
          type: "lac-costset-view",
          state: { filePath: entryPath },
          active: true
        });
        this.app.workspace.revealLeaf(leaf);
      }
    });
    this.addSettingTab(new LacCostSetSettingTab(this.app, this));
    this.addStatusBarItem().setText("Lac-CostSet");
  }
  onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJ0eXBlcy50cyIsICJyZXBvc2l0b3JpZXMvQXNzZXRSZXBvc2l0b3J5LnRzIiwgIm1vZGVscy9Bc3NldC50cyIsICJjb21wb25lbnRzL21vZGFscy9Bc3NldEZvcm1Nb2RhbC50cyIsICJjb21wb25lbnRzL21vZGFscy9Db25maXJtTW9kYWwudHMiLCAiY29tcG9uZW50cy9Bc3NldE1hbmFnZXJWaWV3LnRzIiwgImNvbXBvbmVudHMvVGFnUGFuZWwudHMiLCAiY29tcG9uZW50cy9Ub3BTdW1tYXJ5LnRzIiwgImNvbXBvbmVudHMvc2V0dGluZ3MvTGFjQ29zdFNldFNldHRpbmdUYWIudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IEFwcCwgUGx1Z2luLCBURmlsZSwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgTGFjQ29zdFNldFNldHRpbmdzLCBERUZBVUxUX1NFVFRJTkdTIH0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgeyBBc3NldFJlcG9zaXRvcnkgfSBmcm9tICcuL3JlcG9zaXRvcmllcy9Bc3NldFJlcG9zaXRvcnknO1xuaW1wb3J0IHsgQXNzZXRNYW5hZ2VyVmlldyB9IGZyb20gJy4vY29tcG9uZW50cy9Bc3NldE1hbmFnZXJWaWV3JztcbmltcG9ydCB7IEFzc2V0Rm9ybU1vZGFsIH0gZnJvbSAnLi9jb21wb25lbnRzL21vZGFscy9Bc3NldEZvcm1Nb2RhbCc7XG5pbXBvcnQgeyBMYWNDb3N0U2V0U2V0dGluZ1RhYiB9IGZyb20gJy4vY29tcG9uZW50cy9zZXR0aW5ncy9MYWNDb3N0U2V0U2V0dGluZ1RhYic7XG5cblxuLy8gXHU0RTNCXHU2M0QyXHU0RUY2XHU3QzdCXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMYWNDb3N0U2V0UGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcblx0c2V0dGluZ3M6IExhY0Nvc3RTZXRTZXR0aW5ncztcblx0YXNzZXRSZXBvc2l0b3J5OiBBc3NldFJlcG9zaXRvcnk7XG5cblx0YXN5bmMgb25sb2FkKCkge1xuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cblx0XHQvLyBcdTUyMURcdTU5Q0JcdTUzMTZBc3NldFJlcG9zaXRvcnlcdUZGMDhcdTRGN0ZcdTc1MjhcdThCQkVcdTdGNkVcdTRFMkRcdTc2ODRcdTUxNjVcdTUzRTNcdTY1ODdcdTRFRjZcdThERUZcdTVGODRcdUZGMDlcblx0XHR0aGlzLmFzc2V0UmVwb3NpdG9yeSA9IG5ldyBBc3NldFJlcG9zaXRvcnkodGhpcy5hcHAsIHRoaXMuc2V0dGluZ3MuZW50cnlGaWxlIHx8ICdjb3N0c2V0L2Nvc3RzZXQubWQnKTtcblxuXHRcdC8vIFx1NkNFOFx1NTE4Q1x1ODlDNlx1NTZGRVxuXHRcdHRoaXMucmVnaXN0ZXJWaWV3KCdsYWMtY29zdHNldC12aWV3JywgKGxlYWYpID0+IG5ldyBBc3NldE1hbmFnZXJWaWV3KGxlYWYsIHRoaXMuYXNzZXRSZXBvc2l0b3J5KSk7XG5cblx0XHQvLyBcdTkwN0ZcdTUxNERcdTU0MkZcdTUyQThcdTY1RjZcdTgxRUFcdTUyQThcdTYwNjJcdTU5MERcdTY3MkNcdTYzRDJcdTRFRjZcdTc2ODRcdTg5QzZcdTU2RkVcdUZGMDhcdTU3MjhcdTVFMDNcdTVDNDBcdTYwNjJcdTU5MERcdTVCOENcdTYyMTBcdTU0MEVcdTZFMDVcdTc0MDZcdUZGMDlcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub25MYXlvdXRSZWFkeSgoKSA9PiB7XG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuZGV0YWNoTGVhdmVzT2ZUeXBlKCdsYWMtY29zdHNldC12aWV3Jyk7XG5cdFx0fSk7XG5cblx0XHQvLyBcdTZERkJcdTUyQTBcdTY1ODdcdTRFRjZcdTgzRENcdTUzNTVcdTk4Nzlcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQoXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2ZpbGUtbWVudScsIChtZW51LCBmaWxlKSA9PiB7XG5cdFx0XHRcdGlmICghdGhpcy5zZXR0aW5ncy5lbmFibGVDb250ZXh0TWVudSkgcmV0dXJuO1xuXHRcdFx0XHRpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlICYmIGZpbGUuZXh0ZW5zaW9uID09PSAnbWQnKSB7XG5cdFx0XHRcdFx0bWVudS5hZGRJdGVtKChpdGVtKSA9PiB7XG5cdFx0XHRcdFx0XHRpdGVtXG5cdFx0XHRcdFx0XHRcdC5zZXRUaXRsZSgnXHU3NTI4IExhQy5Db3N0U2V0IFx1NjI1M1x1NUYwMCcpXG5cdFx0XHRcdFx0XHRcdC5zZXRJY29uKCdwYWNrYWdlJylcblx0XHRcdFx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdC8vIFx1NEY3Rlx1NzUyOCBzZXRWaWV3U3RhdGUgXHU2MjUzXHU1RjAwXHU4OUM2XHU1NkZFXHVGRjBDXHU3ODZFXHU0RkREXHU2NjNFXHU3OTNBXHU2ODA3XHU1MUM2XHU2ODA3XHU5ODk4XHU2ODBGXHU0RTBFXHU1QkZDXHU4MjJBXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgbGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCd0YWInKTtcblx0XHRcdFx0XHRcdFx0XHRsZWFmLnNldFZpZXdTdGF0ZSh7XG5cdFx0XHRcdFx0XHRcdFx0XHR0eXBlOiAnbGFjLWNvc3RzZXQtdmlldycsXG5cdFx0XHRcdFx0XHRcdFx0XHRzdGF0ZTogeyBmaWxlUGF0aDogZmlsZS5wYXRoIH0sXG5cdFx0XHRcdFx0XHRcdFx0XHRhY3RpdmU6IHRydWVcblx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2UucmV2ZWFsTGVhZihsZWFmKTtcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cdFx0KTtcblxuXHRcdC8vIFx1NTIyMFx1OTY2NFx1NTE3Nlx1NEVENlx1NTQ3RFx1NEVFNFx1RkYwQ1x1NEVDNVx1NEZERFx1NzU1OVx1MjAxQ1x1NjI1M1x1NUYwMExhQy5Db3N0U2V0XHUyMDFEXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiAnb3Blbi1sYWMtY29zdHNldCcsXG5cdFx0XHRuYW1lOiAnXHU2MjUzXHU1RjAwTGFDLkNvc3RTZXQnLFxuXHRcdFx0Y2FsbGJhY2s6IGFzeW5jICgpID0+IHtcblx0XHRcdFx0Y29uc3QgZW50cnlQYXRoID0gdGhpcy5zZXR0aW5ncy5lbnRyeUZpbGUgfHwgJ2Nvc3RzZXQvY29zdHNldC5tZCc7XG5cdFx0XHRcdGNvbnN0IGVuc3VyZUZvbGRlckV4aXN0cyA9IGFzeW5jIChmb2xkZXJQYXRoOiBzdHJpbmcpID0+IHtcblx0XHRcdFx0XHRjb25zdCBmb2xkZXIgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZm9sZGVyUGF0aCk7XG5cdFx0XHRcdFx0aWYgKCFmb2xkZXIpIHtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcihmb2xkZXJQYXRoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0Ly8gMSkgXHU4MkU1XHU1MTY1XHU1M0UzXHU2NTg3XHU0RUY2XHU0RTBEXHU1QjU4XHU1NzI4XHVGRjFBXHU1MjFCXHU1RUZBXHU1RTc2XHU1MTk5XHU1MTY1XHU3OTNBXHU0RjhCXHU1MTg1XHU1QkI5XHVGRjA4XHU1NDJCXHU3OTNBXHU0RjhCXHU4RDQ0XHU0RUE3XHU2NTg3XHU0RUY2XHVGRjA5XG5cdFx0XHRcdGNvbnN0IGVudHJ5RmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChlbnRyeVBhdGgpO1xuXHRcdFx0XHRpZiAoIWVudHJ5RmlsZSkge1xuXHRcdFx0XHRcdGNvbnN0IHBhcnRzID0gZW50cnlQYXRoLnNwbGl0KCcvJyk7XG5cdFx0XHRcdFx0Y29uc3QgZm9sZGVyUGF0aCA9IHBhcnRzLnNsaWNlKDAsIC0xKS5qb2luKCcvJykgfHwgJyc7XG5cdFx0XHRcdFx0aWYgKGZvbGRlclBhdGgpIGF3YWl0IGVuc3VyZUZvbGRlckV4aXN0cyhmb2xkZXJQYXRoKTtcblxuXHRcdFx0XHRcdC8vIFx1NTE5OVx1NTE2NVx1NzkzQVx1NEY4Qlx1NTE2NVx1NTNFM1x1NTE4NVx1NUJCOVx1RkYwOFx1NTQyQlx1NUZDNVx1ODk4MSBUT01MIFx1NTkzNFx1OTBFOCArIFx1NkYxNFx1NzkzQVx1NTNDQ1x1OTRGRVx1RkYwOVxuXHRcdFx0XHRcdGNvbnN0IHNhbXBsZUVudHJ5ID0gYCMgTGFDLkNvc3RTZXQgXHU1MTY1XHU1M0UzXFxuXFxuIyBcdTRFRTVcdTRFMEJcdTRFM0FcdTUxNjVcdTUzRTNcdTUxNDNcdTY1NzBcdTYzNkVcdUZGMDhUT01MXHVGRjA5XFxuIyBcdTg5ODFcdTZDNDJcdUZGMUF0eXBlID0gXFxcInJvb3RcXFwiIFx1NEUxNCByZW5kZXJzIFx1NTMwNVx1NTQyQiBcXFwiY29zdHNldFxcXCJcXG5cXG50eXBlID0gXFxcInJvb3RcXFwiXFxucmVuZGVycyA9IFtcXFwiY29zdHNldFxcXCJdXFxuXFxuIyBcdTRFRTVcdTRFMEJcdTRFM0FcdTc5M0FcdTRGOEJcdThENDRcdTRFQTdcdUZGMENcdTYwQThcdTUzRUZcdTRFRTVcdTUyMjBcdTk2NjRcdTVFNzZcdTY2RkZcdTYzNjJcdTRFM0FcdTgxRUFcdTVERjFcdTc2ODRcdThENDRcdTRFQTdcdUZGMUFcXG5cXG5bW1x1NkYxNFx1NzkzQS1cdTk1MkVcdTc2RDhdXVxcbltbXHU2RjE0XHU3OTNBLVx1ODAzM1x1NjczQV1dXFxuW1tcdTZGMTRcdTc5M0EtXHU4REVGXHU3NTMxXHU1NjY4XV1cXG5gO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZW50cnlQYXRoLCBzYW1wbGVFbnRyeSk7XG5cblx0XHRcdFx0XHQvLyBcdTU3MjhcdTU0MENcdTc2RUVcdTVGNTVcdTUyMUJcdTVFRkFcdTc5M0FcdTRGOEJcdThENDRcdTRFQTdcdTY1ODdcdTRFRjZcdUZGMDhUT01MIFx1NTE4NVx1NUJCOVx1RkYwOVxuXHRcdFx0XHRcdGNvbnN0IG1ha2VBc3NldFRvbWwgPSAobmFtZTogc3RyaW5nLCBpY29uOiBzdHJpbmcsIHByaWNlOiBudW1iZXIsIGZyb206IHN0cmluZywgdG8/OiBzdHJpbmcsIHJlY3ljbGU/OiBudW1iZXIsIHRhZ3M/OiBzdHJpbmdbXSkgPT4ge1xuXHRcdFx0XHRcdFx0Y29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG5cdFx0XHRcdFx0XHRsaW5lcy5wdXNoKGBuYW1lID0gXCIke25hbWV9XCJgKTtcblx0XHRcdFx0XHRcdGxpbmVzLnB1c2goJycpO1xuXHRcdFx0XHRcdFx0bGluZXMucHVzaCgnW3N0eWxlXScpO1xuXHRcdFx0XHRcdFx0bGluZXMucHVzaChgaWNvbiA9IFwiJHtpY29ufVwiYCk7XG5cdFx0XHRcdFx0XHRsaW5lcy5wdXNoKCcnKTtcblx0XHRcdFx0XHRcdGxpbmVzLnB1c2goJ1tkZXRhaWxdJyk7XG5cdFx0XHRcdFx0XHRsaW5lcy5wdXNoKGBwcmljZSA9ICR7cHJpY2V9YCk7XG5cdFx0XHRcdFx0XHRsaW5lcy5wdXNoKGBhY3RpdmVfZnJvbSA9IFwiJHtmcm9tfVwiYCk7XG5cdFx0XHRcdFx0XHRsaW5lcy5wdXNoKGBhY3RpdmVfdG8gPSBcIiR7dG8gfHwgJyd9XCJgKTtcblx0XHRcdFx0XHRcdGxpbmVzLnB1c2goYHJlY3ljbGVfcHJpY2UgPSAke3JlY3ljbGUgPz8gMH1gKTtcblx0XHRcdFx0XHRcdGxpbmVzLnB1c2goYHRhZ3MgPSBbJHsodGFncyB8fCBbXSkubWFwKHQgPT4gYFwiJHt0fVwiYCkuam9pbignLCAnKX1dYCk7XG5cdFx0XHRcdFx0XHRsaW5lcy5wdXNoKCcnKTtcblx0XHRcdFx0XHRcdHJldHVybiBsaW5lcy5qb2luKCdcXG4nKTtcblx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdFx0Y29uc3QgYXNzZXRzRm9sZGVyID0gZm9sZGVyUGF0aCB8fCAnY29zdHNldCc7XG5cdFx0XHRcdFx0YXdhaXQgZW5zdXJlRm9sZGVyRXhpc3RzKGFzc2V0c0ZvbGRlcik7XG5cdFx0XHRcdFx0Y29uc3QgYXNzZXREZWZzID0gW1xuXHRcdFx0XHRcdFx0eyBpZDogJ1x1NkYxNFx1NzkzQS1cdTk1MkVcdTc2RDgnLCBpY29uOiAnXHUyMzI4XHVGRTBGJywgcHJpY2U6IDM5OSwgZnJvbTogJzIwMjQtMDEtMDEnLCB0bzogJycsIHJlY3ljbGU6IDAsIHRhZ3M6IFsnXHU2NTcwXHU3ODAxJywgJ1x1OTUyRVx1NzZEOCddIH0sXG5cdFx0XHRcdFx0XHR7IGlkOiAnXHU2RjE0XHU3OTNBLVx1ODAzM1x1NjczQScsIGljb246ICdcdUQ4M0NcdURGQTcnLCBwcmljZTogNTk5LCBmcm9tOiAnMjAyNC0wMy0xNScsIHRvOiAnJywgcmVjeWNsZTogMCwgdGFnczogWydcdTY1NzBcdTc4MDEnLCAnXHU4MDMzXHU2NzNBJ10gfSxcblx0XHRcdFx0XHRcdHsgaWQ6ICdcdTZGMTRcdTc5M0EtXHU4REVGXHU3NTMxXHU1NjY4JywgaWNvbjogJ1x1RDgzRFx1RENGNicsIHByaWNlOiAzMjksIGZyb206ICcyMDIzLTExLTIwJywgdG86ICcnLCByZWN5Y2xlOiA1MCwgdGFnczogWydcdTdGNTFcdTdFREMnXSB9XG5cdFx0XHRcdFx0XTtcblx0XHRcdFx0XHRmb3IgKGNvbnN0IGEgb2YgYXNzZXREZWZzKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBmaWxlUGF0aCA9IGAke2Fzc2V0c0ZvbGRlcn0vJHthLmlkfS5tZGA7XG5cdFx0XHRcdFx0XHRjb25zdCBleGlzdHMgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xuXHRcdFx0XHRcdFx0aWYgKCFleGlzdHMpIHtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci53cml0ZShmaWxlUGF0aCwgbWFrZUFzc2V0VG9tbChhLmlkLCBhLmljb24sIGEucHJpY2UsIGEuZnJvbSwgYS50bywgYS5yZWN5Y2xlLCBhLnRhZ3MpKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyAyKSBcdTY4MjFcdTlBOENcdTUxNjVcdTUzRTNcdTY1ODdcdTRFRjZcdTY4M0NcdTVGMEZcdUZGMUFcdTVFOTRcdTRFM0EgVE9NTFx1RkYwOFx1NjIxNlx1NTNFRlx1N0VDRlx1NEUzNFx1NjVGNlx1OEY2Q1x1NjM2Mlx1NEUzQVx1NTNFRlx1ODlFM1x1Njc5MFx1NzY4NCBUT01MXHVGRjA5XHVGRjBDXHU0RTE0IHR5cGUgPSBcInJvb3RcIiBcdTRFMTQgcmVuZGVycyBcdTUzMDVcdTU0MkIgXCJjb3N0c2V0XCJcblx0XHRcdFx0bGV0IGludmFsaWQgPSBmYWxzZTtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRjb25zdCBmID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGVudHJ5UGF0aCk7XG5cdFx0XHRcdFx0aWYgKGYgJiYgZiBpbnN0YW5jZW9mIFRGaWxlKSB7XG5cdFx0XHRcdFx0XHRjb25zdCByYXcgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGYpO1xuXHRcdFx0XHRcdFx0Ly8gXHU1QzA2IFtbLi4uXV0gXHU0RTM0XHU2NUY2XHU2NkZGXHU2MzYyXHU0RTNBIFwiLi4uXCJcdUZGMENcdTkwN0ZcdTUxNERcdTVGNzFcdTU0Q0QgVE9NTCBcdTUyMjRcdTY1QURcblx0XHRcdFx0XHRcdGNvbnN0IHRvbWxDYW5kaWRhdGUgPSByYXcucmVwbGFjZSgvXFxbXFxbKFteXFxdXSspXFxdXFxdL2csIChfbSwgcDEpID0+IGBcIiR7U3RyaW5nKHAxKS50cmltKCl9XCJgKTtcblx0XHRcdFx0XHRcdC8vIFx1NjYyRlx1NTQyNlx1NTMwNVx1NTQyQlx1NEVGQlx1NjEwRiBUT01MIFx1OTUyRVx1NTAzQ1x1OEJFRFx1NTNFNVxuXHRcdFx0XHRcdFx0Y29uc3QgaGFzVG9tbEt2ID0gLyhefFxcbilcXHMqW0EtWmEtejAtOV8uXStcXHMqPVxccypbXlxcbl0rL20udGVzdCh0b21sQ2FuZGlkYXRlKTtcblx0XHRcdFx0XHRcdC8vIFx1NjNEMFx1NTNENlx1NUU3Nlx1NjgyMVx1OUE4QyB0eXBlXG5cdFx0XHRcdFx0XHRjb25zdCB0eXBlTWF0Y2ggPSB0b21sQ2FuZGlkYXRlLm1hdGNoKC8oXnxcXG4pXFxzKnR5cGVcXHMqPVxccypcIihbXlwiXSopXCIvbSk7XG5cdFx0XHRcdFx0XHRjb25zdCB0eXBlVmFsID0gdHlwZU1hdGNoPy5bMl0gfHwgJyc7XG5cdFx0XHRcdFx0XHQvLyBcdTYzRDBcdTUzRDZcdTVFNzZcdTY4MjFcdTlBOEMgcmVuZGVyc1x1RkYwOFx1NjU3MFx1N0VDNFx1RkYwOVxuXHRcdFx0XHRcdFx0Y29uc3QgcmVuZGVyc01hdGNoID0gdG9tbENhbmRpZGF0ZS5tYXRjaCgvKF58XFxuKVxccypyZW5kZXJzXFxzKj1cXHMqXFxbKFtcXHNcXFNdKj8pXFxdL20pO1xuXHRcdFx0XHRcdFx0bGV0IHJlbmRlcnNIYXNDb3N0c2V0ID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRpZiAocmVuZGVyc01hdGNoICYmIHJlbmRlcnNNYXRjaFsyXSkge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBhcnJUZXh0ID0gcmVuZGVyc01hdGNoWzJdO1xuXHRcdFx0XHRcdFx0XHRyZW5kZXJzSGFzQ29zdHNldCA9IC9cXFwiY29zdHNldFxcXCIvaS50ZXN0KGFyclRleHQpIHx8IC8oXnwsfFxccyljb3N0c2V0KCx8XFxzfCQpL2kudGVzdChhcnJUZXh0KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGludmFsaWQgPSAhaGFzVG9tbEt2IHx8IHR5cGVWYWwgIT09ICdyb290JyB8fCAhcmVuZGVyc0hhc0Nvc3RzZXQ7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGludmFsaWQgPSB0cnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBjYXRjaCAoXykge1xuXHRcdFx0XHRcdGludmFsaWQgPSB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChpbnZhbGlkKSBuZXcgTm90aWNlKCdcdTUxNjVcdTUzRTNcdTY1ODdcdTRFRjZcdTUxODVcdTVCQjlcdTY4M0NcdTVGMEZcdTRFMERcdTZCNjNcdTc4NkVcdUZGMUFcdTk3MDBcdTRFM0EgVE9NTFx1RkYwQ1x1NEUxNCB0eXBlID0gXCJyb290XCJcdUZGMENyZW5kZXJzIFx1NUZDNVx1OTg3Qlx1NTMwNVx1NTQyQiBcImNvc3RzZXRcIicpO1xuXG5cdFx0XHRcdC8vIDMpIFx1NEY3Rlx1NzUyOFx1OTE0RFx1N0Y2RVx1NzY4NFx1NTE2NVx1NTNFM1x1NjU4N1x1NEVGNlx1NjI1M1x1NUYwMCBMYUMuQ29zdFNldCBcdTg5QzZcdTU2RkVcdUZGMDhcdTkwMUFcdThGQzcgc2V0Vmlld1N0YXRlIFx1Nzg2RVx1NEZERFx1NjgwN1x1NTFDNlx1NUJGQ1x1ODIyQVx1RkYwOVxuXHRcdFx0XHR0aGlzLmFzc2V0UmVwb3NpdG9yeSA9IG5ldyBBc3NldFJlcG9zaXRvcnkodGhpcy5hcHAsIGVudHJ5UGF0aCk7XG5cdFx0XHRcdGNvbnN0IGxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZigndGFiJyk7XG5cdFx0XHRcdGF3YWl0IGxlYWYuc2V0Vmlld1N0YXRlKHtcblx0XHRcdFx0XHR0eXBlOiAnbGFjLWNvc3RzZXQtdmlldycsXG5cdFx0XHRcdFx0c3RhdGU6IHsgZmlsZVBhdGg6IGVudHJ5UGF0aCB9LFxuXHRcdFx0XHRcdGFjdGl2ZTogdHJ1ZVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLnJldmVhbExlYWYobGVhZik7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblxuXHRcdC8vIFx1NkRGQlx1NTJBMFx1OEJCRVx1N0Y2RVx1NjgwN1x1N0I3RVxuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgTGFjQ29zdFNldFNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcblxuXHRcdC8vIFx1NkRGQlx1NTJBMFx1NzJCNlx1NjAwMVx1NjgwRlx1OTg3OVxuXHRcdHRoaXMuYWRkU3RhdHVzQmFySXRlbSgpLnNldFRleHQoJ0xhYy1Db3N0U2V0Jyk7XG5cdH1cblxuXHRvbnVubG9hZCgpIHtcblx0XHQvLyBcdTZFMDVcdTc0MDZcdThENDRcdTZFOTBcblx0fVxuXG5cdGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcblx0fVxuXG5cdGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcblx0XHRhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuXHR9XG59IiwgIi8vIFx1NjNEMlx1NEVGNlx1OEJCRVx1N0Y2RVx1NjNBNVx1NTNFM1xyXG5leHBvcnQgaW50ZXJmYWNlIExhY0Nvc3RTZXRTZXR0aW5ncyB7XHJcblx0ZGVmYXVsdEljb246IHN0cmluZztcclxuICAgIGVudHJ5RmlsZTogc3RyaW5nO1xyXG4gICAgZW5hYmxlQ29udGV4dE1lbnU6IGJvb2xlYW47IC8vIFx1NjYyRlx1NTQyNlx1NTQyRlx1NzUyOFx1NTNGM1x1OTUyRVx1ODNEQ1x1NTM1NVx1MjAxQ1x1NzUyOCBMYUMuQ29zdFNldCBcdTYyNTNcdTVGMDBcdTIwMURcclxuICAgIGRlZmF1bHRTb3J0OiAnbm9uZScgfCAnZGFpbHlEZXNjJyB8ICdwcmljZURlc2MnIHwgJ2RhdGVEZXNjJzsgLy8gXHU5RUQ4XHU4QkE0XHU2MzkyXHU1RThGXHJcbn1cclxuXHJcbi8vIFx1OUVEOFx1OEJBNFx1OEJCRVx1N0Y2RVxyXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogTGFjQ29zdFNldFNldHRpbmdzID0ge1xyXG4gICAgZGVmYXVsdEljb246ICdcdUQ4M0RcdURDRTYnLFxyXG4gICAgZW50cnlGaWxlOiAnY29zdHNldC9jb3N0c2V0Lm1kJyxcclxuICAgIGVuYWJsZUNvbnRleHRNZW51OiB0cnVlLFxyXG4gICAgZGVmYXVsdFNvcnQ6ICdub25lJ1xyXG59XHJcbiIsICJpbXBvcnQgeyBBcHAsIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBBc3NldCB9IGZyb20gJy4uL21vZGVscy9Bc3NldCc7XHJcblxyXG4vLyBBc3NldFJlcG9zaXRvcnlcdTdDN0IgLSBcdTRGN0ZcdTc1MjhPYnNpZGlhbiBBUElcclxuZXhwb3J0IGNsYXNzIEFzc2V0UmVwb3NpdG9yeSB7XHJcblx0cHJpdmF0ZSBhcHA6IEFwcDtcclxuXHRwcml2YXRlIHJvb3RGaWxlUGF0aDogc3RyaW5nO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcm9vdEZpbGVQYXRoOiBzdHJpbmcpIHtcclxuXHRcdHRoaXMuYXBwID0gYXBwO1xyXG5cdFx0dGhpcy5yb290RmlsZVBhdGggPSByb290RmlsZVBhdGg7XHJcblx0fVxyXG5cclxuXHQvLyBcdTgzQjdcdTUzRDZcdThENDRcdTRFQTdcdTY1ODdcdTRFRjZcdTU5MzlcdThERUZcdTVGODRcdUZGMDhcdTRFQ0VcdTY4MzlcdTY1ODdcdTRFRjZcdThERUZcdTVGODRcdTYzQThcdTVCRkNcdUZGMDlcclxuXHRwcml2YXRlIGdldEFzc2V0c0ZvbGRlcigpOiBzdHJpbmcge1xyXG5cdFx0Y29uc3QgcGF0aFBhcnRzID0gdGhpcy5yb290RmlsZVBhdGguc3BsaXQoJy8nKTtcclxuXHRcdGlmIChwYXRoUGFydHMubGVuZ3RoID4gMSkge1xyXG5cdFx0XHRyZXR1cm4gcGF0aFBhcnRzLnNsaWNlKDAsIC0xKS5qb2luKCcvJyk7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gJ2Fzc2V0cyc7IC8vIFx1OUVEOFx1OEJBNFx1NjU4N1x1NEVGNlx1NTkzOVxyXG5cdH1cclxuXHJcblx0Ly8gXHU1MkEwXHU4RjdEXHU2MjQwXHU2NzA5XHU4RDQ0XHU0RUE3XHJcblx0YXN5bmMgbG9hZEFsbCgpOiBQcm9taXNlPEFzc2V0W10+IHtcclxuXHRcdGNvbnN0IHJvb3RGaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRoaXMucm9vdEZpbGVQYXRoKTtcclxuXHRcdGlmICghcm9vdEZpbGUgfHwgIShyb290RmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkge1xyXG5cdFx0XHRyZXR1cm4gW107XHJcblx0XHR9XHJcblxyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Y29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQocm9vdEZpbGUpO1xyXG5cdFx0XHRjb25zdCBtYXRjaGVzID0gY29udGVudC5tYXRjaCgvXFxbXFxbKFteXFxdXSspXFxdXFxdL2cpIHx8IFtdO1xyXG5cdFx0XHRjb25zdCBsaW5rVGFyZ2V0cyA9IG1hdGNoZXNcclxuXHRcdFx0XHQubWFwKG0gPT4gbS5yZXBsYWNlKC9eXFxbXFxbfFxcXVxcXSQvZywgJycpKVxyXG5cdFx0XHRcdC5tYXAocyA9PiBzLnNwbGl0KCd8JylbMF0/LnRyaW0oKSlcclxuXHRcdFx0XHQuZmlsdGVyKEJvb2xlYW4pIGFzIHN0cmluZ1tdO1xyXG5cdFx0XHRcclxuXHRcdFx0Y29uc3QgYXNzZXRzOiBBc3NldFtdID0gW107XHJcblx0XHRcdGZvciAoY29uc3QgdGFyZ2V0IG9mIGxpbmtUYXJnZXRzKSB7XHJcblx0XHRcdFx0bGV0IGZpbGU6IFRGaWxlIHwgbnVsbCA9IG51bGw7XHJcblx0XHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRcdGZpbGUgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KHRhcmdldCwgdGhpcy5yb290RmlsZVBhdGgpIGFzIFRGaWxlIHwgbnVsbDtcclxuXHRcdFx0XHR9IGNhdGNoIChfKSB7XHJcblx0XHRcdFx0XHRmaWxlID0gbnVsbDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYgKCFmaWxlKSBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlQ29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLnBhcnNlVG9tbCh0aGlzLnF1b3RlV2lraWxpbmtzRm9yVG9tbChmaWxlQ29udGVudCkpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG5cdFx0XHRcdFx0Y29uc3QgYXNzZXRJZCA9IGZpbGUuYmFzZW5hbWUgfHwgdGFyZ2V0O1xyXG5cdFx0XHRcdFx0Y29uc3QgYXNzZXQgPSBuZXcgQXNzZXQoYXNzZXRJZCwgZGF0YSk7XHJcblx0XHRcdFx0XHQvLyBoaWRkZW4gXHU1QjU3XHU2QkI1XHU0RUM1XHU1MTg1XHU1QjU4XHU0RjdGXHU3NTI4XHVGRjBDXHU1MkEwXHU4RjdEXHU2NUY2XHU5RUQ4XHU4QkE0XHU1MTczXHU5NUVEXHJcblx0XHRcdFx0XHRhc3NldC5oaWRkZW4gPSBmYWxzZTtcclxuXHRcdFx0XHRcdGFzc2V0cy5wdXNoKGFzc2V0KTtcclxuXHRcdFx0XHR9IGNhdGNoIChlKSB7XHJcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gbG9hZCBhc3NldCAke3RhcmdldH06YCwgZSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiBhc3NldHM7XHJcblx0XHR9IGNhdGNoIChlKSB7XHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBsb2FkIGFzc2V0czonLCBlKTtcclxuXHRcdFx0cmV0dXJuIFtdO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Ly8gXHU0RkREXHU1QjU4XHU4RDQ0XHU0RUE3XHVGRjA4XHU0RUM1XHU0RkVFXHU2NTM5XHU0RTBFIGNvc3RzZXQgXHU3NkY4XHU1MTczXHU3Njg0XHU5NTJFXHVGRjFBbmFtZVx1MzAwMXN0eWxlLmljb25cdTMwMDFkZXRhaWwuKlx1MzAwMWhpZGRlblx1RkYwOVxyXG5cdGFzeW5jIHNhdmVBc3NldChhc3NldDogQXNzZXQpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdGxldCB0YXJnZXRGaWxlOiBURmlsZSB8IG51bGwgPSBudWxsO1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0dGFyZ2V0RmlsZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0Rmlyc3RMaW5rcGF0aERlc3QoYXNzZXQuaWQsIHRoaXMucm9vdEZpbGVQYXRoKSBhcyBURmlsZSB8IG51bGw7XHJcblx0XHR9IGNhdGNoIChfKSB7XHJcblx0XHRcdHRhcmdldEZpbGUgPSBudWxsO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFx1NEUwRFx1NTE4RFx1NjI2Qlx1NjNDRlx1NUI1MFx1NzZFRVx1NUY1NVx1NjIxNlx1OTA0RFx1NTM4Nlx1NjU4N1x1NEVGNlx1RkYxQVx1NEVDNVx1NEY5RFx1OEQ1NiBPYnNpZGlhbiBcdTc2ODRcdTUzQ0NcdTk0RkVcdTg5RTNcdTY3OTBcclxuXHJcblx0XHRcdGlmICghdGFyZ2V0RmlsZSkge1xyXG5cdFx0XHQvLyBcdTc2RUVcdTY4MDdcdTY1ODdcdTRFRjZcdTRFMERcdTVCNThcdTU3MjhcdUZGMUFcdTU3MjhcdTY4MzlcdTY1ODdcdTRFRjZcdTU0MENcdTc2RUVcdTVGNTVcdTRFMEJcdTUyMUJcdTVFRkFcdTY1QjBcdTY1ODdcdTRFRjZcclxuXHRcdFx0bGV0IGZpbGVOYW1lID0gYCR7YXNzZXQuaWR9Lm1kYDtcclxuXHRcdFx0bGV0IGZpbGVQYXRoID0gYCR7dGhpcy5nZXRBc3NldHNGb2xkZXIoKX0vJHtmaWxlTmFtZX1gO1xyXG5cdFx0XHQvLyBcdTc4NkVcdTRGRERcdTY1ODdcdTRFRjZcdTU5MzlcdTVCNThcdTU3MjhcclxuXHRcdFx0Y29uc3QgZm9sZGVyID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRoaXMuZ2V0QXNzZXRzRm9sZGVyKCkpO1xyXG5cdFx0XHRpZiAoIWZvbGRlcikge1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcih0aGlzLmdldEFzc2V0c0ZvbGRlcigpKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRjb25zdCBpbml0aWFsQ29udGVudCA9IHRoaXMuZGVxdW90ZVdpa2lsaW5rcyhhc3NldC50b1RvbWxTdHJpbmcoKSk7XHJcblx0XHRcdHRyeSB7XHJcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGZpbGVQYXRoLCBpbml0aWFsQ29udGVudCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG5cdFx0XHR9IGNhdGNoIChlKSB7XHJcblx0XHRcdFx0Ly8gXHU1QzFEXHU4QkQ1XHU0RjdGXHU3NTI4IGVuY29kZSBcdTU0MEVcdTc2ODRcdTY1ODdcdTRFRjZcdTU0MERcdTUxOERcdTZCMjFcdTUyMUJcdTVFRkFcclxuXHRcdFx0XHRmaWxlTmFtZSA9IGAke2VuY29kZVVSSUNvbXBvbmVudChhc3NldC5pZCl9Lm1kYDtcclxuXHRcdFx0XHRmaWxlUGF0aCA9IGAke3RoaXMuZ2V0QXNzZXRzRm9sZGVyKCl9LyR7ZmlsZU5hbWV9YDtcclxuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZmlsZVBhdGgsIGluaXRpYWxDb250ZW50KTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIFx1N0VBRiBUT01MIFx1OTFDRFx1NTE5OVx1NkEyMVx1NUYwRlx1RkYxQVx1OEJGQlx1NTNENlx1MjE5Mlx1ODlFM1x1Njc5MFx1MjE5Mlx1NEVDNVx1NjUzOVx1NzZGOFx1NTE3M1x1OTUyRVx1MjE5Mlx1NjU3NFx1NEY1M1x1OTFDRFx1NTE5OVx1RkYxQlx1NkNFOFx1OTFDQVx1N0Y2RVx1OTg3Nlx1NEZERFx1NzU1OVxyXG5cdFx0XHRjb25zdCBleGlzdGluZyA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQodGFyZ2V0RmlsZSk7XHJcblx0XHRcdFx0XHRjb25zdCByZXdyaXR0ZW4gPSB0aGlzLnJld3JpdGVUb21sV2l0aENvbW1lbnRzVG9wKGV4aXN0aW5nLCBhc3NldCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLmFwcC52YXVsdC5tb2RpZnkodGFyZ2V0RmlsZSwgdGhpcy5kZXF1b3RlV2lraWxpbmtzKHJld3JpdHRlbikpOyAgICAgXHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gXHU2NkY0XHU2NUIwXHU2ODM5XHU2NTg3XHU0RUY2XHU0RTJEXHU1QkY5XHU4QkU1XHU4RDQ0XHU0RUE3XHU3Njg0XHU1M0NDXHU5NEZFXHU1RjE1XHU3NTI4XHJcblx0XHRhd2FpdCB0aGlzLnVwZGF0ZVJvb3RGaWxlKGFzc2V0LmlkLCB0cnVlKTtcclxuXHR9XHJcblxyXG5cdC8vIFx1NTIyMFx1OTY2NFx1OEQ0NFx1NEVBN1xyXG5cdGFzeW5jIGRlbGV0ZUFzc2V0KGlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdC8vIFx1NjZGNFx1NjVCMFx1NjgzOVx1NjU4N1x1NEVGNlxyXG5cdFx0YXdhaXQgdGhpcy51cGRhdGVSb290RmlsZShpZCwgZmFsc2UpO1xyXG5cdH1cclxuXHJcblx0Ly8gXHU2Q0U4XHU2MTBGXHVGRjFBaGlkZGVuIFx1NUI1N1x1NkJCNVx1NEUwRFx1NjMwMVx1NEU0NVx1NTMxNlx1RkYwOFx1NEVDNVx1NTE4NVx1NUI1OFx1NEY3Rlx1NzUyOFx1RkYwOVx1RkYwQ1x1NkI2NFx1NTkwNFx1NEUwRFx1NjNEMFx1NEY5QiBzZXRIaWRkZW5cclxuXHJcblx0Ly8gXHU2NkY0XHU2NUIwXHU2ODM5XHU2NTg3XHU0RUY2XHJcblx0cHJpdmF0ZSBhc3luYyB1cGRhdGVSb290RmlsZShhc3NldElkOiBzdHJpbmcsIGlzQWRkOiBib29sZWFuKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHRjb25zdCByb290UGF0aCA9IHRoaXMucm9vdEZpbGVQYXRoO1xyXG5cdFx0bGV0IHJvb3RDb250ZW50ID0gJyc7XHJcblxyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Y29uc3Qgcm9vdEZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocm9vdFBhdGgpO1xyXG5cdFx0XHRpZiAocm9vdEZpbGUgJiYgcm9vdEZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xyXG5cdFx0XHRcdHJvb3RDb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChyb290RmlsZSk7XHJcblx0XHRcdH1cclxuXHRcdH0gY2F0Y2ggKGUpIHtcclxuXHRcdFx0Ly8gXHU2NTg3XHU0RUY2XHU0RTBEXHU1QjU4XHU1NzI4XHVGRjBDXHU1MjFCXHU1RUZBXHU2NUIwXHU2NTg3XHU0RUY2XHJcblx0XHR9XHJcblxyXG5cdFx0XHRpZiAoaXNBZGQpIHtcclxuXHRcdFx0XHRcdC8vIFx1NkRGQlx1NTJBMFx1OEQ0NFx1NEVBN1x1NUYxNVx1NzUyOFx1RkYxQVx1ODJFNVx1NURGMlx1NUI1OFx1NTcyOFx1NEVGQlx1NjEwRlx1NUY2Mlx1NUYwRlx1NzY4NFx1NTNDQ1x1OTRGRVx1RkYwOFtbaWRdXSBcdTYyMTYgW1tpZHxhbGlhc11dXHVGRjA5XHU1MjE5XHU0RTBEXHU5MUNEXHU1OTBEXHU2REZCXHU1MkEwXHJcblx0XHRcdFx0XHRjb25zdCBoYXNBbnlMaW5rID0gbmV3IFJlZ0V4cChgXFxcXFtcXFxcWyR7YXNzZXRJZH0oXFxcXHxbXlxcXFxdXSspP1xcXFxdXFxcXF1gKS50ZXN0KHJvb3RDb250ZW50KTtcclxuXHRcdFx0XHRcdGlmICghaGFzQW55TGluaykge1xyXG5cdFx0XHRcdFx0XHRcdHJvb3RDb250ZW50ICs9IGBcXG5bWyR7YXNzZXRJZH1dXWA7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHQvLyBcdTUyMjBcdTk2NjRcdThENDRcdTRFQTdcdTVGMTVcdTc1MjhcdUZGMUFcdTU0MENcdTY1RjZcdTc5RkJcdTk2NjQgW1tpZF1dIFx1NEUwRSBbW2lkfGFsaWFzXV0gXHU3Njg0XHU2NTc0XHU4ODRDXHU2MjE2XHU4ODRDXHU1MTg1XHU3MjQ3XHU2QkI1XHJcblx0XHRcdFx0XHRyb290Q29udGVudCA9IHJvb3RDb250ZW50LnJlcGxhY2UobmV3IFJlZ0V4cChgXFxcXFtcXFxcWyR7YXNzZXRJZH0oXFxcXHxbXlxcXFxdXSspP1xcXFxdXFxcXF1gLCAnZycpLCAnJyk7XHJcblx0XHRcdFx0XHRyb290Q29udGVudCA9IHJvb3RDb250ZW50LnJlcGxhY2UoL1xcbnszLH0vZywgJ1xcblxcbicpLnRyaW1FbmQoKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUocm9vdFBhdGgsIHJvb3RDb250ZW50KTtcclxuXHR9XHJcblxyXG5cdC8vIFx1ODlFM1x1Njc5MFRPTUxcdTUxODVcdTVCQjlcdUZGMDhcdTY1MkZcdTYzMDFcdTVENENcdTU5NTdcdTgyODJcdTU0MERcdUZGMENcdTU5ODIgW2Nvc3RzZXQuZGV0YWlsXVx1RkYwOVxyXG5cdHByaXZhdGUgcGFyc2VUb21sKGNvbnRlbnQ6IHN0cmluZyk6IGFueSB7XHJcblx0XHRjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xyXG5cdFx0Y29uc3QgcmVzdWx0OiBhbnkgPSB7fTtcclxuXHRcdGxldCBjdXJyZW50UGF0aDogc3RyaW5nW10gPSBbXTtcclxuXHJcblx0XHRjb25zdCBlbnN1cmVQYXRoID0gKHJvb3Q6IGFueSwgcGF0aDogc3RyaW5nW10pOiBhbnkgPT4ge1xyXG5cdFx0XHRsZXQgbm9kZSA9IHJvb3Q7XHJcblx0XHRcdGZvciAoY29uc3QgcGFydCBvZiBwYXRoKSB7XHJcblx0XHRcdFx0aWYgKCFub2RlW3BhcnRdIHx8IHR5cGVvZiBub2RlW3BhcnRdICE9PSAnb2JqZWN0Jykgbm9kZVtwYXJ0XSA9IHt9O1xyXG5cdFx0XHRcdG5vZGUgPSBub2RlW3BhcnRdO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiBub2RlO1xyXG5cdFx0fTtcclxuXHJcblx0XHRmb3IgKGNvbnN0IHJhdyBvZiBsaW5lcykge1xyXG5cdFx0XHRjb25zdCBsaW5lID0gcmF3LnRyaW0oKTtcclxuXHRcdFx0aWYgKCFsaW5lIHx8IGxpbmUuc3RhcnRzV2l0aCgnIycpKSBjb250aW51ZTtcclxuXHRcdFx0aWYgKGxpbmUuc3RhcnRzV2l0aCgnWycpICYmIGxpbmUuZW5kc1dpdGgoJ10nKSkge1xyXG5cdFx0XHRcdGNvbnN0IHNlY3Rpb24gPSBsaW5lLnNsaWNlKDEsIC0xKS50cmltKCk7XHJcblx0XHRcdFx0Y3VycmVudFBhdGggPSBzZWN0aW9uLnNwbGl0KCcuJykubWFwKHMgPT4gcy50cmltKCkpLmZpbHRlcihCb29sZWFuKTtcclxuXHRcdFx0XHRlbnN1cmVQYXRoKHJlc3VsdCwgY3VycmVudFBhdGgpO1xyXG5cdFx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0XHR9XHJcblx0XHRcdGNvbnN0IGVxID0gbGluZS5pbmRleE9mKCc9Jyk7XHJcblx0XHRcdGlmIChlcSA9PT0gLTEpIGNvbnRpbnVlO1xyXG5cdFx0XHRjb25zdCBjbGVhbktleSA9IGxpbmUuc2xpY2UoMCwgZXEpLnRyaW0oKTtcclxuXHRcdFx0bGV0IGNsZWFuVmFsdWUgPSBsaW5lLnNsaWNlKGVxICsgMSkudHJpbSgpO1xyXG5cclxuXHRcdFx0bGV0IHBhcnNlZFZhbHVlOiBhbnkgPSBjbGVhblZhbHVlO1xyXG5cdFx0XHRpZiAoY2xlYW5WYWx1ZS5zdGFydHNXaXRoKCdcIicpICYmIGNsZWFuVmFsdWUuZW5kc1dpdGgoJ1wiJykpIHtcclxuXHRcdFx0XHRwYXJzZWRWYWx1ZSA9IGNsZWFuVmFsdWUuc2xpY2UoMSwgLTEpO1xyXG5cdFx0XHR9IGVsc2UgaWYgKGNsZWFuVmFsdWUgPT09ICd0cnVlJyB8fCBjbGVhblZhbHVlID09PSAnZmFsc2UnKSB7XHJcblx0XHRcdFx0cGFyc2VkVmFsdWUgPSBjbGVhblZhbHVlID09PSAndHJ1ZSc7XHJcblx0XHRcdH0gZWxzZSBpZiAoY2xlYW5WYWx1ZS5zdGFydHNXaXRoKCdbJykgJiYgY2xlYW5WYWx1ZS5lbmRzV2l0aCgnXScpKSB7XHJcblx0XHRcdFx0Y29uc3QgYXJyYXlDb250ZW50ID0gY2xlYW5WYWx1ZS5zbGljZSgxLCAtMSkudHJpbSgpO1xyXG5cdFx0XHRcdHBhcnNlZFZhbHVlID0gYXJyYXlDb250ZW50ID8gYXJyYXlDb250ZW50LnNwbGl0KCcsJykubWFwKGl0ZW0gPT4gaXRlbS50cmltKCkucmVwbGFjZSgvXlwifFwiJC9nLCAnJykpIDogW107XHJcblx0XHRcdH0gZWxzZSBpZiAoIWlzTmFOKE51bWJlcihjbGVhblZhbHVlKSkpIHtcclxuXHRcdFx0XHRwYXJzZWRWYWx1ZSA9IE51bWJlcihjbGVhblZhbHVlKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKGN1cnJlbnRQYXRoLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0XHRjb25zdCBub2RlID0gZW5zdXJlUGF0aChyZXN1bHQsIGN1cnJlbnRQYXRoKTtcclxuXHRcdFx0XHRub2RlW2NsZWFuS2V5XSA9IHBhcnNlZFZhbHVlO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHJlc3VsdFtjbGVhbktleV0gPSBwYXJzZWRWYWx1ZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiByZXN1bHQ7XHJcblx0fVxyXG5cclxuXHQvLyBcdTdFQUYgVE9NTCBcdTkxQ0RcdTUxOTlcdTZBMjFcdTVGMEZcdUZGMUFcdTg5RTNcdTY3OTBcdTIxOTJcdTRGRUVcdTY1MzlcdTIxOTJzdHJpbmdpZnlcdUZGMUJcdTVDMDZcdTUzOUZcdTY3MDlcdTZDRThcdTkxQ0FcdTdGNkVcdTk4NzZcdTRGRERcdTc1NTlcclxuXHRwcml2YXRlIHJld3JpdGVUb21sV2l0aENvbW1lbnRzVG9wKGV4aXN0aW5nOiBzdHJpbmcsIGFzc2V0OiBBc3NldCk6IHN0cmluZyB7XHJcblx0XHRjb25zdCBjb21tZW50TGluZXM6IHN0cmluZ1tdID0gW107XHJcblx0XHRjb25zdCBvdGhlckxpbmVzOiBzdHJpbmdbXSA9IFtdO1xyXG5cdFx0Zm9yIChjb25zdCByYXcgb2YgZXhpc3Rpbmcuc3BsaXQoJ1xcbicpKSB7XHJcblx0XHRcdGNvbnN0IHQgPSByYXcudHJpbSgpO1xyXG5cdFx0XHRpZiAodC5zdGFydHNXaXRoKCcjJykpIGNvbW1lbnRMaW5lcy5wdXNoKHJhdyk7XHJcblx0XHRcdGVsc2Ugb3RoZXJMaW5lcy5wdXNoKHJhdyk7XHJcblx0XHR9XHJcbiAgICAgICAgICAgICAgICAvLyBcdTRGN0ZcdTc1MjhcdTVERjJcdTY3MDlcdThGN0JcdTkxQ0YgcGFyc2VyIFx1OEJGQlx1NTNENlx1NEUzQVx1NUJGOVx1OEM2MVxyXG4gICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkID0gdGhpcy5wYXJzZVRvbWwodGhpcy5xdW90ZVdpa2lsaW5rc0ZvclRvbWwob3RoZXJMaW5lcy5qb2luKCdcXG4nKSkpIHx8IHt9OyAgICAgXHJcblxyXG5cdFx0Ly8gXHU1RTk0XHU3NTI4XHU0RUM1IGNvc3RzZXQgXHU3NkY4XHU1MTczXHU3Njg0XHU1QjU3XHU2QkI1XHU2NkY0XHU2NUIwXHJcblx0XHQocGFyc2VkIGFzIGFueSlbJ25hbWUnXSA9IGFzc2V0Lm5hbWU7XHJcblx0XHRpZiAoIXBhcnNlZFsnc3R5bGUnXSB8fCB0eXBlb2YgcGFyc2VkWydzdHlsZSddICE9PSAnb2JqZWN0JykgcGFyc2VkWydzdHlsZSddID0ge307XHJcblx0XHRwYXJzZWRbJ3N0eWxlJ11bJ2ljb24nXSA9IGFzc2V0Lmljb247XHJcblx0XHRpZiAoIXBhcnNlZFsnZGV0YWlsJ10gfHwgdHlwZW9mIHBhcnNlZFsnZGV0YWlsJ10gIT09ICdvYmplY3QnKSBwYXJzZWRbJ2RldGFpbCddID0ge307XHJcblx0XHRwYXJzZWRbJ2RldGFpbCddWydwcmljZSddID0gTnVtYmVyKGFzc2V0LnByaWNlKSB8fCAwO1xyXG5cdFx0cGFyc2VkWydkZXRhaWwnXVsnYWN0aXZlX2Zyb20nXSA9IGFzc2V0LmFjdGl2ZUZyb20gPyBhc3NldC5hY3RpdmVGcm9tLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXSA6ICcnO1xyXG5cdFx0cGFyc2VkWydkZXRhaWwnXVsnYWN0aXZlX3RvJ10gPSBhc3NldC5hY3RpdmVUbyA/IGFzc2V0LmFjdGl2ZVRvLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXSA6ICcnO1xyXG5cdFx0cGFyc2VkWydkZXRhaWwnXVsncmVjeWNsZV9wcmljZSddID0gTnVtYmVyKGFzc2V0LnJlY3ljbGVQcmljZSkgfHwgMDtcclxuXHRcdHBhcnNlZFsnZGV0YWlsJ11bJ3RhZ3MnXSA9IEFycmF5LmlzQXJyYXkoYXNzZXQudGFncykgPyBhc3NldC50YWdzIDogW107XHJcblxyXG5cdFx0Y29uc3QgdG9tbEJvZHkgPSB0aGlzLnN0cmluZ2lmeVRvbWwocGFyc2VkKTtcclxuXHRcdGNvbnN0IGNvbW1lbnRCbG9jayA9IGNvbW1lbnRMaW5lcy5sZW5ndGggPiAwID8gY29tbWVudExpbmVzLmpvaW4oJ1xcbicpICsgJ1xcblxcbicgOiAnJztcclxuXHRcdHJldHVybiBjb21tZW50QmxvY2sgKyB0b21sQm9keTtcclxuXHR9XHJcblxyXG5cdC8vIFx1NUMwNiBKUyBcdTVCRjlcdThDNjFcdTdBMzNcdTVCOUFcdTU3MzBcdTVFOEZcdTUyMTdcdTUzMTZcdTRFM0EgVE9NTCBcdTY1ODdcdTY3MkNcdUZGMDhcdTY1MkZcdTYzMDFcdTU5MUFcdTVDNDJcdTgyODJcdTU0MERcdUZGMDlcclxuXHRwcml2YXRlIHN0cmluZ2lmeVRvbWwob2JqOiBhbnkpOiBzdHJpbmcge1xyXG5cdFx0Ly8gXHU2MkM2XHU1MjA2XHU0RTNBXHU5ODc2XHU1QzQyXHU2ODA3XHU5MUNGL1x1NjU3MFx1N0VDNCBcdTRFMEUgXHU1RDRDXHU1OTU3XHU1QkY5XHU4QzYxXHJcblx0XHRjb25zdCBpc1BsYWluT2JqZWN0ID0gKHY6IGFueSkgPT4gdiAmJiB0eXBlb2YgdiA9PT0gJ29iamVjdCcgJiYgIUFycmF5LmlzQXJyYXkodik7XHJcblx0XHRjb25zdCBrZXlzID0gT2JqZWN0LmtleXMob2JqIHx8IHt9KTtcclxuXHRcdGNvbnN0IHNjYWxhcktleXMgPSBrZXlzLmZpbHRlcihrID0+ICFpc1BsYWluT2JqZWN0KG9ialtrXSkpO1xyXG5cdFx0Y29uc3Qgb2JqZWN0S2V5cyA9IGtleXMuZmlsdGVyKGsgPT4gaXNQbGFpbk9iamVjdChvYmpba10pKTtcclxuXHJcblx0XHRjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcclxuXHRcdC8vIFx1NEYxOFx1NTE0OFx1OEY5M1x1NTFGQSBuYW1lXHJcblx0XHRpZiAoc2NhbGFyS2V5cy5pbmNsdWRlcygnbmFtZScpKSB7XHJcblx0XHRcdGxpbmVzLnB1c2godGhpcy5yZW5kZXJUb21sS2V5VmFsdWUoJ25hbWUnLCBvYmpbJ25hbWUnXSkpO1xyXG5cdFx0fVxyXG5cdFx0Ly8gXHU1MTc2XHU0RUQ2XHU5ODc2XHU1QzQyXHU2ODA3XHU5MUNGXHU2MzA5XHU1QjU3XHU2QkNEXHU1RThGXHJcblx0XHRzY2FsYXJLZXlzXHJcblx0XHRcdC5maWx0ZXIoayA9PiBrICE9PSAnbmFtZScpXHJcblx0XHRcdC5zb3J0KChhLCBiKSA9PiBhLmxvY2FsZUNvbXBhcmUoYikpXHJcblx0XHRcdC5mb3JFYWNoKGsgPT4gbGluZXMucHVzaCh0aGlzLnJlbmRlclRvbWxLZXlWYWx1ZShrLCBvYmpba10pKSk7XHJcblxyXG5cdFx0Ly8gXHU4MjgyXHU4RjkzXHU1MUZBXHU5ODdBXHU1RThGXHVGRjFBc3R5bGUsIGRldGFpbCBcdTRGMThcdTUxNDhcdUZGMENcdTUxNzZcdTVCODNcdTYzMDlcdTVCNTdcdTZCQ0RcdTVFOEZcclxuXHRcdGNvbnN0IHNlY3Rpb25PcmRlciA9IFsnc3R5bGUnLCAnZGV0YWlsJ107XHJcblx0XHRjb25zdCBvcmRlcmVkT2JqZWN0S2V5cyA9IFtcclxuXHRcdFx0Li4uc2VjdGlvbk9yZGVyLmZpbHRlcihrID0+IG9iamVjdEtleXMuaW5jbHVkZXMoaykpLFxyXG5cdFx0XHQuLi5vYmplY3RLZXlzLmZpbHRlcihrID0+ICFzZWN0aW9uT3JkZXIuaW5jbHVkZXMoaykpLnNvcnQoKGEsIGIpID0+IGEubG9jYWxlQ29tcGFyZShiKSlcclxuXHRcdF07XHJcblxyXG5cdFx0Zm9yIChjb25zdCBrIG9mIG9yZGVyZWRPYmplY3RLZXlzKSB7XHJcblx0XHRcdGxpbmVzLnB1c2goJycpO1xyXG5cdFx0XHR0aGlzLnJlbmRlclRvbWxTZWN0aW9uKGxpbmVzLCBba10sIG9ialtrXSk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIGxpbmVzLmpvaW4oJ1xcbicpLnJlcGxhY2UoL1xcbnszLH0vZywgJ1xcblxcbicpLnRyaW0oKSArICdcXG4nO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSByZW5kZXJUb21sU2VjdGlvbihvdXQ6IHN0cmluZ1tdLCBwYXRoOiBzdHJpbmdbXSwgdmFsdWU6IGFueSk6IHZvaWQge1xyXG5cdFx0b3V0LnB1c2goYFske3BhdGguam9pbignLicpfV1gKTtcclxuXHRcdGNvbnN0IGlzUGxhaW5PYmplY3QgPSAodjogYW55KSA9PiB2ICYmIHR5cGVvZiB2ID09PSAnb2JqZWN0JyAmJiAhQXJyYXkuaXNBcnJheSh2KTtcclxuXHRcdGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyh2YWx1ZSB8fCB7fSk7XHJcblx0XHRjb25zdCBzY2FsYXJLZXlzID0ga2V5cy5maWx0ZXIoayA9PiAhaXNQbGFpbk9iamVjdCh2YWx1ZVtrXSkpO1xyXG5cdFx0Y29uc3Qgb2JqZWN0S2V5cyA9IGtleXMuZmlsdGVyKGsgPT4gaXNQbGFpbk9iamVjdCh2YWx1ZVtrXSkpO1xyXG5cdFx0Ly8gXHU1MTQ4XHU4RjkzXHU1MUZBXHU2ODA3XHU5MUNGXHU5NTJFXHVGRjA4XHU2MzA5XHU1QjU3XHU2QkNEXHU1RThGXHVGRjA5XHJcblx0XHRzY2FsYXJLZXlzLnNvcnQoKGEsIGIpID0+IGEubG9jYWxlQ29tcGFyZShiKSkuZm9yRWFjaChrID0+IHtcclxuXHRcdFx0b3V0LnB1c2godGhpcy5yZW5kZXJUb21sS2V5VmFsdWUoaywgdmFsdWVba10pKTtcclxuXHRcdH0pO1xyXG5cdFx0Ly8gXHU1RDRDXHU1OTU3XHU1QkY5XHU4QzYxXHU0RjVDXHU0RTNBXHU1QjUwXHU4MjgyIFthLmJdXHJcblx0XHRjb25zdCBvcmRlcmVkT2JqZWN0S2V5cyA9IG9iamVjdEtleXMuc29ydCgoYSwgYikgPT4gYS5sb2NhbGVDb21wYXJlKGIpKTtcclxuXHRcdGZvciAoY29uc3QgayBvZiBvcmRlcmVkT2JqZWN0S2V5cykge1xyXG5cdFx0XHRvdXQucHVzaCgnJyk7XHJcblx0XHRcdHRoaXMucmVuZGVyVG9tbFNlY3Rpb24ob3V0LCBbLi4ucGF0aCwga10sIHZhbHVlW2tdKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHByaXZhdGUgcmVuZGVyVG9tbEtleVZhbHVlKGtleTogc3RyaW5nLCB2YWw6IGFueSk6IHN0cmluZyB7XHJcblx0XHRyZXR1cm4gYCR7a2V5fSA9ICR7dGhpcy50b21sVmFsdWUodmFsKX1gO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSB0b21sVmFsdWUodmFsOiBhbnkpOiBzdHJpbmcge1xyXG5cdFx0aWYgKHZhbCA9PT0gbnVsbCB8fCB2YWwgPT09IHVuZGVmaW5lZCkgcmV0dXJuICdcIlwiJztcclxuXHRcdGlmIChBcnJheS5pc0FycmF5KHZhbCkpIHtcclxuXHRcdFx0cmV0dXJuIGBbJHt2YWwubWFwKHYgPT4gdGhpcy50b21sVmFsdWUodikpLmpvaW4oJywgJyl9XWA7XHJcblx0XHR9XHJcblx0XHRzd2l0Y2ggKHR5cGVvZiB2YWwpIHtcclxuXHRcdFx0Y2FzZSAnbnVtYmVyJzpcclxuXHRcdFx0XHRyZXR1cm4gTnVtYmVyLmlzRmluaXRlKHZhbCkgPyBTdHJpbmcodmFsKSA6ICcwJztcclxuXHRcdFx0Y2FzZSAnYm9vbGVhbic6XHJcblx0XHRcdFx0cmV0dXJuIHZhbCA/ICd0cnVlJyA6ICdmYWxzZSc7XHJcblx0XHRcdGNhc2UgJ3N0cmluZyc6XHJcblx0XHRcdGRlZmF1bHQ6XHJcblx0XHRcdFx0cmV0dXJuIGBcIiR7U3RyaW5nKHZhbCkucmVwbGFjZSgvXFxcXC9nLCAnXFxcXFxcXFwnKS5yZXBsYWNlKC9cXFwiL2csICdcXFxcXCInKX1cImA7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuICAgICAgICAvLyBcdTVDMDZcdTg4RjhcdTc2ODQgW1suLi5dXSBcdTYyMTYgW1suLi58YWxpYXNdXSBcdTUzMDVcdTg4RjlcdTRFM0FcdTUzRUZcdTg4QUIgVE9NTCBcdTg5RTNcdTY3OTBcdTc2ODRcdTVCNTdcdTdCMjZcdTRFMzJcclxuICAgICAgICBwcml2YXRlIHF1b3RlV2lraWxpbmtzRm9yVG9tbChjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnQucmVwbGFjZSgvXFxbXFxbW15cXF1dK1xcXVxcXS9nLCAobWF0Y2g6IHN0cmluZywgb2Zmc2V0OiBudW1iZXIsIGZ1bGw6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBiZWZvcmUgPSBvZmZzZXQgPiAwID8gZnVsbFtvZmZzZXQgLSAxXSA6ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhZnRlciA9IG9mZnNldCArIG1hdGNoLmxlbmd0aCA8IGZ1bGwubGVuZ3RoID8gZnVsbFtvZmZzZXQgKyBtYXRjaC5sZW5ndGhdIDogJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoYmVmb3JlID09PSAnXCInICYmIGFmdGVyID09PSAnXCInKSB8fCAoYmVmb3JlID09PSAnXFwnJyAmJiBhZnRlciA9PT0gJ1xcJycpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoOyAvLyBhbHJlYWR5IHF1b3RlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBgXCIke21hdGNofVwiYDtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHU1QzA2IFwiW1suLi5dXVwiIFx1NjIxNiAnW1suLi5dXScgXHU1RjYyXHU1RjBGXHU4RkQ4XHU1MzlGXHU0RTNBXHU4OEY4XHU3Njg0XHU1M0NDXHU5NEZFXHJcbiAgICAgICAgcHJpdmF0ZSBkZXF1b3RlV2lraWxpbmtzKGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29udGVudC5yZXBsYWNlKC8oW1wiJ10pXFxbXFxbW15cXF1dK1xcXVxcXVxcMS9nLCAobWF0Y2g6IHN0cmluZykgPT4gbWF0Y2guc2xpY2UoMSwgLTEpKTtcclxuICAgICAgICB9XHJcbn1cclxuIiwgIi8vIEFzc2V0XHU1QjlFXHU0RjUzXHU3QzdCXHJcbmV4cG9ydCBjbGFzcyBBc3NldCB7XHJcblx0aWQ6IHN0cmluZztcclxuXHRuYW1lOiBzdHJpbmc7XHJcblx0aWNvbjogc3RyaW5nO1xyXG5cdHByaWNlOiBudW1iZXI7XHJcblx0YWN0aXZlRnJvbTogRGF0ZTtcclxuXHRhY3RpdmVUbz86IERhdGU7XHJcblx0cmVjeWNsZVByaWNlOiBudW1iZXI7XHJcblx0dGFnczogc3RyaW5nW107XHJcblx0aGlkZGVuOiBib29sZWFuO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihpZE9yUmF3RGF0YTogc3RyaW5nIHwgYW55LCB0b21sRGF0YT86IGFueSkge1xyXG5cdFx0aWYgKHR5cGVvZiBpZE9yUmF3RGF0YSA9PT0gJ3N0cmluZycgJiYgdG9tbERhdGEpIHtcclxuXHRcdFx0Ly8gVE9NTCBcdTZBMjFcdTVGMEZcdUZGMDhcdTRGMThcdTUxNDhcdThCRkJcdTUzRDYgW2Nvc3RzZXRdIFx1NTQ3RFx1NTQwRFx1N0E3QVx1OTVGNFx1RkYwQ1x1NTE3Q1x1NUJCOVx1NjVFN1x1N0VEM1x1Njc4NFx1RkYwOVxyXG5cdFx0XHR0aGlzLmlkID0gaWRPclJhd0RhdGE7XHJcblx0XHRcdGNvbnN0IHNyYyA9IHRvbWxEYXRhLmNvc3RzZXQgPyB0b21sRGF0YS5jb3N0c2V0IDogdG9tbERhdGE7XHJcblx0XHRcdHRoaXMubmFtZSA9IHNyYy5uYW1lIHx8ICcnO1xyXG5cdFx0XHQvLyBzdHlsZS5pY29uIFx1NTE3Q1x1NUJCOVx1NEUyNFx1NzlDRFx1Njc2NVx1NkU5MFxyXG5cdFx0XHR0aGlzLmljb24gPSBzcmMuc3R5bGU/Lmljb24gPz8gdG9tbERhdGEuc3R5bGU/Lmljb24gPz8gJ1x1RDgzRFx1RENFNic7XHJcblx0XHRcdGNvbnN0IGRldGFpbCA9IHNyYy5kZXRhaWwgPz8gdG9tbERhdGEuZGV0YWlsID8/IHt9O1xyXG5cdFx0XHR0aGlzLnByaWNlID0gTnVtYmVyKGRldGFpbC5wcmljZSkgfHwgMDtcclxuXHRcdFx0dGhpcy5hY3RpdmVGcm9tID0gdGhpcy5wYXJzZURhdGUoZGV0YWlsLmFjdGl2ZV9mcm9tKSB8fCBuZXcgRGF0ZSgpO1xyXG5cdFx0XHR0aGlzLmFjdGl2ZVRvID0gdGhpcy5wYXJzZURhdGUoZGV0YWlsLmFjdGl2ZV90bykgfHwgdW5kZWZpbmVkO1xyXG5cdFx0XHR0aGlzLnJlY3ljbGVQcmljZSA9IE51bWJlcihkZXRhaWwucmVjeWNsZV9wcmljZSkgfHwgMDtcclxuXHRcdFx0dGhpcy50YWdzID0gQXJyYXkuaXNBcnJheShkZXRhaWwudGFncykgPyBkZXRhaWwudGFncyA6IChkZXRhaWwudGFncyB8fCAnJykuc3BsaXQoJywnKS5tYXAoKGw6IHN0cmluZykgPT4gbC50cmltKCkpLmZpbHRlcigodGFnOiBzdHJpbmcpID0+IHRhZyk7XHJcblx0XHRcdHRoaXMuaGlkZGVuID0gISEoZGV0YWlsLmhpZGRlbiA/PyBzcmMuaGlkZGVuKTtcclxuXHRcdH0gZWxzZSBpZiAodHlwZW9mIGlkT3JSYXdEYXRhID09PSAnb2JqZWN0Jykge1xyXG5cdFx0XHQvLyBcdTYyNDFcdTVFNzNcdTVCRjlcdThDNjFcdTZBMjFcdTVGMEZcclxuXHRcdFx0dGhpcy5pZCA9IGlkT3JSYXdEYXRhLmlkIHx8ICcnO1xyXG5cdFx0XHR0aGlzLm5hbWUgPSBpZE9yUmF3RGF0YS5uYW1lIHx8ICcnO1xyXG5cdFx0XHR0aGlzLmljb24gPSBpZE9yUmF3RGF0YS5pY29uIHx8ICdcdUQ4M0RcdURDRTYnO1xyXG5cdFx0XHR0aGlzLnByaWNlID0gTnVtYmVyKGlkT3JSYXdEYXRhLnByaWNlKSB8fCAwO1xyXG5cdFx0XHR0aGlzLmFjdGl2ZUZyb20gPSB0aGlzLnBhcnNlRGF0ZShpZE9yUmF3RGF0YS5hY3RpdmVfZnJvbSB8fCBpZE9yUmF3RGF0YS5hY3RpdmVGcm9tKSB8fCBuZXcgRGF0ZSgpO1xyXG5cdFx0XHR0aGlzLmFjdGl2ZVRvID0gdGhpcy5wYXJzZURhdGUoaWRPclJhd0RhdGEuYWN0aXZlX3RvIHx8IGlkT3JSYXdEYXRhLmFjdGl2ZVRvKSB8fCB1bmRlZmluZWQ7XHJcblx0XHRcdHRoaXMucmVjeWNsZVByaWNlID0gTnVtYmVyKGlkT3JSYXdEYXRhLnJlY3ljbGVfcHJpY2UpIHx8IDA7XHJcblx0XHRcdHRoaXMudGFncyA9IEFycmF5LmlzQXJyYXkoaWRPclJhd0RhdGEudGFncykgPyBpZE9yUmF3RGF0YS50YWdzIDogKGlkT3JSYXdEYXRhLnRhZ3MgfHwgJycpLnNwbGl0KCcsJykubWFwKChsOiBzdHJpbmcpID0+IGwudHJpbSgpKS5maWx0ZXIoKHRhZzogc3RyaW5nKSA9PiB0YWcpO1xyXG5cdFx0XHR0aGlzLmhpZGRlbiA9ICEhaWRPclJhd0RhdGEuaGlkZGVuO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGFzc2V0IGRhdGEnKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHByaXZhdGUgcGFyc2VEYXRlKGRhdGVTdHI6IHN0cmluZyk6IERhdGUgfCB1bmRlZmluZWQge1xyXG5cdFx0aWYgKCFkYXRlU3RyKSByZXR1cm4gdW5kZWZpbmVkO1xyXG5cdFx0Y29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRhdGVTdHIpO1xyXG5cdFx0cmV0dXJuIGlzTmFOKGRhdGUuZ2V0VGltZSgpKSA/IHVuZGVmaW5lZCA6IGRhdGU7XHJcblx0fVxyXG5cclxuXHRnZXROYW1lKCkgeyByZXR1cm4gdGhpcy5uYW1lOyB9XHJcblx0Z2V0UHJpY2UoKSB7IHJldHVybiB0aGlzLnByaWNlOyB9XHJcblx0XHJcblx0Z2V0RGFpbHlDb3N0KG5vdzogRGF0ZSA9IG5ldyBEYXRlKCkpOiBudW1iZXIge1xyXG5cdFx0Y29uc3QgZnJvbSA9IHRoaXMuYWN0aXZlRnJvbTtcclxuXHRcdC8vIFx1OEJBMVx1N0I5N1x1NTIzMFx1OEZCRVx1NjVFNVx1NjcxRlx1RkYxQVx1ODJFNVx1NUI1OFx1NTcyOCBhY3RpdmVUb1x1RkYwQ1x1NTIxOVx1NEUwRSBub3cgXHU1M0Q2XHU4RjgzXHU2NUU5XHU4MDA1XHVGRjFCXHU1NDI2XHU1MjE5XHU1M0Q2IG5vd1xyXG5cdFx0Y29uc3QgZW5kID0gdGhpcy5hY3RpdmVUbyAmJiB0aGlzLmFjdGl2ZVRvLmdldFRpbWUoKSA8IG5vdy5nZXRUaW1lKCkgPyB0aGlzLmFjdGl2ZVRvIDogbm93O1xyXG5cdFx0Y29uc3QgZGF5cyA9IE1hdGgubWF4KDEsIE1hdGguZmxvb3IoKGVuZC5nZXRUaW1lKCkgLSBmcm9tLmdldFRpbWUoKSkgLyA4NjQwMDAwMCkpO1xyXG5cdFx0cmV0dXJuICh0aGlzLnByaWNlIC0gdGhpcy5yZWN5Y2xlUHJpY2UpIC8gZGF5cztcclxuXHR9XHJcblx0XHJcblx0Z2V0VXNhZ2VEYXlzKG5vdzogRGF0ZSA9IG5ldyBEYXRlKCkpOiBudW1iZXIge1xyXG5cdFx0Y29uc3QgZnJvbSA9IHRoaXMuYWN0aXZlRnJvbTtcclxuXHRcdGNvbnN0IGVuZCA9IHRoaXMuYWN0aXZlVG8gJiYgdGhpcy5hY3RpdmVUby5nZXRUaW1lKCkgPCBub3cuZ2V0VGltZSgpID8gdGhpcy5hY3RpdmVUbyA6IG5vdztcclxuXHRcdHJldHVybiBNYXRoLm1heCgxLCBNYXRoLmZsb29yKChlbmQuZ2V0VGltZSgpIC0gZnJvbS5nZXRUaW1lKCkpIC8gODY0MDAwMDApKTtcclxuXHR9XHJcblx0XHJcblx0aXNBY3RpdmUoZGF0ZTogRGF0ZSA9IG5ldyBEYXRlKCkpOiBib29sZWFuIHtcclxuXHRcdHJldHVybiB0aGlzLmFjdGl2ZUZyb20gPD0gZGF0ZSAmJiAoIXRoaXMuYWN0aXZlVG8gfHwgZGF0ZSA8IHRoaXMuYWN0aXZlVG8pO1xyXG5cdH1cclxuXHJcblx0dG9Ub21sU3RyaW5nKCk6IHN0cmluZyB7XHJcblx0XHRjb25zdCBmb3JtYXREYXRlID0gKGRhdGU6IERhdGUgfCB1bmRlZmluZWQpOiBzdHJpbmcgPT4ge1xyXG5cdFx0XHRpZiAoIWRhdGUpIHJldHVybiAnJztcclxuXHRcdFx0cmV0dXJuIGRhdGUudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xyXG5cdFx0fTtcclxuXHJcblx0XHRyZXR1cm4gYG5hbWUgPSBcIiR7dGhpcy5uYW1lfVwiXHJcblxyXG5bc3R5bGVdXHJcbmljb24gPSBcIiR7dGhpcy5pY29ufVwiXHJcblxyXG5bZGV0YWlsXVxyXG5wcmljZSA9ICR7dGhpcy5wcmljZX1cclxuYWN0aXZlX2Zyb20gPSBcIiR7Zm9ybWF0RGF0ZSh0aGlzLmFjdGl2ZUZyb20pfVwiXHJcbmFjdGl2ZV90byA9IFwiJHtmb3JtYXREYXRlKHRoaXMuYWN0aXZlVG8pfVwiXHJcbnJlY3ljbGVfcHJpY2UgPSAke3RoaXMucmVjeWNsZVByaWNlfVxyXG50YWdzID0gWyR7dGhpcy50YWdzLm1hcCh0YWcgPT4gYFwiJHt0YWd9XCJgKS5qb2luKCcsICcpfV1cclxuYDtcclxuXHR9XHJcblxyXG5cdC8vIFx1NEVDNVx1OEY5M1x1NTFGQSBjb3N0c2V0IFx1NTQ3RFx1NTQwRFx1N0E3QVx1OTVGNFx1NzY4NCBUT01MIFx1NzI0N1x1NkJCNVx1RkYwOFx1NzUyOFx1NEU4RVx1NUI4OVx1NTE2OFx1NTQwOFx1NUU3Nlx1RkYwOVxyXG5cdHRvQ29zdHNldFRvbWxTZWN0aW9ucygpOiBzdHJpbmcge1xyXG5cdFx0Y29uc3QgZm9ybWF0RGF0ZSA9IChkYXRlOiBEYXRlIHwgdW5kZWZpbmVkKTogc3RyaW5nID0+IHtcclxuXHRcdFx0aWYgKCFkYXRlKSByZXR1cm4gJyc7XHJcblx0XHRcdHJldHVybiBkYXRlLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcclxuXHRcdH07XHJcblx0XHRjb25zdCB0YWdzU3RyID0gdGhpcy50YWdzLm1hcCh0YWcgPT4gYFwiJHt0YWd9XCJgKS5qb2luKCcsICcpO1xyXG5cdFx0cmV0dXJuIGBbY29zdHNldF1cclxubmFtZSA9IFwiJHt0aGlzLm5hbWV9XCJcclxuaGlkZGVuID0gJHt0aGlzLmhpZGRlbiA/ICd0cnVlJyA6ICdmYWxzZSd9XHJcblxyXG5bY29zdHNldC5zdHlsZV1cclxuaWNvbiA9IFwiJHt0aGlzLmljb259XCJcclxuXHJcbltjb3N0c2V0LmRldGFpbF1cclxucHJpY2UgPSAke3RoaXMucHJpY2V9XHJcbmFjdGl2ZV9mcm9tID0gXCIke2Zvcm1hdERhdGUodGhpcy5hY3RpdmVGcm9tKX1cIlxyXG5hY3RpdmVfdG8gPSBcIiR7Zm9ybWF0RGF0ZSh0aGlzLmFjdGl2ZVRvKX1cIlxyXG5yZWN5Y2xlX3ByaWNlID0gJHt0aGlzLnJlY3ljbGVQcmljZX1cclxudGFncyA9IFske3RhZ3NTdHJ9XVxyXG5gO1xyXG5cdH1cclxufVxyXG4iLCAiaW1wb3J0IHsgQXBwLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IENvbmZpcm1Nb2RhbCB9IGZyb20gJy4vQ29uZmlybU1vZGFsJztcclxuaW1wb3J0IHsgQXNzZXRSZXBvc2l0b3J5IH0gZnJvbSAnLi4vLi4vcmVwb3NpdG9yaWVzL0Fzc2V0UmVwb3NpdG9yeSc7XHJcbmltcG9ydCB7IEFzc2V0IH0gZnJvbSAnLi4vLi4vbW9kZWxzL0Fzc2V0JztcclxuXHJcbi8vIFx1OEQ0NFx1NEVBN1x1ODg2OFx1NTM1NVx1NUYzOVx1N0E5N1x1RkYwOFx1NTkwRFx1NzUyOFx1NjVFNVx1NjcxRi9cdTY4MDdcdTdCN0VcdTVGMzlcdTdBOTdcdTk4Q0VcdTY4M0NcdUZGMDlcclxuZXhwb3J0IGNsYXNzIEFzc2V0Rm9ybU1vZGFsIHtcclxuXHRwcml2YXRlIGFwcDogQXBwO1xyXG5cdHByaXZhdGUgYXNzZXRSZXBvc2l0b3J5OiBBc3NldFJlcG9zaXRvcnk7XHJcblx0cHJpdmF0ZSBhc3NldD86IEFzc2V0O1xyXG5cdHByaXZhdGUgbWFza0VsPzogSFRNTEVsZW1lbnQ7XHJcblx0cHJpdmF0ZSBtb2RhbEVsPzogSFRNTEVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIG9uU2F2ZWQ/OiAoKSA9PiB2b2lkO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgYXNzZXRSZXBvc2l0b3J5OiBBc3NldFJlcG9zaXRvcnksIGFzc2V0PzogQXNzZXQsIG9uU2F2ZWQ/OiAoKSA9PiB2b2lkKSB7XHJcblx0XHR0aGlzLmFwcCA9IGFwcDtcclxuXHRcdHRoaXMuYXNzZXRSZXBvc2l0b3J5ID0gYXNzZXRSZXBvc2l0b3J5O1xyXG5cdFx0dGhpcy5hc3NldCA9IGFzc2V0O1xyXG4gICAgICAgIHRoaXMub25TYXZlZCA9IG9uU2F2ZWQ7XHJcblx0fVxyXG5cclxuXHRvcGVuKCkge1xyXG5cdFx0Ly8gXHU5MDZFXHU3RjY5XHJcblx0XHR0aGlzLm1hc2tFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0dGhpcy5tYXNrRWwuY2xhc3NOYW1lID0gJ2RhdGUtcGlja2VyLW1hc2snO1xyXG5cclxuXHRcdC8vIFx1NUYzOVx1N0E5N1x1NUJCOVx1NTY2OFx1RkYwOFx1NTkwRFx1NzUyOFx1NjVFNVx1NjcxRlx1OTAwOVx1NjJFOVx1NTY2OFx1NjgzN1x1NUYwRlx1NUU3Nlx1NTJBMFx1ODFFQVx1NUI5QVx1NEU0OVx1NjgwN1x1OEJDNlx1RkYwOVxyXG5cdFx0dGhpcy5tb2RhbEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHR0aGlzLm1vZGFsRWwuY2xhc3NOYW1lID0gJ2RhdGUtcGlja2VyLW1vZGFsIGFzc2V0LWZvcm0tbW9kYWwnO1xyXG5cdFx0Ly8gXHU2Q0U4XHU1MTY1XHU0RTAwXHU2QjIxXHU2MDI3XHU3Njg0XHU2QTJBXHU1NDExXHU4ODY4XHU1MzU1XHU2ODM3XHU1RjBGXHVGRjBDXHU5NjREXHU0RjRFXHU2NTc0XHU0RjUzXHU5QUQ4XHU1RUE2XHJcblx0XHR0aGlzLmluamVjdEFzc2V0Rm9ybVN0eWxlcygpO1xyXG5cclxuXHRcdGNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdGNvbnRlbnQuY2xhc3NOYW1lID0gJ2RhdGUtcGlja2VyLWNvbnRlbnQnO1xyXG5cdFx0KGNvbnRlbnQuc3R5bGUgYXMgYW55KS5nYXAgPSAnMHB4JztcclxuXHJcblx0XHQvLyBcdTUzQkJcdTYzODlcdTY4MDdcdTk4OThcdTY2M0VcdTc5M0FcclxuXHJcblx0XHQvLyBcdTg4NjhcdTUzNTVcclxuXHRcdGNvbnN0IGZvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmb3JtJyk7XHJcblx0XHRmb3JtLmNsYXNzTmFtZSA9ICdhc3NldC1mb3JtIGFzc2V0LWZvcm0tLWhvcml6b250YWwnO1xyXG5cdFx0Zm9ybS5zdHlsZS5kaXNwbGF5ID0gJ2dyaWQnO1xyXG5cdFx0KGZvcm0uc3R5bGUgYXMgYW55KS5ncmlkVGVtcGxhdGVDb2x1bW5zID0gJzFmcic7XHJcblx0XHRmb3JtLnN0eWxlLnJvd0dhcCA9ICcwcHgnO1xyXG5cdFx0KGZvcm0uc3R5bGUgYXMgYW55KS5nYXAgPSAnMHB4JztcclxuXHJcblx0XHQvLyBcdTIwMTRcdTIwMTQgXHU4ODY4XHU1MzU1XHU2ODIxXHU5QThDXHU1REU1XHU1MTc3IFx1MjAxNFx1MjAxNFxyXG5cdFx0Y29uc3QgZW5zdXJlRXJyb3JFbCA9IChncm91cDogSFRNTEVsZW1lbnQpOiBIVE1MRWxlbWVudCA9PiB7XHJcblx0XHRcdGxldCBlcnIgPSBncm91cC5xdWVyeVNlbGVjdG9yKCcuZmllbGQtZXJyb3InKSBhcyBIVE1MRWxlbWVudCB8IG51bGw7XHJcblx0XHRcdGlmICghZXJyKSB7XHJcblx0XHRcdFx0Y29uc3QgZmllbGQgPSBncm91cC5xdWVyeVNlbGVjdG9yKCcuZm9ybS1maWVsZCcpIGFzIEhUTUxFbGVtZW50IHwgbnVsbDtcclxuXHRcdFx0XHRlcnIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdFx0XHRlcnIuY2xhc3NOYW1lID0gJ2ZpZWxkLWVycm9yJztcclxuXHRcdFx0XHRpZiAoZmllbGQpIGZpZWxkLmFwcGVuZENoaWxkKGVycik7XHJcblx0XHRcdFx0ZWxzZSBncm91cC5hcHBlbmRDaGlsZChlcnIpO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiBlcnI7XHJcblx0XHR9O1xyXG5cdFx0Y29uc3Qgc2V0RXJyb3IgPSAoZ3JvdXA6IEhUTUxFbGVtZW50LCBtZXNzYWdlOiBzdHJpbmcpID0+IHtcclxuXHRcdFx0Z3JvdXAuY2xhc3NMaXN0LmFkZCgnaGFzLWVycm9yJyk7XHJcblx0XHRcdGNvbnN0IGlucHV0ID0gZ3JvdXAucXVlcnlTZWxlY3RvcignaW5wdXQsIHRleHRhcmVhLCBzZWxlY3QnKSBhcyBIVE1MRWxlbWVudCB8IG51bGw7XHJcblx0XHRcdGlmIChpbnB1dCkgKGlucHV0IGFzIGFueSkuc2V0QXR0cmlidXRlKCdhcmlhLWludmFsaWQnLCAndHJ1ZScpO1xyXG5cdFx0XHRlbnN1cmVFcnJvckVsKGdyb3VwKS50ZXh0Q29udGVudCA9IG1lc3NhZ2U7XHJcblx0XHR9O1xyXG5cdFx0Y29uc3QgY2xlYXJFcnJvciA9IChncm91cDogSFRNTEVsZW1lbnQpID0+IHtcclxuXHRcdFx0Z3JvdXAuY2xhc3NMaXN0LnJlbW92ZSgnaGFzLWVycm9yJyk7XHJcblx0XHRcdGNvbnN0IGlucHV0ID0gZ3JvdXAucXVlcnlTZWxlY3RvcignaW5wdXQsIHRleHRhcmVhLCBzZWxlY3QnKSBhcyBIVE1MRWxlbWVudCB8IG51bGw7XHJcblx0XHRcdGlmIChpbnB1dCkgKGlucHV0IGFzIGFueSkuc2V0QXR0cmlidXRlKCdhcmlhLWludmFsaWQnLCAnZmFsc2UnKTtcclxuXHRcdFx0Y29uc3QgZXJyID0gZ3JvdXAucXVlcnlTZWxlY3RvcignLmZpZWxkLWVycm9yJykgYXMgSFRNTEVsZW1lbnQgfCBudWxsO1xyXG5cdFx0XHRpZiAoZXJyKSBlcnIucmVtb3ZlKCk7XHJcblx0XHR9O1xyXG5cclxuXHRcdC8vIFx1NTQwRFx1NzlGMFxyXG5cdFx0Y29uc3QgbmFtZUdyb3VwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHRuYW1lR3JvdXAuY2xhc3NOYW1lID0gJ2Zvcm0tZ3JvdXAnO1xyXG5cdFx0e1xyXG5cdFx0XHRjb25zdCBsYmwgPSB0aGlzLmNyZWF0ZUxhYmVsKCdcdTU0MERcdTc5RjAnKTtcclxuXHRcdFx0bGJsLmNsYXNzTGlzdC5hZGQoJ2xhYmVsLXJlcXVpcmVkJyk7XHJcblx0XHRcdG5hbWVHcm91cC5hcHBlbmRDaGlsZChsYmwpO1xyXG5cdFx0fVxyXG5cdFx0Y29uc3QgbmFtZUlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcclxuXHRcdG5hbWVJbnB1dC50eXBlID0gJ3RleHQnO1xyXG5cdFx0bmFtZUlucHV0LnBsYWNlaG9sZGVyID0gJ1x1OEQ0NFx1NEVBN1x1NTQwRFx1NzlGMCc7XHJcblx0XHRpZiAodGhpcy5hc3NldCkgbmFtZUlucHV0LnZhbHVlID0gdGhpcy5hc3NldC5uYW1lO1xyXG5cdFx0e1xyXG5cdFx0XHRjb25zdCBmaWVsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0XHRmaWVsZC5jbGFzc05hbWUgPSAnZm9ybS1maWVsZCc7XHJcblx0XHRcdGZpZWxkLmFwcGVuZENoaWxkKG5hbWVJbnB1dCk7XHJcblx0XHRcdG5hbWVHcm91cC5hcHBlbmRDaGlsZChmaWVsZCk7XHJcblx0XHR9XHJcblx0XHR0aGlzLmFwcGx5Um93TGF5b3V0KG5hbWVHcm91cCk7XHJcblx0XHRmb3JtLmFwcGVuZENoaWxkKG5hbWVHcm91cCk7XHJcblx0XHRjb25zdCB2YWxpZGF0ZU5hbWUgPSAoKSA9PiB7XHJcblx0XHRcdGNvbnN0IHYgPSAobmFtZUlucHV0LnZhbHVlIHx8ICcnKS50cmltKCk7XHJcblx0XHRcdGlmICghdikgeyBzZXRFcnJvcihuYW1lR3JvdXAsICdcdThCRjdcdTU4NkJcdTUxOTlcdTU0MERcdTc5RjAnKTsgcmV0dXJuIGZhbHNlOyB9XHJcblx0XHRcdGNsZWFyRXJyb3IobmFtZUdyb3VwKTsgcmV0dXJuIHRydWU7XHJcblx0XHR9O1xyXG5cdFx0bmFtZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgdmFsaWRhdGVOYW1lKTtcclxuXHRcdG5hbWVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgdmFsaWRhdGVOYW1lKTtcclxuXHJcblx0XHQvLyBcdTU2RkVcdTY4MDdcclxuXHRcdGNvbnN0IGljb25Hcm91cCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0aWNvbkdyb3VwLmNsYXNzTmFtZSA9ICdmb3JtLWdyb3VwJztcclxuXHRcdGljb25Hcm91cC5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUxhYmVsKCdcdTU2RkVcdTY4MDcnKSk7XHJcblx0XHRjb25zdCBpY29uSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xyXG5cdFx0aWNvbklucHV0LnR5cGUgPSAndGV4dCc7XHJcblx0XHRpY29uSW5wdXQucGxhY2Vob2xkZXIgPSAnXHVEODNEXHVERTBBXHU4QkY3XHU4RjkzXHU1MTY1XHU0RTAwXHU0RTJBIEVtb2ppIFx1NEY1Q1x1NEUzQVx1NTZGRVx1NjgwNyc7XHJcblx0XHRpZiAodGhpcy5hc3NldCkgaWNvbklucHV0LnZhbHVlID0gdGhpcy5hc3NldC5pY29uOyBlbHNlIHtcclxuXHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRjb25zdCBwbHVnaW4gPSAodGhpcy5hcHAgYXMgYW55KS5wbHVnaW5zPy5wbHVnaW5zPy5bJ2xhYy1jb3N0c2V0J107XHJcblx0XHRcdFx0Y29uc3QgZmFsbGJhY2sgPSAnXHVEODNEXHVEQ0U2JztcclxuXHRcdFx0XHRpY29uSW5wdXQudmFsdWUgPSAocGx1Z2luICYmIHBsdWdpbi5zZXR0aW5ncyAmJiBwbHVnaW4uc2V0dGluZ3MuZGVmYXVsdEljb24pID8gcGx1Z2luLnNldHRpbmdzLmRlZmF1bHRJY29uIDogZmFsbGJhY2s7XHJcblx0XHRcdH0gY2F0Y2ggKF8pIHtcclxuXHRcdFx0XHRpY29uSW5wdXQudmFsdWUgPSAnXHVEODNEXHVEQ0U2JztcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0Y29uc3QgZW5mb3JjZVNpbmdsZUVtb2ppID0gKCkgPT4ge1xyXG5cdFx0XHRjb25zdCBmaXJzdCA9IHRoaXMuZ2V0Rmlyc3RFbW9qaUdyYXBoZW1lKGljb25JbnB1dC52YWx1ZSB8fCAnJyk7XHJcblx0XHRcdGljb25JbnB1dC52YWx1ZSA9IGZpcnN0IHx8ICcnO1xyXG5cdFx0fTtcclxuXHRcdGljb25JbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGVuZm9yY2VTaW5nbGVFbW9qaSk7XHJcblx0XHRpY29uSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigncGFzdGUnLCAoZSkgPT4geyBzZXRUaW1lb3V0KGVuZm9yY2VTaW5nbGVFbW9qaSwgMCk7IH0pO1xyXG5cdFx0e1xyXG5cdFx0XHRjb25zdCBmaWVsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0XHRmaWVsZC5jbGFzc05hbWUgPSAnZm9ybS1maWVsZCc7XHJcblx0XHRcdGZpZWxkLmFwcGVuZENoaWxkKGljb25JbnB1dCk7XHJcblx0XHRcdGljb25Hcm91cC5hcHBlbmRDaGlsZChmaWVsZCk7XHJcblx0XHR9XHJcblx0XHR0aGlzLmFwcGx5Um93TGF5b3V0KGljb25Hcm91cCk7XHJcblx0XHRmb3JtLmFwcGVuZENoaWxkKGljb25Hcm91cCk7XHJcblxyXG5cdFx0Ly8gXHU0RUY3XHU2ODNDXHJcblx0XHRjb25zdCBwcmljZUdyb3VwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHRwcmljZUdyb3VwLmNsYXNzTmFtZSA9ICdmb3JtLWdyb3VwJztcclxuXHRcdHtcclxuXHRcdFx0Y29uc3QgbGJsID0gdGhpcy5jcmVhdGVMYWJlbCgnXHU0RUY3XHU2ODNDJyk7XHJcblx0XHRcdGxibC5jbGFzc0xpc3QuYWRkKCdsYWJlbC1yZXF1aXJlZCcpO1xyXG5cdFx0XHRwcmljZUdyb3VwLmFwcGVuZENoaWxkKGxibCk7XHJcblx0XHR9XHJcblx0XHRjb25zdCBwcmljZUlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG5cdFx0cHJpY2VJbnB1dC50eXBlID0gJ251bWJlcic7XHJcblx0XHRwcmljZUlucHV0LnBsYWNlaG9sZGVyID0gJ1x1OEQyRFx1NTE2NVx1NEVGN1x1NjgzQ1x1RkYwOFx1NTE0M1x1RkYwOSc7XHJcblx0XHRwcmljZUlucHV0LnN0ZXAgPSAnMC4wMSc7XHJcblx0XHRpZiAodGhpcy5hc3NldCkgcHJpY2VJbnB1dC52YWx1ZSA9IHRoaXMuYXNzZXQucHJpY2UudG9TdHJpbmcoKTtcclxuXHRcdC8vIFx1NEUwRSBjb3N0c2V0YXBwIFx1NUJGOVx1OUY1MFx1RkYxQVx1OEY5M1x1NTE2NVx1NEUwRVx1NTkzMVx1NzEyNlx1NjVGNlx1NTFDMFx1NTMxNlx1NEUzQVx1NTQwOFx1NkNENVx1NjU3MFx1NUI1N1x1NjgzQ1x1NUYwRlxyXG5cdFx0Y29uc3Qgc2FuaXRpemVOdW1lcmljID0gKGVsOiBIVE1MSW5wdXRFbGVtZW50KSA9PiB7XHJcblx0XHRcdGVsLnZhbHVlID0gdGhpcy5zYW5pdGl6ZU51bWVyaWNTdHJpbmcoZWwudmFsdWUgfHwgJycpO1xyXG5cdFx0fTtcclxuXHRcdGNvbnN0IGxpbWl0VHdvRGVjaW1hbHMgPSAoZWw6IEhUTUxJbnB1dEVsZW1lbnQpID0+IHtcclxuXHRcdFx0ZWwudmFsdWUgPSB0aGlzLmNsYW1wVHdvRGVjaW1hbHNTdHJpbmcoZWwudmFsdWUgfHwgJycpO1xyXG5cdFx0fTtcclxuXHRcdHByaWNlSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiBzYW5pdGl6ZU51bWVyaWMocHJpY2VJbnB1dCkpO1xyXG5cdFx0cHJpY2VJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgKCkgPT4geyBzYW5pdGl6ZU51bWVyaWMocHJpY2VJbnB1dCk7IGxpbWl0VHdvRGVjaW1hbHMocHJpY2VJbnB1dCk7IH0pO1xyXG5cdFx0e1xyXG5cdFx0XHRjb25zdCBmaWVsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0XHRmaWVsZC5jbGFzc05hbWUgPSAnZm9ybS1maWVsZCc7XHJcblx0XHRcdGZpZWxkLmFwcGVuZENoaWxkKHByaWNlSW5wdXQpO1xyXG5cdFx0XHRwcmljZUdyb3VwLmFwcGVuZENoaWxkKGZpZWxkKTtcclxuXHRcdH1cclxuXHRcdHRoaXMuYXBwbHlSb3dMYXlvdXQocHJpY2VHcm91cCk7XHJcblx0XHRmb3JtLmFwcGVuZENoaWxkKHByaWNlR3JvdXApO1xyXG5cdFx0Y29uc3QgdmFsaWRhdGVQcmljZSA9ICgpID0+IHtcclxuXHRcdFx0Y29uc3Qgc3RyID0gKHByaWNlSW5wdXQudmFsdWUgfHwgJycpLnRyaW0oKTtcclxuXHRcdFx0Y29uc3QgbnVtID0gdGhpcy5wYXJzZU1vbmV5KHN0cik7XHJcblx0XHRcdGlmIChudW0gPT09IG51bGwpIHsgc2V0RXJyb3IocHJpY2VHcm91cCwgJ1x1OEJGN1x1NTg2Qlx1NTE5OVx1NjcwOVx1NjU0OFx1NzY4NFx1NEVGN1x1NjgzQycpOyByZXR1cm4gZmFsc2U7IH1cclxuXHRcdFx0Y2xlYXJFcnJvcihwcmljZUdyb3VwKTsgcmV0dXJuIHRydWU7XHJcblx0XHR9O1xyXG5cdFx0cHJpY2VJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIHZhbGlkYXRlUHJpY2UpO1xyXG5cdFx0cHJpY2VJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgdmFsaWRhdGVQcmljZSk7XHJcblxyXG5cdFx0Ly8gXHU1RjAwXHU1OUNCXHU2NUU1XHU2NzFGXHJcblx0XHRjb25zdCBmcm9tR3JvdXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdGZyb21Hcm91cC5jbGFzc05hbWUgPSAnZm9ybS1ncm91cCc7XHJcblx0XHR7XHJcblx0XHRcdGNvbnN0IGxibCA9IHRoaXMuY3JlYXRlTGFiZWwoJ1x1OEQyRFx1NTE2NVx1NEU4RScpO1xyXG5cdFx0XHRsYmwuY2xhc3NMaXN0LmFkZCgnbGFiZWwtcmVxdWlyZWQnKTtcclxuXHRcdFx0ZnJvbUdyb3VwLmFwcGVuZENoaWxkKGxibCk7XHJcblx0XHR9XHJcblx0XHRjb25zdCBmcm9tSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcblx0XHRmcm9tSW5wdXQudHlwZSA9ICd0ZXh0JztcclxuXHRcdGZyb21JbnB1dC5yZWFkT25seSA9IHRydWU7XHJcblx0XHRmcm9tSW5wdXQucGxhY2Vob2xkZXIgPSAnXHU4RDJEXHU1MTY1XHU2NUU1XHU2NzFGJztcclxuXHRcdGZyb21JbnB1dC52YWx1ZSA9IHRoaXMuYXNzZXQgPyB0aGlzLmZvcm1hdERhdGVMb2NhbCh0aGlzLmFzc2V0LmFjdGl2ZUZyb20pIDogJyc7XHJcblx0XHRmcm9tSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0XHRcdHRoaXMub3BlbkRhdGVQaWNrZXIoZnJvbUlucHV0LnZhbHVlID8gbmV3IERhdGUoZnJvbUlucHV0LnZhbHVlKSA6ICh0aGlzLmFzc2V0Py5hY3RpdmVGcm9tIHx8IG5ldyBEYXRlKCkpLCAocGlja2VkKSA9PiB7XHJcblx0XHRcdFx0ZnJvbUlucHV0LnZhbHVlID0gdGhpcy5mb3JtYXREYXRlTG9jYWwocGlja2VkKTtcclxuXHRcdFx0XHRjbGVhckVycm9yKGZyb21Hcm91cCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblx0XHR7XHJcblx0XHRcdGNvbnN0IGZpZWxkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHRcdGZpZWxkLmNsYXNzTmFtZSA9ICdmb3JtLWZpZWxkJztcclxuXHRcdFx0ZmllbGQuYXBwZW5kQ2hpbGQoZnJvbUlucHV0KTtcclxuXHRcdFx0ZnJvbUdyb3VwLmFwcGVuZENoaWxkKGZpZWxkKTtcclxuXHRcdH1cclxuXHRcdHRoaXMuYXBwbHlSb3dMYXlvdXQoZnJvbUdyb3VwKTtcclxuXHRcdGZvcm0uYXBwZW5kQ2hpbGQoZnJvbUdyb3VwKTtcclxuXHRcdGNvbnN0IHZhbGlkYXRlRnJvbSA9ICgpID0+IHtcclxuXHRcdFx0aWYgKCFmcm9tSW5wdXQudmFsdWUpIHsgc2V0RXJyb3IoZnJvbUdyb3VwLCAnXHU4QkY3XHU5MDA5XHU2MkU5XHU4RDJEXHU1MTY1XHU2NUU1XHU2NzFGJyk7IHJldHVybiBmYWxzZTsgfVxyXG5cdFx0XHRjbGVhckVycm9yKGZyb21Hcm91cCk7IHJldHVybiB0cnVlO1xyXG5cdFx0fTtcclxuXHRcdGZyb21JbnB1dC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgdmFsaWRhdGVGcm9tKTtcclxuXHJcblx0XHQvLyBcdTdFRDNcdTY3NUZcdTY1RTVcdTY3MUZcclxuXHRcdGNvbnN0IHRvR3JvdXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdHRvR3JvdXAuY2xhc3NOYW1lID0gJ2Zvcm0tZ3JvdXAnO1xyXG5cdFx0dG9Hcm91cC5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUxhYmVsKCdcdTUyMzBcdTY3MUYnKSk7XHJcblx0XHRjb25zdCB0b0lucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG5cdFx0dG9JbnB1dC50eXBlID0gJ3RleHQnO1xyXG5cdFx0dG9JbnB1dC5yZWFkT25seSA9IHRydWU7XHJcblx0XHR0b0lucHV0LnBsYWNlaG9sZGVyID0gJyhcdThCQTFcdTUyMTIpXHU2MkE1XHU1RTlGL1x1NTZERVx1NjUzNi9cdTUyMzBcdTY3MUZcdTY1RjZcdTk1RjQnO1xyXG5cdFx0dG9JbnB1dC52YWx1ZSA9ICh0aGlzLmFzc2V0ICYmIHRoaXMuYXNzZXQuYWN0aXZlVG8pID8gdGhpcy5mb3JtYXREYXRlTG9jYWwodGhpcy5hc3NldC5hY3RpdmVUbykgOiAnJztcclxuXHRcdGxldCBjbGVhckJ0bjogSFRNTEJ1dHRvbkVsZW1lbnQgfCB1bmRlZmluZWQ7XHJcblx0XHRjb25zdCB1cGRhdGVUb0NsZWFyID0gKCkgPT4geyBpZiAoY2xlYXJCdG4pIGNsZWFyQnRuLnN0eWxlLmRpc3BsYXkgPSB0b0lucHV0LnZhbHVlID8gJ2lubGluZS1mbGV4JyA6ICdub25lJzsgfTtcclxuXHRcdHRvSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0XHRcdHRoaXMub3BlbkRhdGVQaWNrZXIodG9JbnB1dC52YWx1ZSA/IG5ldyBEYXRlKHRvSW5wdXQudmFsdWUpIDogKHRoaXMuYXNzZXQ/LmFjdGl2ZVRvIHx8IG5ldyBEYXRlKCkpLCAocGlja2VkKSA9PiB7XHJcblx0XHRcdFx0dG9JbnB1dC52YWx1ZSA9IHRoaXMuZm9ybWF0RGF0ZUxvY2FsKHBpY2tlZCk7XHJcblx0XHRcdFx0dXBkYXRlVG9DbGVhcigpO1xyXG5cdFx0XHRcdC8vIFx1NjgyMVx1OUE4Q1x1NTMzQVx1OTVGNFxyXG5cdFx0XHRcdGlmIChmcm9tSW5wdXQudmFsdWUpIHtcclxuXHRcdFx0XHRcdGNvbnN0IGZkID0gbmV3IERhdGUoZnJvbUlucHV0LnZhbHVlKTtcclxuXHRcdFx0XHRcdGNvbnN0IHRkID0gbmV3IERhdGUodG9JbnB1dC52YWx1ZSk7XHJcblx0XHRcdFx0XHRpZiAodGQuZ2V0VGltZSgpIDwgZmQuZ2V0VGltZSgpKSBzZXRFcnJvcih0b0dyb3VwLCAnXHU1MjMwXHU2NzFGXHU2NUU1XHU2NzFGXHU5NzAwXHU0RTBEXHU2NUU5XHU0RThFXHU4RDJEXHU1MTY1XHU2NUU1XHU2NzFGJyk7IGVsc2UgY2xlYXJFcnJvcih0b0dyb3VwKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblx0XHR7XHJcblx0XHRcdGNvbnN0IGZpZWxkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHRcdGZpZWxkLmNsYXNzTmFtZSA9ICdmb3JtLWZpZWxkJztcclxuXHRcdFx0Y29uc3Qgd3JhcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0XHR3cmFwLmNsYXNzTmFtZSA9ICdpbnB1dC13aXRoLWNsZWFyJztcclxuXHRcdFx0d3JhcC5hcHBlbmRDaGlsZCh0b0lucHV0KTtcclxuXHRcdFx0Y2xlYXJCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuXHRcdFx0Y2xlYXJCdG4udHlwZSA9ICdidXR0b24nO1xyXG5cdFx0XHRjbGVhckJ0bi5jbGFzc05hbWUgPSAnaW5wdXQtY2xlYXInO1xyXG5cdFx0XHRjbGVhckJ0bi50ZXh0Q29udGVudCA9ICdcdTAwRDcnO1xyXG5cdFx0XHRjbGVhckJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpOyBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdHRvSW5wdXQudmFsdWUgPSAnJztcclxuXHRcdFx0XHR1cGRhdGVUb0NsZWFyKCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0XHR3cmFwLmFwcGVuZENoaWxkKGNsZWFyQnRuKTtcclxuXHRcdFx0ZmllbGQuYXBwZW5kQ2hpbGQod3JhcCk7XHJcblx0XHRcdHRvR3JvdXAuYXBwZW5kQ2hpbGQoZmllbGQpO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5hcHBseVJvd0xheW91dCh0b0dyb3VwKTtcclxuXHRcdGZvcm0uYXBwZW5kQ2hpbGQodG9Hcm91cCk7XHJcblx0XHQvLyBcdTUyMURcdTU5Q0JcdTUzMTZcdTZFMDVcdTk2NjRcdTYzMDlcdTk0QUVcdTUzRUZcdTg5QzFcdTYwMjdcclxuXHRcdHVwZGF0ZVRvQ2xlYXIoKTtcclxuXHJcblx0XHQvLyBcdTU2REVcdTY1MzZcdTRFRjdcdTY4M0NcclxuXHRcdGNvbnN0IHJlY3ljbGVHcm91cCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0cmVjeWNsZUdyb3VwLmNsYXNzTmFtZSA9ICdmb3JtLWdyb3VwJztcclxuXHRcdHJlY3ljbGVHcm91cC5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUxhYmVsKCdcdTU2REVcdTY1MzZcdTRFRjcnKSk7XHJcblx0XHRjb25zdCByZWN5Y2xlSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcblx0XHRyZWN5Y2xlSW5wdXQudHlwZSA9ICdudW1iZXInO1xyXG5cdFx0cmVjeWNsZUlucHV0LnBsYWNlaG9sZGVyID0gJ1x1NTZERVx1NjUzNlx1NEVGN1x1NjgzQ1x1RkYwOFx1NTE0M1x1RkYwOSc7XHJcblx0XHRyZWN5Y2xlSW5wdXQuc3RlcCA9ICcwLjAxJztcclxuXHRcdGlmICh0aGlzLmFzc2V0KSByZWN5Y2xlSW5wdXQudmFsdWUgPSB0aGlzLmFzc2V0LnJlY3ljbGVQcmljZS50b1N0cmluZygpO1xyXG5cdFx0cmVjeWNsZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4gc2FuaXRpemVOdW1lcmljKHJlY3ljbGVJbnB1dCkpO1xyXG5cdFx0cmVjeWNsZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCAoKSA9PiB7IHNhbml0aXplTnVtZXJpYyhyZWN5Y2xlSW5wdXQpOyBsaW1pdFR3b0RlY2ltYWxzKHJlY3ljbGVJbnB1dCk7IH0pO1xyXG5cdFx0e1xyXG5cdFx0XHRjb25zdCBmaWVsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0XHRmaWVsZC5jbGFzc05hbWUgPSAnZm9ybS1maWVsZCc7XHJcblx0XHRcdGZpZWxkLmFwcGVuZENoaWxkKHJlY3ljbGVJbnB1dCk7XHJcblx0XHRcdHJlY3ljbGVHcm91cC5hcHBlbmRDaGlsZChmaWVsZCk7XHJcblx0XHR9XHJcblx0XHR0aGlzLmFwcGx5Um93TGF5b3V0KHJlY3ljbGVHcm91cCk7XHJcblx0XHRmb3JtLmFwcGVuZENoaWxkKHJlY3ljbGVHcm91cCk7XHJcblxyXG5cclxuXHRcdC8vIFx1NjgwN1x1N0I3RVx1RkYwOGNoaXBzICsgXHU1NkRFXHU4RjY2XHU3ODZFXHU4QkE0XHVGRjA5XHJcblx0XHRjb25zdCB0YWdzR3JvdXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdHRhZ3NHcm91cC5jbGFzc05hbWUgPSAnZm9ybS1ncm91cCc7XHJcblx0XHR0YWdzR3JvdXAuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVMYWJlbCgnXHU2ODA3XHU3QjdFJykpO1xyXG5cdFx0bGV0IGN1cnJlbnRUYWdzOiBzdHJpbmdbXSA9IHRoaXMuYXNzZXQgPyBbLi4uKHRoaXMuYXNzZXQudGFncyB8fCBbXSldIDogW107XHJcblx0XHRjb25zdCB0YWdzV3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0dGFnc1dyYXBwZXIuY2xhc3NOYW1lID0gJ3RhZ3MtaW5wdXQnO1xyXG5cdFx0Y29uc3QgdGFnc0lucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG5cdFx0dGFnc0lucHV0LnR5cGUgPSAndGV4dCc7XHJcblx0XHR0YWdzSW5wdXQucGxhY2Vob2xkZXIgPSAnXHU4RjkzXHU1MTY1XHU2ODA3XHU3QjdFXHVGRjBDXHU1NkRFXHU4RjY2XHU3ODZFXHU4QkE0JztcclxuXHRcdHRhZ3NXcmFwcGVyLmFwcGVuZENoaWxkKHRhZ3NJbnB1dCk7XHJcblx0XHR7XHJcblx0XHRcdGNvbnN0IGZpZWxkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHRcdGZpZWxkLmNsYXNzTmFtZSA9ICdmb3JtLWZpZWxkJztcclxuXHRcdFx0ZmllbGQuYXBwZW5kQ2hpbGQodGFnc1dyYXBwZXIpO1xyXG5cdFx0XHR0YWdzR3JvdXAuYXBwZW5kQ2hpbGQoZmllbGQpO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5hcHBseVJvd0xheW91dCh0YWdzR3JvdXApO1xyXG5cdFx0Zm9ybS5hcHBlbmRDaGlsZCh0YWdzR3JvdXApO1xyXG5cclxuXHRcdGNvbnN0IG5vcm1hbGl6ZSA9ICh0OiBzdHJpbmcpID0+IHQudHJpbSgpO1xyXG5cdFx0Y29uc3QgYWRkVGFnID0gKHJhdzogc3RyaW5nKSA9PiB7XHJcblx0XHRcdGNvbnN0IHBpZWNlcyA9IHJhdy5zcGxpdCgvW1x1RkYwQyxcXHNdKy8pLm1hcChub3JtYWxpemUpLmZpbHRlcihCb29sZWFuKTtcclxuXHRcdFx0cGllY2VzLmZvckVhY2gocCA9PiB7IGlmICghY3VycmVudFRhZ3MuaW5jbHVkZXMocCkpIGN1cnJlbnRUYWdzLnB1c2gocCk7IH0pO1xyXG5cdFx0XHRzeW5jQ2hpcHMoKTtcclxuXHRcdFx0dGFnc0lucHV0LnZhbHVlID0gJyc7XHJcblx0XHR9O1xyXG5cdFx0Y29uc3QgcmVtb3ZlVGFnID0gKHZhbHVlOiBzdHJpbmcpID0+IHtcclxuXHRcdFx0Y3VycmVudFRhZ3MgPSBjdXJyZW50VGFncy5maWx0ZXIodCA9PiB0ICE9PSB2YWx1ZSk7XHJcblx0XHRcdHN5bmNDaGlwcygpO1xyXG5cdFx0fTtcclxuXHRcdGNvbnN0IHN5bmNDaGlwcyA9ICgpID0+IHtcclxuXHRcdFx0QXJyYXkuZnJvbSh0YWdzV3JhcHBlci5xdWVyeVNlbGVjdG9yQWxsKCcudGFnLWNoaXAnKSkuZm9yRWFjaChlbCA9PiBlbC5yZW1vdmUoKSk7XHJcblx0XHRcdGN1cnJlbnRUYWdzLmZvckVhY2godGFnID0+IHtcclxuXHRcdFx0XHRjb25zdCBjaGlwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG5cdFx0XHRcdGNoaXAuY2xhc3NOYW1lID0gJ3RhZy1jaGlwJztcclxuXHRcdFx0XHRjaGlwLnRleHRDb250ZW50ID0gdGFnO1xyXG5cdFx0XHRcdGNvbnN0IHJtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcblx0XHRcdFx0cm0udHlwZSA9ICdidXR0b24nO1xyXG5cdFx0XHRcdHJtLmNsYXNzTmFtZSA9ICdyZW1vdmUnO1xyXG5cdFx0XHRcdHJtLnRleHRDb250ZW50ID0gJ1x1MDBENyc7XHJcblx0XHRcdFx0cm0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiByZW1vdmVUYWcodGFnKSk7XHJcblx0XHRcdFx0Y2hpcC5hcHBlbmRDaGlsZChybSk7XHJcblx0XHRcdFx0dGFnc1dyYXBwZXIuaW5zZXJ0QmVmb3JlKGNoaXAsIHRhZ3NJbnB1dCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fTtcclxuXHJcblx0XHQvLyBcdTUyMURcdTU5Q0JcdTZFMzJcdTY3RDNcdTVERjJcdTVCNThcdTU3MjhcdTY4MDdcdTdCN0VcclxuXHRcdHN5bmNDaGlwcygpO1xyXG5cclxuXHRcdC8vIFx1OEY5M1x1NTE2NVx1NEVBNFx1NEU5Mlx1RkYxQUVudGVyIFx1NjIxNlx1OTAxN1x1NTNGN1x1NjNEMFx1NEVBNFx1RkYxQkJhY2tzcGFjZSBcdTUyMjBcdTk2NjRcdTY3MDBcdTU0MEVcdTRFMDBcdTRFMkFcclxuXHRcdHRhZ3NJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGU6IEtleWJvYXJkRXZlbnQpID0+IHtcclxuXHRcdFx0aWYgKGUua2V5ID09PSAnRW50ZXInIHx8IGUua2V5ID09PSAnLCcgfHwgZS5rZXkgPT09ICdcdUZGMEMnKSB7XHJcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdGlmICh0YWdzSW5wdXQudmFsdWUudHJpbSgpKSBhZGRUYWcodGFnc0lucHV0LnZhbHVlKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoZS5rZXkgPT09ICdCYWNrc3BhY2UnICYmICF0YWdzSW5wdXQudmFsdWUgJiYgY3VycmVudFRhZ3MubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRyZW1vdmVUYWcoY3VycmVudFRhZ3NbY3VycmVudFRhZ3MubGVuZ3RoIC0gMV0pO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcdHRhZ3NJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgKCkgPT4ge1xyXG5cdFx0XHRpZiAodGFnc0lucHV0LnZhbHVlLnRyaW0oKSkgYWRkVGFnKHRhZ3NJbnB1dC52YWx1ZSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBcdTY0Q0RcdTRGNUNcdTYzMDlcdTk0QUVcclxuXHRcdGNvbnN0IGFjdGlvbnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdGFjdGlvbnMuY2xhc3NOYW1lID0gJ2Zvcm0tYWN0aW9ucyc7XHJcblx0XHRjb25zdCBjYW5jZWxCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuXHRcdGNhbmNlbEJ0bi50eXBlID0gJ2J1dHRvbic7XHJcblx0XHRjYW5jZWxCdG4udGV4dENvbnRlbnQgPSAnXHU1M0Q2XHU2RDg4JztcclxuXHRcdGNhbmNlbEJ0bi5jbGFzc05hbWUgPSAnZm9ybS1idG4gZm9ybS1idG4tc2Vjb25kYXJ5JztcclxuXHRcdGNvbnN0IGRlbGV0ZUJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG5cdFx0ZGVsZXRlQnRuLnR5cGUgPSAnYnV0dG9uJztcclxuXHRcdGRlbGV0ZUJ0bi50ZXh0Q29udGVudCA9ICdcdTUyMjBcdTk2NjQnO1xyXG5cdFx0ZGVsZXRlQnRuLmNsYXNzTmFtZSA9ICdmb3JtLWJ0biBmb3JtLWJ0bi1kYW5nZXInO1xyXG5cdFx0Y29uc3Qgc2F2ZUJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG5cdFx0c2F2ZUJ0bi50eXBlID0gJ3N1Ym1pdCc7XHJcblx0XHRzYXZlQnRuLnRleHRDb250ZW50ID0gJ1x1NEZERFx1NUI1OCc7XHJcblx0XHRzYXZlQnRuLmNsYXNzTmFtZSA9ICdmb3JtLWJ0biBmb3JtLWJ0bi1wcmltYXJ5JztcclxuXHRcdGFjdGlvbnMuYXBwZW5kQ2hpbGQoY2FuY2VsQnRuKTtcclxuXHRcdGlmICh0aGlzLmFzc2V0KSBhY3Rpb25zLmFwcGVuZENoaWxkKGRlbGV0ZUJ0bik7XHJcblx0XHRhY3Rpb25zLmFwcGVuZENoaWxkKHNhdmVCdG4pO1xyXG5cdFx0Zm9ybS5hcHBlbmRDaGlsZChhY3Rpb25zKTtcclxuXHJcblx0XHRjb250ZW50LmFwcGVuZENoaWxkKGZvcm0pO1xyXG5cdFx0dGhpcy5tb2RhbEVsLmFwcGVuZENoaWxkKGNvbnRlbnQpO1xyXG5cdFx0dGhpcy5tYXNrRWwuYXBwZW5kQ2hpbGQodGhpcy5tb2RhbEVsKTtcclxuXHRcdGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5tYXNrRWwpO1xyXG5cclxuXHRcdC8vIFx1NEU4Qlx1NEVGNlxyXG5cdFx0Y29uc3QgY2xvc2UgPSAoKSA9PiB0aGlzLmNsb3NlKCk7XHJcblx0XHR0aGlzLm1hc2tFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7IGlmIChlLnRhcmdldCA9PT0gdGhpcy5tYXNrRWwpIGNsb3NlKCk7IH0pO1xyXG5cdFx0Y2FuY2VsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xvc2UpO1xyXG5cdFx0aWYgKHRoaXMuYXNzZXQpIHtcclxuXHRcdFx0ZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdGlmICghdGhpcy5hc3NldCkgcmV0dXJuO1xyXG5cdFx0XHRcdGNvbnN0IG9rID0gYXdhaXQgbmV3IENvbmZpcm1Nb2RhbChgXHU3ODZFXHU1QjlBXHU4OTgxXHU1MjIwXHU5NjY0XHU4RDQ0XHU0RUE3IFwiJHt0aGlzLmFzc2V0Lm5hbWV9XCIgXHU1NDE3XHVGRjFGYCwgJ1x1NTIyMFx1OTY2NCcsICdcdTUzRDZcdTZEODgnLCB0cnVlKS5vcGVuKCk7XHJcblx0XHRcdFx0aWYgKCFvaykgcmV0dXJuO1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMuYXNzZXRSZXBvc2l0b3J5LmRlbGV0ZUFzc2V0KHRoaXMuYXNzZXQuaWQpO1xyXG5cdFx0XHRcdGlmICh0aGlzLm9uU2F2ZWQpIHRoaXMub25TYXZlZCgpO1xyXG5cdFx0XHRcdGNsb3NlKCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdFx0Zm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBhc3luYyAoZSkgPT4ge1xyXG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdC8vIFx1NkUwNVx1NzQwNlx1OEZDN1x1NUY4MFx1OTUxOVx1OEJFRlxyXG5cdFx0XHRjbGVhckVycm9yKG5hbWVHcm91cCk7IGNsZWFyRXJyb3IocHJpY2VHcm91cCk7IGNsZWFyRXJyb3IoZnJvbUdyb3VwKTsgY2xlYXJFcnJvcih0b0dyb3VwKTsgY2xlYXJFcnJvcihyZWN5Y2xlR3JvdXApO1xyXG5cdFx0XHQvLyBcdTU3RkFcdTc4NDBcdTVGQzVcdTU4NkJcdTRFMEVcdTY4M0NcdTVGMEZcdTY4MjFcdTlBOENcclxuXHRcdFx0Y29uc3QgbmFtZVZhbCA9IChuYW1lSW5wdXQudmFsdWUgfHwgJycpLnRyaW0oKTtcclxuXHRcdFx0Y29uc3QgcHJpY2VTdHIgPSAocHJpY2VJbnB1dC52YWx1ZSB8fCAnJykudHJpbSgpO1xyXG5cdFx0XHRjb25zdCBwcmljZU51bSA9IHRoaXMucGFyc2VNb25leShwcmljZVN0cik7XHJcblx0XHRcdGxldCB2YWxpZCA9IHRydWU7XHJcblx0XHRcdGlmICghbmFtZVZhbCkgeyBzZXRFcnJvcihuYW1lR3JvdXAsICdcdThCRjdcdTU4NkJcdTUxOTlcdTU0MERcdTc5RjAnKTsgdmFsaWQgPSBmYWxzZTsgfVxyXG5cdFx0XHRpZiAocHJpY2VOdW0gPT09IG51bGwpIHsgc2V0RXJyb3IocHJpY2VHcm91cCwgJ1x1OEJGN1x1NTg2Qlx1NTE5OVx1NjcwOVx1NjU0OFx1NzY4NFx1NEVGN1x1NjgzQycpOyB2YWxpZCA9IGZhbHNlOyB9XHJcblx0XHRcdGlmICghZnJvbUlucHV0LnZhbHVlKSB7IHNldEVycm9yKGZyb21Hcm91cCwgJ1x1OEJGN1x1OTAwOVx1NjJFOVx1OEQyRFx1NTE2NVx1NjVFNVx1NjcxRicpOyB2YWxpZCA9IGZhbHNlOyB9XHJcblx0XHRcdGlmICghdmFsaWQpIHtcclxuXHRcdFx0XHRjb25zdCBmaXJzdEVyciA9IFtuYW1lR3JvdXAsIHByaWNlR3JvdXAsIGZyb21Hcm91cF0uZmluZChnID0+IGcuY2xhc3NMaXN0LmNvbnRhaW5zKCdoYXMtZXJyb3InKSkgYXMgSFRNTEVsZW1lbnQgfCB1bmRlZmluZWQ7XHJcblx0XHRcdFx0aWYgKGZpcnN0RXJyKSB7XHJcblx0XHRcdFx0XHQoZmlyc3RFcnIucXVlcnlTZWxlY3RvcignaW5wdXQnKSBhcyBIVE1MSW5wdXRFbGVtZW50IHwgbnVsbCk/LmZvY3VzKCk7XHJcblx0XHRcdFx0XHRmaXJzdEVyci5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnc21vb3RoJywgYmxvY2s6ICdjZW50ZXInIH0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdFx0Y29uc3QgZnJvbURhdGUgPSBuZXcgRGF0ZShmcm9tSW5wdXQudmFsdWUpO1xyXG5cdFx0XHRjb25zdCBwcmljZVZhbHVlID0gcHJpY2VOdW0gYXMgbnVtYmVyO1xyXG5cdFx0XHRsZXQgdG9EYXRlOiBEYXRlIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xyXG5cdFx0XHRpZiAodG9JbnB1dC52YWx1ZSkge1xyXG5cdFx0XHRcdGNvbnN0IGQgPSBuZXcgRGF0ZSh0b0lucHV0LnZhbHVlKTtcclxuXHRcdFx0XHRpZiAoZC5nZXRUaW1lKCkgPCBmcm9tRGF0ZS5nZXRUaW1lKCkpIHsgc2V0RXJyb3IodG9Hcm91cCwgJ1x1NTIzMFx1NjcxRlx1NjVFNVx1NjcxRlx1OTcwMFx1NEUwRFx1NjVFOVx1NEU4RVx1OEQyRFx1NTE2NVx1NjVFNVx1NjcxRicpOyAodG9Hcm91cC5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQgfCBudWxsKT8uZm9jdXMoKTsgcmV0dXJuOyB9XHJcblx0XHRcdFx0dG9EYXRlID0gZDtcclxuXHRcdFx0fVxyXG5cdFx0XHRjb25zdCByZWN5Y2xlU3RyID0gKHJlY3ljbGVJbnB1dC52YWx1ZSB8fCAnJykudHJpbSgpO1xyXG5cdFx0XHRjb25zdCByZWN5Y2xlTnVtID0gcmVjeWNsZVN0ciA/IHRoaXMucGFyc2VNb25leShyZWN5Y2xlU3RyKSA6IDA7XHJcblx0XHRcdGlmIChyZWN5Y2xlU3RyICYmIHJlY3ljbGVOdW0gPT09IG51bGwpIHsgc2V0RXJyb3IocmVjeWNsZUdyb3VwLCAnXHU1NkRFXHU2NTM2XHU0RUY3XHU2ODNDXHU2ODNDXHU1RjBGXHU0RTBEXHU2QjYzXHU3ODZFJyk7IHJldHVybjsgfVxyXG5cdFx0XHRpZiAoKHJlY3ljbGVOdW0gfHwgMCkgPiBwcmljZVZhbHVlKSB7IHNldEVycm9yKHJlY3ljbGVHcm91cCwgJ1x1NTZERVx1NjUzNlx1NEVGN1x1NEUwRFx1ODBGRFx1NTkyN1x1NEU4RVx1NEVGN1x1NjgzQycpOyByZXR1cm47IH1cclxuXHJcblx0XHRcdGNvbnN0IGFzc2V0RGF0YSA9IHtcclxuXHRcdFx0XHRpZDogdGhpcy5hc3NldD8uaWQgfHwgbmFtZVZhbCxcclxuXHRcdFx0XHRuYW1lOiBuYW1lVmFsLFxyXG5cdFx0XHRcdGljb246IGljb25JbnB1dC52YWx1ZSB8fCAnXHVEODNEXHVEQ0U2JyxcclxuXHRcdFx0XHRwcmljZTogcHJpY2VWYWx1ZSxcclxuXHRcdFx0XHRhY3RpdmVGcm9tOiBmcm9tRGF0ZSxcclxuXHRcdFx0XHRhY3RpdmVUbzogdG9EYXRlLFxyXG5cdFx0XHRcdHJlY3ljbGVQcmljZTogcmVjeWNsZU51bSB8fCAwLFxyXG5cdFx0XHRcdHRhZ3M6IGN1cnJlbnRUYWdzXHJcblx0XHRcdH07XHJcblx0XHRcdHRyeSB7XHJcblx0XHRcdFx0Y29uc3QgYXNzZXQgPSBuZXcgQXNzZXQoYXNzZXREYXRhKTtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLmFzc2V0UmVwb3NpdG9yeS5zYXZlQXNzZXQoYXNzZXQpO1xyXG5cdFx0XHRcdGlmICh0aGlzLm9uU2F2ZWQpIHRoaXMub25TYXZlZCgpO1xyXG5cdFx0XHRcdGNsb3NlKCk7XHJcblx0XHRcdH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuXHRcdFx0XHRuZXcgTm90aWNlKCdcdTRGRERcdTVCNThcdTU5MzFcdThEMjU6ICcgKyBlcnJvci5tZXNzYWdlKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGluamVjdEFzc2V0Rm9ybVN0eWxlcygpIHtcclxuXHRcdGNvbnN0IFNUWUxFX0lEID0gJ2Fzc2V0LWZvcm0taW5saW5lLXN0eWxlcyc7XHJcblx0XHRpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoU1RZTEVfSUQpKSByZXR1cm47XHJcblx0XHRjb25zdCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XHJcblx0XHRzdHlsZS5pZCA9IFNUWUxFX0lEO1xyXG5cdFx0c3R5bGUudGV4dENvbnRlbnQgPSBgXHJcblx0XHRcdC8qIFx1NTIzMFx1NjcxRlx1OEY5M1x1NTE2NVx1NkUwNVx1OTY2NFx1NjMwOVx1OTRBRSAqL1xyXG5cdFx0XHQuZGF0ZS1waWNrZXItbW9kYWwuYXNzZXQtZm9ybS1tb2RhbCAuaW5wdXQtd2l0aC1jbGVhciB7IHBvc2l0aW9uOiByZWxhdGl2ZTsgfVxyXG5cdFx0XHQuZGF0ZS1waWNrZXItbW9kYWwuYXNzZXQtZm9ybS1tb2RhbCAuaW5wdXQtd2l0aC1jbGVhciAuaW5wdXQtY2xlYXIgeyBwb3NpdGlvbjogYWJzb2x1dGU7IHJpZ2h0OiA2cHg7IHRvcDogNTAlOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSk7IHdpZHRoOiAxOHB4OyBoZWlnaHQ6IDE4cHg7IGJvcmRlci1yYWRpdXM6IDUwJTsgZGlzcGxheTogbm9uZTsgYWxpZ24taXRlbXM6IGNlbnRlcjsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IGZvbnQtc2l6ZTogMTRweDsgbGluZS1oZWlnaHQ6IDE4cHg7IH1cclxuXHRcdFx0LyogXHU1RjM5XHU3QTk3XHU1QkI5XHU1NjY4XHU2NkY0XHU3RDI3XHU1MUQxICovXHJcblx0XHRcdC5kYXRlLXBpY2tlci1tb2RhbC5hc3NldC1mb3JtLW1vZGFsIHsgbWF4LWhlaWdodDogODB2aDsgb3ZlcmZsb3c6IGF1dG87IH1cclxuXHRcdFx0LmRhdGUtcGlja2VyLW1vZGFsLmFzc2V0LWZvcm0tbW9kYWwgLmRhdGUtcGlja2VyLWNvbnRlbnQgeyBwYWRkaW5nOiAxNnB4IDIwcHg7IGRpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IGdhcDogMCAhaW1wb3J0YW50OyB9XHJcblx0XHRcdC5kYXRlLXBpY2tlci1tb2RhbC5hc3NldC1mb3JtLW1vZGFsIC5kYXRlLXBpY2tlci10aXRsZSB7IGZvbnQtc2l6ZTogMTRweDsgbWFyZ2luLWJvdHRvbTogNnB4OyB9XHJcblxyXG5cdFx0XHQvKiBcdTZBMkFcdTU0MTFcdTg4NjhcdTUzNTVcdTVFMDNcdTVDNDBcdUZGMENcdTUzOEJcdTdGMjlcdTU3ODJcdTc2RjRcdTdBN0FcdTc2N0QgKi9cclxuXHRcdFx0LmRhdGUtcGlja2VyLW1vZGFsLmFzc2V0LWZvcm0tbW9kYWwgLmFzc2V0LWZvcm0uYXNzZXQtZm9ybS0taG9yaXpvbnRhbCB7IGZvbnQtc2l6ZTogMTUuNXB4OyBkaXNwbGF5OiBncmlkICFpbXBvcnRhbnQ7IGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyOyByb3ctZ2FwOiA4cHggIWltcG9ydGFudDsgY29sdW1uLWdhcDogMCAhaW1wb3J0YW50OyBnYXA6IDhweCAhaW1wb3J0YW50OyB9XHJcblx0XHRcdC5kYXRlLXBpY2tlci1tb2RhbC5hc3NldC1mb3JtLW1vZGFsIC5hc3NldC1mb3JtLmFzc2V0LWZvcm0tLWhvcml6b250YWwgLmZvcm0tZ3JvdXAgeyBkaXNwbGF5OiBncmlkICFpbXBvcnRhbnQ7IGdyaWQtdGVtcGxhdGUtY29sdW1uczogNjRweCAxZnI7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGNvbHVtbi1nYXA6IDhweDsgcm93LWdhcDogMDsgbWFyZ2luOiAwICFpbXBvcnRhbnQ7IHBhZGRpbmc6IDAgIWltcG9ydGFudDsgfVxyXG5cdFx0XHQuZGF0ZS1waWNrZXItbW9kYWwuYXNzZXQtZm9ybS1tb2RhbCAuYXNzZXQtZm9ybS5hc3NldC1mb3JtLS1ob3Jpem9udGFsIGxhYmVsIHsgbWluLXdpZHRoOiA2NHB4OyBtYXJnaW46IDA7IHRleHQtYWxpZ246IHJpZ2h0OyBqdXN0aWZ5LXNlbGY6IGVuZDsgfVxyXG5cdFx0XHQuZGF0ZS1waWNrZXItbW9kYWwuYXNzZXQtZm9ybS1tb2RhbCAuYXNzZXQtZm9ybS5hc3NldC1mb3JtLS1ob3Jpem9udGFsIC5mb3JtLWZpZWxkIHsgd2lkdGg6IDEwMCU7IG1hcmdpbjogMCAhaW1wb3J0YW50OyBwYWRkaW5nOiAwICFpbXBvcnRhbnQ7IH1cclxuXHRcdFx0LyogXHU1MzhCXHU3RjI5XHU4RjkzXHU1MTY1XHU2M0E3XHU0RUY2XHU5QUQ4XHU1RUE2XHU0RTBFXHU1MTg1XHU4RkI5XHU4REREICovXHJcblx0XHRcdC5kYXRlLXBpY2tlci1tb2RhbC5hc3NldC1mb3JtLW1vZGFsIC5hc3NldC1mb3JtLmFzc2V0LWZvcm0tLWhvcml6b250YWwgaW5wdXRbdHlwZT1cInRleHRcIl0sXHJcblx0XHRcdC5kYXRlLXBpY2tlci1tb2RhbC5hc3NldC1mb3JtLW1vZGFsIC5hc3NldC1mb3JtLmFzc2V0LWZvcm0tLWhvcml6b250YWwgaW5wdXRbdHlwZT1cIm51bWJlclwiXSB7IGhlaWdodDogMzJweDsgcGFkZGluZzogNHB4IDEwcHg7IGZvbnQtc2l6ZTogMTUuNXB4OyBsaW5lLWhlaWdodDogMS40NTsgfVxyXG5cdFx0XHQvKiBcdTY4MDdcdTdCN0VcdThGOTNcdTUxNjVcdTRFMEUgY2hpcCBcdTY2RjRcdTdEMjdcdTUxRDEgKi9cclxuXHRcdFx0LmRhdGUtcGlja2VyLW1vZGFsLmFzc2V0LWZvcm0tbW9kYWwgLmFzc2V0LWZvcm0uYXNzZXQtZm9ybS0taG9yaXpvbnRhbCAudGFncy1pbnB1dCB7IGRpc3BsYXk6IGZsZXg7IGZsZXgtd3JhcDogd3JhcDsgZ2FwOiA0cHg7IH1cclxuXHRcdFx0LmRhdGUtcGlja2VyLW1vZGFsLmFzc2V0LWZvcm0tbW9kYWwgLmFzc2V0LWZvcm0uYXNzZXQtZm9ybS0taG9yaXpvbnRhbCAudGFnLWNoaXAgeyBmb250LXNpemU6IDEycHg7IGhlaWdodDogMThweDsgbGluZS1oZWlnaHQ6IDE4cHg7IHBhZGRpbmc6IDAgNnB4OyBib3JkZXItcmFkaXVzOiA0cHg7IH1cclxuXHRcdFx0LmRhdGUtcGlja2VyLW1vZGFsLmFzc2V0LWZvcm0tbW9kYWwgLmFzc2V0LWZvcm0uYXNzZXQtZm9ybS0taG9yaXpvbnRhbCAudGFnLWNoaXAgLnJlbW92ZSB7IHdpZHRoOiAxNnB4OyBoZWlnaHQ6IDE2cHg7IGxpbmUtaGVpZ2h0OiAxNnB4OyBmb250LXNpemU6IDEycHg7IG1hcmdpbi1sZWZ0OiA0cHg7IH1cclxuXHRcdFx0LmRhdGUtcGlja2VyLW1vZGFsLmFzc2V0LWZvcm0tbW9kYWwgLmFzc2V0LWZvcm0uYXNzZXQtZm9ybS0taG9yaXpvbnRhbCAudGFncy1pbnB1dCBpbnB1dCB7IGZsZXg6IDE7IG1pbi13aWR0aDogMTIwcHg7IGhlaWdodDogMjhweDsgcGFkZGluZzogNHB4IDEwcHg7IGZvbnQtc2l6ZTogMTQuNXB4OyB9XHJcblxyXG5cdFx0XHQvKiBcdTVGQzVcdTU4NkJcdTRFMEVcdTk1MTlcdThCRUZcdTY4MzdcdTVGMEYgKi9cclxuXHRcdFx0LmRhdGUtcGlja2VyLW1vZGFsLmFzc2V0LWZvcm0tbW9kYWwgLmxhYmVsLXJlcXVpcmVkOjphZnRlciB7IGNvbnRlbnQ6ICcgKic7IGNvbG9yOiAjZmY0ZDRmOyBtYXJnaW4tbGVmdDogMnB4OyB9XHJcblx0XHRcdC5kYXRlLXBpY2tlci1tb2RhbC5hc3NldC1mb3JtLW1vZGFsIC5mb3JtLWdyb3VwLmhhcy1lcnJvciBpbnB1dFt0eXBlPVwidGV4dFwiXSxcclxuXHRcdFx0LmRhdGUtcGlja2VyLW1vZGFsLmFzc2V0LWZvcm0tbW9kYWwgLmZvcm0tZ3JvdXAuaGFzLWVycm9yIGlucHV0W3R5cGU9XCJudW1iZXJcIl0geyBib3JkZXItY29sb3I6ICNmZjRkNGYgIWltcG9ydGFudDsgYm94LXNoYWRvdzogMCAwIDAgMXB4ICNmZjRkNGYgaW5zZXQ7IH1cclxuXHRcdFx0LmRhdGUtcGlja2VyLW1vZGFsLmFzc2V0LWZvcm0tbW9kYWwgLmZpZWxkLWVycm9yIHsgbWFyZ2luLXRvcDogNHB4OyBjb2xvcjogI2ZmODU4NzsgZm9udC1zaXplOiAxMnB4OyBsaW5lLWhlaWdodDogMS4zOyB9XHJcblx0XHRcdC5kYXRlLXBpY2tlci1tb2RhbC5hc3NldC1mb3JtLW1vZGFsIC5maWVsZC1lcnJvcjplbXB0eSB7IGRpc3BsYXk6IG5vbmU7IG1hcmdpbi10b3A6IDA7IH1cclxuXHJcblx0XHRcdC8qIFx1NjRDRFx1NEY1Q1x1NjMwOVx1OTRBRVx1NTMzQVx1NjZGNFx1N0QyN1x1NTFEMSAqL1xyXG5cdFx0XHQuZGF0ZS1waWNrZXItbW9kYWwuYXNzZXQtZm9ybS1tb2RhbCAuZm9ybS1hY3Rpb25zIHsgbWFyZ2luLXRvcDogMTJweDsgZ2FwOiAxNnB4OyBkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgfVxyXG5cdFx0XHQuZGF0ZS1waWNrZXItbW9kYWwuYXNzZXQtZm9ybS1tb2RhbCAuZm9ybS1idG4geyBoZWlnaHQ6IDM0cHg7IHBhZGRpbmc6IDAgMTRweDsgZm9udC1zaXplOiAxNHB4OyB9XHJcblx0XHRgO1xyXG5cdFx0ZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZSk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGFwcGx5Um93TGF5b3V0KGdyb3VwOiBIVE1MRWxlbWVudCkge1xyXG5cdFx0Z3JvdXAuc3R5bGUuZGlzcGxheSA9ICdncmlkJztcclxuXHRcdChncm91cC5zdHlsZSBhcyBhbnkpLmdyaWRUZW1wbGF0ZUNvbHVtbnMgPSAnNzJweCAxZnInO1xyXG5cdFx0Z3JvdXAuc3R5bGUuYWxpZ25JdGVtcyA9ICdjZW50ZXInO1xyXG5cdFx0Z3JvdXAuc3R5bGUuY29sdW1uR2FwID0gJzhweCc7XHJcblx0XHRncm91cC5zdHlsZS5yb3dHYXAgPSAnMHB4JztcclxuXHRcdGdyb3VwLnN0eWxlLm1hcmdpbiA9ICcwJztcclxuXHRcdGNvbnN0IGxhYmVsID0gZ3JvdXAucXVlcnlTZWxlY3RvcignbGFiZWwnKSBhcyBIVE1MRWxlbWVudCB8IG51bGw7XHJcblx0XHRpZiAobGFiZWwpIHtcclxuXHRcdFx0bGFiZWwuc3R5bGUubWluV2lkdGggPSAnNzJweCc7XHJcblx0XHRcdGxhYmVsLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lLWJsb2NrJztcclxuXHRcdFx0bGFiZWwuc3R5bGUubWFyZ2luID0gJzAnO1xyXG5cdFx0fVxyXG5cdFx0Y29uc3QgZmllbGQgPSBncm91cC5xdWVyeVNlbGVjdG9yKCcuZm9ybS1maWVsZCcpIGFzIEhUTUxFbGVtZW50IHwgbnVsbDtcclxuXHRcdGlmIChmaWVsZCkge1xyXG5cdFx0XHRmaWVsZC5zdHlsZS53aWR0aCA9ICcxMDAlJztcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGNsb3NlKCkge1xyXG5cdFx0aWYgKHRoaXMubWFza0VsICYmIHRoaXMubWFza0VsLnBhcmVudEVsZW1lbnQpIHtcclxuXHRcdFx0dGhpcy5tYXNrRWwucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZCh0aGlzLm1hc2tFbCk7XHJcblx0XHR9XHJcblx0XHR0aGlzLm1hc2tFbCA9IHVuZGVmaW5lZDtcclxuXHRcdHRoaXMubW9kYWxFbCA9IHVuZGVmaW5lZDtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgZm9ybWF0RGF0ZUxvY2FsKGRhdGU6IERhdGUpOiBzdHJpbmcge1xyXG5cdFx0Y29uc3QgZCA9IG5ldyBEYXRlKGRhdGUuZ2V0VGltZSgpIC0gZGF0ZS5nZXRUaW1lem9uZU9mZnNldCgpICogNjAwMDApO1xyXG5cdFx0cmV0dXJuIGQudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xyXG5cdH1cclxuXHJcblx0Ly8gXHUyMDE0XHUyMDE0IFx1OTFEMVx1OTg5RFx1NUI1N1x1N0IyNlx1NEUzMlx1NTkwNFx1NzQwNlx1RkYwOFx1NjIxMFx1NzE5Rlx1OTAzQlx1OEY5MVx1RkYwOVx1MjAxNFx1MjAxNFxyXG5cdHByaXZhdGUgc2FuaXRpemVOdW1lcmljU3RyaW5nKHZhbHVlOiBzdHJpbmcpOiBzdHJpbmcge1xyXG5cdFx0bGV0IHYgPSAodmFsdWUgfHwgJycpLnJlcGxhY2UoL1teXFxkLl0vZywgJycpOyAvLyBcdTRFQzVcdTY1NzBcdTVCNTdcdTU0OENcdTcwQjlcclxuXHRcdHYgPSB2LnJlcGxhY2UoL15cXC4vLCAnJyk7IC8vIFx1NTNCQlx1OTY2NFx1NUYwMFx1NTkzNFx1NzY4NFx1NzBCOVxyXG5cdFx0diA9IHYucmVwbGFjZSgvXFwuKD89LipcXC4pL2csICcnKTsgLy8gXHU1M0VBXHU0RkREXHU3NTU5XHU0RTAwXHU0RTJBXHU3MEI5XHJcblx0XHRyZXR1cm4gdjtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgY2xhbXBUd29EZWNpbWFsc1N0cmluZyh2YWx1ZTogc3RyaW5nKTogc3RyaW5nIHtcclxuXHRcdGNvbnN0IG0gPSAodmFsdWUgfHwgJycpLm1hdGNoKC9eKFxcZCspKD86XFwuKFxcZCopKT8kLyk7XHJcblx0XHRpZiAoIW0pIHJldHVybiAnJztcclxuXHRcdGNvbnN0IGludFBhcnQgPSBtWzFdO1xyXG5cdFx0Y29uc3QgZGVjUGFydCA9IChtWzJdIHx8ICcnKS5zbGljZSgwLCAyKTtcclxuXHRcdHJldHVybiBkZWNQYXJ0ID8gYCR7aW50UGFydH0uJHtkZWNQYXJ0fWAgOiBpbnRQYXJ0O1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBwYXJzZU1vbmV5KHZhbHVlOiBzdHJpbmcpOiBudW1iZXIgfCBudWxsIHtcclxuXHRcdGNvbnN0IHNhbml0aXplZCA9IHRoaXMuc2FuaXRpemVOdW1lcmljU3RyaW5nKHZhbHVlKTtcclxuXHRcdGNvbnN0IGNsYW1wZWQgPSB0aGlzLmNsYW1wVHdvRGVjaW1hbHNTdHJpbmcoc2FuaXRpemVkKTtcclxuXHRcdGlmIChjbGFtcGVkID09PSAnJykgcmV0dXJuIG51bGw7XHJcblx0XHRjb25zdCBudW0gPSBOdW1iZXIoY2xhbXBlZCk7XHJcblx0XHRyZXR1cm4gTnVtYmVyLmlzRmluaXRlKG51bSkgJiYgbnVtID49IDAgPyBudW0gOiBudWxsO1xyXG5cdH1cclxuXHJcblx0Ly8gXHU0RTBFIGNvc3RzZXRhcHAgXHU1QkY5XHU5RjUwXHVGRjFBXHU3NTI4IHN1cnJvZ2F0ZSBwYWlyIFx1NTMzOVx1OTE0RFx1ODNCN1x1NTNENlx1N0IyQ1x1NEUwMFx1NEUyQSBlbW9qaVxyXG5cdHByaXZhdGUgZ2V0Rmlyc3RFbW9qaUdyYXBoZW1lKGlucHV0OiBzdHJpbmcpOiBzdHJpbmcge1xyXG5cdFx0Y29uc3QgZW1vamlSZWdleCA9IC9bXFx1RDgwMC1cXHVEQkZGXVtcXHVEQzAwLVxcdURGRkZdLzsgLy8gY29zdHNldGFwcCBcdTU0MENcdTZCM0VcdTVCOUVcdTczQjBcclxuXHRcdGNvbnN0IG0gPSAoaW5wdXQgfHwgJycpLm1hdGNoKGVtb2ppUmVnZXgpO1xyXG5cdFx0cmV0dXJuIG0gPyBtWzBdIDogJyc7XHJcblx0fVxyXG5cclxuXHQvLyBcdTVGMzlcdTUxRkFcdTY1RTVcdTY3MUZcdTkwMDlcdTYyRTlcdTU2NjhcdUZGMDhcdTU5MERcdTc1MjhcdTY1RTVcdTY3MUYvXHU2ODA3XHU3QjdFXHU1RjM5XHU3QTk3XHU5OENFXHU2ODNDXHVGRjA5XHJcblx0cHJpdmF0ZSBvcGVuRGF0ZVBpY2tlcihjdXJyZW50RGF0ZTogRGF0ZSwgb25Db25maXJtOiAocGlja2VkOiBEYXRlKSA9PiB2b2lkKSB7XHJcblx0XHQvLyBcdTUyMUJcdTVFRkFcdTkwNkVcdTdGNjlcdTVDNDJcclxuXHRcdGNvbnN0IG1hc2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdG1hc2suY2xhc3NOYW1lID0gJ2RhdGUtcGlja2VyLW1hc2snO1xyXG5cclxuXHRcdC8vIFx1NTIxQlx1NUVGQVx1NjVFNVx1NjcxRlx1OTAwOVx1NjJFOVx1NTY2OFx1NUYzOVx1N0E5N1xyXG5cdFx0Y29uc3QgcGlja2VyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHRwaWNrZXIuY2xhc3NOYW1lID0gJ2RhdGUtcGlja2VyLW1vZGFsJztcclxuXHJcblx0XHQvLyBcdTUyMUJcdTVFRkFcdTY1RTVcdTY3MUZcdTkwMDlcdTYyRTlcdTU2NjhcdTUxODVcdTVCQjlcclxuXHRcdGNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdGNvbnRlbnQuY2xhc3NOYW1lID0gJ2RhdGUtcGlja2VyLWNvbnRlbnQnO1xyXG5cclxuXHRcdC8vIFx1NjgwN1x1OTg5OFxyXG5cdFx0Y29uc3QgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdHRpdGxlLmNsYXNzTmFtZSA9ICdkYXRlLXBpY2tlci10aXRsZSc7XHJcblx0XHR0aXRsZS50ZXh0Q29udGVudCA9ICdcdTkwMDlcdTYyRTlcdTY1RTVcdTY3MUYnO1xyXG5cclxuXHRcdC8vIFx1NEUwOVx1NTIxN1x1NkVEQVx1OEY2RVxyXG5cdFx0Y29uc3Qgd2hlZWxDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdHdoZWVsQ29udGFpbmVyLmNsYXNzTmFtZSA9ICdkYXRlLXdoZWVsLWNvbnRhaW5lcic7XHJcblxyXG5cdFx0Y29uc3QgY3VycmVudFllYXIgPSBjdXJyZW50RGF0ZS5nZXRGdWxsWWVhcigpO1xyXG5cdFx0Y29uc3QgY3VycmVudE1vbnRoID0gY3VycmVudERhdGUuZ2V0TW9udGgoKSArIDE7XHJcblx0XHRjb25zdCBjdXJyZW50RGF5ID0gY3VycmVudERhdGUuZ2V0RGF0ZSgpO1xyXG5cclxuXHRcdGNvbnN0IHllYXJDb2x1bW4gPSB0aGlzLmNyZWF0ZVdoZWVsQ29sdW1uKCdcdTVFNzQnLCB0aGlzLmdlbmVyYXRlWWVhcnMoY3VycmVudFllYXIpLCBjdXJyZW50WWVhciwgKHllYXIpID0+IHtcclxuXHRcdFx0dGhpcy51cGRhdGVEYXlzQ29sdW1uKGRheUNvbHVtbiwgeWVhciwgbW9udGhDb2x1bW4uc2VsZWN0ZWRWYWx1ZSk7XHJcblx0XHR9LCBmYWxzZSk7XHJcblx0XHRjb25zdCBtb250aENvbHVtbiA9IHRoaXMuY3JlYXRlV2hlZWxDb2x1bW4oJ1x1NjcwOCcsIHRoaXMuZ2VuZXJhdGVNb250aHMoKSwgY3VycmVudE1vbnRoLCAobW9udGgpID0+IHtcclxuXHRcdFx0dGhpcy51cGRhdGVEYXlzQ29sdW1uKGRheUNvbHVtbiwgeWVhckNvbHVtbi5zZWxlY3RlZFZhbHVlLCBtb250aCk7XHJcblx0XHR9LCB0cnVlKTtcclxuXHRcdGNvbnN0IGRheUNvbHVtbiA9IHRoaXMuY3JlYXRlV2hlZWxDb2x1bW4oJ1x1NjVFNScsIHRoaXMuZ2VuZXJhdGVEYXlzKGN1cnJlbnRZZWFyLCBjdXJyZW50TW9udGgpLCBjdXJyZW50RGF5LCB1bmRlZmluZWQsIHRydWUpO1xyXG5cclxuXHRcdHdoZWVsQ29udGFpbmVyLmFwcGVuZENoaWxkKHllYXJDb2x1bW4uZWxlbWVudCk7XHJcblx0XHR3aGVlbENvbnRhaW5lci5hcHBlbmRDaGlsZChtb250aENvbHVtbi5lbGVtZW50KTtcclxuXHRcdHdoZWVsQ29udGFpbmVyLmFwcGVuZENoaWxkKGRheUNvbHVtbi5lbGVtZW50KTtcclxuXHJcblx0XHQvLyBcdTYzMDlcdTk0QUVcclxuXHRcdGNvbnN0IGFjdGlvbnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdGFjdGlvbnMuY2xhc3NOYW1lID0gJ2RhdGUtcGlja2VyLWFjdGlvbnMnO1xyXG5cdFx0Y29uc3QgY2FuY2VsQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcblx0XHRjYW5jZWxCdG4uY2xhc3NOYW1lID0gJ2RhdGUtcGlja2VyLWJ0biBkYXRlLXBpY2tlci1idG4tY2FuY2VsJztcclxuXHRcdGNhbmNlbEJ0bi50ZXh0Q29udGVudCA9ICdcdTUzRDZcdTZEODgnO1xyXG5cdFx0Y29uc3QgY29uZmlybUJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG5cdFx0Y29uZmlybUJ0bi5jbGFzc05hbWUgPSAnZGF0ZS1waWNrZXItYnRuIGRhdGUtcGlja2VyLWJ0bi1jb25maXJtJztcclxuXHRcdGNvbmZpcm1CdG4udGV4dENvbnRlbnQgPSAnXHU3ODZFXHU1QjlBJztcclxuXHJcblx0XHRhY3Rpb25zLmFwcGVuZENoaWxkKGNhbmNlbEJ0bik7XHJcblx0XHRhY3Rpb25zLmFwcGVuZENoaWxkKGNvbmZpcm1CdG4pO1xyXG5cdFx0Y29udGVudC5hcHBlbmRDaGlsZCh0aXRsZSk7XHJcblx0XHRjb250ZW50LmFwcGVuZENoaWxkKHdoZWVsQ29udGFpbmVyKTtcclxuXHRcdGNvbnRlbnQuYXBwZW5kQ2hpbGQoYWN0aW9ucyk7XHJcblx0XHRwaWNrZXIuYXBwZW5kQ2hpbGQoY29udGVudCk7XHJcblx0XHRtYXNrLmFwcGVuZENoaWxkKHBpY2tlcik7XHJcblx0XHRkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG1hc2spO1xyXG5cclxuXHRcdGNvbnN0IGNsb3NlUGlja2VyID0gKCkgPT4geyBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG1hc2spOyB9O1xyXG5cdFx0bWFzay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7IGlmIChlLnRhcmdldCA9PT0gbWFzaykgY2xvc2VQaWNrZXIoKTsgfSk7XHJcblx0XHRjYW5jZWxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zZVBpY2tlcik7XHJcblx0XHRjb25maXJtQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdFx0XHRjb25zdCB5ZWFyID0geWVhckNvbHVtbi5zZWxlY3RlZFZhbHVlO1xyXG5cdFx0XHRjb25zdCBtb250aCA9IG1vbnRoQ29sdW1uLnNlbGVjdGVkVmFsdWU7XHJcblx0XHRcdGNvbnN0IGRheSA9IGRheUNvbHVtbi5zZWxlY3RlZFZhbHVlO1xyXG5cdFx0XHRjb25zdCBwaWNrZWQgPSBuZXcgRGF0ZShgJHt5ZWFyfS0ke21vbnRoLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX0tJHtkYXkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfWApO1xyXG5cdFx0XHRvbkNvbmZpcm0ocGlja2VkKTtcclxuXHRcdFx0Y2xvc2VQaWNrZXIoKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBnZW5lcmF0ZVllYXJzKGN1cnJlbnRZZWFyOiBudW1iZXIpOiBudW1iZXJbXSB7XHJcblx0XHRjb25zdCBtaW5ZZWFyID0gMTkwMDtcclxuXHRcdGNvbnN0IG5vd1llYXIgPSBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCk7XHJcblx0XHRjb25zdCBtYXhZZWFyID0gbm93WWVhciArIDc7XHJcblx0XHRjb25zdCB5ZWFyczogbnVtYmVyW10gPSBbXTtcclxuXHRcdGZvciAobGV0IGkgPSBtaW5ZZWFyOyBpIDw9IG1heFllYXI7IGkrKykgeWVhcnMucHVzaChpKTtcclxuXHRcdHJldHVybiB5ZWFycztcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgZ2VuZXJhdGVNb250aHMoKTogbnVtYmVyW10ge1xyXG5cdFx0cmV0dXJuIEFycmF5LmZyb20oeyBsZW5ndGg6IDEyIH0sIChfLCBpKSA9PiBpICsgMSk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGdlbmVyYXRlRGF5cyh5ZWFyOiBudW1iZXIsIG1vbnRoOiBudW1iZXIpOiBudW1iZXJbXSB7XHJcblx0XHRjb25zdCBkYXlzSW5Nb250aCA9IG5ldyBEYXRlKHllYXIsIG1vbnRoLCAwKS5nZXREYXRlKCk7XHJcblx0XHRyZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aDogZGF5c0luTW9udGggfSwgKF8sIGkpID0+IGkgKyAxKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgY3JlYXRlV2hlZWxDb2x1bW4oc3VmZml4OiBzdHJpbmcsIHZhbHVlczogbnVtYmVyW10sIHNlbGVjdGVkVmFsdWU6IG51bWJlciwgb25DaGFuZ2U/OiAodmFsdWU6IG51bWJlcikgPT4gdm9pZCwgaXNJbmZpbml0ZTogYm9vbGVhbiA9IGZhbHNlKTogeyBlbGVtZW50OiBIVE1MRWxlbWVudCwgc2VsZWN0ZWRWYWx1ZTogbnVtYmVyIH0ge1xyXG5cdFx0Y29uc3QgY29sdW1uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHRjb2x1bW4uY2xhc3NOYW1lID0gJ2RhdGUtd2hlZWwtY29sdW1uJztcclxuXHRcdGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0Y29udGFpbmVyLmNsYXNzTmFtZSA9ICdkYXRlLXdoZWVsLWl0ZW1zJztcclxuXHJcblx0XHRsZXQgc2VsZWN0ZWRJbmRleCA9IHZhbHVlcy5pbmRleE9mKHNlbGVjdGVkVmFsdWUpO1xyXG5cdFx0bGV0IGN1cnJlbnRTZWxlY3RlZFZhbHVlID0gc2VsZWN0ZWRWYWx1ZTtcclxuXHRcdGNvbnN0IGFwaSA9IHsgZWxlbWVudDogY29sdW1uLCBzZWxlY3RlZFZhbHVlOiBjdXJyZW50U2VsZWN0ZWRWYWx1ZSB9O1xyXG5cdFx0Y29uc3QgaXRlbUhlaWdodCA9IDQwO1xyXG5cclxuXHRcdGlmIChpc0luZmluaXRlKSB7XHJcblx0XHRcdGNvbnN0IHJlcGVhdENvdW50ID0gNTtcclxuXHRcdFx0Y29uc3QgdG90YWxJdGVtcyA9IHZhbHVlcy5sZW5ndGggKiByZXBlYXRDb3VudDtcclxuXHRcdFx0Y29uc3QgbWlkZGxlR3JvdXBJbmRleCA9IDI7XHJcblx0XHRcdGNvbnN0IGluaXRpYWxTY3JvbGxUb3AgPSBtaWRkbGVHcm91cEluZGV4ICogdmFsdWVzLmxlbmd0aCAqIGl0ZW1IZWlnaHQgKyBzZWxlY3RlZEluZGV4ICogaXRlbUhlaWdodDtcclxuXHRcdFx0Zm9yIChsZXQgcmVwZWF0ID0gMDsgcmVwZWF0IDwgcmVwZWF0Q291bnQ7IHJlcGVhdCsrKSB7XHJcblx0XHRcdFx0dmFsdWVzLmZvckVhY2goKHZhbHVlLCBpbmRleCkgPT4ge1xyXG5cdFx0XHRcdFx0Y29uc3QgaXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0XHRcdFx0aXRlbS5jbGFzc05hbWUgPSAnZGF0ZS13aGVlbC1pdGVtJztcclxuXHRcdFx0XHRcdGl0ZW0udGV4dENvbnRlbnQgPSBgJHt2YWx1ZS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9JHtzdWZmaXh9YDtcclxuXHRcdFx0XHRcdGl0ZW0uZGF0YXNldC52YWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCk7XHJcblx0XHRcdFx0XHRpdGVtLmRhdGFzZXQuaW5kZXggPSAocmVwZWF0ICogdmFsdWVzLmxlbmd0aCArIGluZGV4KS50b1N0cmluZygpO1xyXG5cdFx0XHRcdFx0aXRlbS5kYXRhc2V0LnJlYWxWYWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCk7XHJcblx0XHRcdFx0XHRjb250YWluZXIuYXBwZW5kQ2hpbGQoaXRlbSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdFx0Y29udGFpbmVyLnN0eWxlLmhlaWdodCA9IGAke3RvdGFsSXRlbXMgKiBpdGVtSGVpZ2h0fXB4YDtcclxuXHRcdFx0Y29uc3QgaW5pdGlhbEl0ZW1JbmRleCA9IG1pZGRsZUdyb3VwSW5kZXggKiB2YWx1ZXMubGVuZ3RoICsgc2VsZWN0ZWRJbmRleDtcclxuXHRcdFx0Y29uc3QgaXRlbXMgPSBBcnJheS5mcm9tKGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuZGF0ZS13aGVlbC1pdGVtJykpIGFzIEhUTUxFbGVtZW50W107XHJcblx0XHRcdGlmIChpdGVtc1tpbml0aWFsSXRlbUluZGV4XSkge1xyXG5cdFx0XHRcdGl0ZW1zLmZvckVhY2goKGVsLCBpZHgpID0+IGVsLmNsYXNzTGlzdC50b2dnbGUoJ3NlbGVjdGVkJywgaWR4ID09PSBpbml0aWFsSXRlbUluZGV4KSk7XHJcblx0XHRcdH1cclxuXHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuXHRcdFx0XHRjb250YWluZXIuc2Nyb2xsVG9wID0gaW5pdGlhbFNjcm9sbFRvcDtcclxuXHRcdFx0fSk7XHJcblx0XHRcdGxldCBpc1Njcm9sbGluZyA9IGZhbHNlO1xyXG5cdFx0XHRjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgKCkgPT4ge1xyXG5cdFx0XHRcdGlmIChpc1Njcm9sbGluZykgcmV0dXJuO1xyXG5cdFx0XHRcdGNvbnN0IHNjcm9sbFRvcCA9IGNvbnRhaW5lci5zY3JvbGxUb3A7XHJcblx0XHRcdFx0Y29uc3QgY3VycmVudEluZGV4ID0gTWF0aC5yb3VuZChzY3JvbGxUb3AgLyBpdGVtSGVpZ2h0KTtcclxuXHRcdFx0XHRjb25zdCByZWFsSW5kZXggPSAoKGN1cnJlbnRJbmRleCAlIHZhbHVlcy5sZW5ndGgpICsgdmFsdWVzLmxlbmd0aCkgJSB2YWx1ZXMubGVuZ3RoO1xyXG5cdFx0XHRcdGNvbnN0IHJlYWxWYWx1ZSA9IHZhbHVlc1tyZWFsSW5kZXhdO1xyXG5cdFx0XHRcdGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuZGF0ZS13aGVlbC1pdGVtJykuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHtcclxuXHRcdFx0XHRcdGNvbnN0IGl0ZW1SZWFsSW5kZXggPSBpbmRleCAlIHZhbHVlcy5sZW5ndGg7XHJcblx0XHRcdFx0XHRpdGVtLmNsYXNzTGlzdC50b2dnbGUoJ3NlbGVjdGVkJywgaXRlbVJlYWxJbmRleCA9PT0gcmVhbEluZGV4KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRzZWxlY3RlZEluZGV4ID0gcmVhbEluZGV4O1xyXG5cdFx0XHRcdGN1cnJlbnRTZWxlY3RlZFZhbHVlID0gcmVhbFZhbHVlO1xyXG5cdFx0XHRcdChhcGkgYXMgYW55KS5zZWxlY3RlZFZhbHVlID0gcmVhbFZhbHVlO1xyXG5cdFx0XHRcdGlmIChvbkNoYW5nZSkgb25DaGFuZ2UoY3VycmVudFNlbGVjdGVkVmFsdWUpO1xyXG5cdFx0XHRcdGNvbnN0IG1heFNjcm9sbFRvcCA9IChyZXBlYXRDb3VudCAtIDEpICogdmFsdWVzLmxlbmd0aCAqIGl0ZW1IZWlnaHQ7XHJcblx0XHRcdFx0aWYgKHNjcm9sbFRvcCA+PSBtYXhTY3JvbGxUb3ApIHtcclxuXHRcdFx0XHRcdGlzU2Nyb2xsaW5nID0gdHJ1ZTtcclxuXHRcdFx0XHRcdGNvbnN0IG9mZnNldCA9IHNjcm9sbFRvcCAtIG1heFNjcm9sbFRvcDtcclxuXHRcdFx0XHRcdGNvbnRhaW5lci5zY3JvbGxUb3AgPSB2YWx1ZXMubGVuZ3RoICogaXRlbUhlaWdodCArIG9mZnNldDtcclxuXHRcdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4geyBpc1Njcm9sbGluZyA9IGZhbHNlOyB9LCA1MCk7XHJcblx0XHRcdFx0fSBlbHNlIGlmIChzY3JvbGxUb3AgPD0gMCkge1xyXG5cdFx0XHRcdFx0aXNTY3JvbGxpbmcgPSB0cnVlO1xyXG5cdFx0XHRcdFx0Y29uc3Qgb2Zmc2V0ID0gc2Nyb2xsVG9wO1xyXG5cdFx0XHRcdFx0Y29udGFpbmVyLnNjcm9sbFRvcCA9IChyZXBlYXRDb3VudCAtIDIpICogdmFsdWVzLmxlbmd0aCAqIGl0ZW1IZWlnaHQgKyBvZmZzZXQ7XHJcblx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHsgaXNTY3JvbGxpbmcgPSBmYWxzZTsgfSwgNTApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHQvLyBcdTUxNDFcdThCQjhcdTc2RjRcdTYzQTVcdTcwQjlcdTUxRkJcdTkwMDlcdTYyRTlcclxuXHRcdFx0Y29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2KSA9PiB7XHJcblx0XHRcdFx0Y29uc3QgdGFyZ2V0ID0gZXYudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0XHRcdGNvbnN0IGl0ZW1FbCA9IHRhcmdldCAmJiB0YXJnZXQuY2xvc2VzdCA/ICh0YXJnZXQuY2xvc2VzdCgnLmRhdGUtd2hlZWwtaXRlbScpIGFzIEhUTUxFbGVtZW50IHwgbnVsbCkgOiBudWxsO1xyXG5cdFx0XHRcdGlmICghaXRlbUVsKSByZXR1cm47XHJcblx0XHRcdFx0Y29uc3QgY2xpY2tlZEluZGV4ID0gTnVtYmVyKGl0ZW1FbC5kYXRhc2V0LmluZGV4IHx8ICcwJyk7XHJcblx0XHRcdFx0Y29uc3QgcmVhbEluZGV4ID0gKChjbGlja2VkSW5kZXggJSB2YWx1ZXMubGVuZ3RoKSArIHZhbHVlcy5sZW5ndGgpICUgdmFsdWVzLmxlbmd0aDtcclxuXHRcdFx0XHRjb25zdCBtaWRkbGVJbmRleCA9IG1pZGRsZUdyb3VwSW5kZXggKiB2YWx1ZXMubGVuZ3RoICsgcmVhbEluZGV4O1xyXG5cdFx0XHRcdGNvbnRhaW5lci5zY3JvbGxUb3AgPSBtaWRkbGVJbmRleCAqIGl0ZW1IZWlnaHQ7XHJcblx0XHRcdFx0c2VsZWN0ZWRJbmRleCA9IHJlYWxJbmRleDtcclxuXHRcdFx0XHRjdXJyZW50U2VsZWN0ZWRWYWx1ZSA9IHZhbHVlc1tyZWFsSW5kZXhdO1xyXG5cdFx0XHRcdChhcGkgYXMgYW55KS5zZWxlY3RlZFZhbHVlID0gY3VycmVudFNlbGVjdGVkVmFsdWU7XHJcblx0XHRcdFx0aWYgKG9uQ2hhbmdlKSBvbkNoYW5nZShjdXJyZW50U2VsZWN0ZWRWYWx1ZSk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dmFsdWVzLmZvckVhY2goKHZhbHVlLCBpbmRleCkgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IGl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdFx0XHRpdGVtLmNsYXNzTmFtZSA9ICdkYXRlLXdoZWVsLWl0ZW0nO1xyXG5cdFx0XHRcdGl0ZW0udGV4dENvbnRlbnQgPSBgJHt2YWx1ZS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9JHtzdWZmaXh9YDtcclxuXHRcdFx0XHRpdGVtLmRhdGFzZXQudmFsdWUgPSB2YWx1ZS50b1N0cmluZygpO1xyXG5cdFx0XHRcdGl0ZW0uZGF0YXNldC5pbmRleCA9IGluZGV4LnRvU3RyaW5nKCk7XHJcblx0XHRcdFx0aWYgKHZhbHVlID09PSBjdXJyZW50U2VsZWN0ZWRWYWx1ZSkgaXRlbS5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpO1xyXG5cdFx0XHRcdGNvbnRhaW5lci5hcHBlbmRDaGlsZChpdGVtKTtcclxuXHRcdFx0fSk7XHJcblx0XHRcdGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCAoKSA9PiB7XHJcblx0XHRcdFx0Y29uc3Qgc2Nyb2xsVG9wID0gY29udGFpbmVyLnNjcm9sbFRvcDtcclxuXHRcdFx0XHRjb25zdCBuZXdJbmRleCA9IE1hdGgucm91bmQoc2Nyb2xsVG9wIC8gaXRlbUhlaWdodCk7XHJcblx0XHRcdFx0aWYgKG5ld0luZGV4ICE9PSBzZWxlY3RlZEluZGV4ICYmIG5ld0luZGV4ID49IDAgJiYgbmV3SW5kZXggPCB2YWx1ZXMubGVuZ3RoKSB7XHJcblx0XHRcdFx0XHRjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmRhdGUtd2hlZWwtaXRlbScpLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7XHJcblx0XHRcdFx0XHRcdGl0ZW0uY2xhc3NMaXN0LnRvZ2dsZSgnc2VsZWN0ZWQnLCBpbmRleCA9PT0gbmV3SW5kZXgpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRzZWxlY3RlZEluZGV4ID0gbmV3SW5kZXg7XHJcblx0XHRcdFx0XHRjdXJyZW50U2VsZWN0ZWRWYWx1ZSA9IHZhbHVlc1tuZXdJbmRleF07XHJcblx0XHRcdFx0XHQoYXBpIGFzIGFueSkuc2VsZWN0ZWRWYWx1ZSA9IGN1cnJlbnRTZWxlY3RlZFZhbHVlO1xyXG5cdFx0XHRcdFx0aWYgKG9uQ2hhbmdlKSBvbkNoYW5nZShjdXJyZW50U2VsZWN0ZWRWYWx1ZSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdFx0Ly8gXHU1MTQxXHU4QkI4XHU3NkY0XHU2M0E1XHU3MEI5XHU1MUZCXHU5MDA5XHU2MkU5XHJcblx0XHRcdGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldikgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IHRhcmdldCA9IGV2LnRhcmdldCBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0XHRjb25zdCBpdGVtRWwgPSB0YXJnZXQgJiYgdGFyZ2V0LmNsb3Nlc3QgPyAodGFyZ2V0LmNsb3Nlc3QoJy5kYXRlLXdoZWVsLWl0ZW0nKSBhcyBIVE1MRWxlbWVudCB8IG51bGwpIDogbnVsbDtcclxuXHRcdFx0XHRpZiAoIWl0ZW1FbCkgcmV0dXJuO1xyXG5cdFx0XHRcdGNvbnN0IGlkeCA9IE51bWJlcihpdGVtRWwuZGF0YXNldC5pbmRleCB8fCAnMCcpO1xyXG5cdFx0XHRcdC8vIFx1N0FDQlx1NTM3M1x1NjZGNFx1NjVCMFx1OTAwOVx1NEUyRFx1NjgzN1x1NUYwRlxyXG5cdFx0XHRcdGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuZGF0ZS13aGVlbC1pdGVtJykuZm9yRWFjaCgoZWwsIGkpID0+IHtcclxuXHRcdFx0XHRcdGVsLmNsYXNzTGlzdC50b2dnbGUoJ3NlbGVjdGVkJywgaSA9PT0gaWR4KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRjb250YWluZXIuc2Nyb2xsVG9wID0gaWR4ICogaXRlbUhlaWdodDtcclxuXHRcdFx0XHRzZWxlY3RlZEluZGV4ID0gaWR4O1xyXG5cdFx0XHRcdGN1cnJlbnRTZWxlY3RlZFZhbHVlID0gdmFsdWVzW2lkeF07XHJcblx0XHRcdFx0KGFwaSBhcyBhbnkpLnNlbGVjdGVkVmFsdWUgPSBjdXJyZW50U2VsZWN0ZWRWYWx1ZTtcclxuXHRcdFx0XHRpZiAob25DaGFuZ2UpIG9uQ2hhbmdlKGN1cnJlbnRTZWxlY3RlZFZhbHVlKTtcclxuXHRcdFx0fSk7XHJcblx0XHRcdHNldFRpbWVvdXQoKCkgPT4geyBjb250YWluZXIuc2Nyb2xsVG9wID0gc2VsZWN0ZWRJbmRleCAqIGl0ZW1IZWlnaHQ7IH0sIDApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbHVtbi5hcHBlbmRDaGlsZChjb250YWluZXIpO1xyXG5cdFx0cmV0dXJuIGFwaSBhcyBhbnk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHVwZGF0ZURheXNDb2x1bW4oZGF5Q29sdW1uOiB7IGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBzZWxlY3RlZFZhbHVlOiBudW1iZXIgfSwgeWVhcjogbnVtYmVyLCBtb250aDogbnVtYmVyKTogdm9pZCB7XHJcblx0XHRjb25zdCBjb250YWluZXIgPSBkYXlDb2x1bW4uZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZGF0ZS13aGVlbC1pdGVtcycpIGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0Y29uc3QgY3VycmVudERheSA9IGRheUNvbHVtbi5zZWxlY3RlZFZhbHVlO1xyXG5cdFx0Y29uc3QgbmV3RGF5cyA9IHRoaXMuZ2VuZXJhdGVEYXlzKHllYXIsIG1vbnRoKTtcclxuXHRcdGNvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcclxuXHRcdGNvbnN0IHJlcGVhdENvdW50ID0gNTtcclxuXHRcdGNvbnN0IGl0ZW1IZWlnaHQgPSA0MDtcclxuXHRcdGNvbnN0IG1pZGRsZUdyb3VwSW5kZXggPSAyO1xyXG5cdFx0Y29uc3QgbWF4RGF5ID0gTWF0aC5tYXgoLi4ubmV3RGF5cyk7XHJcblx0XHRjb25zdCBzZWxlY3RlZERheSA9IE1hdGgubWluKGN1cnJlbnREYXksIG1heERheSk7XHJcblx0XHRjb25zdCBzZWxlY3RlZEluZGV4ID0gbmV3RGF5cy5pbmRleE9mKHNlbGVjdGVkRGF5KTtcclxuXHRcdGZvciAobGV0IHJlcGVhdCA9IDA7IHJlcGVhdCA8IHJlcGVhdENvdW50OyByZXBlYXQrKykge1xyXG5cdFx0XHRuZXdEYXlzLmZvckVhY2goKGRheSwgaW5kZXgpID0+IHtcclxuXHRcdFx0XHRjb25zdCBpdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHRcdFx0aXRlbS5jbGFzc05hbWUgPSAnZGF0ZS13aGVlbC1pdGVtJztcclxuXHRcdFx0XHRpdGVtLnRleHRDb250ZW50ID0gYCR7ZGF5LnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX1cdTY1RTVgO1xyXG5cdFx0XHRcdGl0ZW0uZGF0YXNldC52YWx1ZSA9IGRheS50b1N0cmluZygpO1xyXG5cdFx0XHRcdGl0ZW0uZGF0YXNldC5pbmRleCA9IChyZXBlYXQgKiBuZXdEYXlzLmxlbmd0aCArIGluZGV4KS50b1N0cmluZygpO1xyXG5cdFx0XHRcdGl0ZW0uZGF0YXNldC5yZWFsVmFsdWUgPSBkYXkudG9TdHJpbmcoKTtcclxuXHRcdFx0XHRjb250YWluZXIuYXBwZW5kQ2hpbGQoaXRlbSk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdFx0Y29udGFpbmVyLnN0eWxlLmhlaWdodCA9IGAke25ld0RheXMubGVuZ3RoICogcmVwZWF0Q291bnQgKiBpdGVtSGVpZ2h0fXB4YDtcclxuXHRcdGNvbnN0IGluaXRpYWxJdGVtSW5kZXhEYXkgPSBtaWRkbGVHcm91cEluZGV4ICogbmV3RGF5cy5sZW5ndGggKyBzZWxlY3RlZEluZGV4O1xyXG5cdFx0Y29uc3QgZGF5SXRlbXMgPSBBcnJheS5mcm9tKGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuZGF0ZS13aGVlbC1pdGVtJykpIGFzIEhUTUxFbGVtZW50W107XHJcblx0XHRpZiAoZGF5SXRlbXNbaW5pdGlhbEl0ZW1JbmRleERheV0pIHtcclxuXHRcdFx0ZGF5SXRlbXMuZm9yRWFjaCgoZWwsIGlkeCkgPT4gZWwuY2xhc3NMaXN0LnRvZ2dsZSgnc2VsZWN0ZWQnLCBpZHggPT09IGluaXRpYWxJdGVtSW5kZXhEYXkpKTtcclxuXHRcdH1cclxuXHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7IGNvbnRhaW5lci5zY3JvbGxUb3AgPSBtaWRkbGVHcm91cEluZGV4ICogbmV3RGF5cy5sZW5ndGggKiBpdGVtSGVpZ2h0ICsgc2VsZWN0ZWRJbmRleCAqIGl0ZW1IZWlnaHQ7IH0pO1xyXG5cdFx0bGV0IGlzU2Nyb2xsaW5nID0gZmFsc2U7XHJcblx0XHRjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgKCkgPT4ge1xyXG5cdFx0XHRpZiAoaXNTY3JvbGxpbmcpIHJldHVybjtcclxuXHRcdFx0Y29uc3Qgc2Nyb2xsVG9wID0gY29udGFpbmVyLnNjcm9sbFRvcDtcclxuXHRcdFx0Y29uc3QgY3VycmVudEluZGV4ID0gTWF0aC5yb3VuZChzY3JvbGxUb3AgLyBpdGVtSGVpZ2h0KTtcclxuXHRcdFx0Y29uc3QgcmVhbEluZGV4ID0gY3VycmVudEluZGV4ICUgbmV3RGF5cy5sZW5ndGg7XHJcblx0XHRcdGNvbnN0IHJlYWxWYWx1ZSA9IG5ld0RheXNbcmVhbEluZGV4XTtcclxuXHRcdFx0Y29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5kYXRlLXdoZWVsLWl0ZW0nKS5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IGl0ZW1SZWFsSW5kZXggPSBpbmRleCAlIG5ld0RheXMubGVuZ3RoO1xyXG5cdFx0XHRcdGl0ZW0uY2xhc3NMaXN0LnRvZ2dsZSgnc2VsZWN0ZWQnLCBpdGVtUmVhbEluZGV4ID09PSByZWFsSW5kZXgpO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0KGRheUNvbHVtbiBhcyBhbnkpLnNlbGVjdGVkVmFsdWUgPSByZWFsVmFsdWU7XHJcblx0XHRcdGNvbnN0IG1heFNjcm9sbFRvcCA9IChyZXBlYXRDb3VudCAtIDEpICogbmV3RGF5cy5sZW5ndGggKiBpdGVtSGVpZ2h0O1xyXG5cdFx0XHRpZiAoc2Nyb2xsVG9wID49IG1heFNjcm9sbFRvcCkge1xyXG5cdFx0XHRcdGlzU2Nyb2xsaW5nID0gdHJ1ZTtcclxuXHRcdFx0XHRjb25zdCBvZmZzZXQgPSBzY3JvbGxUb3AgLSBtYXhTY3JvbGxUb3A7XHJcblx0XHRcdFx0Y29udGFpbmVyLnNjcm9sbFRvcCA9IG5ld0RheXMubGVuZ3RoICogaXRlbUhlaWdodCArIG9mZnNldDtcclxuXHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHsgaXNTY3JvbGxpbmcgPSBmYWxzZTsgfSwgNTApO1xyXG5cdFx0XHR9IGVsc2UgaWYgKHNjcm9sbFRvcCA8PSAwKSB7XHJcblx0XHRcdFx0aXNTY3JvbGxpbmcgPSB0cnVlO1xyXG5cdFx0XHRcdGNvbnN0IG9mZnNldCA9IHNjcm9sbFRvcDtcclxuXHRcdFx0XHRjb250YWluZXIuc2Nyb2xsVG9wID0gKHJlcGVhdENvdW50IC0gMikgKiBuZXdEYXlzLmxlbmd0aCAqIGl0ZW1IZWlnaHQgKyBvZmZzZXQ7XHJcblx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7IGlzU2Nyb2xsaW5nID0gZmFsc2U7IH0sIDUwKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gXHU1MTQxXHU4QkI4XHU3NkY0XHU2M0E1XHU3MEI5XHU1MUZCXHU5MDA5XHU2MkU5XHU2N0QwXHU0RTAwXHU1OTI5XHJcblx0XHRjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXYpID0+IHtcclxuXHRcdFx0Y29uc3QgdGFyZ2V0ID0gZXYudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0XHRjb25zdCBpdGVtRWwgPSB0YXJnZXQgJiYgdGFyZ2V0LmNsb3Nlc3QgPyAodGFyZ2V0LmNsb3Nlc3QoJy5kYXRlLXdoZWVsLWl0ZW0nKSBhcyBIVE1MRWxlbWVudCB8IG51bGwpIDogbnVsbDtcclxuXHRcdFx0aWYgKCFpdGVtRWwpIHJldHVybjtcclxuXHRcdFx0Y29uc3QgY2xpY2tlZEluZGV4ID0gTnVtYmVyKGl0ZW1FbC5kYXRhc2V0LmluZGV4IHx8ICcwJyk7XHJcblx0XHRcdGNvbnN0IHJlYWxJbmRleCA9IGNsaWNrZWRJbmRleCAlIG5ld0RheXMubGVuZ3RoO1xyXG5cdFx0XHRjb25zdCBtaWRkbGVJbmRleCA9IG1pZGRsZUdyb3VwSW5kZXggKiBuZXdEYXlzLmxlbmd0aCArIHJlYWxJbmRleDtcclxuXHRcdFx0Y29udGFpbmVyLnNjcm9sbFRvcCA9IG1pZGRsZUluZGV4ICogaXRlbUhlaWdodDtcclxuXHRcdFx0KGRheUNvbHVtbiBhcyBhbnkpLnNlbGVjdGVkVmFsdWUgPSBuZXdEYXlzW3JlYWxJbmRleF07XHJcblx0XHR9KTtcclxuXHR9XHJcblx0cHJpdmF0ZSBjcmVhdGVMYWJlbCh0ZXh0OiBzdHJpbmcpOiBIVE1MRWxlbWVudCB7XHJcblx0XHRjb25zdCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XHJcblx0XHRlbC50ZXh0Q29udGVudCA9IHRleHQ7XHJcblx0XHRyZXR1cm4gZWw7XHJcblx0fVxyXG59XHJcbiIsICJleHBvcnQgY2xhc3MgQ29uZmlybU1vZGFsIHtcclxuICAgIHByaXZhdGUgbWFza0VsPzogSFRNTEVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIG1vZGFsRWw/OiBIVE1MRWxlbWVudDtcclxuXHJcbiAgICBwcml2YXRlIG1lc3NhZ2U6IHN0cmluZztcclxuICAgIHByaXZhdGUgY29uZmlybVRleHQ6IHN0cmluZztcclxuICAgIHByaXZhdGUgY2FuY2VsVGV4dDogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBkYW5nZXI6IGJvb2xlYW47XHJcblxyXG4gICAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nLCBjb25maXJtVGV4dDogc3RyaW5nID0gJ1x1Nzg2RVx1NUI5QScsIGNhbmNlbFRleHQ6IHN0cmluZyA9ICdcdTUzRDZcdTZEODgnLCBkYW5nZXI6IGJvb2xlYW4gPSBmYWxzZSkge1xyXG4gICAgICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XHJcbiAgICAgICAgdGhpcy5jb25maXJtVGV4dCA9IGNvbmZpcm1UZXh0O1xyXG4gICAgICAgIHRoaXMuY2FuY2VsVGV4dCA9IGNhbmNlbFRleHQ7XHJcbiAgICAgICAgdGhpcy5kYW5nZXIgPSBkYW5nZXI7XHJcbiAgICB9XHJcblxyXG4gICAgb3BlbigpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8Ym9vbGVhbj4oKHJlc29sdmUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5pbmplY3RTdHlsZXNPbmNlKCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLm1hc2tFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICB0aGlzLm1hc2tFbC5jbGFzc05hbWUgPSAnZGF0ZS1waWNrZXItbWFzayc7XHJcblxyXG4gICAgICAgICAgICB0aGlzLm1vZGFsRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgdGhpcy5tb2RhbEVsLmNsYXNzTmFtZSA9ICdkYXRlLXBpY2tlci1tb2RhbCc7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBjb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIGNvbnRlbnQuY2xhc3NOYW1lID0gJ2RhdGUtcGlja2VyLWNvbnRlbnQnO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgdGl0bGUuY2xhc3NOYW1lID0gJ2RhdGUtcGlja2VyLXRpdGxlJztcclxuICAgICAgICAgICAgdGl0bGUudGV4dENvbnRlbnQgPSAnXHU3ODZFXHU4QkE0XHU2NENEXHU0RjVDJztcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG1zZ0VsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIG1zZ0VsLmNsYXNzTmFtZSA9ICdjb25maXJtLW1lc3NhZ2UnO1xyXG4gICAgICAgICAgICBtc2dFbC50ZXh0Q29udGVudCA9IHRoaXMubWVzc2FnZTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGFjdGlvbnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgYWN0aW9ucy5jbGFzc05hbWUgPSAnZGF0ZS1waWNrZXItYWN0aW9ucyc7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBjYW5jZWxCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgICAgICAgICAgY2FuY2VsQnRuLmNsYXNzTmFtZSA9ICdkYXRlLXBpY2tlci1idG4gZGF0ZS1waWNrZXItYnRuLWNhbmNlbCc7XHJcbiAgICAgICAgICAgIGNhbmNlbEJ0bi50ZXh0Q29udGVudCA9IHRoaXMuY2FuY2VsVGV4dDtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGNvbmZpcm1CdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgICAgICAgICAgY29uZmlybUJ0bi5jbGFzc05hbWUgPSAnZGF0ZS1waWNrZXItYnRuIGRhdGUtcGlja2VyLWJ0bi1jb25maXJtJztcclxuICAgICAgICAgICAgY29uZmlybUJ0bi50ZXh0Q29udGVudCA9IHRoaXMuY29uZmlybVRleHQ7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRhbmdlcikgY29uZmlybUJ0bi5jbGFzc0xpc3QuYWRkKCdkYW5nZXInKTtcclxuXHJcbiAgICAgICAgICAgIGFjdGlvbnMuYXBwZW5kQ2hpbGQoY2FuY2VsQnRuKTtcclxuICAgICAgICAgICAgYWN0aW9ucy5hcHBlbmRDaGlsZChjb25maXJtQnRuKTtcclxuICAgICAgICAgICAgY29udGVudC5hcHBlbmRDaGlsZCh0aXRsZSk7XHJcbiAgICAgICAgICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQobXNnRWwpO1xyXG4gICAgICAgICAgICBjb250ZW50LmFwcGVuZENoaWxkKGFjdGlvbnMpO1xyXG4gICAgICAgICAgICB0aGlzLm1vZGFsRWwuYXBwZW5kQ2hpbGQoY29udGVudCk7XHJcbiAgICAgICAgICAgIHRoaXMubWFza0VsLmFwcGVuZENoaWxkKHRoaXMubW9kYWxFbCk7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5tYXNrRWwpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgY2xvc2UgPSAocmVzdWx0OiBib29sZWFuKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5tYXNrRWwgJiYgdGhpcy5tYXNrRWwucGFyZW50RWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWFza0VsLnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcy5tYXNrRWwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5tYXNrRWwgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vZGFsRWwgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdCk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB0aGlzLm1hc2tFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7IGlmIChlLnRhcmdldCA9PT0gdGhpcy5tYXNrRWwpIGNsb3NlKGZhbHNlKTsgfSk7XHJcbiAgICAgICAgICAgIGNhbmNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IGNsb3NlKGZhbHNlKSk7XHJcbiAgICAgICAgICAgIGNvbmZpcm1CdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBjbG9zZSh0cnVlKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpbmplY3RTdHlsZXNPbmNlKCkge1xyXG4gICAgICAgIGNvbnN0IFNUWUxFX0lEID0gJ2xhYy1jb25maXJtLW1vZGFsLXN0eWxlcyc7XHJcbiAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFNUWUxFX0lEKSkgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcclxuICAgICAgICBzdHlsZS5pZCA9IFNUWUxFX0lEO1xyXG4gICAgICAgIHN0eWxlLnRleHRDb250ZW50ID0gYFxyXG4gICAgICAgICAgICAuZGF0ZS1waWNrZXItbW9kYWwgLmNvbmZpcm0tbWVzc2FnZSB7IGNvbG9yOiAjRjVGNkZBOyBsaW5lLWhlaWdodDogMS42OyBwYWRkaW5nOiA4cHggMCAxNnB4OyB9XHJcbiAgICAgICAgICAgIC5kYXRlLXBpY2tlci1tb2RhbCAuZGF0ZS1waWNrZXItYnRuLmRhbmdlciB7IGJhY2tncm91bmQ6ICM3YTFlMWU7IGNvbG9yOiAjZmZmOyB9XHJcbiAgICAgICAgICAgIC5kYXRlLXBpY2tlci1tb2RhbCAuZGF0ZS1waWNrZXItYnRuLmRhbmdlcjpob3ZlciB7IGJhY2tncm91bmQ6ICM5OTI1MjU7IH1cclxuICAgICAgICBgO1xyXG4gICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuIiwgImltcG9ydCB7IEFzc2V0Rm9ybU1vZGFsIH0gZnJvbSAnLi9tb2RhbHMvQXNzZXRGb3JtTW9kYWwnO1xuaW1wb3J0IHsgSXRlbVZpZXcsIFdvcmtzcGFjZUxlYWYsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IENvbmZpcm1Nb2RhbCB9IGZyb20gJy4vbW9kYWxzL0NvbmZpcm1Nb2RhbCc7XG5pbXBvcnQgeyBBc3NldFJlcG9zaXRvcnkgfSBmcm9tICcuLi9yZXBvc2l0b3JpZXMvQXNzZXRSZXBvc2l0b3J5JztcbmltcG9ydCB7IEFzc2V0IH0gZnJvbSAnLi4vbW9kZWxzL0Fzc2V0JztcbmltcG9ydCB7IFRvcFN1bW1hcnksIFRvcFN1bW1hcnlQcm9wcyB9IGZyb20gJy4vVG9wU3VtbWFyeSc7XG5pbXBvcnQgeyBMaW5lQ2hhcnQsIExpbmVDaGFydFByb3BzIH0gZnJvbSAnLi9MaW5lQ2hhcnQnO1xuaW1wb3J0IHsgVGFnUGFuZWwsIFRhZ1BhbmVsUHJvcHMgfSBmcm9tICcuL1RhZ1BhbmVsJztcblxuLy8gXHU4RDQ0XHU0RUE3XHU3QkExXHU3NDA2XHU1NjY4XHU4OUM2XHU1NkZFXG5leHBvcnQgY2xhc3MgQXNzZXRNYW5hZ2VyVmlldyBleHRlbmRzIEl0ZW1WaWV3IHtcblx0cHJpdmF0ZSBhc3NldFJlcG9zaXRvcnk6IEFzc2V0UmVwb3NpdG9yeTtcblx0cHJpdmF0ZSBhc3NldHM6IEFzc2V0W10gPSBbXTtcblx0cHJpdmF0ZSBmaWxlUGF0aD86IHN0cmluZztcblx0cHJpdmF0ZSB0b3BTdW1tYXJ5Q29tcG9uZW50PzogVG9wU3VtbWFyeTtcblx0cHJpdmF0ZSB0YWdQYW5lbENvbXBvbmVudD86IFRhZ1BhbmVsO1xuXHRwcml2YXRlIHNlbGVjdGVkRGF0ZT86IERhdGU7IC8vIFx1NUY1M1x1NTI0RFx1OTAwOVx1NjJFOVx1NzY4NFx1NjVFNVx1NjcxRlxuXHRwcml2YXRlIHNlbGVjdGVkVGFnczogc3RyaW5nW10gPSBbXTsgLy8gXHU1RjUzXHU1MjREXHU5MDA5XHU2MkU5XHU3Njg0XHU2ODA3XHU3QjdFXG5cdHByaXZhdGUgYWN0aW9uQmFyRWw/OiBIVE1MRWxlbWVudDsgLy8gXHU5ODc2XHU5MEU4XHU3RURGXHU4QkExXHU0RTBCXHU2NUI5XHU3Njg0XHU2MzA5XHU5NEFFXHU1MzYxXHU3MjQ3XG5cdHByaXZhdGUgc2VhcmNoUXVlcnk6IHN0cmluZyA9ICcnO1xuICAgIHByaXZhdGUgc29ydE1vZGU6ICdub25lJyB8ICdkYWlseURlc2MnIHwgJ3ByaWNlRGVzYycgfCAnZGF0ZURlc2MnID0gJ25vbmUnO1xuXG5cdGNvbnN0cnVjdG9yKGxlYWY6IFdvcmtzcGFjZUxlYWYsIGFzc2V0UmVwb3NpdG9yeTogQXNzZXRSZXBvc2l0b3J5LCBmaWxlUGF0aD86IHN0cmluZykge1xuXHRcdHN1cGVyKGxlYWYpO1xuXHRcdHRoaXMuYXNzZXRSZXBvc2l0b3J5ID0gYXNzZXRSZXBvc2l0b3J5O1xuXHRcdHRoaXMuZmlsZVBhdGggPSBmaWxlUGF0aDtcblx0XHR0aGlzLnNlbGVjdGVkRGF0ZSA9IG5ldyBEYXRlKCk7IC8vIFx1NTIxRFx1NTlDQlx1NTMxNlx1NEUzQVx1NUY1M1x1NTI0RFx1NjVFNVx1NjcxRlxuXHR9XG5cblx0Z2V0Vmlld1R5cGUoKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gJ2xhYy1jb3N0c2V0LXZpZXcnO1xuXHR9XG5cblx0Z2V0RGlzcGxheVRleHQoKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gJ0xhQy5Db3N0U2V0Jztcblx0fVxuXG5cdGdldEljb24oKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gJ3BhY2thZ2UnO1xuXHR9XG5cblx0YXN5bmMgb25PcGVuKCkge1xuXHRcdGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcblx0XHRjb250YWluZXJFbC5hZGRDbGFzcygncGFnZS1yb290Jyk7XG5cblx0XHQvLyBcdTc4NkVcdTRGRERcdTdBODRcdTVCQkRcdTVFQTZcdTRFMEJcdTY4MDdcdTk4OThcdTY4MEZcdTc2ODRcdTgzRENcdTUzNTUvXHU4RkQ0XHU1NkRFXHU2MzA5XHU5NEFFXHU0RTBEXHU4OEFCXHU0RTNCXHU5ODk4XHU5NjkwXHU4NUNGXG5cdFx0dGhpcy5pbmplY3RIZWFkZXJGaXhTdHlsZXMoKTtcblxuXHRcdC8vIFx1NTIxRFx1NTlDQlx1NTMxNlx1OUVEOFx1OEJBNFx1NjM5Mlx1NUU4Rlx1ODFFQVx1OEJCRVx1N0Y2RVxuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBwbHVnaW4gPSAodGhpcy5hcHAgYXMgYW55KS5wbHVnaW5zPy5wbHVnaW5zPy5bJ2xhYy1jb3N0c2V0J107XG5cdFx0XHRpZiAocGx1Z2luICYmIHBsdWdpbi5zZXR0aW5ncyAmJiBwbHVnaW4uc2V0dGluZ3MuZGVmYXVsdFNvcnQpIHtcblx0XHRcdFx0dGhpcy5zb3J0TW9kZSA9IHBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0U29ydDtcblx0XHRcdH1cblx0XHR9IGNhdGNoIChfKSB7fVxuXG5cdFx0Ly8gXHU1OTgyXHU2NzlDXHU0RjIwXHU1MTY1XHU0RTg2XHU2NTg3XHU0RUY2XHU4REVGXHU1Rjg0XHVGRjBDXHU3NkY0XHU2M0E1XHU0RjdGXHU3NTI4XHU4QkU1XHU2NTg3XHU0RUY2XG4gICAgICAgIGlmICh0aGlzLmZpbGVQYXRoKSB7XG5cdFx0XHR0aGlzLnVzZUZpbGUodGhpcy5maWxlUGF0aCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gXHU4MkU1XHU2NzJBXHU0RjIwXHU1MTY1XHU2NTg3XHU0RUY2XHU4REVGXHU1Rjg0XHVGRjFBXHU0RTBEXHU4OTgxXHU1RjM5XHU1MUZBXHU2NTg3XHU0RUY2XHU1MjE3XHU4ODY4XHVGRjBDXHU2NjNFXHU3OTNBXHU4RjdCXHU5MUNGXHU2M0QwXHU3OTNBXG5cdFx0Y29uc3QgaGludCA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdigpO1xuXHRcdGhpbnQuc3R5bGUucGFkZGluZyA9ICcxNnB4Jztcblx0XHRoaW50LnN0eWxlLm9wYWNpdHkgPSAnMC44Jztcblx0XHRoaW50LnRleHRDb250ZW50ID0gJ1x1NEVDRVx1NjU4N1x1NEVGNlx1NzY4NFx1NTNGM1x1OTUyRVx1ODNEQ1x1NTM1NVx1NEUyRFx1OTAwOVx1NjJFOSBcdTIwMUNcdTc1MjggTGFDLkNvc3RTZXQgXHU2MjUzXHU1RjAwXHUyMDFEXHUzMDAyJztcblx0XHRyZXR1cm47XG5cblx0XHR0aGlzLmxvYWRBc3NldHMoKTtcblx0fVxuXG5cdGFzeW5jIG9uQ2xvc2UoKSB7XG5cdFx0Y29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyB1c2VGaWxlKGZpbGVQYXRoOiBzdHJpbmcpIHtcblx0XHQvLyBcdTkxQ0RcdTY1QjBcdTUyMURcdTU5Q0JcdTUzMTZBc3NldFJlcG9zaXRvcnlcblx0XHRjb25zdCBwbHVnaW4gPSAodGhpcy5hcHAgYXMgYW55KS5wbHVnaW5zLnBsdWdpbnNbJ2xhYy1jb3N0c2V0J107XG5cdFx0aWYgKHBsdWdpbikge1xuXHRcdFx0cGx1Z2luLmFzc2V0UmVwb3NpdG9yeSA9IG5ldyBBc3NldFJlcG9zaXRvcnkodGhpcy5hcHAsIGZpbGVQYXRoKTtcblx0XHRcdHRoaXMuYXNzZXRSZXBvc2l0b3J5ID0gcGx1Z2luLmFzc2V0UmVwb3NpdG9yeTtcblx0XHRcdFxuXHRcdFx0dGhpcy5sb2FkQXNzZXRzKCk7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBsb2FkQXNzZXRzKCkge1xuXHRcdHRoaXMuYXNzZXRzID0gYXdhaXQgdGhpcy5hc3NldFJlcG9zaXRvcnkubG9hZEFsbCgpO1xuXHRcdHRoaXMucmVuZGVyQXNzZXRzKCk7XG5cdH1cblxuXHRwcml2YXRlIHNob3dGaWxlU2VsZWN0b3IoKSB7XG5cdFx0Y29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1x1OTAwOVx1NjJFOVx1OEQ0NFx1NEVBN1x1NjgzOVx1NjU4N1x1NEVGNicgfSk7XG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdcdThCRjdcdTkwMDlcdTYyRTlcdTRFMDBcdTRFMkFcdTUzMDVcdTU0MkJcdThENDRcdTRFQTdcdTVGMTVcdTc1MjhcdTc2ODRcdTY1ODdcdTRFRjZcdTRGNUNcdTRFM0FcdTUxNjVcdTUzRTMnIH0pO1xuXG5cdFx0Y29uc3QgZmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG5cdFx0Y29uc3QgZmlsZUxpc3QgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoJ2ZpbGUtbGlzdCcpO1xuXHRcdFxuXHRcdGZpbGVzLmZvckVhY2goZmlsZSA9PiB7XG5cdFx0XHRjb25zdCBmaWxlSXRlbSA9IGZpbGVMaXN0LmNyZWF0ZURpdignZmlsZS1pdGVtJyk7XG5cdFx0XHRmaWxlSXRlbS5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiBmaWxlLnBhdGggfSk7XG5cdFx0XHRmaWxlSXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcblx0XHRcdFx0Ly8gXHU5MUNEXHU2NUIwXHU1MjFEXHU1OUNCXHU1MzE2QXNzZXRSZXBvc2l0b3J5XG5cdFx0XHRcdGNvbnN0IHBsdWdpbiA9ICh0aGlzLmFwcCBhcyBhbnkpLnBsdWdpbnMucGx1Z2luc1snbGFjLWNvc3RzZXQnXTtcblx0XHRcdFx0aWYgKHBsdWdpbikge1xuXHRcdFx0XHRcdHBsdWdpbi5hc3NldFJlcG9zaXRvcnkgPSBuZXcgQXNzZXRSZXBvc2l0b3J5KHRoaXMuYXBwLCBmaWxlLnBhdGgpO1xuXHRcdFx0XHRcdHRoaXMuYXNzZXRSZXBvc2l0b3J5ID0gcGx1Z2luLmFzc2V0UmVwb3NpdG9yeTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHR0aGlzLmxvYWRBc3NldHMoKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH1cblxuXHRwcml2YXRlIHJlbmRlckFzc2V0cygpIHtcblx0XHRjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuXHRcdFxuXHRcdC8vIFx1NkUwNVx1N0E3QVx1NUJCOVx1NTY2OFx1RkYwQ1x1OTA3Rlx1NTE0RFx1OTFDRFx1NTkwRFx1OEZGRFx1NTJBMCBUb3BTdW1tYXJ5IFx1NEUwRVx1NTIxN1x1ODg2OFxuXHRcdGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cdFx0Y29udGFpbmVyRWwuYWRkQ2xhc3MoJ3BhZ2Utcm9vdCcpO1xuXHRcdFxuXHRcdC8vIFx1NTIxQlx1NUVGQVx1OTg3Nlx1OTBFOFx1N0VERlx1OEJBMVx1NTMzQVx1NTdERlxuXHRcdHRoaXMucmVuZGVyVG9wU3VtbWFyeShjb250YWluZXJFbCk7XG5cdFx0Ly8gXHU5ODc2XHU5MEU4XHU3RURGXHU4QkExXHU0RTBCXHU2NUI5XHU3Njg0XHU2NENEXHU0RjVDXHU2NzYxXG5cdFx0dGhpcy5yZW5kZXJBY3Rpb25CYXIoY29udGFpbmVyRWwpO1xuXHRcdFxuXHRcdGNvbnN0IGFzc2V0c0NvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdignYXNzZXRzLWNvbnRhaW5lcicpO1xuXHRcdHRoaXMucmVuZGVyQXNzZXRDYXJkcyhhc3NldHNDb250YWluZXIpO1xuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJBc3NldENhcmRzKGFzc2V0c0NvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcblx0XHRhc3NldHNDb250YWluZXIuZW1wdHkoKTtcblx0XHRpZiAodGhpcy5hc3NldHMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRhc3NldHNDb250YWluZXIuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdcdTY2ODJcdTY1RTBcdThENDRcdTRFQTcnIH0pO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRjb25zdCBjYWxjRGF0ZSA9IHRoaXMuc2VsZWN0ZWREYXRlIHx8IG5ldyBEYXRlKCk7XG5cdFx0bGV0IHZpc2libGVBc3NldHMgPSB0aGlzLmFzc2V0cy5maWx0ZXIoYSA9PiBhLmFjdGl2ZUZyb20gPD0gY2FsY0RhdGUpO1xuXHRcdGlmICh0aGlzLnNlbGVjdGVkVGFncy5sZW5ndGggPiAwKSB7XG5cdFx0XHR2aXNpYmxlQXNzZXRzID0gdmlzaWJsZUFzc2V0cy5maWx0ZXIoYSA9PiBhLnRhZ3M/LnNvbWUodCA9PiB0aGlzLnNlbGVjdGVkVGFncy5pbmNsdWRlcyh0KSkpO1xuXHRcdH1cblx0XHQvLyBcdTY0MUNcdTdEMjJcdThGQzdcdTZFRTRcdUZGMUFcdTU0MERcdTc5RjBcdTYyMTZcdTY4MDdcdTdCN0VcdTUzMDVcdTU0MkJcblx0XHRpZiAodGhpcy5zZWFyY2hRdWVyeSAmJiB0aGlzLnNlYXJjaFF1ZXJ5LnRyaW0oKSkge1xuXHRcdFx0Y29uc3QgcSA9IHRoaXMuc2VhcmNoUXVlcnkudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHR2aXNpYmxlQXNzZXRzID0gdmlzaWJsZUFzc2V0cy5maWx0ZXIoYSA9PiB7XG5cdFx0XHRcdGNvbnN0IG5hbWVIaXQgPSAoYS5uYW1lIHx8ICcnKS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHEpO1xuXHRcdFx0XHRjb25zdCB0YWdIaXQgPSAoYS50YWdzIHx8IFtdKS5zb21lKHQgPT4gKHQgfHwgJycpLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocSkpO1xuXHRcdFx0XHRyZXR1cm4gbmFtZUhpdCB8fCB0YWdIaXQ7XG5cdFx0XHR9KTtcblx0XHR9XG4gICAgICAgIC8vIFx1NjM5Mlx1NUU4RlxuICAgICAgICBpZiAodGhpcy5zb3J0TW9kZSAhPT0gJ25vbmUnKSB7XG4gICAgICAgICAgICB2aXNpYmxlQXNzZXRzID0gWy4uLnZpc2libGVBc3NldHNdLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zb3J0TW9kZSA9PT0gJ2RhaWx5RGVzYycpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYUNvc3QgPSBhLmdldERhaWx5Q29zdChjYWxjRGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJDb3N0ID0gYi5nZXREYWlseUNvc3QoY2FsY0RhdGUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYkNvc3QgLSBhQ29zdDsgLy8gXHU2NUU1XHU1NzQ3XHU2MjEwXHU2NzJDXHU5NjREXHU1RThGXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNvcnRNb2RlID09PSAncHJpY2VEZXNjJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gTnVtYmVyKGIucHJpY2UgfHwgMCkgLSBOdW1iZXIoYS5wcmljZSB8fCAwKTsgLy8gXHU0RUY3XHU2ODNDXHU5NjREXHU1RThGXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNvcnRNb2RlID09PSAnZGF0ZURlc2MnKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGF0ID0gYS5hY3RpdmVGcm9tPy5nZXRUaW1lPy4oKSB8fCAwO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBidCA9IGIuYWN0aXZlRnJvbT8uZ2V0VGltZT8uKCkgfHwgMDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJ0IC0gYXQ7IC8vIFx1OEQyRFx1NTE2NVx1NjVFNVx1NjcxRlx1RkYwOGFjdGl2ZUZyb21cdUZGMDlcdTk2NERcdTVFOEZcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXHRcdHZpc2libGVBc3NldHMuZm9yRWFjaChhc3NldCA9PiB7XG5cdFx0XHRjb25zdCBpc0V4cGlyZWQgPSAhIShhc3NldC5hY3RpdmVUbyAmJiBhc3NldC5hY3RpdmVUbyA8PSBjYWxjRGF0ZSk7XG5cdFx0XHRjb25zdCBlbmRUZXh0ID0gaXNFeHBpcmVkID8gYXNzZXQuYWN0aXZlVG8hLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXSA6ICdcdTgxRjNcdTRFQ0EnO1xuXHRcdFx0Y29uc3QgYXNzZXRFbCA9IGFzc2V0c0NvbnRhaW5lci5jcmVhdGVEaXYoJ2Fzc2V0LWNhcmQnKTtcblx0XHRcdGlmIChpc0V4cGlyZWQpIGFzc2V0RWwuYWRkQ2xhc3MoJ2Fzc2V0LWNhcmQtLWV4cGlyZWQnKTtcblx0XHRcdGlmIChhc3NldC5oaWRkZW4pIGFzc2V0RWwuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuXHRcdFx0YXNzZXRFbC5pbm5lckhUTUwgPSBgXG5cdFx0XHRcdDxkaXYgY2xhc3M9XCJhc3NldC1pbmZvXCI+XG5cdFx0XHRcdFx0PGRpdiBjbGFzcz1cImFzc2V0LXRpdGxlXCI+JHthc3NldC5pY29ufSAke2Fzc2V0Lm5hbWV9PC9kaXY+XG5cdFx0XHRcdFx0PGRpdiBjbGFzcz1cImFzc2V0LWRhdGVcIj5cdTVERjJcdTc1Mjgke2Fzc2V0LmdldFVzYWdlRGF5cyhjYWxjRGF0ZSl9XHU1OTI5ICgke2Fzc2V0LmFjdGl2ZUZyb20udG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdfSB+ICR7YXNzZXQuYWN0aXZlVG8gPyBlbmRUZXh0IDogJ1x1ODFGM1x1NEVDQSd9KTwvZGl2PlxuXHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJhc3NldC1sYWJlbHMtc2Nyb2xsXCI+XG5cdFx0XHRcdFx0XHQke2Fzc2V0LnRhZ3MubWFwKHRhZyA9PiBgPHNwYW4gY2xhc3M9XFxcInRhZ1xcXCI+JHt0YWd9PC9zcGFuPmApLmpvaW4oJycpfVxuXHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0PGRpdiBjbGFzcz1cImFzc2V0LWNvc3RzXCI+XG5cdFx0XHRcdFx0PGRpdiBjbGFzcz1cImFzc2V0LWNvc3RzLWxpbmVcIj5cblx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJhc3NldC1wcmljZVwiPlx1NjVFNVx1NTc0NyZuYnNwOzwvZGl2PlxuXHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cImFzc2V0LWRhaWx5Y29zdFwiPlx1MDBBNSR7YXNzZXQuZ2V0RGFpbHlDb3N0KGNhbGNEYXRlKS50b0ZpeGVkKDIpfTwvZGl2PlxuXHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJhc3NldC1wcmljZVwiPlx1NEVGN1x1NjgzQyBcdTAwQTUke2Fzc2V0LnByaWNlfTwvZGl2PlxuXHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJhc3NldC1wcmljZVwiPlx1NTZERVx1NjUzNlx1NEVGNyBcdTAwQTUke2Fzc2V0LnJlY3ljbGVQcmljZX08L2Rpdj5cblx0XHRcdFx0PC9kaXY+XG5cdFx0XHRgO1xuXHRcdFx0bGV0IGRpZExvbmdQcmVzcyA9IGZhbHNlO1xuXHRcdFx0YXNzZXRFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG5cdFx0XHRcdGlmIChkaWRMb25nUHJlc3MpIHtcblx0XHRcdFx0XHRkaWRMb25nUHJlc3MgPSBmYWxzZTtcblx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0bmV3IEFzc2V0Rm9ybU1vZGFsKHRoaXMuYXBwLCB0aGlzLmFzc2V0UmVwb3NpdG9yeSwgYXNzZXQsICgpID0+IHRoaXMubG9hZEFzc2V0cygpKS5vcGVuKCk7XG5cdFx0XHR9KTtcblxuXHRcdFx0Ly8gXHU5NTdGXHU2MzA5XHU5NjkwXHU4NUNGL1x1NjA2Mlx1NTkwRFx1NjYzRVx1NzkzQVx1RkYwQ1x1NEVDNVx1NTE4NVx1NUI1OFx1NTIwN1x1NjM2Mlx1RkYxQlx1NEVDNVx1NTIzN1x1NjVCMFx1OTg3Nlx1OTBFOFx1NjU3MFx1NUI1N1x1RkYwQ1x1NEUwRFx1NTIzN1x1NjVCMFx1NTZGRVx1ODg2OFxuXHRcdFx0bGV0IHByZXNzVGltZXI6IG51bWJlciB8IG51bGwgPSBudWxsO1xuXHRcdFx0Y29uc3Qgc3RhcnRQcmVzcyA9IChldj86IE1vdXNlRXZlbnQgfCBUb3VjaEV2ZW50KSA9PiB7XG5cdFx0XHRcdC8vIFx1NEVDNVx1NTRDRFx1NUU5NFx1OUYyMFx1NjgwN1x1NURFNlx1OTUyRVxuXHRcdFx0XHRpZiAoZXYgJiYgJ2J1dHRvbicgaW4gZXYgJiYgdHlwZW9mIGV2LmJ1dHRvbiA9PT0gJ251bWJlcicgJiYgZXYuYnV0dG9uICE9PSAwKSByZXR1cm47XG5cdFx0XHRcdGlmIChwcmVzc1RpbWVyKSB3aW5kb3cuY2xlYXJUaW1lb3V0KHByZXNzVGltZXIpO1xuXHRcdFx0XHRwcmVzc1RpbWVyID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRcdGRpZExvbmdQcmVzcyA9IHRydWU7XG5cdFx0XHRcdFx0YXNzZXQuaGlkZGVuID0gIWFzc2V0LmhpZGRlbjtcblx0XHRcdFx0XHRhc3NldEVsLmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbicsIGFzc2V0LmhpZGRlbik7XG5cdFx0XHRcdFx0dGhpcy5yZWZyZXNoVG9wTnVtYmVyc09ubHkoKTtcblx0XHRcdFx0fSwgNTAwKTtcblx0XHRcdH07XG5cdFx0XHRjb25zdCBjYW5jZWxQcmVzcyA9ICgpID0+IHsgaWYgKHByZXNzVGltZXIpIHsgd2luZG93LmNsZWFyVGltZW91dChwcmVzc1RpbWVyKTsgcHJlc3NUaW1lciA9IG51bGw7IH0gfTtcblx0XHRcdGFzc2V0RWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgc3RhcnRQcmVzcyk7XG5cdFx0XHRhc3NldEVsLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBzdGFydFByZXNzLCB7IHBhc3NpdmU6IHRydWUgfSBhcyBhbnkpO1xuXHRcdFx0YXNzZXRFbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgY2FuY2VsUHJlc3MpO1xuXHRcdFx0YXNzZXRFbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgY2FuY2VsUHJlc3MpO1xuXHRcdFx0YXNzZXRFbC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIGNhbmNlbFByZXNzKTtcblx0XHRcdGFzc2V0RWwuYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCBhc3luYyAoZSkgPT4ge1xuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdGNvbnN0IG9rID0gYXdhaXQgbmV3IENvbmZpcm1Nb2RhbChgXHU3ODZFXHU1QjlBXHU4OTgxXHU1MjIwXHU5NjY0XHU4RDQ0XHU0RUE3IFwiJHthc3NldC5uYW1lfVwiIFx1NTQxN1x1RkYxRmAsICdcdTUyMjBcdTk2NjQnLCAnXHU1M0Q2XHU2RDg4JywgdHJ1ZSkub3BlbigpO1xuXHRcdFx0XHRpZiAoIW9rKSByZXR1cm47XG5cdFx0XHRcdGF3YWl0IHRoaXMuYXNzZXRSZXBvc2l0b3J5LmRlbGV0ZUFzc2V0KGFzc2V0LmlkKTtcblx0XHRcdFx0dGhpcy5sb2FkQXNzZXRzKCk7XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fVxuXG5cdC8vIFx1NEVDNVx1NTIzN1x1NjVCMFx1OTg3Nlx1OTBFOFx1NjU3MFx1NUI1NyAoXHU2MzkyXHU5NjY0IGhpZGRlbiBcdThENDRcdTRFQTcpXHVGRjBDXHU0RTBEXHU1MjM3XHU2NUIwXHU1NkZFXHU4ODY4XHUzMDAxXHU0RTBEXHU5MUNEXHU1RUZBXHU1MjE3XHU4ODY4XG5cdHByaXZhdGUgcmVmcmVzaFRvcE51bWJlcnNPbmx5KCkge1xuXHRcdGlmICghdGhpcy50b3BTdW1tYXJ5Q29tcG9uZW50KSByZXR1cm47XG5cdFx0Y29uc3QgY2FsY0RhdGUgPSB0aGlzLnNlbGVjdGVkRGF0ZSB8fCBuZXcgRGF0ZSgpO1xuXHRcdGNvbnN0IGFjdGl2ZUFzc2V0cyA9IHRoaXMuYXNzZXRzLmZpbHRlcihhID0+IGEuaXNBY3RpdmUoY2FsY0RhdGUpICYmICFhLmhpZGRlbik7XG5cdFx0Y29uc3QgZmlsdGVyZWRBY3RpdmVBc3NldHMgPSB0aGlzLmFwcGx5VGFnRmlsdGVyKGFjdGl2ZUFzc2V0cyk7XG5cdFx0Y29uc3QgdG90YWxDb3N0ID0gZmlsdGVyZWRBY3RpdmVBc3NldHMucmVkdWNlKChzdW0sIGEpID0+IHN1bSArIGEucHJpY2UsIDApO1xuXHRcdGNvbnN0IHRvdGFsUmVjeWNsZSA9IGZpbHRlcmVkQWN0aXZlQXNzZXRzLnJlZHVjZSgoc3VtLCBhKSA9PiBzdW0gKyBhLnJlY3ljbGVQcmljZSwgMCk7XG5cdFx0Y29uc3QgdG90YWxEYWlseUNvc3QgPSBmaWx0ZXJlZEFjdGl2ZUFzc2V0cy5yZWR1Y2UoKHN1bSwgYSkgPT4gc3VtICsgYS5nZXREYWlseUNvc3QoY2FsY0RhdGUpLCAwKTtcblx0XHR0aGlzLnRvcFN1bW1hcnlDb21wb25lbnQudXBkYXRlTnVtYmVycyh0b3RhbERhaWx5Q29zdCwgdG90YWxDb3N0LCB0b3RhbFJlY3ljbGUpO1xuXHR9XG5cblx0Ly8gXHU5ODc2XHU5MEU4XHU3RURGXHU4QkExXHU0RTBCXHU2NUI5XHU3Njg0XHU2NENEXHU0RjVDXHU2NzYxXHVGRjA4XHU2NDFDXHU3RDIyIC8gXHU2MzkyXHU1RThGIC8gXHU2REZCXHU1MkEwXHVGRjA5XG5cdHByaXZhdGUgcmVuZGVyQWN0aW9uQmFyKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCkge1xuXHRcdHRoaXMuaW5qZWN0QWN0aW9uQmFyU3R5bGVzKCk7XG5cdFx0Y29uc3QgYmFyID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KCdsYWMtYWN0aW9uYmFyLWNhcmQnKTtcblx0XHR0aGlzLmFjdGlvbkJhckVsID0gYmFyO1xuXG5cdFx0Ly8gXHU3QTg0XHU1QzRGXHU4RkQ0XHU1NkRFXHU2MzA5XHU5NEFFXHVGRjA4XHU5MDdGXHU1MTREXHU3Q0ZCXHU3RURGXHU2ODA3XHU5ODk4XHU2ODBGXHU5NjkwXHU4NUNGXHU2NUY2XHU2NUUwXHU1OTA0XHU4RkQ0XHU1NkRFXHVGRjA5XG5cdFx0Y29uc3QgYmFja0J0biA9IGJhci5jcmVhdGVEaXYoeyBjbHM6ICdsYWMtaWNvbi1idG4gYmFjaycsIGF0dHI6IHsgdGl0bGU6ICdcdThGRDRcdTU2REUnIH0gfSk7XG5cdFx0YmFja0J0bi5pbm5lckhUTUwgPSB0aGlzLnN2Z0JhY2soKTtcblx0XHRiYWNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdC8vIFx1NzZGNFx1NjNBNVx1NTE3M1x1OTVFRFx1NUY1M1x1NTI0RFx1NTNGNlx1NUI1MFx1RkYwOFx1NjgwN1x1N0I3RVx1RkYwOVx1RkYwQ1x1N0I0OVx1NjU0OFx1MjAxQ1x1OEZENFx1NTZERS9cdTUxNzNcdTk1RURcdTIwMURcblx0XHRcdHRyeSB7IHRoaXMubGVhZi5kZXRhY2goKTsgfSBjYXRjaCAoXykge31cblx0XHR9KTtcblxuXHRcdC8vIFx1NURFNlx1NEZBN1x1RkYxQVx1NjQxQ1x1N0QyMlx1OEY5M1x1NTE2NVx1RkYwOFx1NTE4NVx1NUQ0Q1x1NTZGRVx1NjgwN1x1NjMwOVx1OTRBRVx1RkYwOVxuXHRcdGNvbnN0IHNlYXJjaFdyYXAgPSBiYXIuY3JlYXRlRGl2KCdsYWMtYWN0aW9uYmFyLXNlYXJjaCcpO1xuXHRcdGNvbnN0IHNlYXJjaEljb25CdG4gPSBzZWFyY2hXcmFwLmNyZWF0ZUVsKCdidXR0b24nLCB7IGNsczogJ2xhYy1pY29uLWJ0biBzZWFyY2gtaWNvbicsIGF0dHI6IHsgdHlwZTogJ2J1dHRvbicsICdhcmlhLWxhYmVsJzogJ1x1NjQxQ1x1N0QyMicgfSB9KTtcblx0XHRzZWFyY2hJY29uQnRuLmlubmVySFRNTCA9IHRoaXMuc3ZnU2VhcmNoKCk7XG5cdFx0Y29uc3Qgc2VhcmNoSW5wdXQgPSBzZWFyY2hXcmFwLmNyZWF0ZUVsKCdpbnB1dCcsIHsgYXR0cjogeyB0eXBlOiAndGV4dCcsIHBsYWNlaG9sZGVyOiAnXHU2NDFDXHU3RDIyXHU1NDBEXHU3OUYwXHU2MjE2XHU2ODA3XHU3QjdFJyB9IH0pIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG5cdFx0aWYgKHRoaXMuc2VhcmNoUXVlcnkpIHNlYXJjaElucHV0LnZhbHVlID0gdGhpcy5zZWFyY2hRdWVyeTtcblx0XHRzZWFyY2hJY29uQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gc2VhcmNoSW5wdXQuZm9jdXMoKSk7XG5cdFx0c2VhcmNoSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG5cdFx0XHR0aGlzLnNlYXJjaFF1ZXJ5ID0gc2VhcmNoSW5wdXQudmFsdWUgfHwgJyc7XG5cdFx0XHR0aGlzLnJlZnJlc2hBc3NldExpc3RPbmx5KCk7XG5cdFx0fSk7XG5cblx0XHQvLyBcdTUzRjNcdTRGQTdcdUZGMUFcdTY0Q0RcdTRGNUNcdTYzMDlcdTk0QUVcdTUzM0FcdUZGMDhcdTYzOTJcdTVFOEZcdTMwMDFcdTZERkJcdTUyQTBcdUZGMDlcbiAgICAgICAgY29uc3QgYWN0aW9ucyA9IGJhci5jcmVhdGVEaXYoJ2xhYy1hY3Rpb25iYXItYWN0aW9ucycpO1xuICAgICAgICBjb25zdCBzb3J0QnRuID0gYWN0aW9ucy5jcmVhdGVEaXYoeyBjbHM6ICdsYWMtaWNvbi1idG4gc29ydCcsIGF0dHI6IHsgdGl0bGU6ICdcdTYzOTJcdTVFOEYnIH0gfSk7XG5cdFx0c29ydEJ0bi5pbm5lckhUTUwgPSB0aGlzLnN2Z1NvcnQoKTtcblx0XHRjb25zdCBhcHBseVNvcnRCdG5TdGF0ZSA9ICgpID0+IHtcblx0XHRcdHNvcnRCdG4uY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJywgdGhpcy5zb3J0TW9kZSAhPT0gJ25vbmUnKTtcblx0XHRcdHNvcnRCdG4uc2V0QXR0cignZGF0YS1tb2RlJywgdGhpcy5zb3J0TW9kZSk7XG5cdFx0XHRzb3J0QnRuLnNldEF0dHIoJ2FyaWEtcHJlc3NlZCcsIFN0cmluZyh0aGlzLnNvcnRNb2RlICE9PSAnbm9uZScpKTtcbiAgICAgICAgICAgIGNvbnN0IHRpdGxlID0gdGhpcy5zb3J0TW9kZSA9PT0gJ2RhaWx5RGVzYycgPyAnXHU2MzA5XHU2NUU1XHU1NzQ3XHU2MjEwXHU2NzJDIChcdTk2NERcdTVFOEYpJ1xuICAgICAgICAgICAgICAgIDogdGhpcy5zb3J0TW9kZSA9PT0gJ3ByaWNlRGVzYycgPyAnXHU2MzA5XHU0RUY3XHU2ODNDIChcdTk2NERcdTVFOEYpJ1xuICAgICAgICAgICAgICAgIDogdGhpcy5zb3J0TW9kZSA9PT0gJ2RhdGVEZXNjJyA/ICdcdTYzMDlcdThEMkRcdTUxNjVcdTY1RTVcdTY3MUYgKFx1OTY0RFx1NUU4RiknXG4gICAgICAgICAgICAgICAgOiAnXHU2MzkyXHU1RThGJztcbiAgICAgICAgICAgIHNvcnRCdG4uc2V0QXR0cigndGl0bGUnLCB0aXRsZSk7XG5cdFx0fTtcblx0XHRhcHBseVNvcnRCdG5TdGF0ZSgpO1xuICAgICAgICBzb3J0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMub3BlblNvcnRNZW51KHNvcnRCdG4sIChtb2RlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zb3J0TW9kZSA9IG1vZGU7XG4gICAgICAgICAgICAgICAgYXBwbHlTb3J0QnRuU3RhdGUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hBc3NldExpc3RPbmx5KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cblx0XHRjb25zdCBhZGRCdG4gPSBhY3Rpb25zLmNyZWF0ZURpdih7IGNsczogJ2xhYy1pY29uLWJ0biBhZGQnLCBhdHRyOiB7IHRpdGxlOiAnXHU2REZCXHU1MkEwJyB9IH0pO1xuXHRcdGFkZEJ0bi5pbm5lckhUTUwgPSB0aGlzLnN2Z1BsdXMoKTtcblx0XHRhZGRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG5cdFx0XHRuZXcgQXNzZXRGb3JtTW9kYWwodGhpcy5hcHAsIHRoaXMuYXNzZXRSZXBvc2l0b3J5LCB1bmRlZmluZWQsICgpID0+IHRoaXMubG9hZEFzc2V0cygpKS5vcGVuKCk7XG5cdFx0fSk7XG5cdH1cblxuXHRwcml2YXRlIHJlZnJlc2hBc3NldExpc3RPbmx5KCkge1xuXHRcdGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG5cdFx0Y29uc3QgbGlzdEVsID0gY29udGFpbmVyRWwucXVlcnlTZWxlY3RvcignLmFzc2V0cy1jb250YWluZXInKTtcblx0XHRpZiAobGlzdEVsKSB7XG5cdFx0XHQobGlzdEVsIGFzIEhUTUxFbGVtZW50KS5yZW1vdmUoKTtcblx0XHRcdGNvbnN0IG5ld0xpc3QgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoJ2Fzc2V0cy1jb250YWluZXInKTtcblx0XHRcdHRoaXMucmVuZGVyQXNzZXRDYXJkcyhuZXdMaXN0KTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIGluamVjdEFjdGlvbkJhclN0eWxlcygpIHtcblx0XHRjb25zdCBTVFlMRV9JRCA9ICdsYWMtY29zdHNldC1hY3Rpb25iYXItc3R5bGVzJztcblx0XHRpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoU1RZTEVfSUQpKSByZXR1cm47XG5cdFx0Y29uc3Qgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuXHRcdHN0eWxlLmlkID0gU1RZTEVfSUQ7XG5cdFx0c3R5bGUudGV4dENvbnRlbnQgPSBgXG5cdFx0XHQvKiBcdTYzMDlcdTk0QUVcdTUzNjFcdTcyNDdcdUZGMUFcdTRFMEUgdG9wLXN1bW1hcnkgLyBhc3NldC1jYXJkIFx1NTQwQ1x1OThDRVx1NjgzQ1x1RkYwQ1x1NEVDNVx1OUFEOFx1NUVBNlx1NjZGNFx1NUMwRiAqL1xuXHRcdFx0LmxhYy1hY3Rpb25iYXItY2FyZCB7IGRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgZ2FwOiAxMHB4OyBwYWRkaW5nOiA2cHggMTBweDsgbWFyZ2luOiAwcHggMTRweCA4cHg7IGJvcmRlci1yYWRpdXM6IDhweDsgYmFja2dyb3VuZDogIzIzMjYyRjsgYm94LXNoYWRvdzogMCAycHggOHB4IHJnYmEoMCwwLDAsMC4xOCk7IH1cblx0XHRcdC5sYWMtYWN0aW9uYmFyLXNlYXJjaCB7IHBvc2l0aW9uOiByZWxhdGl2ZTsgZmxleDogMTsgbWluLXdpZHRoOiAwOyB9XG5cdFx0XHQubGFjLWFjdGlvbmJhci1zZWFyY2ggaW5wdXQgeyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAzMHB4OyBwYWRkaW5nOiA0cHggOHB4IDRweCAzMHB4OyBib3JkZXItcmFkaXVzOiA4cHg7IGJvcmRlcjogMXB4IHNvbGlkICMzQTNENDY7IGJhY2tncm91bmQ6ICMyQTJEMzY7IGNvbG9yOiAjRjVGNkZBOyBmb250LXNpemU6IDEzcHg7IGxpbmUtaGVpZ2h0OiAyMHB4OyB9XG5cdFx0XHQubGFjLWFjdGlvbmJhci1zZWFyY2ggaW5wdXQ6OnBsYWNlaG9sZGVyIHsgY29sb3I6ICNBMEEzQjE7IH1cblx0XHRcdC5sYWMtYWN0aW9uYmFyLXNlYXJjaCAuc2VhcmNoLWljb24geyBwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6IDhweDsgdG9wOiA1MCU7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKTsgd2lkdGg6IDE2cHg7IGhlaWdodDogMTZweDsgcGFkZGluZzogMDsgYm9yZGVyOiBub25lOyBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDsgY29sb3I6ICNDOUNCRDM7IH1cblx0XHRcdC5sYWMtYWN0aW9uYmFyLWFjdGlvbnMgeyBkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBnYXA6IDhweDsgfVxuXHRcdFx0LmxhYy1pY29uLWJ0biB7IHdpZHRoOiAzMnB4OyBoZWlnaHQ6IDMycHg7IGRpc3BsYXk6IGlubGluZS1mbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgYm9yZGVyLXJhZGl1czogOHB4OyBib3JkZXI6IG5vbmUgIWltcG9ydGFudDsgb3V0bGluZTogbm9uZSAhaW1wb3J0YW50OyBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudCAhaW1wb3J0YW50OyBib3gtc2hhZG93OiBub25lICFpbXBvcnRhbnQ7IGNvbG9yOiAjQzlDQkQzOyBjdXJzb3I6IHBvaW50ZXI7IH1cblx0XHRcdC5sYWMtaWNvbi1idG4uYWRkIHsgY29sb3I6ICNmM2U3MDA7IH1cblx0XHRcdC5sYWMtaWNvbi1idG4uYmFjayB7IGRpc3BsYXk6IGlubGluZS1mbGV4OyBjb2xvcjogI0M5Q0JEMzsgfVxuXHRcdFx0LmxhYy1pY29uLWJ0bjpob3ZlciB7IGZpbHRlcjogYnJpZ2h0bmVzcygxLjA1KTsgfVxuXHRcdFx0LmxhYy1pY29uLWJ0biBzdmcgeyB3aWR0aDogMjBweDsgaGVpZ2h0OiAyMHB4OyBkaXNwbGF5OmJsb2NrOyB9XG5cdFx0XHQubGFjLWljb24tYnRuIHN2ZyAqIHsgc3Ryb2tlOiBjdXJyZW50Q29sb3IgIWltcG9ydGFudDsgZmlsbDogbm9uZSAhaW1wb3J0YW50OyBzdHJva2Utd2lkdGg6IDIgIWltcG9ydGFudDsgfVxuXHRcdFx0LmxhYy1pY29uLWJ0bi5hY3RpdmUgeyBiYWNrZ3JvdW5kOiAjMkYzMTM5OyB9XG5cdFx0XHQvKiBcdTk2OTBcdTg1Q0ZcdTYwMDFcdTY4MzdcdTVGMEZcdUZGMDhcdTVCRjlcdTlGNTAgY29zdHNldGFwcFx1RkYwOSAqL1xuXHRcdFx0LmFzc2V0LWNhcmQuaGlkZGVuIHsgb3BhY2l0eTogMC4zOyBmaWx0ZXI6IGdyYXlzY2FsZSgwLjUpOyB9XG4gICAgICAgICAgICAvKiBcdTYzOTJcdTVFOEZcdTgzRENcdTUzNTUgKi9cbiAgICAgICAgICAgIC5sYWMtc29ydC1tZW51IHsgcG9zaXRpb246IGZpeGVkOyBtaW4td2lkdGg6IDE2MHB4OyBiYWNrZ3JvdW5kOiAjMjMyNjJGOyBjb2xvcjogI0Y1RjZGQTsgYm9yZGVyLXJhZGl1czogMTBweDsgb3ZlcmZsb3c6IGhpZGRlbjsgYm94LXNoYWRvdzogMCA4cHggMThweCByZ2JhKDAsMCwwLDAuMzUpOyBib3JkZXI6IDFweCBzb2xpZCAjM0EzRDQ2OyB6LWluZGV4OiA5OTk5OyB9XG4gICAgICAgICAgICAubGFjLXNvcnQtbWVudSAubWVudS1pdGVtIHsgcGFkZGluZzogMTBweCAxNHB4OyBjdXJzb3I6IHBvaW50ZXI7IGJvcmRlci10b3A6IDFweCBzb2xpZCAjMkUzMTNBOyB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kIDEyMG1zIGVhc2UsIGNvbG9yIDEyMG1zIGVhc2U7IH1cbiAgICAgICAgICAgIC5sYWMtc29ydC1tZW51IC5tZW51LWl0ZW06Zmlyc3QtY2hpbGQgeyBib3JkZXItdG9wOiBub25lOyB9XG4gICAgICAgICAgICAubGFjLXNvcnQtbWVudSAubWVudS1pdGVtOmhvdmVyIHsgYmFja2dyb3VuZDogcmdiYSgyNTUsIDIxNCwgMCwgMC4xMik7IGNvbG9yOiBpbmhlcml0OyB9XG4gICAgICAgICAgICAubGFjLXNvcnQtbWVudSAubWVudS1pdGVtLmFjdGl2ZSB7IGNvbG9yOiAjRkZENzAwOyB9XG5cblx0XHRcdC8qIFx1NUMwRlx1NEU4RSA3MjBweCBcdTY1RjZcdTdEMjdcdTUxRDFcdTVFMDNcdTVDNDAgKi9cblx0XHRcdEBtZWRpYSAobWF4LXdpZHRoOiA3MjBweCkge1xuXHRcdFx0XHQubGFjLWFjdGlvbmJhci1jYXJkIHsgZ2FwOiA4cHg7IH1cblx0XHRcdFx0LmxhYy1hY3Rpb25iYXItc2VhcmNoIGlucHV0IHsgcGFkZGluZy1sZWZ0OiAzMHB4OyB9XG5cdFx0XHR9XG5cdFx0YDtcblx0XHRkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlKTtcblx0fVxuXG5cdHByaXZhdGUgaW5qZWN0SGVhZGVyRml4U3R5bGVzKCkge1xuXHRcdGNvbnN0IFNUWUxFX0lEID0gJ2xhYy1jb3N0c2V0LWhlYWRlci1zdHlsZXMnO1xuXHRcdGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChTVFlMRV9JRCkpIHJldHVybjtcblx0XHRjb25zdCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG5cdFx0c3R5bGUuaWQgPSBTVFlMRV9JRDtcblx0XHRzdHlsZS50ZXh0Q29udGVudCA9IGBcblx0XHRcdC8qIFx1NEVDNVx1NEY1Q1x1NzUyOFx1NEU4RVx1NjcyQ1x1ODlDNlx1NTZGRVx1RkYxQVx1NEZERFx1OEJDMVx1N0E4NFx1NUJCRFx1NjVGNlx1NEU1Rlx1NjYzRVx1NzkzQVx1NjgwN1x1OTg5OFx1NjgwRlx1ODNEQ1x1NTM1NS9cdThGRDRcdTU2REVcdTUzM0FcdTU3REYgKi9cblx0XHRcdC53b3Jrc3BhY2UtbGVhZltkYXRhLXR5cGU9XCJsYWMtY29zdHNldC12aWV3XCJdIC52aWV3LWhlYWRlciB7IGRpc3BsYXk6IGZsZXggIWltcG9ydGFudDsgfVxuXHRcdFx0LndvcmtzcGFjZS1sZWFmW2RhdGEtdHlwZT1cImxhYy1jb3N0c2V0LXZpZXdcIl0gLnZpZXctaGVhZGVyIC52aWV3LWFjdGlvbnMgeyBkaXNwbGF5OiBpbmxpbmUtZmxleCAhaW1wb3J0YW50OyBnYXA6IDZweDsgfVxuXHRcdFx0LndvcmtzcGFjZS1sZWFmW2RhdGEtdHlwZT1cImxhYy1jb3N0c2V0LXZpZXdcIl0gLnZpZXctaGVhZGVyLXRpdGxlLWNvbnRhaW5lciB7IG1pbi13aWR0aDogMDsgfVxuXHRcdFx0LndvcmtzcGFjZS1sZWFmW2RhdGEtdHlwZT1cImxhYy1jb3N0c2V0LXZpZXdcIl0gLnZpZXctaGVhZGVyLXRpdGxlIHsgbWF4LXdpZHRoOiA2MCU7IG92ZXJmbG93OiBoaWRkZW47IHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOyB3aGl0ZS1zcGFjZTogbm93cmFwOyB9XG5cdFx0XHRAbWVkaWEgKG1heC13aWR0aDogNzIwcHgpIHtcblx0XHRcdFx0LndvcmtzcGFjZS1sZWFmW2RhdGEtdHlwZT1cImxhYy1jb3N0c2V0LXZpZXdcIl0gLnZpZXctaGVhZGVyLXRpdGxlIHsgbWF4LXdpZHRoOiA0NSU7IH1cblx0XHRcdH1cblx0XHRcdEBtZWRpYSAobWF4LXdpZHRoOiA1NjBweCkge1xuXHRcdFx0XHQud29ya3NwYWNlLWxlYWZbZGF0YS10eXBlPVwibGFjLWNvc3RzZXQtdmlld1wiXSAudmlldy1oZWFkZXItdGl0bGUgeyBtYXgtd2lkdGg6IDM1JTsgfVxuXHRcdFx0fVxuXHRcdGA7XG5cdFx0ZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZSk7XG5cdH1cblxuICAgIHByaXZhdGUgb3BlblNvcnRNZW51KGFuY2hvckVsOiBIVE1MRWxlbWVudCwgb25TZWxlY3Q6IChtb2RlOiAnbm9uZScgfCAnZGFpbHlEZXNjJyB8ICdwcmljZURlc2MnIHwgJ2RhdGVEZXNjJykgPT4gdm9pZCkge1xuICAgICAgICAvLyBcdTgyRTVcdTVERjJcdTVCNThcdTU3MjhcdTUxNDhcdTZFMDVcdTc0MDZcbiAgICAgICAgdGhpcy5jbG9zZUV4aXN0aW5nU29ydE1lbnUoKTtcblxuICAgICAgICBjb25zdCByZWN0ID0gYW5jaG9yRWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGNvbnN0IG1lbnUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgbWVudS5jbGFzc05hbWUgPSAnbGFjLXNvcnQtbWVudSc7XG5cbiAgICAgICAgY29uc3QgYnVpbGRJdGVtID0gKGxhYmVsOiBzdHJpbmcsIHZhbHVlOiAnbm9uZScgfCAnZGFpbHlEZXNjJyB8ICdwcmljZURlc2MnIHwgJ2RhdGVEZXNjJykgPT4ge1xuICAgICAgICAgICAgY29uc3QgaXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgaXRlbS5jbGFzc05hbWUgPSAnbWVudS1pdGVtJyArICh0aGlzLnNvcnRNb2RlID09PSB2YWx1ZSA/ICcgYWN0aXZlJyA6ICcnKTtcbiAgICAgICAgICAgIGl0ZW0udGV4dENvbnRlbnQgPSBsYWJlbDtcbiAgICAgICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXYpID0+IHtcbiAgICAgICAgICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0ID0gdGhpcy5zb3J0TW9kZSA9PT0gdmFsdWUgPyAnbm9uZScgOiB2YWx1ZTtcbiAgICAgICAgICAgICAgICBvblNlbGVjdChuZXh0IGFzIGFueSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZUV4aXN0aW5nU29ydE1lbnUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgIH07XG5cbiAgICAgICAgbWVudS5hcHBlbmRDaGlsZChidWlsZEl0ZW0oJ1x1NjMwOVx1NjVFNVx1NTc0N1x1NjIxMFx1NjcyQycsICdkYWlseURlc2MnKSk7XG4gICAgICAgIG1lbnUuYXBwZW5kQ2hpbGQoYnVpbGRJdGVtKCdcdTYzMDlcdTRFRjdcdTY4M0MnLCAncHJpY2VEZXNjJykpO1xuICAgICAgICBtZW51LmFwcGVuZENoaWxkKGJ1aWxkSXRlbSgnXHU2MzA5XHU4RDJEXHU1MTY1XHU2NUU1XHU2NzFGJywgJ2RhdGVEZXNjJykpO1xuXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobWVudSk7XG4gICAgICAgIC8vIFx1NUI5QVx1NEY0RFx1NTIzMFx1NjMwOVx1OTRBRVx1NEUwQlx1NjVCOVxuICAgICAgICBjb25zdCB0b3AgPSByZWN0LmJvdHRvbSArIDY7XG4gICAgICAgIGNvbnN0IGxlZnQgPSBNYXRoLm1pbihNYXRoLm1heCg4LCByZWN0LmxlZnQpLCB3aW5kb3cuaW5uZXJXaWR0aCAtIDE4MCk7XG4gICAgICAgIG1lbnUuc3R5bGUudG9wID0gYCR7dG9wfXB4YDtcbiAgICAgICAgbWVudS5zdHlsZS5sZWZ0ID0gYCR7bGVmdH1weGA7XG5cbiAgICAgICAgY29uc3Qgb25Eb2NDbGljayA9IChldjogTW91c2VFdmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFtZW51LmNvbnRhaW5zKGV2LnRhcmdldCBhcyBOb2RlKSkgdGhpcy5jbG9zZUV4aXN0aW5nU29ydE1lbnUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3Qgb25Fc2MgPSAoZXY6IEtleWJvYXJkRXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmIChldi5rZXkgPT09ICdFc2NhcGUnKSB0aGlzLmNsb3NlRXhpc3RpbmdTb3J0TWVudSgpO1xuICAgICAgICB9O1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBvbkRvY0NsaWNrLCB7IG9uY2U6IHRydWUgfSk7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBvbkVzYywgeyBvbmNlOiB0cnVlIH0pO1xuICAgICAgICAobWVudSBhcyBhbnkpLl9jbGVhbnVwID0gKCkgPT4ge1xuICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgb25Eb2NDbGljayk7XG4gICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgb25Fc2MpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIFx1OEJBOVx1ODlDNlx1NTZGRVx1NTNFRlx1ODhBQiBzZXRWaWV3U3RhdGUgXHU2MDYyXHU1OTBEXHU0RTBFXHU1QkZDXHU4MjJBXHVGRjFBXHU0RkREXHU1QjU4L1x1NUU5NFx1NzUyOFx1NzJCNlx1NjAwMVxuICAgIGdldFN0YXRlKCk6IGFueSB7XG4gICAgICAgIHJldHVybiB7IGZpbGVQYXRoOiB0aGlzLmZpbGVQYXRoIH07XG4gICAgfVxuXG4gICAgYXN5bmMgc2V0U3RhdGUoc3RhdGU6IGFueSwgcmVzdWx0OiBhbnkpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgbmV4dFBhdGggPSBzdGF0ZT8uZmlsZVBhdGggYXMgc3RyaW5nIHwgdW5kZWZpbmVkO1xuICAgICAgICBpZiAobmV4dFBhdGggJiYgbmV4dFBhdGggIT09IHRoaXMuZmlsZVBhdGgpIHtcbiAgICAgICAgICAgIHRoaXMuZmlsZVBhdGggPSBuZXh0UGF0aDtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudXNlRmlsZShuZXh0UGF0aCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gXHU4MkU1XHU2NUUwXHU4REVGXHU1Rjg0XHVGRjBDXHU2RTA1XHU3QTdBXHU1RTc2XHU2M0QwXHU3OTNBXG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRhaW5lckVsLmVtcHR5KCk7XG4gICAgICAgIGNvbnRhaW5lckVsLmFkZENsYXNzKCdwYWdlLXJvb3QnKTtcbiAgICAgICAgY29uc3QgaGludCA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdigpO1xuICAgICAgICBoaW50LnN0eWxlLnBhZGRpbmcgPSAnMTZweCc7XG4gICAgICAgIGhpbnQuc3R5bGUub3BhY2l0eSA9ICcwLjgnO1xuICAgICAgICBoaW50LnRleHRDb250ZW50ID0gJ1x1NEVDRVx1NjU4N1x1NEVGNlx1NzY4NFx1NTNGM1x1OTUyRVx1ODNEQ1x1NTM1NVx1NEUyRFx1OTAwOVx1NjJFOSBcdTIwMUNcdTc1MjggTGFDLkNvc3RTZXQgXHU2MjUzXHU1RjAwXHUyMDFEXHUzMDAyJztcbiAgICB9XG5cbiAgICBwcml2YXRlIGNsb3NlRXhpc3RpbmdTb3J0TWVudSgpIHtcbiAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubGFjLXNvcnQtbWVudScpIGFzIEhUTUxFbGVtZW50IHwgbnVsbDtcbiAgICAgICAgaWYgKGV4aXN0aW5nKSB7XG4gICAgICAgICAgICBjb25zdCBjbGVhbnVwID0gKGV4aXN0aW5nIGFzIGFueSkuX2NsZWFudXAgYXMgKCgpID0+IHZvaWQpIHwgdW5kZWZpbmVkO1xuICAgICAgICAgICAgaWYgKGNsZWFudXApIGNsZWFudXAoKTtcbiAgICAgICAgICAgIGV4aXN0aW5nLnJlbW92ZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG5cdHByaXZhdGUgc3ZnU2VhcmNoKCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIGBcblx0XHRcdDxzdmcgdmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCJub25lXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPlxuXHRcdFx0XHQ8Y2lyY2xlIGN4PVwiMTFcIiBjeT1cIjExXCIgcj1cIjdcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIyXCIvPlxuXHRcdFx0XHQ8bGluZSB4MT1cIjIwXCIgeTE9XCIyMFwiIHgyPVwiMTYuNjVcIiB5Mj1cIjE2LjY1XCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIi8+XG5cdFx0XHQ8L3N2Zz5cblx0XHRgO1xuXHR9XG5cblx0cHJpdmF0ZSBzdmdQbHVzKCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIGBcblx0XHRcdDxzdmcgdmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCJub25lXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPlxuXHRcdFx0XHQ8cGF0aCBkPVwiTTEyIDV2MTRNNSAxMmgxNFwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjJcIiBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIvPlxuXHRcdFx0PC9zdmc+XG5cdFx0YDtcblx0fVxuXG5cdHByaXZhdGUgc3ZnU29ydCgpOiBzdHJpbmcge1xuXHRcdHJldHVybiBgXG5cdFx0XHQ8c3ZnIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBmaWxsPVwibm9uZVwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj5cblx0XHRcdFx0PHBhdGggZD1cIk04IDlsNC00IDQgNFwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjJcIiBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIi8+XG5cdFx0XHRcdDxwYXRoIGQ9XCJNMTYgMTVsLTQgNC00LTRcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIyXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIvPlxuXHRcdFx0PC9zdmc+XG5cdFx0YDtcblx0fVxuXG5cdHByaXZhdGUgc3ZnQmFjaygpOiBzdHJpbmcge1xuXHRcdHJldHVybiBgXG5cdFx0XHQ8c3ZnIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBmaWxsPVwibm9uZVwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj5cblx0XHRcdFx0PHBhdGggZD1cIk0xNSAxOGwtNi02IDYtNlwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjJcIiBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIi8+XG5cdFx0XHQ8L3N2Zz5cblx0XHRgO1xuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJUb3BTdW1tYXJ5KGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCkge1xuXHRcdC8vIFx1OEJBMVx1N0I5N1x1N0VERlx1OEJBMVx1NjU3MFx1NjM2RVxuXHRcdGNvbnN0IGNhbGNEYXRlID0gdGhpcy5zZWxlY3RlZERhdGUgfHwgbmV3IERhdGUoKTtcblx0XHRjb25zdCBhY3RpdmVBc3NldHMgPSB0aGlzLmFzc2V0cy5maWx0ZXIoYXNzZXQgPT4gYXNzZXQuaXNBY3RpdmUoY2FsY0RhdGUpICYmICFhc3NldC5oaWRkZW4pO1xuXHRcdGNvbnN0IGZpbHRlcmVkQWN0aXZlQXNzZXRzID0gdGhpcy5hcHBseVRhZ0ZpbHRlcihhY3RpdmVBc3NldHMpO1xuXHRcdGNvbnN0IHRvdGFsQ29zdCA9IGZpbHRlcmVkQWN0aXZlQXNzZXRzLnJlZHVjZSgoc3VtLCBhc3NldCkgPT4gc3VtICsgYXNzZXQucHJpY2UsIDApO1xuXHRcdGNvbnN0IHRvdGFsUmVjeWNsZSA9IGZpbHRlcmVkQWN0aXZlQXNzZXRzLnJlZHVjZSgoc3VtLCBhc3NldCkgPT4gc3VtICsgYXNzZXQucmVjeWNsZVByaWNlLCAwKTtcblx0XHRjb25zdCB0b3RhbERhaWx5Q29zdCA9IGZpbHRlcmVkQWN0aXZlQXNzZXRzLnJlZHVjZSgoc3VtLCBhc3NldCkgPT4gc3VtICsgYXNzZXQuZ2V0RGFpbHlDb3N0KGNhbGNEYXRlKSwgMCk7XG5cdFx0XG5cdFx0Ly8gXHU4M0I3XHU1M0Q2XHU2MjQwXHU2NzA5XHU2ODA3XHU3QjdFXHVGRjA4XHU0RUNFXHU1MTY4XHU5MEU4XHU4RDQ0XHU0RUE3XHU2NTM2XHU5NkM2XHVGRjA5XHVGRjBDXHU1RTc2XHU4RkRCXHU4ODRDXHU1NkZBXHU1QjlBXHU5ODdBXHU1RThGXHU2MzkyXHU1RThGXHVGRjA4XHU0RTJEXHU2NTg3XHUzMDAxXHU1RkZEXHU3NTY1XHU1OTI3XHU1QzBGXHU1MTk5XHUzMDAxXHU2NTcwXHU1MDNDXHU5ODdBXHU1RThGXHVGRjA5XG5cdFx0Y29uc3QgYWxsVGFncyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuXHRcdHRoaXMuYXNzZXRzLmZvckVhY2goYXNzZXQgPT4ge1xuXHRcdFx0KGFzc2V0LnRhZ3MgfHwgW10pLmZvckVhY2godGFnID0+IGFsbFRhZ3MuYWRkKHRhZykpO1xuXHRcdH0pO1xuXHRcdGNvbnN0IGNvbGxhdG9yID0gbmV3IEludGwuQ29sbGF0b3IoJ3poJywgeyBzZW5zaXRpdml0eTogJ2Jhc2UnLCBudW1lcmljOiB0cnVlIH0pO1xuXHRcdGNvbnN0IHRhZ3NBcnJheSA9IEFycmF5LmZyb20oYWxsVGFncykuc29ydCgoYSwgYikgPT4gY29sbGF0b3IuY29tcGFyZShhLCBiKSk7XG5cblx0XHQvLyBcdThCQTFcdTdCOTdcdTVFNzRcdTRFRkRcdTgzMDNcdTU2RjRcdUZGMUFcdTRFQ0VcdTY3MDBcdTY1RTlcdThENDRcdTRFQTdcdTVFNzRcdTRFRkRcdTUyMzBcdTY3MkFcdTY3NjU3XHU1RTc0XG5cdFx0Y29uc3QgY3VycmVudFllYXIgPSBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCk7XG5cdFx0Y29uc3QgbWF4WWVhciA9IGN1cnJlbnRZZWFyICsgNzsgLy8gXHU2NzJBXHU2NzY1N1x1NUU3NFxuXHRcdFxuXHRcdGxldCBtaW5ZZWFyID0gY3VycmVudFllYXI7IC8vIFx1OUVEOFx1OEJBNFx1NjcwMFx1NUMwRlx1NUU3NFx1NEVGRFx1NEUzQVx1NUY1M1x1NTI0RFx1NUU3NFx1NEVGRFxuXHRcdGlmICh0aGlzLmFzc2V0cy5sZW5ndGggPiAwKSB7XG5cdFx0XHQvLyBcdTYyN0VcdTUyMzBcdTYyNDBcdTY3MDlcdThENDRcdTRFQTdcdTRFMkRcdTc2ODRcdTY3MDBcdTY1RTlcdTVFNzRcdTRFRkRcblx0XHRcdGNvbnN0IGVhcmxpZXN0WWVhciA9IE1hdGgubWluKC4uLnRoaXMuYXNzZXRzLm1hcChhc3NldCA9PiBhc3NldC5hY3RpdmVGcm9tLmdldEZ1bGxZZWFyKCkpKTtcblx0XHRcdG1pblllYXIgPSBlYXJsaWVzdFllYXI7XG5cdFx0fVxuXG5cdFx0Ly8gXHU4QkExXHU3Qjk3XHU1NkZFXHU4ODY4XHU2NTcwXHU2MzZFIC0gXHU0RjdGXHU3NTI4XHU0RTI0XHU2QjY1XHU2RTMyXHU2N0QzXHU3QjU2XHU3NTY1XHVGRjA4XHU1N0ZBXHU0RThFXHU3QjVCXHU5MDA5XHU1NDBFXHU3Njg0XHU4RDQ0XHU0RUE3XHVGRjA5XG5cdFx0Y29uc3QgdHJlbmRQb2ludHMgPSB0aGlzLmNhbGNUcmVuZFBvaW50cyhmaWx0ZXJlZEFjdGl2ZUFzc2V0cywgMzApO1xuXG5cdFx0Y29uc29sZS5sb2coJ1x1NkUzMlx1NjdEM1x1OTg3Nlx1OTBFOFx1N0VERlx1OEJBMVx1NTMzQVx1NTdERjonLCB7IFxuXHRcdFx0YWN0aXZlQXNzZXRzOiBhY3RpdmVBc3NldHMubGVuZ3RoLCBcblx0XHRcdHRvdGFsQ29zdCwgXG5cdFx0XHR0b3RhbFJlY3ljbGUsIFxuXHRcdFx0dG90YWxEYWlseUNvc3QsIFxuXHRcdFx0dGFnc0FycmF5LFxuXHRcdFx0eWVhclJhbmdlOiB7IG1pblllYXIsIG1heFllYXIgfVxuXHRcdH0pO1xuXG5cdFx0Ly8gXHU1MjFCXHU1RUZBVG9wU3VtbWFyeVx1N0VDNFx1NEVGNlxuXHRcdGNvbnN0IHRvcFN1bW1hcnlFbCA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdigpO1xuXHRcdGNvbnN0IHRvcFN1bW1hcnlQcm9wczogVG9wU3VtbWFyeVByb3BzID0ge1xuXHRcdFx0dG90YWxEYWlseUNvc3QsXG5cdFx0XHR0b3RhbENvc3QsXG5cdFx0XHR0b3RhbFJlY3ljbGUsXG5cdFx0XHR0YWdzOiB0YWdzQXJyYXksXG5cdFx0XHRzZWxlY3RlZFRhZ3M6IHRoaXMuc2VsZWN0ZWRUYWdzLFxuXHRcdFx0b25UYWdDbGljazogKHRhZzogc3RyaW5nIHwgc3RyaW5nW10pID0+IHtcblx0XHRcdFx0Ly8gXHU2NTJGXHU2MzAxXHU1MzU1XHU0RTJBXHU2ODA3XHU3QjdFXHU1MjA3XHU2MzYyXHU2MjE2XHU2Mjc5XHU5MUNGXHU4QkJFXHU3RjZFXG5cdFx0XHRcdGlmIChBcnJheS5pc0FycmF5KHRhZykpIHtcblx0XHRcdFx0XHR0aGlzLnNlbGVjdGVkVGFncyA9IFsuLi5uZXcgU2V0KHRhZyldO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGlmICh0aGlzLnNlbGVjdGVkVGFncy5pbmNsdWRlcyh0YWcpKSB7XG5cdFx0XHRcdFx0XHR0aGlzLnNlbGVjdGVkVGFncyA9IHRoaXMuc2VsZWN0ZWRUYWdzLmZpbHRlcih0ID0+IHQgIT09IHRhZyk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHRoaXMuc2VsZWN0ZWRUYWdzID0gWy4uLnRoaXMuc2VsZWN0ZWRUYWdzLCB0YWddO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHQvLyBcdTkxQ0RcdTY1QjBcdTZFMzJcdTY3RDNcdTk4NzVcdTk3NjJcdTRFRTVcdTUzQ0RcdTY2MjBcdTdCNUJcdTkwMDlcblx0XHRcdFx0dGhpcy5yZW5kZXJBc3NldHMoKTtcblx0XHRcdH0sXG5cdFx0XHR0cmVuZFBvaW50cyxcblx0XHRcdHNlbGVjdGVkRGF0ZTogdGhpcy5zZWxlY3RlZERhdGUsXG5cdFx0XHRvbkNoYXJ0U2VsZWN0OiAoeDogbnVtYmVyKSA9PiB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKCdcdTU2RkVcdTg4NjhcdTkwMDlcdTYyRTk6JywgeCk7XG5cdFx0XHRcdC8vIFx1NTQwRVx1N0VFRFx1NTNFRlx1NEVFNVx1NkRGQlx1NTJBMFx1NTZGRVx1ODg2OFx1NEVBNFx1NEU5Mlx1NTI5Rlx1ODBGRFxuXHRcdFx0fSxcblx0XHRcdG9uQ2hhcnRXaWR0aDogKHc6IG51bWJlcikgPT4ge1xuXHRcdFx0XHRjb25zb2xlLmxvZygnXHU1NkZFXHU4ODY4XHU1QkJEXHU1RUE2OicsIHcpO1xuXHRcdFx0fSxcblx0XHRcdG9uRGF0ZVBpY2s6IChkYXRlU3RyOiBzdHJpbmcpID0+IHtcblx0XHRcdFx0Y29uc29sZS5sb2coJ1x1NjVFNVx1NjcxRlx1OTAwOVx1NjJFOTonLCBkYXRlU3RyKTtcblx0XHRcdFx0Ly8gXHU1OTA0XHU3NDA2XHU2NUU1XHU2NzFGXHU5MDA5XHU2MkU5XHU5MDNCXHU4RjkxXHVGRjFBXHU0RUM1XHU2NkY0XHU2NUIwXHU3QUQ2XHU3RUJGXHU0RTBFXHU2NTcwXHU1QjU3XHVGRjBDXHU0RTBEXHU5MUNEXHU3Qjk3XHU2Mjk4XHU3RUJGXG5cdFx0XHRcdGNvbnN0IHNlbGVjdGVkRGF0ZSA9IG5ldyBEYXRlKGRhdGVTdHIpO1xuXHRcdFx0XHR0aGlzLnNlbGVjdGVkRGF0ZSA9IHNlbGVjdGVkRGF0ZTsgLy8gXHU2NkY0XHU2NUIwXHU3MkI2XHU2MDAxXG5cdFx0XHRcdGlmICh0aGlzLnRvcFN1bW1hcnlDb21wb25lbnQpIHtcblx0XHRcdFx0XHR0aGlzLnRvcFN1bW1hcnlDb21wb25lbnQudXBkYXRlU2VsZWN0aW9uKG51bGwsIHNlbGVjdGVkRGF0ZSk7XG5cdFx0XHRcdFx0Ly8gXHU1NDBDXHU2QjY1XHU2NkY0XHU2NUIwXHU5ODc2XHU5MEU4XHU2NTcwXHU1QjU3XG5cdFx0XHRcdFx0Y29uc3QgY2FsY0RhdGUgPSBzZWxlY3RlZERhdGU7XG5cdFx0XHRcdFx0Y29uc3QgYWN0aXZlQXNzZXRzID0gdGhpcy5hc3NldHMuZmlsdGVyKGFzc2V0ID0+IGFzc2V0LmlzQWN0aXZlKGNhbGNEYXRlKSAmJiAhYXNzZXQuaGlkZGVuKTtcblx0XHRcdFx0XHRjb25zdCBmaWx0ZXJlZEFjdGl2ZUFzc2V0cyA9IHRoaXMuYXBwbHlUYWdGaWx0ZXIoYWN0aXZlQXNzZXRzKTtcblx0XHRcdFx0XHRjb25zdCB0b3RhbENvc3QgPSBmaWx0ZXJlZEFjdGl2ZUFzc2V0cy5yZWR1Y2UoKHN1bSwgYXNzZXQpID0+IHN1bSArIGFzc2V0LnByaWNlLCAwKTtcblx0XHRcdFx0XHRjb25zdCB0b3RhbFJlY3ljbGUgPSBmaWx0ZXJlZEFjdGl2ZUFzc2V0cy5yZWR1Y2UoKHN1bSwgYXNzZXQpID0+IHN1bSArIGFzc2V0LnJlY3ljbGVQcmljZSwgMCk7XG5cdFx0XHRcdFx0Y29uc3QgdG90YWxEYWlseUNvc3QgPSBmaWx0ZXJlZEFjdGl2ZUFzc2V0cy5yZWR1Y2UoKHN1bSwgYXNzZXQpID0+IHN1bSArIGFzc2V0LmdldERhaWx5Q29zdChjYWxjRGF0ZSksIDApO1xuXHRcdFx0XHRcdHRoaXMudG9wU3VtbWFyeUNvbXBvbmVudC51cGRhdGVOdW1iZXJzKHRvdGFsRGFpbHlDb3N0LCB0b3RhbENvc3QsIHRvdGFsUmVjeWNsZSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0Ly8gXHU0RUM1XHU1MjM3XHU2NUIwXHU1MjE3XHU4ODY4XG5cdFx0XHRcdGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG5cdFx0XHRcdGNvbnN0IGxpc3RFbCA9IGNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoJy5hc3NldHMtY29udGFpbmVyJyk7XG5cdFx0XHRcdGlmIChsaXN0RWwpIHtcblx0XHRcdFx0XHQvLyBcdTkxQ0RcdTY1QjBcdTZFMzJcdTY3RDNcdTY1NzRcdTRFMkFcdTg5QzZcdTU2RkVcdTRGMUFcdTkxQ0RcdTVFRkFcdTU2RkVcdTg4NjhcdUZGMENcdThGRDlcdTkxQ0NcdTUzRUFcdTkxQ0RcdTVFRkFcdTUyMTdcdTg4NjhcdTUzM0FcdTU3REZcblx0XHRcdFx0XHQobGlzdEVsIGFzIEhUTUxFbGVtZW50KS5yZW1vdmUoKTtcblx0XHRcdFx0XHRjb25zdCBuZXdMaXN0ID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KCdhc3NldHMtY29udGFpbmVyJyk7XG5cdFx0XHRcdFx0dGhpcy5yZW5kZXJBc3NldENhcmRzKG5ld0xpc3QpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vIFx1ODJFNVx1OTk5Nlx1NkIyMVx1OEZEQlx1NTE2NVx1RkYwQ1x1NkI2M1x1NUUzOFx1NjU3NFx1NEY1M1x1NkUzMlx1NjdEM1xuXHRcdFx0XHRcdHRoaXMucmVuZGVyQXNzZXRzKCk7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRtaW5ZZWFyLFxuXHRcdFx0bWF4WWVhclxuXHRcdH07XG5cblx0XHR0aGlzLnRvcFN1bW1hcnlDb21wb25lbnQgPSBuZXcgVG9wU3VtbWFyeSh0b3BTdW1tYXJ5RWwsIHRvcFN1bW1hcnlQcm9wcyk7XG5cdFx0dGhpcy50b3BTdW1tYXJ5Q29tcG9uZW50LnJlbmRlcigpO1xuXG5cdFx0Ly8gXHU1RjAyXHU2QjY1XHU3RUM2XHU1MzE2XHU1NkZFXHU4ODY4XHVGRjA4XHU1N0ZBXHU0RThFXHU1RjUzXHU1MjREXHU3QjVCXHU5MDA5XHU1NDBFXHU3Njg0XHU4RDQ0XHU0RUE3XHVGRjA5XG5cdFx0dGhpcy5yZW5kZXJDaGFydFdpdGhQcm9ncmVzc2l2ZVJlZmluZW1lbnQoZmlsdGVyZWRBY3RpdmVBc3NldHMpO1xuXHRcdFxuXHRcdGNvbnNvbGUubG9nKCdcdTk4NzZcdTkwRThcdTdFREZcdThCQTFcdTUzM0FcdTU3REZcdTVERjJcdTUyMUJcdTVFRkE6JywgdG9wU3VtbWFyeUVsKTtcblx0fVxuXG5cdC8vIFx1NkUxMFx1OEZEQlx1NUYwRlx1N0VDNlx1NTMxNlx1NkUzMlx1NjdEM1x1RkYwOFx1NTNDMlx1ODAwM2Nvc3RzZXRhcHBcdTVCOUVcdTczQjBcdUZGMDlcblx0cHJpdmF0ZSByZW5kZXJDaGFydFdpdGhQcm9ncmVzc2l2ZVJlZmluZW1lbnQoYXNzZXRzOiBBc3NldFtdKSB7XG5cdFx0aWYgKGFzc2V0cy5sZW5ndGggPT09IDApIHJldHVybjtcblx0XHRcblx0XHQvLyBcdThCQTFcdTdCOTdcdTYyNDBcdTY3MDlcdThENDRcdTRFQTdcdTc2ODQgYWN0aXZlX3RvIFx1NjcwMFx1NTkyN1x1NTAzQ1xuXHRcdGxldCBtYXhBY3RpdmVUbyA9IDA7XG5cdFx0YXNzZXRzLmZvckVhY2goYSA9PiB7XG5cdFx0XHRjb25zdCB0byA9IGEuYWN0aXZlVG87XG5cdFx0XHRpZiAodG8pIHtcblx0XHRcdFx0Y29uc3QgdCA9IHRvLmdldFRpbWUoKTtcblx0XHRcdFx0aWYgKHQgJiYgdCA+IG1heEFjdGl2ZVRvKSBtYXhBY3RpdmVUbyA9IHQ7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0Y29uc3Qgbm93ID0gbmV3IERhdGUoKTtcblx0XHRjb25zdCBtYXhEYXRlID0gbWF4QWN0aXZlVG8gJiYgbWF4QWN0aXZlVG8gPiBub3cuZ2V0VGltZSgpID8gbmV3IERhdGUobWF4QWN0aXZlVG8pIDogbm93O1xuXHRcdFxuXHRcdC8vIFx1N0IyQ1x1NEUwMFx1NkI2NVx1RkYxQVx1NTIxRFx1NTlDQlx1NzBCOVx1NUU3Nlx1ODg0Q1xuXHRcdGNvbnN0IGluaXRpYWxQb2ludHMgPSB0aGlzLmNhbGNUcmVuZFBvaW50cyhhc3NldHMsIDMwLCB1bmRlZmluZWQsIG1heERhdGUpO1xuXHRcdGlmICh0aGlzLnRvcFN1bW1hcnlDb21wb25lbnQpIHtcblx0XHRcdHRoaXMudG9wU3VtbWFyeUNvbXBvbmVudC51cGRhdGVDaGFydChpbml0aWFsUG9pbnRzKTtcblx0XHR9XG5cdFx0XG5cdFx0Ly8gXHU3QjJDXHU0RThDXHU2QjY1XHVGRjFBXHU1RjAyXHU2QjY1XHU3RUM2XHU1MzE2XHU1RTc2XHU4ODRDIC0gMzAqMzBcdTRFMkFcdTcwQjlcblx0XHRzZXRUaW1lb3V0KGFzeW5jICgpID0+IHtcblx0XHRcdGNvbnN0IHNlZ1Byb21pc2VzOiBQcm9taXNlPHsgZGF0ZTogRGF0ZTsgdmFsdWU6IG51bWJlcjsgfVtdPltdID0gW107XG5cdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGluaXRpYWxQb2ludHMubGVuZ3RoIC0gMTsgaSsrKSB7XG5cdFx0XHRcdHNlZ1Byb21pc2VzLnB1c2goXG5cdFx0XHRcdFx0UHJvbWlzZS5yZXNvbHZlKHRoaXMuY2FsY1RyZW5kUG9pbnRzKGFzc2V0cywgMzAsIGluaXRpYWxQb2ludHNbaV0uZGF0ZSwgaW5pdGlhbFBvaW50c1tpICsgMV0uZGF0ZSkpLnRoZW4oc2VnUG9pbnRzID0+IHtcblx0XHRcdFx0XHRcdGlmIChpID4gMCkgcmV0dXJuIHNlZ1BvaW50cy5zbGljZSgxKTsgLy8gXHU5MDdGXHU1MTREXHU5MUNEXHU1OTBEXHU3MEI5XG5cdFx0XHRcdFx0XHRyZXR1cm4gc2VnUG9pbnRzO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdCk7XG5cdFx0XHR9XG5cdFx0XHRjb25zdCBzZWdSZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwoc2VnUHJvbWlzZXMpO1xuXHRcdFx0Y29uc3QgZmluZVBvaW50cyA9IHNlZ1Jlc3VsdHMuZmxhdCgpO1xuXHRcdFx0aWYgKHRoaXMudG9wU3VtbWFyeUNvbXBvbmVudCkge1xuXHRcdFx0XHR0aGlzLnRvcFN1bW1hcnlDb21wb25lbnQudXBkYXRlQ2hhcnQoZmluZVBvaW50cyk7XG5cdFx0XHR9XG5cdFx0fSwgNTAwKTtcblx0fVxuXG5cdC8vIFx1NUMwNlx1NjgwN1x1N0I3RVx1N0I1Qlx1OTAwOVx1NUU5NFx1NzUyOFx1NTIzMFx1N0VEOVx1NUI5QVx1OEQ0NFx1NEVBN1x1OTZDNlxuXHRwcml2YXRlIGFwcGx5VGFnRmlsdGVyKGlucHV0OiBBc3NldFtdKTogQXNzZXRbXSB7XG5cdFx0aWYgKCF0aGlzLnNlbGVjdGVkVGFncyB8fCB0aGlzLnNlbGVjdGVkVGFncy5sZW5ndGggPT09IDApIHJldHVybiBpbnB1dDtcblx0XHRyZXR1cm4gaW5wdXQuZmlsdGVyKGEgPT4gYS50YWdzPy5zb21lKHQgPT4gdGhpcy5zZWxlY3RlZFRhZ3MuaW5jbHVkZXModCkpKTtcblx0fVxuXG5cdHByaXZhdGUgY2FsY1RyZW5kUG9pbnRzKGFzc2V0czogQXNzZXRbXSwgY291bnQ6IG51bWJlciwgZnJvbURhdGU/OiBEYXRlLCB0b0RhdGU/OiBEYXRlKTogeyBkYXRlOiBEYXRlLCB2YWx1ZTogbnVtYmVyIH1bXSB7XG5cdFx0aWYgKGFzc2V0cy5sZW5ndGggPT09IDApIHJldHVybiBbXTtcblx0XHRcblx0XHRjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuXHRcdGNvbnN0IG1pbkRhdGUgPSBmcm9tRGF0ZSB8fCBuZXcgRGF0ZShNYXRoLm1pbiguLi5hc3NldHMubWFwKGEgPT4gYS5hY3RpdmVGcm9tLmdldFRpbWUoKSkpKTtcblx0XHRjb25zdCBtYXhBY3RpdmVUbyA9IE1hdGgubWF4KC4uLmFzc2V0cy5tYXAoYSA9PiB7XG5cdFx0XHRjb25zdCB0byA9IGEuYWN0aXZlVG87XG5cdFx0XHRpZiAodG8pIHtcblx0XHRcdFx0Y29uc3QgdCA9IHRvLmdldFRpbWUoKTtcblx0XHRcdFx0aWYgKCFpc05hTih0KSkgcmV0dXJuIHQ7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbm93LmdldFRpbWUoKTtcblx0XHR9KSk7XG5cdFx0Y29uc3QgbWF4RGF0ZSA9IHRvRGF0ZSB8fCBuZXcgRGF0ZShtYXhBY3RpdmVUbyk7XG5cdFx0XG5cdFx0Y29uc3QgcG9pbnRzOiB7IGRhdGU6IERhdGUsIHZhbHVlOiBudW1iZXIgfVtdID0gW107XG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XG5cdFx0XHRjb25zdCB0ID0gbWluRGF0ZS5nZXRUaW1lKCkgKyAobWF4RGF0ZS5nZXRUaW1lKCkgLSBtaW5EYXRlLmdldFRpbWUoKSkgKiBpIC8gKGNvdW50IC0gMSk7XG5cdFx0XHRjb25zdCBkYXRlID0gbmV3IERhdGUodCk7XG5cdFx0XHRsZXQgdG90YWxDb3N0ID0gMDtcblx0XHRcdFxuXHRcdFx0Ly8gXHU4QkExXHU3Qjk3XHU1NzI4XHU4QkU1XHU2NUY2XHU5NUY0XHU3MEI5XHU2RDNCXHU4REMzXHU3Njg0XHU4RDQ0XHU0RUE3XHU3Njg0XHU2NUU1XHU1NzQ3XHU2MjEwXHU2NzJDXHU2MDNCXHU1NDhDXG5cdFx0XHRhc3NldHMuZm9yRWFjaChhID0+IHtcblx0XHRcdFx0Y29uc3QgY29zdCA9IHRoaXMuY2FsY0RhaWx5Q29zdChhLnByaWNlLCBhLnJlY3ljbGVQcmljZSwgYS5hY3RpdmVGcm9tLCBhLmFjdGl2ZVRvLCBkYXRlKTtcblx0XHRcdFx0aWYgKGlzRmluaXRlKGNvc3QpKSB0b3RhbENvc3QgKz0gY29zdDtcblx0XHRcdH0pO1xuXHRcdFx0XG5cdFx0XHRwb2ludHMucHVzaCh7IGRhdGUsIHZhbHVlOiB0b3RhbENvc3QgfSk7XG5cdFx0fVxuXHRcdHJldHVybiBwb2ludHM7XG5cdH1cblxuXHQvLyBcdThCQTFcdTdCOTdcdTY1RTVcdTU3NDdcdTYyMTBcdTY3MkNcdUZGMDhcdTUzQzJcdTgwMDNjb3N0c2V0YXBwXHU3Qjk3XHU2Q0Q1XHVGRjA5XG5cdHByaXZhdGUgY2FsY0RhaWx5Q29zdChwcmljZTogbnVtYmVyLCByZWN5Y2xlOiBudW1iZXIsIGZyb206IERhdGUsIHRvOiBEYXRlIHwgbnVsbCB8IHVuZGVmaW5lZCwgbm93OiBEYXRlKTogbnVtYmVyIHtcblx0XHRpZiAoIWZyb20pIHJldHVybiAwO1xuXHRcdGNvbnN0IGRheXMgPSBNYXRoLmZsb29yKChub3cuZ2V0VGltZSgpIC0gZnJvbS5nZXRUaW1lKCkpIC8gODY0MDAwMDApICsgMTtcblx0XHRpZiAoIXRvIHx8IHRvID4gbm93KSB7XG5cdFx0XHRyZWN5Y2xlID0gMDtcblx0XHR9XG5cdFx0aWYgKCFpc0Zpbml0ZShkYXlzKSB8fCBkYXlzIDw9IDApIHJldHVybiAwO1xuXHRcdGNvbnN0IHJlc3VsdCA9IChOdW1iZXIocHJpY2UpIC0gTnVtYmVyKHJlY3ljbGUgfHwgMCkpIC8gZGF5cztcblx0XHRyZXR1cm4gaXNGaW5pdGUocmVzdWx0KSA/IHJlc3VsdCA6IDA7XG5cdH1cblxufVxuIiwgImV4cG9ydCBpbnRlcmZhY2UgVGFnUGFuZWxQcm9wcyB7XHJcblx0dGFnczogc3RyaW5nW107XHJcblx0c2VsZWN0ZWRUYWdzOiBzdHJpbmdbXTtcclxuXHRvblRhZ0NsaWNrOiAodGFnOiBzdHJpbmcgfCBzdHJpbmdbXSkgPT4gdm9pZDtcclxuXHRtYXhIZWlnaHQ/OiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBUYWdQYW5lbCB7XHJcblx0cHJpdmF0ZSBjb250YWluZXJFbDogSFRNTEVsZW1lbnQ7XHJcblx0cHJpdmF0ZSBwcm9wczogVGFnUGFuZWxQcm9wcztcclxuXHRwcml2YXRlIHBhbmVsVmlzaWJsZTogYm9vbGVhbiA9IGZhbHNlO1xyXG5cdHByaXZhdGUgcGFuZWxTZWxlY3RlZDogc3RyaW5nW10gPSBbXTtcclxuXHRwcml2YXRlIHNlYXJjaEtleXdvcmQ6IHN0cmluZyA9ICcnO1xyXG5cdHByaXZhdGUgbWFza0VsPzogSFRNTEVsZW1lbnQ7XHJcblx0cHJpdmF0ZSBwYW5lbEVsPzogSFRNTEVsZW1lbnQ7XHJcblx0cHJpdmF0ZSBsYWJlbHNFbD86IEhUTUxFbGVtZW50O1xyXG5cdHByaXZhdGUgc2VhcmNoRWw/OiBIVE1MSW5wdXRFbGVtZW50O1xyXG5cclxuXHRjb25zdHJ1Y3Rvcihjb250YWluZXJFbDogSFRNTEVsZW1lbnQsIHByb3BzOiBUYWdQYW5lbFByb3BzKSB7XHJcblx0XHR0aGlzLmNvbnRhaW5lckVsID0gY29udGFpbmVyRWw7XHJcblx0XHR0aGlzLnByb3BzID0gcHJvcHM7XHJcblx0XHR0aGlzLnBhbmVsU2VsZWN0ZWQgPSBbLi4ucHJvcHMuc2VsZWN0ZWRUYWdzXTtcclxuXHR9XHJcblxyXG5cdHJlbmRlcigpOiB2b2lkIHtcclxuXHRcdHRoaXMuY29udGFpbmVyRWwuZW1wdHkoKTtcclxuXHRcdHRoaXMuY29udGFpbmVyRWwuYWRkQ2xhc3MoJ3RvcC1zdW1tYXJ5LWxhYmVscycpO1xyXG5cdFx0XHJcblx0XHQvLyBcdThCQkVcdTdGNkVcdTY3MDBcdTU5MjdcdTlBRDhcdTVFQTZcclxuXHRcdGlmICh0aGlzLnByb3BzLm1heEhlaWdodCkge1xyXG5cdFx0XHR0aGlzLmNvbnRhaW5lckVsLnN0eWxlLm1heEhlaWdodCA9IHRoaXMucHJvcHMubWF4SGVpZ2h0O1xyXG5cdFx0XHR0aGlzLmNvbnRhaW5lckVsLnN0eWxlLm92ZXJmbG93WSA9IHRoaXMucHJvcHMubWF4SGVpZ2h0ICE9PSAnYXV0bycgPyAnYXV0bycgOiAndmlzaWJsZSc7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gXHU2RTMyXHU2N0QzXHU2ODA3XHU3QjdFXHU1MjE3XHU4ODY4XHJcblx0XHR0aGlzLnJlbmRlclRhZ0xpc3QoKTtcclxuXHRcdFxyXG5cdFx0Ly8gXHU2RTMyXHU2N0QzXHU5MDA5XHU2MkU5XHU5NzYyXHU2NzdGXHVGRjA4XHU1OTgyXHU2NzlDXHU1M0VGXHU4OUMxXHVGRjA5XHJcblx0XHRpZiAodGhpcy5wYW5lbFZpc2libGUpIHtcclxuXHRcdFx0dGhpcy5yZW5kZXJTZWxlY3Rpb25QYW5lbCgpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSByZW5kZXJUYWdMaXN0KCk6IHZvaWQge1xyXG5cdFx0dGhpcy5wcm9wcy50YWdzLmZvckVhY2godGFnID0+IHtcclxuXHRcdFx0Y29uc3QgbGFiZWxFbCA9IHRoaXMuY29udGFpbmVyRWwuY3JlYXRlU3BhbigndG9wLXN1bW1hcnktbGFiZWwnKTtcclxuXHRcdFx0bGFiZWxFbC50ZXh0Q29udGVudCA9IHRhZztcclxuXHRcdFx0XHJcblx0XHRcdGlmICh0aGlzLnByb3BzLnNlbGVjdGVkVGFncy5pbmNsdWRlcyh0YWcpKSB7XHJcblx0XHRcdFx0bGFiZWxFbC5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0bGFiZWxFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHR0aGlzLnByb3BzLm9uVGFnQ2xpY2sodGFnKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBcdTZERkJcdTUyQTBcdTcwQjlcdTUxRkJcdTRFOEJcdTRFRjZcdTY3NjVcdTY2M0VcdTc5M0FcdTkwMDlcdTYyRTlcdTk3NjJcdTY3N0ZcclxuXHRcdHRoaXMuY29udGFpbmVyRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0XHRcdHRoaXMuc2hvd1NlbGVjdGlvblBhbmVsKCk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgc2hvd1NlbGVjdGlvblBhbmVsKCk6IHZvaWQge1xyXG5cdFx0dGhpcy5wYW5lbFZpc2libGUgPSB0cnVlO1xyXG5cdFx0dGhpcy5wYW5lbFNlbGVjdGVkID0gWy4uLnRoaXMucHJvcHMuc2VsZWN0ZWRUYWdzXTtcclxuXHRcdHRoaXMucmVuZGVyKCk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGhpZGVTZWxlY3Rpb25QYW5lbCgpOiB2b2lkIHtcclxuXHRcdHRoaXMucGFuZWxWaXNpYmxlID0gZmFsc2U7XHJcblx0XHRpZiAodGhpcy5tYXNrRWwgJiYgdGhpcy5tYXNrRWwucGFyZW50RWxlbWVudCkge1xyXG5cdFx0XHR0aGlzLm1hc2tFbC5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKHRoaXMubWFza0VsKTtcclxuXHRcdH1cclxuXHRcdHRoaXMubWFza0VsID0gdW5kZWZpbmVkO1xyXG5cdFx0dGhpcy5wYW5lbEVsID0gdW5kZWZpbmVkO1xyXG5cdFx0dGhpcy5sYWJlbHNFbCA9IHVuZGVmaW5lZDtcclxuXHRcdHRoaXMuc2VhcmNoRWwgPSB1bmRlZmluZWQ7XHJcblx0XHR0aGlzLnJlbmRlcigpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSByZW5kZXJTZWxlY3Rpb25QYW5lbCgpOiB2b2lkIHtcclxuXHRcdC8vIFx1NTkwRFx1NzUyOFx1OTA2RVx1N0Y2OVx1NUM0Mlx1NEUwRVx1OTc2Mlx1Njc3Rlx1RkYwQ1x1OTA3Rlx1NTE0RFx1OTFDRFx1NUVGQVx1NUJGQ1x1ODFGNFx1NkVEQVx1NTJBOFx1NEUyMlx1NTkzMVxyXG5cdFx0aWYgKCF0aGlzLm1hc2tFbCkge1xyXG5cdFx0XHR0aGlzLm1hc2tFbCA9IHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRGl2KCd0b3Atc3VtbWFyeS1wYW5lbC1tYXNrJyk7XHJcblx0XHRcdHRoaXMubWFza0VsLnN0eWxlLnpJbmRleCA9ICc5OTk5JztcclxuXHRcdFx0dGhpcy5tYXNrRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0XHRcdFx0dGhpcy5jb25maXJtU2VsZWN0aW9uKCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICghdGhpcy5wYW5lbEVsKSB7XHJcblx0XHRcdHRoaXMucGFuZWxFbCA9IHRoaXMubWFza0VsLmNyZWF0ZURpdigndG9wLXN1bW1hcnktcGFuZWwnKTtcclxuXHRcdFx0dGhpcy5wYW5lbEVsLnN0eWxlLnpJbmRleCA9ICcxMDAwMCc7XHJcblx0XHRcdHRoaXMucGFuZWxFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gXHU2NDFDXHU3RDIyXHU2ODQ2XHVGRjFBXHU1MjFCXHU1RUZBXHU2MjE2XHU1OTBEXHU3NTI4XHVGRjBDXHU1RTc2XHU3RUQxXHU1QjlBXHU4RjkzXHU1MTY1XHJcblx0XHRpZiAoIXRoaXMuc2VhcmNoRWwpIHtcclxuXHRcdFx0dGhpcy5zZWFyY2hFbCA9IHRoaXMucGFuZWxFbC5jcmVhdGVFbCgnaW5wdXQnLCB7XHJcblx0XHRcdFx0Y2xzOiAndG9wLXN1bW1hcnktcGFuZWwtc2VhcmNoJyxcclxuXHRcdFx0XHRwbGFjZWhvbGRlcjogJ1x1NjQxQ1x1N0QyMlx1NjgwN1x1N0I3RScsXHJcblx0XHRcdFx0dHlwZTogJ3RleHQnXHJcblx0XHRcdH0pIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcblx0XHRcdHRoaXMuc2VhcmNoRWwuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XHJcblx0XHRcdFx0dGhpcy5zZWFyY2hLZXl3b3JkID0gKHRoaXMuc2VhcmNoRWw/LnZhbHVlIHx8ICcnKS50cmltKCk7XHJcblx0XHRcdFx0dGhpcy5yZW5kZXJTZWxlY3Rpb25QYW5lbCgpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHRcdGlmICh0aGlzLnNlYXJjaEVsKSB7XHJcblx0XHRcdHRoaXMuc2VhcmNoRWwudmFsdWUgPSB0aGlzLnNlYXJjaEtleXdvcmQ7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gXHU2ODA3XHU3QjdFXHU1MjE3XHU4ODY4XHVGRjA4XHU1M0VGXHU2RURBXHU1MkE4XHVGRjA5XHJcblx0XHRjb25zdCBwcmV2U2Nyb2xsVG9wID0gdGhpcy5sYWJlbHNFbCA/IHRoaXMubGFiZWxzRWwuc2Nyb2xsVG9wIDogMDtcclxuXHRcdGlmICghdGhpcy5sYWJlbHNFbCkge1xyXG5cdFx0XHR0aGlzLmxhYmVsc0VsID0gdGhpcy5wYW5lbEVsLmNyZWF0ZURpdigndG9wLXN1bW1hcnktcGFuZWwtbGFiZWxzJyk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLmxhYmVsc0VsLmVtcHR5KCk7XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3QgbG93ZXIgPSB0aGlzLnNlYXJjaEtleXdvcmQudG9Mb3dlckNhc2UoKTtcclxuXHRcdGNvbnN0IHZpc2libGVUYWdzID0gbG93ZXIgPyB0aGlzLnByb3BzLnRhZ3MuZmlsdGVyKHQgPT4gdC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGxvd2VyKSkgOiB0aGlzLnByb3BzLnRhZ3M7XHJcblx0XHR2aXNpYmxlVGFncy5mb3JFYWNoKHRhZyA9PiB7XHJcblx0XHRcdGNvbnN0IGxhYmVsRWwgPSB0aGlzLmxhYmVsc0VsIS5jcmVhdGVTcGFuKCd0b3Atc3VtbWFyeS1wYW5lbC1sYWJlbCcpO1xyXG5cdFx0XHRsYWJlbEVsLnRleHRDb250ZW50ID0gdGFnO1xyXG5cdFx0XHRpZiAodGhpcy5wYW5lbFNlbGVjdGVkLmluY2x1ZGVzKHRhZykpIHtcclxuXHRcdFx0XHRsYWJlbEVsLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGxhYmVsRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0XHRcdFx0Ly8gXHU0RUM1XHU2NkY0XHU2NUIwXHU1MTg1XHU1QkI5XHVGRjBDXHU0RTBEXHU5NTAwXHU2QkMxXHU5NzYyXHU2NzdGXHVGRjBDXHU0RkREXHU3NTU5XHU2RURBXHU1MkE4XHU0RjREXHU3RjZFXHJcblx0XHRcdFx0dGhpcy50b2dnbGVUYWdTZWxlY3Rpb24odGFnKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHRcdC8vIFx1NjA2Mlx1NTkwRFx1NkVEQVx1NTJBOFx1NEY0RFx1N0Y2RVxyXG5cdFx0aWYgKHRoaXMubGFiZWxzRWwpIHtcclxuXHRcdFx0dGhpcy5sYWJlbHNFbC5zY3JvbGxUb3AgPSBwcmV2U2Nyb2xsVG9wO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFx1NUU5NVx1OTBFOFx1NjRDRFx1NEY1Q1x1NjMwOVx1OTRBRVx1RkYwOFx1ODJFNVx1NjcyQVx1NTIxQlx1NUVGQVx1NTIxOVx1NTIxQlx1NUVGQVx1NEUwMFx1NkIyMVx1RkYwOVxyXG5cdFx0bGV0IGFjdGlvbnNFbCA9IHRoaXMucGFuZWxFbC5xdWVyeVNlbGVjdG9yKCcudG9wLXN1bW1hcnktcGFuZWwtYWN0aW9ucycpIGFzIEhUTUxFbGVtZW50IHwgbnVsbDtcclxuXHRcdGlmICghYWN0aW9uc0VsKSB7XHJcblx0XHRcdGFjdGlvbnNFbCA9IHRoaXMucGFuZWxFbC5jcmVhdGVEaXYoJ3RvcC1zdW1tYXJ5LXBhbmVsLWFjdGlvbnMnKTtcclxuXHRcdFx0YWN0aW9uc0VsLnN0eWxlLnBhZGRpbmcgPSAnOHB4IDE2cHggMTJweCAxNnB4JztcclxuXHRcdFx0Y29uc3Qgc2VsZWN0QWxsQnRuID0gYWN0aW9uc0VsLmNyZWF0ZVNwYW4oJ3BhbmVsLWJ0bicpO1xyXG5cdFx0XHRzZWxlY3RBbGxCdG4udGV4dENvbnRlbnQgPSAnXHU1MTY4XHU5MDA5JztcclxuXHRcdFx0c2VsZWN0QWxsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdFx0XHRcdHRoaXMucGFuZWxTZWxlY3RlZCA9IFsuLi50aGlzLnByb3BzLnRhZ3NdO1xyXG5cdFx0XHRcdHRoaXMucmVuZGVyU2VsZWN0aW9uUGFuZWwoKTtcclxuXHRcdFx0fSk7XHJcblx0XHRcdGNvbnN0IGRlc2VsZWN0QWxsQnRuID0gYWN0aW9uc0VsLmNyZWF0ZVNwYW4oJ3BhbmVsLWJ0bicpO1xyXG5cdFx0XHRkZXNlbGVjdEFsbEJ0bi50ZXh0Q29udGVudCA9ICdcdTUzRDZcdTZEODhcdTUxNjhcdTkwMDknO1xyXG5cdFx0XHRkZXNlbGVjdEFsbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHRcdFx0XHR0aGlzLnBhbmVsU2VsZWN0ZWQgPSBbXTtcclxuXHRcdFx0XHR0aGlzLnJlbmRlclNlbGVjdGlvblBhbmVsKCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSB0b2dnbGVUYWdTZWxlY3Rpb24odGFnOiBzdHJpbmcpOiB2b2lkIHtcclxuXHRcdGlmICh0aGlzLnBhbmVsU2VsZWN0ZWQuaW5jbHVkZXModGFnKSkge1xyXG5cdFx0XHR0aGlzLnBhbmVsU2VsZWN0ZWQgPSB0aGlzLnBhbmVsU2VsZWN0ZWQuZmlsdGVyKHQgPT4gdCAhPT0gdGFnKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMucGFuZWxTZWxlY3RlZC5wdXNoKHRhZyk7XHJcblx0XHR9XHJcblx0XHR0aGlzLnJlbmRlclNlbGVjdGlvblBhbmVsKCk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGNvbmZpcm1TZWxlY3Rpb24oKTogdm9pZCB7XHJcblx0XHR0aGlzLnByb3BzLm9uVGFnQ2xpY2sodGhpcy5wYW5lbFNlbGVjdGVkKTtcclxuXHRcdHRoaXMuaGlkZVNlbGVjdGlvblBhbmVsKCk7XHJcblx0fVxyXG5cclxuXHQvLyBcdTY2RjRcdTY1QjBcdTY4MDdcdTdCN0VcclxuXHR1cGRhdGVUYWdzKHRhZ3M6IHN0cmluZ1tdLCBzZWxlY3RlZFRhZ3M6IHN0cmluZ1tdKTogdm9pZCB7XHJcblx0XHR0aGlzLnByb3BzLnRhZ3MgPSB0YWdzO1xyXG5cdFx0dGhpcy5wcm9wcy5zZWxlY3RlZFRhZ3MgPSBzZWxlY3RlZFRhZ3M7XHJcblx0XHR0aGlzLnJlbmRlcigpO1xyXG5cdH1cclxufVxyXG4iLCAiaW1wb3J0IHsgQXNzZXQgfSBmcm9tICcuLi9tb2RlbHMvQXNzZXQnO1xuaW1wb3J0IHsgVGFnUGFuZWwsIFRhZ1BhbmVsUHJvcHMgfSBmcm9tICcuL1RhZ1BhbmVsJztcblxuZXhwb3J0IGludGVyZmFjZSBUb3BTdW1tYXJ5UHJvcHMge1xuXHR0b3RhbERhaWx5Q29zdDogbnVtYmVyO1xuXHR0b3RhbENvc3Q6IG51bWJlcjtcblx0dG90YWxSZWN5Y2xlOiBudW1iZXI7XG5cdHRhZ3M6IHN0cmluZ1tdO1xuXHRzZWxlY3RlZFRhZ3M6IHN0cmluZ1tdO1xuXHRvblRhZ0NsaWNrOiAodGFnOiBzdHJpbmcgfCBzdHJpbmdbXSkgPT4gdm9pZDtcblx0dHJlbmRQb2ludHM6IHsgZGF0ZTogRGF0ZSwgdmFsdWU6IG51bWJlciB9W107XG5cdHNlbGVjdGVkRGF0ZT86IERhdGU7XG5cdHNlbGVjdGVkWD86IG51bWJlciB8IG51bGw7XG5cdG9uQ2hhcnRTZWxlY3Q/OiAoeDogbnVtYmVyKSA9PiB2b2lkO1xuXHRvbkNoYXJ0V2lkdGg/OiAodzogbnVtYmVyKSA9PiB2b2lkO1xuXHRvbkRhdGVQaWNrPzogKGRhdGVTdHI6IHN0cmluZykgPT4gdm9pZDtcblx0bWluRGF0ZVN0cj86IHN0cmluZztcblx0bWF4RGF0ZVN0cj86IHN0cmluZztcblx0bWluWWVhcj86IG51bWJlcjtcblx0bWF4WWVhcj86IG51bWJlcjtcbn1cblxuZXhwb3J0IGNsYXNzIFRvcFN1bW1hcnkge1xuXHRwcml2YXRlIGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudDtcblx0cHJpdmF0ZSBwcm9wczogVG9wU3VtbWFyeVByb3BzO1xuXHRwcml2YXRlIGNoYXJ0Q29tcG9uZW50PzogYW55OyAvLyBMaW5lQ2hhcnRcdTdFQzRcdTRFRjZcdTVGMTVcdTc1Mjhcblx0cHJpdmF0ZSB0YWdQYW5lbENvbXBvbmVudD86IFRhZ1BhbmVsO1xuXG5cdGNvbnN0cnVjdG9yKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCwgcHJvcHM6IFRvcFN1bW1hcnlQcm9wcykge1xuXHRcdHRoaXMuY29udGFpbmVyRWwgPSBjb250YWluZXJFbDtcblx0XHR0aGlzLnByb3BzID0gcHJvcHM7XG5cdH1cblxuXHRwcml2YXRlIGZvcm1hdERhdGVMb2NhbChkYXRlOiBEYXRlKTogc3RyaW5nIHtcblx0XHRjb25zdCBkID0gbmV3IERhdGUoZGF0ZS5nZXRUaW1lKCkgLSBkYXRlLmdldFRpbWV6b25lT2Zmc2V0KCkgKiA2MDAwMCk7XG5cdFx0cmV0dXJuIGQudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xuXHR9XG5cblx0cmVuZGVyKCk6IHZvaWQge1xuXHRcdHRoaXMuY29udGFpbmVyRWwuZW1wdHkoKTtcblx0XHR0aGlzLmNvbnRhaW5lckVsLmFkZENsYXNzKCd0b3Atc3VtbWFyeScpO1xuXG5cdFx0Ly8gXHU1MjFCXHU1RUZBXHU2NTcwXHU1QjU3XHU1MzNBXHU1N0RGXG5cdFx0dGhpcy5yZW5kZXJOdW1iZXJzKCk7XG5cdFx0XG5cdFx0Ly8gXHU1MjFCXHU1RUZBXHU2ODA3XHU3QjdFXHU1MzNBXHU1N0RGXG5cdFx0dGhpcy5yZW5kZXJMYWJlbHMoKTtcblx0XHRcblx0XHQvLyBcdTUyMUJcdTVFRkFcdTU2RkVcdTg4NjhcdTUzM0FcdTU3REZcblx0XHR0aGlzLnJlbmRlckNoYXJ0KCk7XG5cdH1cblxuXHRwcml2YXRlIHJlbmRlck51bWJlcnMoKTogdm9pZCB7XG5cdFx0Y29uc3QgbnVtYmVyc0VsID0gdGhpcy5jb250YWluZXJFbC5jcmVhdGVEaXYoJ3RvcC1zdW1tYXJ5LW51bWJlcnMnKTtcblx0XHRcblx0XHQvLyBcdTVERTZcdTRGQTdcdTY1RTVcdTU3NDdcdTYyMTBcdTY3MkNcblx0XHRjb25zdCBkYWlseUVsID0gbnVtYmVyc0VsLmNyZWF0ZURpdigndG9wLXN1bW1hcnktZGFpbHknKTtcblx0XHRjb25zdCBkYXRlRWwgPSBkYWlseUVsLmNyZWF0ZURpdigndG9wLXN1bW1hcnktZGF0ZScpO1xuXHRcdGRhdGVFbC50ZXh0Q29udGVudCA9IHRoaXMuZm9ybWF0RGF0ZUxvY2FsKHRoaXMucHJvcHMuc2VsZWN0ZWREYXRlIHx8IG5ldyBEYXRlKCkpO1xuXHRcdGRhdGVFbC5hZGRDbGFzcygnY2xpY2thYmxlJyk7XG5cdFx0ZGF0ZUVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuXHRcdFx0dGhpcy5zaG93RGF0ZVBpY2tlcigpO1xuXHRcdH0pO1xuXHRcdGNvbnN0IGRhaWx5Q29zdEVsID0gZGFpbHlFbC5jcmVhdGVEaXYoJ3RvcC1zdW1tYXJ5LWRhaWx5Y29zdCcpO1xuXHRcdGRhaWx5Q29zdEVsLnRleHRDb250ZW50ID0gYFx1MDBBNSR7dGhpcy5wcm9wcy50b3RhbERhaWx5Q29zdC50b0ZpeGVkKDIpfWA7XG5cblx0XHQvLyBcdTUzRjNcdTRGQTdcdTZDNDdcdTYwM0Jcblx0XHRjb25zdCBzdW1tYXJ5RWwgPSBudW1iZXJzRWwuY3JlYXRlRGl2KCd0b3Atc3VtbWFyeS1zdW1tYXJ5Jyk7XG5cdFx0XG5cdFx0Y29uc3QgdG90YWxFbCA9IHN1bW1hcnlFbC5jcmVhdGVEaXYoJ3RvcC1zdW1tYXJ5LXRvdGFsJyk7XG5cdFx0Y29uc3QgdG90YWxNZXRhRWwgPSB0b3RhbEVsLmNyZWF0ZVNwYW4oJ3RvcC1zdW1tYXJ5LW1ldGEnKTtcblx0XHR0b3RhbE1ldGFFbC50ZXh0Q29udGVudCA9ICdcdTYwM0JcdTYyMTBcdTY3MkMgJztcblx0XHRjb25zdCB0b3RhbENvc3RFbCA9IHRvdGFsRWwuY3JlYXRlU3BhbigndG9wLXN1bW1hcnktdG90YWxjb3N0Jyk7XG5cdFx0dG90YWxDb3N0RWwudGV4dENvbnRlbnQgPSBgXHUwMEE1JHt0aGlzLnByb3BzLnRvdGFsQ29zdC50b0xvY2FsZVN0cmluZygpfWA7XG5cblx0XHRjb25zdCByZWN5Y2xlRWwgPSBzdW1tYXJ5RWwuY3JlYXRlRGl2KCd0b3Atc3VtbWFyeS10b3RhbCcpO1xuXHRcdGNvbnN0IHJlY3ljbGVNZXRhRWwgPSByZWN5Y2xlRWwuY3JlYXRlU3BhbigndG9wLXN1bW1hcnktbWV0YScpO1xuXHRcdHJlY3ljbGVNZXRhRWwudGV4dENvbnRlbnQgPSAnXHU1M0VGXHU1NkRFXHU2NTM2ICc7XG5cdFx0Y29uc3QgcmVjeWNsZUNvc3RFbCA9IHJlY3ljbGVFbC5jcmVhdGVTcGFuKCd0b3Atc3VtbWFyeS10b3RhbGNvc3QnKTtcblx0XHRyZWN5Y2xlQ29zdEVsLnRleHRDb250ZW50ID0gYFx1MDBBNSR7dGhpcy5wcm9wcy50b3RhbFJlY3ljbGUudG9Mb2NhbGVTdHJpbmcoKX1gO1xuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJMYWJlbHMoKTogdm9pZCB7XG5cdFx0Y29uc3QgbGFiZWxzRWwgPSB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZURpdigndG9wLXN1bW1hcnktbGFiZWxzJyk7XG5cdFx0Y29uc3QgcGFuZWxQcm9wczogVGFnUGFuZWxQcm9wcyA9IHtcblx0XHRcdHRhZ3M6IHRoaXMucHJvcHMudGFncyxcblx0XHRcdHNlbGVjdGVkVGFnczogdGhpcy5wcm9wcy5zZWxlY3RlZFRhZ3MsXG5cdFx0XHRvblRhZ0NsaWNrOiB0aGlzLnByb3BzLm9uVGFnQ2xpY2ssXG5cdFx0XHRtYXhIZWlnaHQ6ICc0OHB4J1xuXHRcdH07XG5cdFx0dGhpcy50YWdQYW5lbENvbXBvbmVudCA9IG5ldyBUYWdQYW5lbChsYWJlbHNFbCwgcGFuZWxQcm9wcyk7XG5cdFx0dGhpcy50YWdQYW5lbENvbXBvbmVudC5yZW5kZXIoKTtcblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyQ2hhcnQoKTogdm9pZCB7XG5cdFx0Y29uc3QgY2hhcnRFbCA9IHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRGl2KCd0b3Atc3VtbWFyeS1jaGFydCcpO1xuXHRcdGNvbnN0IGNhbnZhcyA9IGNoYXJ0RWwuY3JlYXRlRWwoJ2NhbnZhcycpIGFzIEhUTUxDYW52YXNFbGVtZW50O1xuXHRcdGNhbnZhcy5pZCA9ICd0cmVuZC1jYW52YXMnO1xuXHRcdGNhbnZhcy53aWR0aCA9IDEwMDtcblx0XHRjYW52YXMuaGVpZ2h0ID0gMjA7XG5cblx0XHQvLyBcdTZFMzJcdTY3RDNcdTU2RkVcdTg4Njhcblx0XHR0aGlzLnJlbmRlckNoYXJ0Q2FudmFzKGNhbnZhcyk7XG5cdH1cblxuXHRwcml2YXRlIHJlbmRlckNoYXJ0Q2FudmFzKGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQpOiB2b2lkIHtcblx0XHRpZiAodGhpcy5wcm9wcy50cmVuZFBvaW50cy5sZW5ndGggPCAyKSByZXR1cm47XG5cdFx0XG5cdFx0Y29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG5cdFx0aWYgKCFjdHgpIHJldHVybjtcblx0XHRcblx0XHQvLyBcdThCQkVcdTdGNkVDYW52YXNcdTVDM0FcdTVCRjhcblx0XHRjb25zdCByZWN0ID0gY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXHRcdGNhbnZhcy53aWR0aCA9IHJlY3Qud2lkdGg7XG5cdFx0Y2FudmFzLmhlaWdodCA9IHJlY3QuaGVpZ2h0O1xuXHRcdFxuXHRcdGNvbnN0IHdpZHRoID0gY2FudmFzLndpZHRoO1xuXHRcdGNvbnN0IGhlaWdodCA9IGNhbnZhcy5oZWlnaHQ7XG5cdFx0Y29uc3QgcGFkID0gMDtcblx0XHRcblx0XHQvLyBcdThCQTFcdTdCOTdcdTY1NzBcdTUwM0NcdTgzMDNcdTU2RjRcblx0XHRjb25zdCB2YWx1ZXMgPSB0aGlzLnByb3BzLnRyZW5kUG9pbnRzLm1hcChwID0+IHAudmFsdWUpO1xuXHRcdGNvbnN0IG1pblZhbHVlID0gTWF0aC5taW4oLi4udmFsdWVzKTtcblx0XHRjb25zdCBtYXhWYWx1ZSA9IE1hdGgubWF4KC4uLnZhbHVlcyk7XG5cdFx0Y29uc3QgcmFuZ2UgPSBtYXhWYWx1ZSAtIG1pblZhbHVlO1xuXHRcdFxuXHRcdC8vIFx1NTk4Mlx1Njc5Q1x1NjU3MFx1NjM2RVx1ODMwM1x1NTZGNFx1NUY4OFx1NUMwRlx1RkYwQ1x1NEY3Rlx1NzUyOFx1N0VCRlx1NjAyN1x1N0YyOVx1NjUzRVx1RkYxQlx1NTQyNlx1NTIxOVx1NEY3Rlx1NzUyOFx1NUJGOVx1NjU3MFx1N0YyOVx1NjUzRVxuXHRcdGNvbnN0IHVzZUxvZ1NjYWxlID0gcmFuZ2UgPiAxMDA7XG5cdFx0XG5cdFx0Y29uc3QgZ2V0WCA9IChpOiBudW1iZXIpID0+IHBhZCArICh3aWR0aCAtIDIgKiBwYWQpICogaSAvICh0aGlzLnByb3BzLnRyZW5kUG9pbnRzLmxlbmd0aCAtIDEpO1xuXHRcdGNvbnN0IGdldFkgPSAodjogbnVtYmVyKSA9PiB7XG5cdFx0XHRpZiAodXNlTG9nU2NhbGUpIHtcblx0XHRcdFx0Y29uc3QgbG9nVmFsdWUgPSBNYXRoLmxvZyh2ICsgMSk7XG5cdFx0XHRcdGNvbnN0IGxvZ01pbiA9IE1hdGgubG9nKG1pblZhbHVlICsgMSk7XG5cdFx0XHRcdGNvbnN0IGxvZ01heCA9IE1hdGgubG9nKG1heFZhbHVlICsgMSk7XG5cdFx0XHRcdHJldHVybiBoZWlnaHQgLSBwYWQgLSAoKGxvZ1ZhbHVlIC0gbG9nTWluKSAvIE1hdGgubWF4KGxvZ01heCAtIGxvZ01pbiwgMC41KSkgKiAoaGVpZ2h0IC0gMiAqIHBhZCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXR1cm4gaGVpZ2h0IC0gcGFkIC0gKCh2IC0gbWluVmFsdWUpIC8gTWF0aC5tYXgocmFuZ2UsIDAuNSkpICogKGhlaWdodCAtIDIgKiBwYWQpO1xuXHRcdFx0fVxuXHRcdH07XG5cdFx0Y29uc3QgZ2V0Q29sb3JCeVZhbHVlID0gKHY6IG51bWJlcikgPT4ge1xuXHRcdFx0Ly8gXHU0RjdGXHU3NTI4XHU1QkY5XHU2NTcwXHU3RjI5XHU2NTNFXHU4QkExXHU3Qjk3XHU5ODlDXHU4MjcyXHVGRjA4XHU1M0MyXHU4MDAzY29zdHNldGFwcFx1NUI5RVx1NzNCMFx1RkYwOVxuXHRcdFx0Y29uc3QgbG9nVmFsdWUgPSBNYXRoLmxvZyh2ICsgMSk7XG5cdFx0XHRjb25zdCBsb2dNaW4gPSBNYXRoLmxvZyhtaW5WYWx1ZSArIDEpO1xuXHRcdFx0Y29uc3QgbG9nTWF4ID0gTWF0aC5sb2cobWF4VmFsdWUgKyAxKTtcblx0XHRcdFxuXHRcdFx0aWYgKGxvZ01heCA9PT0gbG9nTWluKSByZXR1cm4gJ3JnYigyNTUsMjU1LDApJzsgLy8gXHU1OTgyXHU2NzlDXHU1M0VBXHU2NzA5XHU0RTAwXHU0RTJBXHU1MDNDXHVGRjBDXHU2NjNFXHU3OTNBXHU5RUM0XHU4MjcyXG5cdFx0XHRcblx0XHRcdGNvbnN0IHQgPSAobG9nVmFsdWUgLSBsb2dNaW4pIC8gKGxvZ01heCAtIGxvZ01pbik7XG5cdFx0XHRcblx0XHRcdC8vIFx1NTIwNlx1NkJCNVx1NkUxMFx1NTNEOFx1RkYxQVx1NTI0RFx1NTM0QVx1NkJCNVx1N0VGRlx1ODI3Mlx1NTIzMFx1OUVDNFx1ODI3Mlx1RkYwQ1x1NTQwRVx1NTM0QVx1NkJCNVx1OUVDNFx1ODI3Mlx1NTIzMFx1N0VBMlx1ODI3MlxuXHRcdFx0aWYgKHQgPD0gMC41KSB7XG5cdFx0XHRcdGNvbnN0IHIgPSBNYXRoLnJvdW5kKDIgKiB0ICogMjU1KTsgLy8gXHU3RUEyXHU4MjcyXHU1MjA2XHU5MUNGXHVGRjFBMCAtPiAyNTVcblx0XHRcdFx0cmV0dXJuIGByZ2IoJHtyfSwyNTUsMClgOyAvLyBcdTdFRkZcdTgyNzJcdTUyMzBcdTlFQzRcdTgyNzJcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNvbnN0IGcgPSBNYXRoLnJvdW5kKCgxIC0gMiAqICh0IC0gMC41KSkgKiAyNTUpOyAvLyBcdTdFRkZcdTgyNzJcdTUyMDZcdTkxQ0ZcdUZGMUEyNTUgLT4gMFxuXHRcdFx0XHRyZXR1cm4gYHJnYigyNTUsJHtnfSwwKWA7IC8vIFx1OUVDNFx1ODI3Mlx1NTIzMFx1N0VBMlx1ODI3MlxuXHRcdFx0fVxuXHRcdH07XG5cdFx0XG5cdFx0Ly8gXHU2RTA1XHU3QTdBXHU3NTNCXHU1RTAzXG5cdFx0Y3R4LmNsZWFyUmVjdCgwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcblx0XHRjdHgubGluZVdpZHRoID0gMTtcblx0XHRcblx0XHQvLyBcdTdFRDhcdTUyMzZcdTYyOThcdTdFQkZcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucHJvcHMudHJlbmRQb2ludHMubGVuZ3RoIC0gMTsgaSsrKSB7XG5cdFx0XHRjb25zdCBwMSA9IHRoaXMucHJvcHMudHJlbmRQb2ludHNbaV07XG5cdFx0XHRjb25zdCBwMiA9IHRoaXMucHJvcHMudHJlbmRQb2ludHNbaSArIDFdO1xuXHRcdFx0Y29uc3QgeDEgPSBnZXRYKGkpO1xuXHRcdFx0Y29uc3QgeTEgPSBnZXRZKHAxLnZhbHVlKTtcblx0XHRcdGNvbnN0IHgyID0gZ2V0WChpICsgMSk7XG5cdFx0XHRjb25zdCB5MiA9IGdldFkocDIudmFsdWUpO1xuXHRcdFx0XG5cdFx0XHRjdHguYmVnaW5QYXRoKCk7XG5cdFx0XHRjdHguc3Ryb2tlU3R5bGUgPSBnZXRDb2xvckJ5VmFsdWUocDEudmFsdWUpO1xuXHRcdFx0Y3R4Lm1vdmVUbyh4MSwgeTEpO1xuXHRcdFx0Y3R4LmxpbmVUbyh4MiwgeTIpO1xuXHRcdFx0Y3R4LnN0cm9rZSgpO1xuXHRcdH1cblx0XHRcblx0XHQvLyBcdTdFRDhcdTUyMzZcdTkwMDlcdTRFMkRcdTdFQkZcdUZGMDhcdTVGNTNcdTUyNERcdTY1RTVcdTY3MUZcdUZGMDlcblx0XHQvLyBcdTY1MkZcdTYzMDFcdTRFMjRcdTc5Q0RcdTY1QjlcdTVGMEZcdUZGMUFcblx0XHQvLyAxKSBcdTU5MTZcdTkwRThcdTc2RjRcdTYzQTVcdTRGMjBcdTUxNjUgc2VsZWN0ZWRYIFx1NTBDRlx1N0QyMFxuXHRcdC8vIDIpIFx1NTkxNlx1OTBFOFx1NEVDNVx1NEYyMFx1NTE2NSBzZWxlY3RlZERhdGVcdUZGMENcdTYyMTFcdTRFRUNcdTU3MjhcdThGRDlcdTkxQ0NcdTYzMDlcdTY1RjZcdTk1RjRcdTZCRDRcdTRGOEJcdThCQTFcdTdCOTcgWFxuXHRcdGxldCBzZWxlY3RlZFhUb0RyYXc6IG51bWJlciB8IG51bGwgPSBudWxsO1xuXHRcdGlmICh0aGlzLnByb3BzLnNlbGVjdGVkWCAhPT0gbnVsbCAmJiB0aGlzLnByb3BzLnNlbGVjdGVkWCAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRzZWxlY3RlZFhUb0RyYXcgPSB0aGlzLnByb3BzLnNlbGVjdGVkWDtcblx0XHR9IGVsc2UgaWYgKHRoaXMucHJvcHMuc2VsZWN0ZWREYXRlKSB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRjb25zdCB0aW1lcyA9IHRoaXMucHJvcHMudHJlbmRQb2ludHMubWFwKHAgPT4gcC5kYXRlLmdldFRpbWUoKSk7XG5cdFx0XHRcdGNvbnN0IG1pblRpbWUgPSBNYXRoLm1pbiguLi50aW1lcyk7XG5cdFx0XHRcdGNvbnN0IG1heFRpbWUgPSBNYXRoLm1heCguLi50aW1lcyk7XG5cdFx0XHRcdGNvbnN0IGN1ciA9IHRoaXMucHJvcHMuc2VsZWN0ZWREYXRlLmdldFRpbWUoKTtcblx0XHRcdFx0Y29uc3QgZGVub20gPSBNYXRoLm1heChtYXhUaW1lIC0gbWluVGltZSwgMSk7XG5cdFx0XHRcdGNvbnN0IHJhdGlvID0gKGN1ciAtIG1pblRpbWUpIC8gZGVub207XG5cdFx0XHRcdHNlbGVjdGVkWFRvRHJhdyA9IHBhZCArICh3aWR0aCAtIDIgKiBwYWQpICogTWF0aC5taW4oTWF0aC5tYXgocmF0aW8sIDApLCAxKTtcblx0XHRcdH0gY2F0Y2ggKF8pIHtcblx0XHRcdFx0c2VsZWN0ZWRYVG9EcmF3ID0gbnVsbDtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoc2VsZWN0ZWRYVG9EcmF3ICE9PSBudWxsICYmIHNlbGVjdGVkWFRvRHJhdyAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRjdHguYmVnaW5QYXRoKCk7XG5cdFx0XHRjdHguc3Ryb2tlU3R5bGUgPSAnI0ZGRDYwMCc7XG5cdFx0XHRjdHgubGluZVdpZHRoID0gMTtcblx0XHRcdGN0eC5tb3ZlVG8oc2VsZWN0ZWRYVG9EcmF3LCAwKTtcblx0XHRcdGN0eC5saW5lVG8oc2VsZWN0ZWRYVG9EcmF3LCBoZWlnaHQpO1xuXHRcdFx0Y3R4LnN0cm9rZSgpO1xuXHRcdH1cblxuXHRcdC8vIFx1N0VEMVx1NUI5QVx1NzBCOVx1NTFGQlx1NEU4Qlx1NEVGNlx1RkYxQVx1NUMwNlx1NzBCOVx1NTFGQlx1NEY0RFx1N0Y2RVx1NjYyMFx1NUMwNFx1NEUzQVx1NjVFNVx1NjcxRlx1NUU3Nlx1NjZGNFx1NjVCMFx1OTAwOVx1NjJFOVxuXHRcdGlmICghKGNhbnZhcyBhcyBhbnkpLl9sYWNfY2xpY2tfYm91bmQpIHtcblx0XHRcdChjYW52YXMgYXMgYW55KS5fbGFjX2NsaWNrX2JvdW5kID0gdHJ1ZTtcblx0XHRcdGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldjogTW91c2VFdmVudCkgPT4ge1xuXHRcdFx0XHRjb25zdCB4ID0gKGV2IGFzIGFueSkub2Zmc2V0WCA/PyAoZXYuY2xpZW50WCAtIGNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0KTtcblx0XHRcdFx0Y29uc3QgdXNhYmxlV2lkdGggPSBNYXRoLm1heCh3aWR0aCAtIDIgKiBwYWQsIDEpO1xuXHRcdFx0XHRjb25zdCByYXRpbyA9IE1hdGgubWluKE1hdGgubWF4KCh4IC0gcGFkKSAvIHVzYWJsZVdpZHRoLCAwKSwgMSk7XG5cdFx0XHRcdGNvbnN0IGlkeCA9IE1hdGgucm91bmQocmF0aW8gKiAodGhpcy5wcm9wcy50cmVuZFBvaW50cy5sZW5ndGggLSAxKSk7XG5cdFx0XHRcdGNvbnN0IGNsYW1wZWRJZHggPSBNYXRoLm1pbihNYXRoLm1heChpZHgsIDApLCB0aGlzLnByb3BzLnRyZW5kUG9pbnRzLmxlbmd0aCAtIDEpO1xuXHRcdFx0XHRjb25zdCBwaWNrZWREYXRlID0gdGhpcy5wcm9wcy50cmVuZFBvaW50c1tjbGFtcGVkSWR4XS5kYXRlO1xuXG5cdFx0XHRcdHRoaXMudXBkYXRlU2VsZWN0aW9uKHgsIHBpY2tlZERhdGUpO1xuXHRcdFx0XHQvLyBcdTkwMUFcdTc3RTVcdTU5MTZcdTVDNDJcdTUyMzdcdTY1QjBcdUZGMDhcdTU5MERcdTc1MjhcdTczQjBcdTY3MDkgb25EYXRlUGljayBcdTZENDFcdTdBMEJcdUZGMDlcblx0XHRcdFx0aWYgKHRoaXMucHJvcHMub25EYXRlUGljaykge1xuXHRcdFx0XHRcdHRoaXMucHJvcHMub25EYXRlUGljayh0aGlzLmZvcm1hdERhdGVMb2NhbChwaWNrZWREYXRlKSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0Ly8gXHU1M0VGXHU5MDA5XHVGRjFBXHU0RTVGXHU2MjhBXHU1MENGXHU3RDIwXHU0RjREXHU3RjZFXHU1NkRFXHU0RjIwXG5cdFx0XHRcdGlmICh0aGlzLnByb3BzLm9uQ2hhcnRTZWxlY3QpIHtcblx0XHRcdFx0XHR0aGlzLnByb3BzLm9uQ2hhcnRTZWxlY3QoeCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXG5cdC8vIFx1NjZGNFx1NjVCMFx1NTZGRVx1ODg2OFx1NjU3MFx1NjM2RVxuXHR1cGRhdGVDaGFydCh0cmVuZFBvaW50czogeyBkYXRlOiBEYXRlLCB2YWx1ZTogbnVtYmVyIH1bXSk6IHZvaWQge1xuXHRcdHRoaXMucHJvcHMudHJlbmRQb2ludHMgPSB0cmVuZFBvaW50cztcblx0XHRjb25zdCBjYW52YXMgPSB0aGlzLmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoJyN0cmVuZC1jYW52YXMnKSBhcyBIVE1MQ2FudmFzRWxlbWVudDtcblx0XHRpZiAoY2FudmFzKSB7XG5cdFx0XHR0aGlzLnJlbmRlckNoYXJ0Q2FudmFzKGNhbnZhcyk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gXHU2NkY0XHU2NUIwXHU5MDA5XHU0RTJEXHU3MkI2XHU2MDAxXG5cdHVwZGF0ZVNlbGVjdGlvbihzZWxlY3RlZFg6IG51bWJlciB8IG51bGwsIHNlbGVjdGVkRGF0ZT86IERhdGUpOiB2b2lkIHtcblx0XHR0aGlzLnByb3BzLnNlbGVjdGVkWCA9IHNlbGVjdGVkWDtcblx0XHRpZiAoc2VsZWN0ZWREYXRlKSB7XG5cdFx0XHR0aGlzLnByb3BzLnNlbGVjdGVkRGF0ZSA9IHNlbGVjdGVkRGF0ZTtcblx0XHRcdGNvbnN0IGRhdGVMYWJlbCA9IHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvcignLnRvcC1zdW1tYXJ5LWRhdGUnKSBhcyBIVE1MRWxlbWVudCB8IG51bGw7XG5cdFx0XHRpZiAoZGF0ZUxhYmVsKSB7XG5cdFx0XHRcdGRhdGVMYWJlbC50ZXh0Q29udGVudCA9IHRoaXMuZm9ybWF0RGF0ZUxvY2FsKHNlbGVjdGVkRGF0ZSk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGNvbnN0IGNhbnZhcyA9IHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvcignI3RyZW5kLWNhbnZhcycpIGFzIEhUTUxDYW52YXNFbGVtZW50O1xuXHRcdGlmIChjYW52YXMpIHtcblx0XHRcdHRoaXMucmVuZGVyQ2hhcnRDYW52YXMoY2FudmFzKTtcblx0XHR9XG5cdH1cblxuXHQvLyBcdTUzRUFcdTY2RjRcdTY1QjBcdTY1NzBcdTVCNTdcdUZGMDhcdTRFMERcdTkxQ0RcdTdFRDhcdTU2RkVcdTg4NjhcdTY1NzBcdTYzNkVcdUZGMDlcblx0dXBkYXRlTnVtYmVycyh0b3RhbERhaWx5Q29zdDogbnVtYmVyLCB0b3RhbENvc3Q6IG51bWJlciwgdG90YWxSZWN5Y2xlOiBudW1iZXIpOiB2b2lkIHtcblx0XHR0aGlzLnByb3BzLnRvdGFsRGFpbHlDb3N0ID0gdG90YWxEYWlseUNvc3Q7XG5cdFx0dGhpcy5wcm9wcy50b3RhbENvc3QgPSB0b3RhbENvc3Q7XG5cdFx0dGhpcy5wcm9wcy50b3RhbFJlY3ljbGUgPSB0b3RhbFJlY3ljbGU7XG5cblx0XHRjb25zdCBkYWlseSA9IHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvcignLnRvcC1zdW1tYXJ5LWRhaWx5Y29zdCcpIGFzIEhUTUxFbGVtZW50IHwgbnVsbDtcblx0XHRpZiAoZGFpbHkpIGRhaWx5LnRleHRDb250ZW50ID0gYFx1MDBBNSR7dG90YWxEYWlseUNvc3QudG9GaXhlZCgyKX1gO1xuXG5cdFx0Y29uc3QgdG90YWxzID0gdGhpcy5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yQWxsKCcudG9wLXN1bW1hcnktdG90YWxjb3N0Jyk7XG5cdFx0aWYgKHRvdGFscyAmJiB0b3RhbHMubGVuZ3RoID4gMCkge1xuXHRcdFx0Y29uc3QgdG90YWxFbCA9IHRvdGFsc1swXSBhcyBIVE1MRWxlbWVudDtcblx0XHRcdGlmICh0b3RhbEVsKSB0b3RhbEVsLnRleHRDb250ZW50ID0gYFx1MDBBNSR7dG90YWxDb3N0LnRvTG9jYWxlU3RyaW5nKCl9YDtcblx0XHRcdGNvbnN0IHJlY3ljbGVFbCA9IHRvdGFsc1sxXSBhcyBIVE1MRWxlbWVudCB8IHVuZGVmaW5lZCBhcyBhbnk7XG5cdFx0XHRpZiAocmVjeWNsZUVsKSAocmVjeWNsZUVsIGFzIEhUTUxFbGVtZW50KS50ZXh0Q29udGVudCA9IGBcdTAwQTUke3RvdGFsUmVjeWNsZS50b0xvY2FsZVN0cmluZygpfWA7XG5cdFx0fVxuXHR9XG5cblx0Ly8gXHU2NjNFXHU3OTNBXHU2NUU1XHU2NzFGXHU5MDA5XHU2MkU5XHU1NjY4XG5cdHByaXZhdGUgc2hvd0RhdGVQaWNrZXIoKTogdm9pZCB7XG5cdFx0Ly8gXHU1MjFCXHU1RUZBXHU5MDZFXHU3RjY5XHU1QzQyXG5cdFx0Y29uc3QgbWFzayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdG1hc2suY2xhc3NOYW1lID0gJ2RhdGUtcGlja2VyLW1hc2snO1xuXHRcdFxuXHRcdC8vIFx1NTIxQlx1NUVGQVx1NjVFNVx1NjcxRlx1OTAwOVx1NjJFOVx1NTY2OFx1NUYzOVx1N0E5N1xuXHRcdGNvbnN0IHBpY2tlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdHBpY2tlci5jbGFzc05hbWUgPSAnZGF0ZS1waWNrZXItbW9kYWwnO1xuXHRcdFxuXHRcdC8vIFx1NTIxQlx1NUVGQVx1NjVFNVx1NjcxRlx1OTAwOVx1NjJFOVx1NTY2OFx1NTE4NVx1NUJCOVxuXHRcdGNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHRjb250ZW50LmNsYXNzTmFtZSA9ICdkYXRlLXBpY2tlci1jb250ZW50Jztcblx0XHRcblx0XHQvLyBcdTUyMUJcdTVFRkFcdTY4MDdcdTk4OThcblx0XHRjb25zdCB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdHRpdGxlLmNsYXNzTmFtZSA9ICdkYXRlLXBpY2tlci10aXRsZSc7XG5cdFx0dGl0bGUudGV4dENvbnRlbnQgPSAnXHU5MDA5XHU2MkU5XHU2NUU1XHU2NzFGJztcblx0XHRcblx0XHQvLyBcdTUyMUJcdTVFRkFcdTRFMDlcdTUyMTdcdTZFREFcdThGNkVcdTkwMDlcdTYyRTlcdTU2Njhcblx0XHRjb25zdCB3aGVlbENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdHdoZWVsQ29udGFpbmVyLmNsYXNzTmFtZSA9ICdkYXRlLXdoZWVsLWNvbnRhaW5lcic7XG5cdFx0XG5cdFx0Ly8gXHU4M0I3XHU1M0Q2XHU1RjUzXHU1MjREXHU2NUU1XHU2NzFGXHVGRjA4XHU0RTBFXHU5ODc2XHU5MEU4XHU2NjNFXHU3OTNBXHU3Njg0XHU2NUU1XHU2NzFGXHU0RkREXHU2MzAxXHU0RTAwXHU4MUY0XHVGRjA5XG5cdFx0Y29uc3QgY3VycmVudERhdGUgPSB0aGlzLnByb3BzLnNlbGVjdGVkRGF0ZSB8fCBuZXcgRGF0ZSgpO1xuXHRcdGNvbnN0IGN1cnJlbnRZZWFyID0gY3VycmVudERhdGUuZ2V0RnVsbFllYXIoKTtcblx0XHRjb25zdCBjdXJyZW50TW9udGggPSBjdXJyZW50RGF0ZS5nZXRNb250aCgpICsgMTtcblx0XHRjb25zdCBjdXJyZW50RGF5ID0gY3VycmVudERhdGUuZ2V0RGF0ZSgpO1xuXHRcdFxuXHRcdC8vIFx1NTIxQlx1NUVGQVx1NUU3NFx1NEVGRFx1NTIxN1x1RkYwOFx1NEUwRFx1NUZBQVx1NzNBRlx1RkYwOVxuXHRcdGNvbnN0IHllYXJDb2x1bW4gPSB0aGlzLmNyZWF0ZVdoZWVsQ29sdW1uKCdcdTVFNzQnLCB0aGlzLmdlbmVyYXRlWWVhcnMoY3VycmVudFllYXIpLCBjdXJyZW50WWVhciwgKHllYXIpID0+IHtcblx0XHRcdHRoaXMudXBkYXRlRGF5c0NvbHVtbihkYXlDb2x1bW4sIHllYXIsIG1vbnRoQ29sdW1uLnNlbGVjdGVkVmFsdWUpO1xuXHRcdH0sIGZhbHNlKTtcblx0XHRcblx0XHQvLyBcdTUyMUJcdTVFRkFcdTY3MDhcdTRFRkRcdTUyMTdcdUZGMDhcdTVGQUFcdTczQUZcdTZFREFcdTUyQThcdUZGMDlcblx0XHRjb25zdCBtb250aENvbHVtbiA9IHRoaXMuY3JlYXRlV2hlZWxDb2x1bW4oJ1x1NjcwOCcsIHRoaXMuZ2VuZXJhdGVNb250aHMoKSwgY3VycmVudE1vbnRoLCAobW9udGgpID0+IHtcblx0XHRcdHRoaXMudXBkYXRlRGF5c0NvbHVtbihkYXlDb2x1bW4sIHllYXJDb2x1bW4uc2VsZWN0ZWRWYWx1ZSwgbW9udGgpO1xuXHRcdH0sIHRydWUpO1xuXHRcdFxuXHRcdC8vIFx1NTIxQlx1NUVGQVx1NjVFNVx1NjcxRlx1NTIxN1x1RkYwOFx1NUZBQVx1NzNBRlx1NkVEQVx1NTJBOFx1RkYwOVxuXHRcdGNvbnN0IGRheUNvbHVtbiA9IHRoaXMuY3JlYXRlV2hlZWxDb2x1bW4oJ1x1NjVFNScsIHRoaXMuZ2VuZXJhdGVEYXlzKGN1cnJlbnRZZWFyLCBjdXJyZW50TW9udGgpLCBjdXJyZW50RGF5LCB1bmRlZmluZWQsIHRydWUpO1xuXHRcdFxuXHRcdHdoZWVsQ29udGFpbmVyLmFwcGVuZENoaWxkKHllYXJDb2x1bW4uZWxlbWVudCk7XG5cdFx0d2hlZWxDb250YWluZXIuYXBwZW5kQ2hpbGQobW9udGhDb2x1bW4uZWxlbWVudCk7XG5cdFx0d2hlZWxDb250YWluZXIuYXBwZW5kQ2hpbGQoZGF5Q29sdW1uLmVsZW1lbnQpO1xuXHRcdFxuXHRcdC8vIFx1NTIxQlx1NUVGQVx1NjMwOVx1OTRBRVx1NTMzQVx1NTdERlxuXHRcdGNvbnN0IGFjdGlvbnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHRhY3Rpb25zLmNsYXNzTmFtZSA9ICdkYXRlLXBpY2tlci1hY3Rpb25zJztcblx0XHRcblx0XHRjb25zdCBjYW5jZWxCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcblx0XHRjYW5jZWxCdG4uY2xhc3NOYW1lID0gJ2RhdGUtcGlja2VyLWJ0biBkYXRlLXBpY2tlci1idG4tY2FuY2VsJztcblx0XHRjYW5jZWxCdG4udGV4dENvbnRlbnQgPSAnXHU1M0Q2XHU2RDg4Jztcblx0XHRcblx0XHRjb25zdCBjb25maXJtQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG5cdFx0Y29uZmlybUJ0bi5jbGFzc05hbWUgPSAnZGF0ZS1waWNrZXItYnRuIGRhdGUtcGlja2VyLWJ0bi1jb25maXJtJztcblx0XHRjb25maXJtQnRuLnRleHRDb250ZW50ID0gJ1x1Nzg2RVx1NUI5QSc7XG5cdFx0XG5cdFx0Ly8gXHU3RUM0XHU4OEM1XHU3RUQzXHU2Nzg0XG5cdFx0YWN0aW9ucy5hcHBlbmRDaGlsZChjYW5jZWxCdG4pO1xuXHRcdGFjdGlvbnMuYXBwZW5kQ2hpbGQoY29uZmlybUJ0bik7XG5cdFx0Y29udGVudC5hcHBlbmRDaGlsZCh0aXRsZSk7XG5cdFx0Y29udGVudC5hcHBlbmRDaGlsZCh3aGVlbENvbnRhaW5lcik7XG5cdFx0Y29udGVudC5hcHBlbmRDaGlsZChhY3Rpb25zKTtcblx0XHRwaWNrZXIuYXBwZW5kQ2hpbGQoY29udGVudCk7XG5cdFx0bWFzay5hcHBlbmRDaGlsZChwaWNrZXIpO1xuXHRcdFxuXHRcdC8vIFx1NkRGQlx1NTJBMFx1NTIzMFx1OTg3NVx1OTc2MlxuXHRcdGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobWFzayk7XG5cdFx0XG5cdFx0Ly8gXHU0RThCXHU0RUY2XHU1OTA0XHU3NDA2XG5cdFx0Y29uc3QgY2xvc2VQaWNrZXIgPSAoKSA9PiB7XG5cdFx0XHRkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG1hc2spO1xuXHRcdH07XG5cdFx0XG5cdFx0bWFzay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG5cdFx0XHRpZiAoZS50YXJnZXQgPT09IG1hc2spIHtcblx0XHRcdFx0Y2xvc2VQaWNrZXIoKTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHRcblx0XHRjYW5jZWxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zZVBpY2tlcik7XG5cdFx0XG5cdFx0Y29uZmlybUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblx0XHRcdGNvbnN0IHllYXIgPSB5ZWFyQ29sdW1uLnNlbGVjdGVkVmFsdWU7XG5cdFx0XHRjb25zdCBtb250aCA9IG1vbnRoQ29sdW1uLnNlbGVjdGVkVmFsdWU7XG5cdFx0XHRjb25zdCBkYXkgPSBkYXlDb2x1bW4uc2VsZWN0ZWRWYWx1ZTtcblx0XHRcdGNvbnN0IHNlbGVjdGVkRGF0ZVN0ciA9IGAke3llYXJ9LSR7bW9udGgudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfS0ke2RheS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9YDtcblx0XHRcdFxuXHRcdFx0aWYgKHRoaXMucHJvcHMub25EYXRlUGljaykge1xuXHRcdFx0XHR0aGlzLnByb3BzLm9uRGF0ZVBpY2soc2VsZWN0ZWREYXRlU3RyKTtcblx0XHRcdH1cblx0XHRcdGNsb3NlUGlja2VyKCk7XG5cdFx0fSk7XG5cdH1cblxuXHQvLyBcdTc1MUZcdTYyMTBcdTVFNzRcdTRFRkRcdTY1NzBcdTdFQzRcblx0cHJpdmF0ZSBnZW5lcmF0ZVllYXJzKGN1cnJlbnRZZWFyOiBudW1iZXIpOiBudW1iZXJbXSB7XG5cdFx0Y29uc3QgbWluWWVhciA9IHRoaXMucHJvcHMubWluWWVhciB8fCAoY3VycmVudFllYXIgLSA1KTtcblx0XHRjb25zdCBtYXhZZWFyID0gdGhpcy5wcm9wcy5tYXhZZWFyIHx8IChjdXJyZW50WWVhciArIDUpO1xuXHRcdFxuXHRcdGNvbnN0IHllYXJzID0gW107XG5cdFx0Zm9yIChsZXQgaSA9IG1pblllYXI7IGkgPD0gbWF4WWVhcjsgaSsrKSB7XG5cdFx0XHR5ZWFycy5wdXNoKGkpO1xuXHRcdH1cblx0XHRyZXR1cm4geWVhcnM7XG5cdH1cblxuXHQvLyBcdTc1MUZcdTYyMTBcdTY3MDhcdTRFRkRcdTY1NzBcdTdFQzRcblx0cHJpdmF0ZSBnZW5lcmF0ZU1vbnRocygpOiBudW1iZXJbXSB7XG5cdFx0cmV0dXJuIEFycmF5LmZyb20oeyBsZW5ndGg6IDEyIH0sIChfLCBpKSA9PiBpICsgMSk7XG5cdH1cblxuXHQvLyBcdTc1MUZcdTYyMTBcdTY1RTVcdTY3MUZcdTY1NzBcdTdFQzRcblx0cHJpdmF0ZSBnZW5lcmF0ZURheXMoeWVhcjogbnVtYmVyLCBtb250aDogbnVtYmVyKTogbnVtYmVyW10ge1xuXHRcdGNvbnN0IGRheXNJbk1vbnRoID0gbmV3IERhdGUoeWVhciwgbW9udGgsIDApLmdldERhdGUoKTtcblx0XHRyZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aDogZGF5c0luTW9udGggfSwgKF8sIGkpID0+IGkgKyAxKTtcblx0fVxuXG5cdC8vIFx1NTIxQlx1NUVGQVx1NkVEQVx1OEY2RVx1NTIxN1xuXHRwcml2YXRlIGNyZWF0ZVdoZWVsQ29sdW1uKHN1ZmZpeDogc3RyaW5nLCB2YWx1ZXM6IG51bWJlcltdLCBzZWxlY3RlZFZhbHVlOiBudW1iZXIsIG9uQ2hhbmdlPzogKHZhbHVlOiBudW1iZXIpID0+IHZvaWQsIGlzSW5maW5pdGU6IGJvb2xlYW4gPSBmYWxzZSk6IHsgZWxlbWVudDogSFRNTEVsZW1lbnQsIHNlbGVjdGVkVmFsdWU6IG51bWJlciB9IHtcblx0XHRjb25zdCBjb2x1bW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHRjb2x1bW4uY2xhc3NOYW1lID0gJ2RhdGUtd2hlZWwtY29sdW1uJztcblx0XHRcblx0XHRjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHRjb250YWluZXIuY2xhc3NOYW1lID0gJ2RhdGUtd2hlZWwtaXRlbXMnO1xuXHRcdFxuXHRcdGxldCBzZWxlY3RlZEluZGV4ID0gdmFsdWVzLmluZGV4T2Yoc2VsZWN0ZWRWYWx1ZSk7XG5cdFx0bGV0IGN1cnJlbnRTZWxlY3RlZFZhbHVlID0gc2VsZWN0ZWRWYWx1ZTtcblx0XHRjb25zdCBhcGkgPSB7IGVsZW1lbnQ6IGNvbHVtbiwgc2VsZWN0ZWRWYWx1ZTogY3VycmVudFNlbGVjdGVkVmFsdWUgfTtcblx0XHRjb25zdCBpdGVtSGVpZ2h0ID0gNDA7IC8vIENTU1x1NEUyRFx1NUI5QVx1NEU0OVx1NzY4NGl0ZW1cdTlBRDhcdTVFQTZcblx0XHRcblx0XHRpZiAoaXNJbmZpbml0ZSkge1xuXHRcdFx0Ly8gXHU1RkFBXHU3M0FGXHU2RURBXHU1MkE4XHVGRjFBXHU1MjFCXHU1RUZBXHU1OTFBXHU0RTJBXHU5MUNEXHU1OTBEXHU3Njg0XHU5MDA5XHU5ODc5XHU5ODc5XG5cdFx0XHRjb25zdCByZXBlYXRDb3VudCA9IDU7IC8vIFx1OTFDRFx1NTkwRDVcdTZCMjFcdUZGMENcdTYwM0JcdTUxNzExNVx1N0VDNFx1NjU3MFx1NjM2RVxuXHRcdFx0Y29uc3QgdG90YWxJdGVtcyA9IHZhbHVlcy5sZW5ndGggKiByZXBlYXRDb3VudDtcblx0XHRcdFxuXHRcdFx0Ly8gXHU4QkExXHU3Qjk3XHU1MjFEXHU1OUNCXHU2RURBXHU1MkE4XHU0RjREXHU3RjZFXHVGRjA4XHU4QkE5XHU5MDA5XHU0RTJEXHU5ODc5XHU1NzI4XHU0RTJEXHU5NUY0XHVGRjBDXHU1RTc2XHU3ODZFXHU0RkREXHU2NzA5XHU4REIzXHU1OTFGXHU3Njg0XHU0RTBBXHU0RTBCXHU2RURBXHU1MkE4XHU3QTdBXHU5NUY0XHVGRjA5XG5cdFx0XHQvLyBcdTRGN0ZcdTc1MjhcdTRFMkRcdTk1RjRcdTdFQzRcdUZGMDhcdTdCMkMzXHU3RUM0XHVGRjBDXHU3RDIyXHU1RjE1XHU0RTNBMlx1RkYwOVx1NEY1Q1x1NEUzQVx1OEQ3N1x1NTlDQlx1NEY0RFx1N0Y2RVxuXHRcdFx0Y29uc3QgbWlkZGxlR3JvdXBJbmRleCA9IDI7IC8vIFx1N0IyQzNcdTdFQzRcdUZGMDgwLDEsMiwzLDRcdTRFMkRcdTc2ODQyXHVGRjA5XG5cdFx0XHRjb25zdCBpbml0aWFsU2Nyb2xsVG9wID0gbWlkZGxlR3JvdXBJbmRleCAqIHZhbHVlcy5sZW5ndGggKiBpdGVtSGVpZ2h0ICsgc2VsZWN0ZWRJbmRleCAqIGl0ZW1IZWlnaHQ7XG5cdFx0XHRcblx0XHRcdC8vIFx1NTIxQlx1NUVGQVx1OTFDRFx1NTkwRFx1NzY4NFx1OTAwOVx1OTg3OVx1OTg3OVxuXHRcdFx0Zm9yIChsZXQgcmVwZWF0ID0gMDsgcmVwZWF0IDwgcmVwZWF0Q291bnQ7IHJlcGVhdCsrKSB7XG5cdFx0XHRcdHZhbHVlcy5mb3JFYWNoKCh2YWx1ZSwgaW5kZXgpID0+IHtcblx0XHRcdFx0XHRjb25zdCBpdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0XHRcdFx0aXRlbS5jbGFzc05hbWUgPSAnZGF0ZS13aGVlbC1pdGVtJztcblx0XHRcdFx0XHRpdGVtLnRleHRDb250ZW50ID0gYCR7dmFsdWUudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfSR7c3VmZml4fWA7XG5cdFx0XHRcdFx0aXRlbS5kYXRhc2V0LnZhbHVlID0gdmFsdWUudG9TdHJpbmcoKTtcblx0XHRcdFx0XHRpdGVtLmRhdGFzZXQuaW5kZXggPSAocmVwZWF0ICogdmFsdWVzLmxlbmd0aCArIGluZGV4KS50b1N0cmluZygpO1xuXHRcdFx0XHRcdGl0ZW0uZGF0YXNldC5yZWFsVmFsdWUgPSB2YWx1ZS50b1N0cmluZygpO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdGNvbnRhaW5lci5hcHBlbmRDaGlsZChpdGVtKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdC8vIFx1OEJCRVx1N0Y2RVx1NUJCOVx1NTY2OFx1OUFEOFx1NUVBNlx1NTQ4Q1x1NTIxRFx1NTlDQlx1NkVEQVx1NTJBOFx1NEY0RFx1N0Y2RVxuXHRcdFx0Y29udGFpbmVyLnN0eWxlLmhlaWdodCA9IGAke3RvdGFsSXRlbXMgKiBpdGVtSGVpZ2h0fXB4YDtcblx0XHRcdC8vIFx1NTE0OFx1NjgwN1x1OEJCMFx1OTAwOVx1NEUyRFx1OTg3OVx1RkYwOFx1NEUyRFx1OTVGNFx1N0VDNFx1NUJGOVx1NUU5NFx1N0QyMlx1NUYxNVx1RkYwOVxuXHRcdFx0Y29uc3QgaW5pdGlhbEl0ZW1JbmRleCA9IG1pZGRsZUdyb3VwSW5kZXggKiB2YWx1ZXMubGVuZ3RoICsgc2VsZWN0ZWRJbmRleDtcblx0XHRcdGNvbnN0IGl0ZW1zID0gQXJyYXkuZnJvbShjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmRhdGUtd2hlZWwtaXRlbScpKSBhcyBIVE1MRWxlbWVudFtdO1xuXHRcdFx0aWYgKGl0ZW1zW2luaXRpYWxJdGVtSW5kZXhdKSB7XG5cdFx0XHRcdGl0ZW1zLmZvckVhY2goKGVsLCBpZHgpID0+IGVsLmNsYXNzTGlzdC50b2dnbGUoJ3NlbGVjdGVkJywgaWR4ID09PSBpbml0aWFsSXRlbUluZGV4KSk7XG5cdFx0XHR9XG5cdFx0XHQvLyBcdTdCNDlcdTRFMDBcdTVFMjdcdTUxOERcdThCQkVcdTdGNkVzY3JvbGxUb3BcdUZGMENcdTkwN0ZcdTUxNERcdTk5OTZcdTZCMjFcdTY1RTBcdTZDRDVcdTU0MTFcdTRFMEFcdTZFREFcdTc2ODRcdTk1RUVcdTk4OThcblx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG5cdFx0XHRcdGNvbnRhaW5lci5zY3JvbGxUb3AgPSBpbml0aWFsU2Nyb2xsVG9wO1xuXHRcdFx0fSk7XG5cdFx0XHRcblx0XHRcdC8vIFx1NkVEQVx1NTJBOFx1NEU4Qlx1NEVGNlx1NTkwNFx1NzQwNlx1RkYwOFx1NUZBQVx1NzNBRlx1NkVEQVx1NTJBOFx1RkYwOVxuXHRcdFx0bGV0IGlzU2Nyb2xsaW5nID0gZmFsc2U7XG5cdFx0XHRjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgKCkgPT4ge1xuXHRcdFx0XHRpZiAoaXNTY3JvbGxpbmcpIHJldHVybjtcblx0XHRcdFx0XG5cdFx0XHRcdGNvbnN0IHNjcm9sbFRvcCA9IGNvbnRhaW5lci5zY3JvbGxUb3A7XG5cdFx0XHRcdGNvbnN0IGN1cnJlbnRJbmRleCA9IE1hdGgucm91bmQoc2Nyb2xsVG9wIC8gaXRlbUhlaWdodCk7XG5cdFx0XHRcdGNvbnN0IHJlYWxJbmRleCA9ICgoY3VycmVudEluZGV4ICUgdmFsdWVzLmxlbmd0aCkgKyB2YWx1ZXMubGVuZ3RoKSAlIHZhbHVlcy5sZW5ndGg7XG5cdFx0XHRcdGNvbnN0IHJlYWxWYWx1ZSA9IHZhbHVlc1tyZWFsSW5kZXhdO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gXHU2NkY0XHU2NUIwXHU5MDA5XHU0RTJEXHU3MkI2XHU2MDAxXG5cdFx0XHRcdGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuZGF0ZS13aGVlbC1pdGVtJykuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHtcblx0XHRcdFx0XHRjb25zdCBpdGVtUmVhbEluZGV4ID0gaW5kZXggJSB2YWx1ZXMubGVuZ3RoO1xuXHRcdFx0XHRcdGl0ZW0uY2xhc3NMaXN0LnRvZ2dsZSgnc2VsZWN0ZWQnLCBpdGVtUmVhbEluZGV4ID09PSByZWFsSW5kZXgpO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0XG5cdFx0XHRcdHNlbGVjdGVkSW5kZXggPSByZWFsSW5kZXg7XG5cdFx0XHRcdGN1cnJlbnRTZWxlY3RlZFZhbHVlID0gcmVhbFZhbHVlO1xuXHRcdFx0XHRhcGkuc2VsZWN0ZWRWYWx1ZSA9IHJlYWxWYWx1ZTtcblx0XHRcdFx0XG5cdFx0XHRcdC8vIFx1ODlFNlx1NTNEMVx1NTNEOFx1NTMxNlx1NTZERVx1OEMwM1xuXHRcdFx0XHRpZiAob25DaGFuZ2UpIHtcblx0XHRcdFx0XHRvbkNoYW5nZShjdXJyZW50U2VsZWN0ZWRWYWx1ZSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0XG5cdFx0XHRcdC8vIFx1NUZBQVx1NzNBRlx1NkVEQVx1NTJBOFx1OTAzQlx1OEY5MVx1RkYxQVx1NUY1M1x1NkVEQVx1NTJBOFx1NTIzMFx1OEZCOVx1NzU0Q1x1NjVGNlx1RkYwQ1x1OTFDRFx1N0Y2RVx1NEY0RFx1N0Y2RVxuXHRcdFx0XHRjb25zdCBtYXhTY3JvbGxUb3AgPSAocmVwZWF0Q291bnQgLSAxKSAqIHZhbHVlcy5sZW5ndGggKiBpdGVtSGVpZ2h0O1xuXHRcdFx0XHRjb25zdCBtaW5TY3JvbGxUb3AgPSB2YWx1ZXMubGVuZ3RoICogaXRlbUhlaWdodDtcblx0XHRcdFx0XG5cdFx0XHRcdGlmIChzY3JvbGxUb3AgPj0gbWF4U2Nyb2xsVG9wKSB7XG5cdFx0XHRcdFx0aXNTY3JvbGxpbmcgPSB0cnVlO1xuXHRcdFx0XHRcdC8vIFx1NEVDRVx1N0IyQzVcdTdFQzRcdThERjNcdThGNkNcdTUyMzBcdTdCMkMyXHU3RUM0XHVGRjA4XHU0RkREXHU2MzAxXHU3NkY4XHU1QkY5XHU0RjREXHU3RjZFXHVGRjA5XG5cdFx0XHRcdFx0Y29uc3Qgb2Zmc2V0ID0gc2Nyb2xsVG9wIC0gbWF4U2Nyb2xsVG9wO1xuXHRcdFx0XHRcdGNvbnRhaW5lci5zY3JvbGxUb3AgPSB2YWx1ZXMubGVuZ3RoICogaXRlbUhlaWdodCArIG9mZnNldDtcblx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHsgaXNTY3JvbGxpbmcgPSBmYWxzZTsgfSwgNTApO1xuXHRcdFx0XHR9IGVsc2UgaWYgKHNjcm9sbFRvcCA8PSAwKSB7XG5cdFx0XHRcdFx0aXNTY3JvbGxpbmcgPSB0cnVlO1xuXHRcdFx0XHRcdC8vIFx1NEVDRVx1N0IyQzFcdTdFQzRcdThERjNcdThGNkNcdTUyMzBcdTdCMkM0XHU3RUM0XHVGRjA4XHU0RkREXHU2MzAxXHU3NkY4XHU1QkY5XHU0RjREXHU3RjZFXHVGRjA5XG5cdFx0XHRcdFx0Y29uc3Qgb2Zmc2V0ID0gc2Nyb2xsVG9wO1xuXHRcdFx0XHRcdGNvbnRhaW5lci5zY3JvbGxUb3AgPSAocmVwZWF0Q291bnQgLSAyKSAqIHZhbHVlcy5sZW5ndGggKiBpdGVtSGVpZ2h0ICsgb2Zmc2V0O1xuXHRcdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4geyBpc1Njcm9sbGluZyA9IGZhbHNlOyB9LCA1MCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0XHQvLyBcdTUxNDFcdThCQjhcdTc2RjRcdTYzQTVcdTcwQjlcdTUxRkJcdTkwMDlcdTYyRTlcblx0XHRcdGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldikgPT4ge1xuXHRcdFx0XHRjb25zdCB0YXJnZXQgPSBldi50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG5cdFx0XHRcdGNvbnN0IGl0ZW1FbCA9IHRhcmdldCAmJiB0YXJnZXQuY2xvc2VzdCA/ICh0YXJnZXQuY2xvc2VzdCgnLmRhdGUtd2hlZWwtaXRlbScpIGFzIEhUTUxFbGVtZW50IHwgbnVsbCkgOiBudWxsO1xuXHRcdFx0XHRpZiAoIWl0ZW1FbCkgcmV0dXJuO1xuXHRcdFx0XHRjb25zdCBjbGlja2VkSW5kZXggPSBOdW1iZXIoaXRlbUVsLmRhdGFzZXQuaW5kZXggfHwgJzAnKTtcblx0XHRcdFx0Y29uc3QgcmVhbEluZGV4ID0gKChjbGlja2VkSW5kZXggJSB2YWx1ZXMubGVuZ3RoKSArIHZhbHVlcy5sZW5ndGgpICUgdmFsdWVzLmxlbmd0aDtcblx0XHRcdFx0Y29uc3QgbWlkZGxlSW5kZXggPSBtaWRkbGVHcm91cEluZGV4ICogdmFsdWVzLmxlbmd0aCArIHJlYWxJbmRleDtcblx0XHRcdFx0Y29udGFpbmVyLnNjcm9sbFRvcCA9IG1pZGRsZUluZGV4ICogaXRlbUhlaWdodDtcblx0XHRcdFx0c2VsZWN0ZWRJbmRleCA9IHJlYWxJbmRleDtcblx0XHRcdFx0Y3VycmVudFNlbGVjdGVkVmFsdWUgPSB2YWx1ZXNbcmVhbEluZGV4XTtcblx0XHRcdFx0YXBpLnNlbGVjdGVkVmFsdWUgPSBjdXJyZW50U2VsZWN0ZWRWYWx1ZTtcblx0XHRcdFx0aWYgKG9uQ2hhbmdlKSBvbkNoYW5nZShjdXJyZW50U2VsZWN0ZWRWYWx1ZSk7XG5cdFx0XHR9KTtcblx0XHRcdFxuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBcdTY2NkVcdTkwMUFcdTZFREFcdTUyQThcdUZGMUFcdTVFNzRcdTRFRkRcdTUyMTdcdTRFMERcdTk3MDBcdTg5ODFcdTVGQUFcdTczQUZcblx0XHRcdHZhbHVlcy5mb3JFYWNoKCh2YWx1ZSwgaW5kZXgpID0+IHtcblx0XHRcdFx0Y29uc3QgaXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdFx0XHRpdGVtLmNsYXNzTmFtZSA9ICdkYXRlLXdoZWVsLWl0ZW0nO1xuXHRcdFx0XHRpdGVtLnRleHRDb250ZW50ID0gYCR7dmFsdWUudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfSR7c3VmZml4fWA7XG5cdFx0XHRcdGl0ZW0uZGF0YXNldC52YWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCk7XG5cdFx0XHRcdGl0ZW0uZGF0YXNldC5pbmRleCA9IGluZGV4LnRvU3RyaW5nKCk7XG5cdFx0XHRcdFxuXHRcdFx0XHRpZiAodmFsdWUgPT09IGN1cnJlbnRTZWxlY3RlZFZhbHVlKSB7XG5cdFx0XHRcdFx0aXRlbS5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdFxuXHRcdFx0XHRjb250YWluZXIuYXBwZW5kQ2hpbGQoaXRlbSk7XG5cdFx0XHR9KTtcblx0XHRcdFxuXHRcdFx0Ly8gXHU2RURBXHU1MkE4XHU0RThCXHU0RUY2XHU1OTA0XHU3NDA2XHVGRjA4XHU2NjZFXHU5MDFBXHU2RURBXHU1MkE4XHVGRjA5XG5cdFx0XHRjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgKCkgPT4ge1xuXHRcdFx0XHRjb25zdCBzY3JvbGxUb3AgPSBjb250YWluZXIuc2Nyb2xsVG9wO1xuXHRcdFx0XHRjb25zdCBuZXdJbmRleCA9IE1hdGgucm91bmQoc2Nyb2xsVG9wIC8gaXRlbUhlaWdodCk7XG5cdFx0XHRcdFxuXHRcdFx0XHRpZiAobmV3SW5kZXggIT09IHNlbGVjdGVkSW5kZXggJiYgbmV3SW5kZXggPj0gMCAmJiBuZXdJbmRleCA8IHZhbHVlcy5sZW5ndGgpIHtcblx0XHRcdFx0XHQvLyBcdTY2RjRcdTY1QjBcdTkwMDlcdTRFMkRcdTcyQjZcdTYwMDFcblx0XHRcdFx0XHRjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmRhdGUtd2hlZWwtaXRlbScpLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7XG5cdFx0XHRcdFx0XHRpdGVtLmNsYXNzTGlzdC50b2dnbGUoJ3NlbGVjdGVkJywgaW5kZXggPT09IG5ld0luZGV4KTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRzZWxlY3RlZEluZGV4ID0gbmV3SW5kZXg7XG5cdFx0XHRcdFx0Y3VycmVudFNlbGVjdGVkVmFsdWUgPSB2YWx1ZXNbbmV3SW5kZXhdO1xuXHRcdFx0XHRcdGFwaS5zZWxlY3RlZFZhbHVlID0gY3VycmVudFNlbGVjdGVkVmFsdWU7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly8gXHU4OUU2XHU1M0QxXHU1M0Q4XHU1MzE2XHU1NkRFXHU4QzAzXG5cdFx0XHRcdFx0aWYgKG9uQ2hhbmdlKSB7XG5cdFx0XHRcdFx0XHRvbkNoYW5nZShjdXJyZW50U2VsZWN0ZWRWYWx1ZSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdFx0Ly8gXHU1MTQxXHU4QkI4XHU3NkY0XHU2M0E1XHU3MEI5XHU1MUZCXHU5MDA5XHU2MkU5XG5cdFx0XHRjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXYpID0+IHtcblx0XHRcdFx0Y29uc3QgdGFyZ2V0ID0gZXYudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xuXHRcdFx0XHRjb25zdCBpdGVtRWwgPSB0YXJnZXQgJiYgdGFyZ2V0LmNsb3Nlc3QgPyAodGFyZ2V0LmNsb3Nlc3QoJy5kYXRlLXdoZWVsLWl0ZW0nKSBhcyBIVE1MRWxlbWVudCB8IG51bGwpIDogbnVsbDtcblx0XHRcdFx0aWYgKCFpdGVtRWwpIHJldHVybjtcblx0XHRcdFx0Y29uc3QgaWR4ID0gTnVtYmVyKGl0ZW1FbC5kYXRhc2V0LmluZGV4IHx8ICcwJyk7XG5cdFx0XHRcdC8vIFx1N0FDQlx1NTM3M1x1NjZGNFx1NjVCMFx1OTAwOVx1NEUyRFx1NjgzN1x1NUYwRlxuXHRcdFx0XHRjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmRhdGUtd2hlZWwtaXRlbScpLmZvckVhY2goKGVsLCBpKSA9PiB7XG5cdFx0XHRcdFx0ZWwuY2xhc3NMaXN0LnRvZ2dsZSgnc2VsZWN0ZWQnLCBpID09PSBpZHgpO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0Y29udGFpbmVyLnNjcm9sbFRvcCA9IGlkeCAqIGl0ZW1IZWlnaHQ7XG5cdFx0XHRcdHNlbGVjdGVkSW5kZXggPSBpZHg7XG5cdFx0XHRcdGN1cnJlbnRTZWxlY3RlZFZhbHVlID0gdmFsdWVzW2lkeF07XG5cdFx0XHRcdGFwaS5zZWxlY3RlZFZhbHVlID0gY3VycmVudFNlbGVjdGVkVmFsdWU7XG5cdFx0XHRcdGlmIChvbkNoYW5nZSkgb25DaGFuZ2UoY3VycmVudFNlbGVjdGVkVmFsdWUpO1xuXHRcdFx0fSk7XG5cdFx0XHRcblx0XHRcdC8vIFx1NTIxRFx1NTlDQlx1NkVEQVx1NTJBOFx1NTIzMFx1OTAwOVx1NEUyRFx1NEY0RFx1N0Y2RVxuXHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdGNvbnRhaW5lci5zY3JvbGxUb3AgPSBzZWxlY3RlZEluZGV4ICogaXRlbUhlaWdodDtcblx0XHRcdH0sIDApO1xuXHRcdH1cblx0XHRcblx0XHRjb2x1bW4uYXBwZW5kQ2hpbGQoY29udGFpbmVyKTtcblx0XHRcblx0XHRyZXR1cm4gYXBpO1xuXHR9XG5cblx0Ly8gXHU2NkY0XHU2NUIwXHU2NUU1XHU2NzFGXHU1MjE3XG5cdHByaXZhdGUgdXBkYXRlRGF5c0NvbHVtbihkYXlDb2x1bW46IHsgZWxlbWVudDogSFRNTEVsZW1lbnQsIHNlbGVjdGVkVmFsdWU6IG51bWJlciB9LCB5ZWFyOiBudW1iZXIsIG1vbnRoOiBudW1iZXIpOiB2b2lkIHtcblx0XHRjb25zdCBjb250YWluZXIgPSBkYXlDb2x1bW4uZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZGF0ZS13aGVlbC1pdGVtcycpIGFzIEhUTUxFbGVtZW50O1xuXHRcdGNvbnN0IGN1cnJlbnREYXkgPSBkYXlDb2x1bW4uc2VsZWN0ZWRWYWx1ZTtcblx0XHRjb25zdCBuZXdEYXlzID0gdGhpcy5nZW5lcmF0ZURheXMoeWVhciwgbW9udGgpO1xuXHRcdFxuXHRcdC8vIFx1NkUwNVx1N0E3QVx1NzNCMFx1NjcwOVx1NTE4NVx1NUJCOVxuXHRcdGNvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcblx0XHRcblx0XHQvLyBcdTkxQ0RcdTY1QjBcdTUyMUJcdTVFRkFcdTY1RTVcdTY3MUZcdTkwMDlcdTk4NzlcdUZGMDhcdTVGQUFcdTczQUZcdTZFREFcdTUyQThcdUZGMDlcblx0XHRjb25zdCBtYXhEYXkgPSBNYXRoLm1heCguLi5uZXdEYXlzKTtcblx0XHRjb25zdCBzZWxlY3RlZERheSA9IE1hdGgubWluKGN1cnJlbnREYXksIG1heERheSk7XG5cdFx0Y29uc3Qgc2VsZWN0ZWRJbmRleCA9IG5ld0RheXMuaW5kZXhPZihzZWxlY3RlZERheSk7XG5cdFx0Y29uc3QgaXRlbUhlaWdodCA9IDQwO1xuXHRcdFxuXHRcdC8vIFx1NUZBQVx1NzNBRlx1NkVEQVx1NTJBOFx1RkYxQVx1NTIxQlx1NUVGQVx1NTkxQVx1NEUyQVx1OTFDRFx1NTkwRFx1NzY4NFx1OTAwOVx1OTg3OVx1OTg3OVxuXHRcdGNvbnN0IHJlcGVhdENvdW50ID0gNTsgLy8gXHU5MUNEXHU1OTBENVx1NkIyMVxuXHRcdGNvbnN0IHRvdGFsSXRlbXMgPSBuZXdEYXlzLmxlbmd0aCAqIHJlcGVhdENvdW50O1xuXHRcdFxuXHRcdC8vIFx1OEJBMVx1N0I5N1x1NTIxRFx1NTlDQlx1NkVEQVx1NTJBOFx1NEY0RFx1N0Y2RVx1RkYwOFx1OEJBOVx1OTAwOVx1NEUyRFx1OTg3OVx1NTcyOFx1NEUyRFx1OTVGNFx1RkYwQ1x1NEY3Rlx1NzUyOFx1N0IyQzNcdTdFQzRcdTRGNUNcdTRFM0FcdThENzdcdTU5Q0JcdTRGNERcdTdGNkVcdUZGMDlcblx0XHRjb25zdCBtaWRkbGVHcm91cEluZGV4ID0gMjsgLy8gXHU3QjJDM1x1N0VDNFx1RkYwODAsMSwyLDMsNFx1NEUyRFx1NzY4NDJcdUZGMDlcblx0XHRjb25zdCBpbml0aWFsU2Nyb2xsVG9wID0gbWlkZGxlR3JvdXBJbmRleCAqIG5ld0RheXMubGVuZ3RoICogaXRlbUhlaWdodCArIHNlbGVjdGVkSW5kZXggKiBpdGVtSGVpZ2h0O1xuXHRcdFxuXHRcdC8vIFx1NTIxQlx1NUVGQVx1OTFDRFx1NTkwRFx1NzY4NFx1NjVFNVx1NjcxRlx1OTAwOVx1OTg3OVx1OTg3OVxuXHRcdGZvciAobGV0IHJlcGVhdCA9IDA7IHJlcGVhdCA8IHJlcGVhdENvdW50OyByZXBlYXQrKykge1xuXHRcdFx0bmV3RGF5cy5mb3JFYWNoKChkYXksIGluZGV4KSA9PiB7XG5cdFx0XHRcdGNvbnN0IGl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHRcdFx0aXRlbS5jbGFzc05hbWUgPSAnZGF0ZS13aGVlbC1pdGVtJztcblx0XHRcdFx0aXRlbS50ZXh0Q29udGVudCA9IGAke2RheS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9XHU2NUU1YDtcblx0XHRcdFx0aXRlbS5kYXRhc2V0LnZhbHVlID0gZGF5LnRvU3RyaW5nKCk7XG5cdFx0XHRcdGl0ZW0uZGF0YXNldC5pbmRleCA9IChyZXBlYXQgKiBuZXdEYXlzLmxlbmd0aCArIGluZGV4KS50b1N0cmluZygpO1xuXHRcdFx0XHRpdGVtLmRhdGFzZXQucmVhbFZhbHVlID0gZGF5LnRvU3RyaW5nKCk7XG5cdFx0XHRcdFxuXHRcdFx0XHRjb250YWluZXIuYXBwZW5kQ2hpbGQoaXRlbSk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0XG5cdFx0Ly8gXHU4QkJFXHU3RjZFXHU1QkI5XHU1NjY4XHU5QUQ4XHU1RUE2XHU1NDhDXHU1MjFEXHU1OUNCXHU2RURBXHU1MkE4XHU0RjREXHU3RjZFXG5cdFx0Y29udGFpbmVyLnN0eWxlLmhlaWdodCA9IGAke3RvdGFsSXRlbXMgKiBpdGVtSGVpZ2h0fXB4YDtcblx0XHQvLyBcdTUxNDhcdTY4MDdcdThCQjBcdTkwMDlcdTRFMkRcdTk4NzlcdUZGMDhcdTRFMkRcdTk1RjRcdTdFQzRcdTVCRjlcdTVFOTRcdTdEMjJcdTVGMTVcdUZGMDlcblx0XHRjb25zdCBpbml0aWFsSXRlbUluZGV4RGF5ID0gbWlkZGxlR3JvdXBJbmRleCAqIG5ld0RheXMubGVuZ3RoICsgc2VsZWN0ZWRJbmRleDtcblx0XHRjb25zdCBkYXlJdGVtcyA9IEFycmF5LmZyb20oY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5kYXRlLXdoZWVsLWl0ZW0nKSkgYXMgSFRNTEVsZW1lbnRbXTtcblx0XHRpZiAoZGF5SXRlbXNbaW5pdGlhbEl0ZW1JbmRleERheV0pIHtcblx0XHRcdGRheUl0ZW1zLmZvckVhY2goKGVsLCBpZHgpID0+IGVsLmNsYXNzTGlzdC50b2dnbGUoJ3NlbGVjdGVkJywgaWR4ID09PSBpbml0aWFsSXRlbUluZGV4RGF5KSk7XG5cdFx0fVxuXHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG5cdFx0XHRjb250YWluZXIuc2Nyb2xsVG9wID0gaW5pdGlhbFNjcm9sbFRvcDtcblx0XHR9KTtcblx0XHRcblx0XHQvLyBcdTY2RjRcdTY1QjBcdTkwMDlcdTRFMkRcdTUwM0Ncblx0XHRkYXlDb2x1bW4uc2VsZWN0ZWRWYWx1ZSA9IHNlbGVjdGVkRGF5O1xuXHRcdFxuXHRcdC8vIFx1OTFDRFx1NjVCMFx1N0VEMVx1NUI5QVx1NkVEQVx1NTJBOFx1NEU4Qlx1NEVGNlx1RkYwOFx1NUZBQVx1NzNBRlx1NkVEQVx1NTJBOFx1RkYwOVxuXHRcdGxldCBpc1Njcm9sbGluZyA9IGZhbHNlO1xuXHRcdGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCAoKSA9PiB7XG5cdFx0XHRpZiAoaXNTY3JvbGxpbmcpIHJldHVybjtcblx0XHRcdFxuXHRcdFx0Y29uc3Qgc2Nyb2xsVG9wID0gY29udGFpbmVyLnNjcm9sbFRvcDtcblx0XHRcdGNvbnN0IGN1cnJlbnRJbmRleCA9IE1hdGgucm91bmQoc2Nyb2xsVG9wIC8gaXRlbUhlaWdodCk7XG5cdFx0XHRjb25zdCByZWFsSW5kZXggPSBjdXJyZW50SW5kZXggJSBuZXdEYXlzLmxlbmd0aDtcblx0XHRcdGNvbnN0IHJlYWxWYWx1ZSA9IG5ld0RheXNbcmVhbEluZGV4XTtcblx0XHRcdFxuXHRcdFx0Ly8gXHU2NkY0XHU2NUIwXHU5MDA5XHU0RTJEXHU3MkI2XHU2MDAxXG5cdFx0XHRjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmRhdGUtd2hlZWwtaXRlbScpLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7XG5cdFx0XHRcdGNvbnN0IGl0ZW1SZWFsSW5kZXggPSBpbmRleCAlIG5ld0RheXMubGVuZ3RoO1xuXHRcdFx0XHRpdGVtLmNsYXNzTGlzdC50b2dnbGUoJ3NlbGVjdGVkJywgaXRlbVJlYWxJbmRleCA9PT0gcmVhbEluZGV4KTtcblx0XHRcdH0pO1xuXHRcdFx0XG5cdFx0XHRkYXlDb2x1bW4uc2VsZWN0ZWRWYWx1ZSA9IHJlYWxWYWx1ZTtcblx0XHRcdFxuXHRcdFx0Ly8gXHU1RkFBXHU3M0FGXHU2RURBXHU1MkE4XHU5MDNCXHU4RjkxXHVGRjFBXHU1RjUzXHU2RURBXHU1MkE4XHU1MjMwXHU4RkI5XHU3NTRDXHU2NUY2XHVGRjBDXHU5MUNEXHU3RjZFXHU0RjREXHU3RjZFXG5cdFx0XHRjb25zdCBtYXhTY3JvbGxUb3AgPSAocmVwZWF0Q291bnQgLSAxKSAqIG5ld0RheXMubGVuZ3RoICogaXRlbUhlaWdodDtcblx0XHRcdGNvbnN0IG1pblNjcm9sbFRvcCA9IG5ld0RheXMubGVuZ3RoICogaXRlbUhlaWdodDtcblx0XHRcdFxuXHRcdFx0aWYgKHNjcm9sbFRvcCA+PSBtYXhTY3JvbGxUb3ApIHtcblx0XHRcdFx0aXNTY3JvbGxpbmcgPSB0cnVlO1xuXHRcdFx0XHQvLyBcdTRFQ0VcdTdCMkM1XHU3RUM0XHU4REYzXHU4RjZDXHU1MjMwXHU3QjJDMlx1N0VDNFx1RkYwOFx1NEZERFx1NjMwMVx1NzZGOFx1NUJGOVx1NEY0RFx1N0Y2RVx1RkYwOVxuXHRcdFx0XHRjb25zdCBvZmZzZXQgPSBzY3JvbGxUb3AgLSBtYXhTY3JvbGxUb3A7XG5cdFx0XHRcdGNvbnRhaW5lci5zY3JvbGxUb3AgPSBuZXdEYXlzLmxlbmd0aCAqIGl0ZW1IZWlnaHQgKyBvZmZzZXQ7XG5cdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4geyBpc1Njcm9sbGluZyA9IGZhbHNlOyB9LCA1MCk7XG5cdFx0XHR9IGVsc2UgaWYgKHNjcm9sbFRvcCA8PSAwKSB7XG5cdFx0XHRcdGlzU2Nyb2xsaW5nID0gdHJ1ZTtcblx0XHRcdFx0Ly8gXHU0RUNFXHU3QjJDMVx1N0VDNFx1OERGM1x1OEY2Q1x1NTIzMFx1N0IyQzRcdTdFQzRcdUZGMDhcdTRGRERcdTYzMDFcdTc2RjhcdTVCRjlcdTRGNERcdTdGNkVcdUZGMDlcblx0XHRcdFx0Y29uc3Qgb2Zmc2V0ID0gc2Nyb2xsVG9wO1xuXHRcdFx0XHRjb250YWluZXIuc2Nyb2xsVG9wID0gKHJlcGVhdENvdW50IC0gMikgKiBuZXdEYXlzLmxlbmd0aCAqIGl0ZW1IZWlnaHQgKyBvZmZzZXQ7XG5cdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4geyBpc1Njcm9sbGluZyA9IGZhbHNlOyB9LCA1MCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cbn1cbiIsICJpbXBvcnQgeyBBcHAsIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCBMYWNDb3N0U2V0UGx1Z2luIGZyb20gJy4uLy4uL21haW4nO1xyXG5pbXBvcnQgeyBBc3NldFJlcG9zaXRvcnkgfSBmcm9tICcuLi8uLi9yZXBvc2l0b3JpZXMvQXNzZXRSZXBvc2l0b3J5JztcclxuXHJcbi8vIFx1OEJCRVx1N0Y2RVx1NjgwN1x1N0I3RVxyXG5leHBvcnQgY2xhc3MgTGFjQ29zdFNldFNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcclxuXHRwbHVnaW46IExhY0Nvc3RTZXRQbHVnaW47XHJcblxyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IExhY0Nvc3RTZXRQbHVnaW4pIHtcclxuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcclxuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG5cdH1cclxuXHJcblx0ZGlzcGxheSgpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XHJcblxyXG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcclxuXHJcblx0XHRjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdMYWMuQ29zdFNldCBcdThCQkVcdTdGNkUnIH0pO1xyXG5cdFx0XHJcblx0XHQvLyBcdTIwMTRcdTIwMTQgXHU2ODNDXHU1RjBGXHU0RTBFXHU3NTI4XHU2Q0Q1XHU4QkY0XHU2NjBFIFx1MjAxNFx1MjAxNFxyXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoJ3AnLCB7IFxyXG5cdFx0XHR0ZXh0OiAnXHU5MUNEXHU4OTgxXHVGRjFBXHU1MTY1XHU1M0UzXHU2NTg3XHU0RUY2XHU0RTBFXHU4RDQ0XHU0RUE3XHU2NTg3XHU0RUY2XHU3Njg0XHUyMDFDXHU1MTg1XHU1QkI5XHU2ODNDXHU1RjBGXHU0RTNBIFRPTUxcdTIwMURcdUZGMENcdTY1ODdcdTRFRjZcdTYyNjlcdTVDNTVcdTU0MERcdTUzRUZcdTRFM0EgLm1kXHUzMDAyXHU1MTQxXHU4QkI4ICMgXHU1RjAwXHU1OTM0XHU3Njg0XHU2Q0U4XHU5MUNBXHUzMDAyXHU1NTJGXHU0RTAwXHU3Njg0XHU5NzVFIFRPTUwgXHU0RjhCXHU1OTE2XHU2NjJGXHVGRjFBXHU2NTg3XHU0RUY2XHU2QjYzXHU2NTg3XHU0RTJEXHU3Njg0IFtbXHU4RDQ0XHU0RUE3XHU2NTg3XHU0RUY2XHU1NDBEXV0gXHU1M0NDXHU5NEZFXHU1M0VGXHU3NzAxXHU3NTY1XHU1RjE1XHU1M0Y3XHVGRjBDXHU2M0QyXHU0RUY2XHU1NzI4XHU4OUUzXHU2NzkwXHU2NUY2XHU0RjFBXHU0RTM0XHU2NUY2XHU0RTNBXHU1MTc2XHU1MkEwXHU0RTBBXHU1RjE1XHU1M0Y3XHU1NDBFXHU2MzA5IFRPTUwgXHU1OTA0XHU3NDA2XHUzMDAyXHU5NjY0XHU4RkQ5XHU3MEI5XHU1OTE2XHVGRjBDXHU0RTBEXHU1RTk0XHU2REY3XHU1MTY1XHU2NjZFXHU5MDFBIE1hcmtkb3duIFx1NjU4N1x1NjcyQ1x1MzAwMicsXHJcblx0XHRcdGNsczogJ3NldHRpbmctaXRlbS1kZXNjcmlwdGlvbidcclxuXHRcdH0pO1xyXG5cdFx0Y29uc3QgZW50cnlFeGFtcGxlID0gYCMgXHU1MTY1XHU1M0UzXHU2NTg3XHU0RUY2XHU2NzAwXHU1QzBGXHU3OTNBXHU0RjhCXFxuXFxuIyBcdTk4NzZcdTkwRTggVE9NTFx1RkYxQVx1NUZDNVx1OTg3Qlx1NkVFMVx1OERCM1xcbiMgdHlwZSA9IFxcXCJyb290XFxcIlxcbiMgcmVuZGVycyA9IFtcXFwiY29zdHNldFxcXCJdXFxuXFxudHlwZSA9IFxcXCJyb290XFxcIlxcbnJlbmRlcnMgPSBbXFxcImNvc3RzZXRcXFwiXVxcblxcbiMgXHU2QjYzXHU2NTg3XHVGRjFBXHU3NTI4XHU1M0NDXHU5NEZFXHU1MjE3XHU1MUZBXHU4RDQ0XHU0RUE3XHU2NTg3XHU0RUY2XHU1NDBEXHVGRjA4XHU0RTBEXHU5NzAwXHU4OTgxXHU2MjY5XHU1QzU1XHU1NDBEXHVGRjA5XFxuXFxuW1tcdTk1MkVcdTc2RDhdXVxcbltbXHU4MDMzXHU2NzNBXV1cXG5gO1xyXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoJ3ByZScsIHsgdGV4dDogZW50cnlFeGFtcGxlLCBjbHM6ICdzZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb24nIH0pO1xyXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoJ3AnLCB7IFxyXG5cdFx0XHR0ZXh0OiAnXHU4RDQ0XHU0RUE3XHU2NTg3XHU0RUY2XHU1NDBDXHU2ODM3XHU2NjJGIE1hcmtkb3duXHVGRjBDXHU0RjQ2XHU1MTg1XHU1QkI5XHU0RUU1IFRPTUwgXHU1QjU3XHU2QkI1XHU0RTNBXHU0RTNCXHVGRjA4XHU2M0QyXHU0RUY2XHU0RjFBXHU0RkREXHU3NTU5XHU0RjYwXHU1MTk5XHU3Njg0XHU2Q0U4XHU5MUNBXHVGRjA5XHUzMDAyXHU0RUU1XHU0RTBCXHU0RTNBXHU2NzAwXHU1QzBGXHU3OTNBXHU0RjhCXHVGRjFBJyxcclxuXHRcdFx0Y2xzOiAnc2V0dGluZy1pdGVtLWRlc2NyaXB0aW9uJ1xyXG5cdFx0fSk7XHJcblx0XHRjb25zdCBhc3NldEV4YW1wbGUgPSBgbmFtZSA9IFxcXCJcdTk1MkVcdTc2RDhcXFwiXFxuXFxuW3N0eWxlXVxcbmljb24gPSBcXFwiXHUyMzI4XHVGRTBGXFxcIlxcblxcbltkZXRhaWxdXFxucHJpY2UgPSAzOTlcXG5hY3RpdmVfZnJvbSA9IFxcXCIyMDI0LTAxLTAxXFxcIlxcbmFjdGl2ZV90byA9IFxcXCJcXFwiXFxucmVjeWNsZV9wcmljZSA9IDBcXG50YWdzID0gW1xcXCJcdTY1NzBcdTc4MDFcXFwiLCBcXFwiXHU5NTJFXHU3NkQ4XFxcIl1cXG5gO1xyXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoJ3ByZScsIHsgdGV4dDogYXNzZXRFeGFtcGxlLCBjbHM6ICdzZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb24nIH0pO1xyXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoJ3AnLCB7IFxyXG5cdFx0XHR0ZXh0OiAnXHU3NTI4XHU2Q0Q1XHVGRjFBXHU1NzI4XHUyMDFDXHU1MTY1XHU1M0UzXHU2NTg3XHU0RUY2XHUyMDFEXHU0RTBBXHU1M0YzXHU5NTJFIFx1MjE5MiBcdTkwMDlcdTYyRTlcdTIwMUNcdTc1MjggTGFDLkNvc3RTZXQgXHU2MjUzXHU1RjAwXHUyMDFEXHUzMDAyXHU0RTVGXHU1M0VGXHU1NzI4XHU1NDdEXHU0RUU0XHU5NzYyXHU2NzdGXHU2MjY3XHU4ODRDXHUyMDFDXHU2MjUzXHU1RjAwTGFDLkNvc3RTZXRcdTIwMURcdUZGMDhcdTVDMDZcdTRGN0ZcdTc1MjhcdTRFMEJcdTY1QjlcdTkxNERcdTdGNkVcdTc2ODRcdTUxNjVcdTUzRTNcdTY1ODdcdTRFRjZcdUZGMDlcdTMwMDInLFxyXG5cdFx0XHRjbHM6ICdzZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb24nXHJcblx0XHR9KTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ1x1NTE2NVx1NTNFM1x1NjU4N1x1NEVGNicpXHJcblx0XHRcdC5zZXREZXNjKCdcdTRGNUNcdTRFM0FcdThENDRcdTRFQTdcdTUxNjVcdTUzRTNcdTc2ODQgTWFya2Rvd24gXHU2NTg3XHU0RUY2XHU4REVGXHU1Rjg0XHVGRjBDXHU0RjhCXHU1OTgyIGNvc3RzZXQvY29zdHNldC5tZCcpXHJcblx0XHRcdC5hZGRUZXh0KHRleHQgPT4gdGV4dFxyXG5cdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignY29zdHNldC9jb3N0c2V0Lm1kJylcclxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW50cnlGaWxlIHx8ICdjb3N0c2V0L2Nvc3RzZXQubWQnKVxyXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmVudHJ5RmlsZSA9IHZhbHVlPy50cmltKCkgfHwgJ2Nvc3RzZXQvY29zdHNldC5tZCc7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdC8vIFx1N0FDQlx1NTM3M1x1NzUyOFx1NjVCMFx1NzY4NFx1NTE2NVx1NTNFM1x1NjU4N1x1NEVGNlx1OTFDRFx1NUVGQVx1NEVEM1x1NUU5M1xyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uYXNzZXRSZXBvc2l0b3J5ID0gbmV3IEFzc2V0UmVwb3NpdG9yeSh0aGlzLmFwcCwgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW50cnlGaWxlKTtcclxuXHRcdFx0XHR9KSk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKCdcdTU0MkZcdTc1MjhcdTUzRjNcdTk1MkVcdTgzRENcdTUzNTUgXHUyMDFDXHU3NTI4IExhQy5Db3N0U2V0IFx1NjI1M1x1NUYwMFx1MjAxRCcpXHJcblx0XHRcdC5zZXREZXNjKCdcdTU3MjggTWFya2Rvd24gXHU2NTg3XHU0RUY2XHU3Njg0XHU1M0YzXHU5NTJFXHU4M0RDXHU1MzU1XHU0RTJEXHU2NjNFXHU3OTNBXHU1MTY1XHU1M0UzJylcclxuXHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUNvbnRleHRNZW51KVxyXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUNvbnRleHRNZW51ID0gISF2YWx1ZTtcclxuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdH0pKTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ1x1OUVEOFx1OEJBNFx1NjM5Mlx1NUU4RicpXHJcblx0XHRcdC5zZXREZXNjKCdcdTYyNTNcdTVGMDBcdTg5QzZcdTU2RkVcdTY1RjZcdTc2ODRcdTUyMURcdTU5Q0JcdTYzOTJcdTVFOEZcdTY1QjlcdTVGMEYnKVxyXG5cdFx0XHQuYWRkRHJvcGRvd24oZHJvcCA9PiB7XHJcblx0XHRcdFx0ZHJvcC5hZGRPcHRpb24oJ25vbmUnLCAnXHU2NTg3XHU2NzJDXHU5ODdBXHU1RThGJyk7XHJcblx0XHRcdFx0ZHJvcC5hZGRPcHRpb24oJ2RhaWx5RGVzYycsICdcdTY1RTVcdTU3NDdcdTRFRjdcdTY4M0MnKTtcclxuXHRcdFx0XHRkcm9wLmFkZE9wdGlvbigncHJpY2VEZXNjJywgJ1x1NEVGN1x1NjgzQycpO1xyXG5cdFx0XHRcdGRyb3AuYWRkT3B0aW9uKCdkYXRlRGVzYycsICdcdThEMkRcdTUxNjVcdTY1RTVcdTY3MUYnKTtcclxuXHRcdFx0XHRkcm9wLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRTb3J0IHx8ICdub25lJyk7XHJcblx0XHRcdFx0ZHJvcC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdGNvbnN0IHYgPSAodmFsdWUgYXMgYW55KSBhcyAnbm9uZScgfCAnZGFpbHlEZXNjJyB8ICdwcmljZURlc2MnIHwgJ2RhdGVEZXNjJztcclxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRTb3J0ID0gdjtcclxuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ1x1OUVEOFx1OEJBNFx1NTZGRVx1NjgwNycpXHJcblx0XHRcdC5zZXREZXNjKCdcdTY1QjBcdThENDRcdTRFQTdcdTc2ODRcdTlFRDhcdThCQTRcdTU2RkVcdTY4MDdcdUZGMENcdTRFQzVcdTY1MkZcdTYzMDEgMSBcdTRFMkEgRW1vamknKVxyXG5cdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHtcclxuXHRcdFx0XHRjb25zdCBzYW5pdGl6ZVRvRmlyc3RFbW9qaSA9IChpbnB1dDogc3RyaW5nKTogc3RyaW5nID0+IHtcclxuXHRcdFx0XHRcdGNvbnN0IG0gPSAoaW5wdXQgfHwgJycpLm1hdGNoKC9bXFx1RDgwMC1cXHVEQkZGXVtcXHVEQzAwLVxcdURGRkZdLyk7XHJcblx0XHRcdFx0XHRyZXR1cm4gbSA/IG1bMF0gOiAnJztcclxuXHRcdFx0XHR9O1xyXG5cdFx0XHRcdHRleHRcclxuXHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignXHVEODNEXHVEQ0U2JylcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0SWNvbilcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0Y29uc3QgZmlyc3QgPSBzYW5pdGl6ZVRvRmlyc3RFbW9qaSh2YWx1ZSk7XHJcblx0XHRcdFx0XHRcdGlmICgodGV4dCBhcyBhbnkpLmlucHV0RWwgJiYgKHRleHQgYXMgYW55KS5pbnB1dEVsLnZhbHVlICE9PSBmaXJzdCkge1xyXG5cdFx0XHRcdFx0XHRcdCh0ZXh0IGFzIGFueSkuaW5wdXRFbC52YWx1ZSA9IGZpcnN0O1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRJY29uID0gZmlyc3Q7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0Y29uc3QgaW5wdXRFbCA9ICh0ZXh0IGFzIGFueSkuaW5wdXRFbCBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG5cdFx0XHRcdGlmIChpbnB1dEVsKSB7XHJcblx0XHRcdFx0XHRpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ3Bhc3RlJywgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBmaXJzdCA9IHNhbml0aXplVG9GaXJzdEVtb2ppKGlucHV0RWwudmFsdWUgfHwgJycpO1xyXG5cdFx0XHRcdFx0XHRcdGlmIChpbnB1dEVsLnZhbHVlICE9PSBmaXJzdCkgaW5wdXRFbC52YWx1ZSA9IGZpcnN0O1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRJY29uID0gZmlyc3Q7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdH0sIDApO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHR9XHJcbn1cclxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBQUFBLG1CQUEyQzs7O0FDU3BDLElBQU0sbUJBQXVDO0FBQUEsRUFDaEQsYUFBYTtBQUFBLEVBQ2IsV0FBVztBQUFBLEVBQ1gsbUJBQW1CO0FBQUEsRUFDbkIsYUFBYTtBQUNqQjs7O0FDZEEsc0JBQTJCOzs7QUNDcEIsSUFBTSxRQUFOLE1BQVk7QUFBQSxFQVdsQixZQUFZLGFBQTJCLFVBQWdCO0FBWnhEO0FBYUUsUUFBSSxPQUFPLGdCQUFnQixZQUFZLFVBQVU7QUFF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O0FBQUEsVUFDN0IsUUFBUTtBQUFBLFFBQ1QsQ0FBQztBQUNELGFBQUssSUFBSSxVQUFVLFdBQVcsSUFBSTtBQUFBLE1BQ25DO0FBQUEsSUFDRCxDQUFDO0FBSUQsU0FBSyxjQUFjLElBQUkscUJBQXFCLEtBQUssS0FBSyxJQUFJLENBQUM7QUFHM0QsU0FBSyxpQkFBaUIsRUFBRSxRQUFRLGFBQWE7QUFBQSxFQUM5QztBQUFBLEVBRUEsV0FBVztBQUFBLEVBRVg7QUFBQSxFQUVBLE1BQU0sZUFBZTtBQUNwQixTQUFLLFdBQVcsT0FBTyxPQUFPLENBQUMsR0FBRyxrQkFBa0IsTUFBTSxLQUFLLFNBQVMsQ0FBQztBQUFBLEVBQzFFO0FBQUEsRUFFQSxNQUFNLGVBQWU7QUFDcEIsVUFBTSxLQUFLLFNBQVMsS0FBSyxRQUFRO0FBQUEsRUFDbEM7QUFDRDsiLAogICJuYW1lcyI6IFsiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJfYSIsICJfYiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiY2FsY0RhdGUiLCAiYWN0aXZlQXNzZXRzIiwgImZpbHRlcmVkQWN0aXZlQXNzZXRzIiwgInRvdGFsQ29zdCIsICJ0b3RhbFJlY3ljbGUiLCAidG90YWxEYWlseUNvc3QiLCAiY29udGFpbmVyRWwiLCAiaW1wb3J0X29ic2lkaWFuIl0KfQo=
